Artificial Intelligence 172 (2008) 1158–1193www.elsevier.com/locate/artintTemporal reasoning about fuzzy intervalsSteven Schockaert ∗,1, Martine De CockGhent University, Department of Applied Mathematics and Computer Science, Krijgslaan 281-S9, 9000 Gent, BelgiumReceived 7 July 2007; received in revised form 14 December 2007; accepted 4 January 2008Available online 11 January 2008AbstractTraditional approaches to temporal reasoning assume that time periods and time spans of events can be accurately represented asintervals. Real-world time periods and events, on the other hand, are often characterized by vague temporal boundaries, requiringappropriate generalizations of existing formalisms. This paper presents a framework for reasoning about qualitative and metrictemporal relations between vague time periods. In particular, we show how several interesting problems, like consistency andentailment checking, can be reduced to reasoning tasks in existing temporal reasoning frameworks. We furthermore demonstratethat all reasoning tasks of interest are NP-complete, which reveals that adding vagueness to temporal reasoning does not increaseits computational complexity. To support efficient reasoning, a large tractable subfragment is identified, among others, generalizingthe well-known ORD Horn subfragment of the Interval Algebra (extended with metric constraints).© 2008 Elsevier B.V. All rights reserved.Keywords: Temporal reasoning; Interval algebra; Fuzzy set theory1. IntroductionTime plays a key role in many application domains, ranging from scheduling and planning [2,17,19] to naturallanguage understanding [29,34], multi-document summarization [6], question answering [22,32,39] and dynamic mul-timedia presentation [3,10,18]. Starting from Allen’s seminal work on qualitative interval relations (e.g., A happenedduring B, A overlaps with B; [1]), increasingly more expressive formalisms have been proposed to reason abouttime, among others allowing to specify metric constraints between two time points (e.g., p happened 4 time unitsbefore q; [12]), to combine qualitative and metric information [25,31], to specify constraints on the (relative) durationof events [35], and to specify arbitrary disjunctions of temporal constraints [23,27]. Most reasoning tasks of interest inthese formalisms are NP-complete. To cope with this, a lot of research efforts have been directed towards identifyingsubfragments of the various calculi in which reasoning becomes tractable [13,14,28,37], as well as towards derivingefficient solution strategies for NP-complete reasoning problems [8,36,45,46].Research, however, has largely focused on reasoning about time periods, and time spans of events, which canbe accurately represented as an interval. In contrast, many real-world events and time periods are characterized by* Corresponding author.E-mail addresses: steven.schockaert@ugent.be (S. Schockaert), martine.decock@ugent.be (M. De Cock).1 Research Assistant of the Research Foundation—Flanders.0004-3702/$ – see front matter © 2008 Elsevier B.V. All rights reserved.doi:10.1016/j.artint.2008.01.001S. Schockaert, M. De Cock / Artificial Intelligence 172 (2008) 1158–11931159Fig. 1. Fuzzy sets defining the vague time span of Picasso’s Blue, Rose, and Cubist periods.an inherently gradual or ill-defined beginning and ending. Typical examples are large-scale historical events like theRussian Revolution, the Great Depression, the Second World War, the Cold War, and the Dotcom Bubble, or historicaltime periods like the Middle Ages, the Renaissance, the Age of Enlightenment, and the Industrial Revolution, but alsosmall-scale events like sleeping and being born. Moreover, in natural language, vague temporal markers are frequentlyfound to convey underspecified temporal information: early summer, during his childhood, in the evening, etc. Notethat the vagueness of these events and time periods is fundamentally different from the uncertainty that exists amonghistoricians about, for example, the time period during which the Mona Lisa was painted.A formal definition of the notion of an event is difficult to provide. Clearly, an event is something that happens ata particular time and a particular place (e.g., World War II); it can have parts (e.g., the Battle of the Bulge), it canbelong to a certain category (e.g., Military Conflict) and it can have consequences (e.g., the Cold War) [47]. We will,however, abstract away from any particular formalization of events, and focus on their temporal dimension only. Assuch, we will conceptually make no difference between time periods and events. Vague time periods are naturallyrepresented as fuzzy sets [48]. A vague time period is then represented as a mapping A from the real line R to the unitinterval [0, 1]. For a time instant t (t ∈ R), A(t) expresses to what extent t belongs to the time period A. When A isa crisp time period, for all t in R, A(t) is either 0 (perfect non-membership) or 1 (perfect membership). When A is avague time period, on the other hand, A will typically be gradually increasing over an interval [t1, t2] and graduallydecreasing over an interval [t3, t4], where A(t) = 1 for t in [t2, t3] and A(t) = 0 for t < t1 and t > t4. As an example,consider Picasso’s Blue, Rose and Cubist periods. Regarding the definition of the Rose period, for example, we find2So 1904 is a transitional year and belongs neither truly to the blue period, nor to the rose period.Similarly, the ending of the Rose period, as well as the beginning and ending of the Cubist period are inherentlygradual. Fig. 1 depicts a possible definition of Picasso’s Rose period, as well as the ending of his Blue period and thebeginning of his Cubist period. These definitions reflect the gradual transition to the Rose period during 1904, as wellas Picasso’s experiments with new styles from 1906 and especially from 1907, eventually leading to his Cubist period.Clearly, the definition of a fuzzy set representing a vague time period is to some extent subjective. In fact, there is noreal reason why January 1, 1907 should belong to the Rose period to degree 0.8 and not to degree 0.75 or 0.85. Whatis most important is the qualitative ordering the membership degrees impose, e.g., June 1, 1907 is more compatiblewith the Rose period than the Cubist period; March 15, 1904 is less compatible with the Rose period than June 1,1907, etc.Applications based on classical temporal reasoning algorithms, like temporal question answering or multi-document summarization, fail to work correctly when the events or time periods involved are vague. For example,when extracting information about the life and work of Picasso from web documents, inconsistencies quickly arise:(1) Bread and Fruit Dish on a Table (1909) marks the beginning of Picasso’s “Analytical” Cubism . . . 32 http://pablo-picasso.paintings.name/rose-period/, accessed May 21, 2007.3 http://www.abcgallery.com/P/picasso/picassobio.html, accessed May 21, 2007.1160S. Schockaert, M. De Cock / Artificial Intelligence 172 (2008) 1158–1193(2) The first stage of Picasso’s cubism is known as analytical cubism. It began in 1908 and ended in 1912, . . . 4(3) The ‘Demoiselles d’Avignon’ of 1907 mark the beginning of his [Picasso’s] Cubist period in which he exceededthe classical form.5The solution to this problem is not to discard the least reliable sources until the resulting knowledge base is consistent,but to acknowledge that some of the temporal relations expressed in the sentences above are only true to some extent:the beginning of Picasso’s Analytical Cubism coincides with the beginning of cubism to some degree λ1, Picasso’sCubist period began with “Demoiselles d’Avignon” in 1907 to some degree λ2, Picasso’s Analytical Cubism began in1908 to some degree λ3, Picasso’s Analytical Cubism began with “Bread and Fruit Dish on a Table” in 1909 to somedegree λ4. The aim of this paper is to derive algorithms for reasoning about such fuzzy temporal information, e.g.,which values of λ1, λ2, λ3, λ4 result in a consistent interpretation of the sentences above? What conclusions can weestablish given a consistent set of (fuzzy) assertions about (vague) time periods? Our primary objective is to obtain atemporal reasoning framework that is, among others, suitable for natural language applications like multi-documentsummarization or question answering when some of the time periods and events involved are vague.The structure of this paper is as follows. In the next section, we review related work on fuzzy temporal informationprocessing, while Section 3 familiarizes the reader with some important preliminaries from fuzzy set theory andtemporal reasoning. In Section 4, we introduce our framework for representing fuzzy temporal information. Next, inSection 5, we introduce an algorithm to check the consistency of a set of assertions about fuzzy time periods. Thecomputational complexity of this problem is investigated in Section 6. Section 7 discusses how new information canbe derived from given information. Finally, Section 8 presents some concluding remarks and directions for futurework.2. Related workAlthough processing fuzzy temporal information is well studied in literature, research has tended to focus on mod-elling vague temporal information about crisp events (e.g., Picasso died in the early 1970s), rather than on modellingtemporal information about vague events. For example, in [16] possibility theory is employed to represent vague dates(e.g., early summer), and vague temporal constraints (e.g., A happened about three months before B). The underlyingassumption is that all events have crisp, albeit unknown, temporal boundaries; only our knowledge about these crispboundaries is vague. Based on this possibilistic approach, [5] introduced the notion of a fuzzy temporal constraintnetwork. In this framework, temporal information is represented as fuzzy temporal constraints, i.e., fuzzy restric-tions on the possible distances between time points. Sound and complete reasoning procedures were provided in [30].A generalization in which disjunctions of fuzzy temporal constraints can be expressed has been introduced in [8].A different line of research has focused on fuzzy extensions of classical calculi for temporal reasoning to encodepreferences. For example, [26] discusses a generalization of Temporal Constraint Satisfaction Problems (TCSP) inwhich a preference value is attached to each temporal constraint. When a given TCSP is inconsistent, the preferencevalues are used to determine which constraints should be ignored. Similarly, [4] introduces the framework IAfuz inwhich preference values are attached to atomic Allen relations. A relation in IAfuz can thus be regarded as a fuzzy setof atomic Allen relations. Interestingly, all main reasoning tasks are shown to be NP-complete and a maximal tractablesubfragment is identified. Fuzzy sets of atomic Allen relations have also been considered in [21], where the adequatemodelling of temporal expressions in natural language was the main motivation, rather than encoding preferences.The need for formalisms dealing with vague events and time periods has been pointed out in various contexts,including semantic web reasoning [9], historical databases and ontologies [33], document retrieval [24], and temporalquestion answering [40]. Nevertheless, none of the approaches mentioned above is suitable to represent temporalinformation about events whose boundaries are inherently gradual or ill-defined. Inspired by measures for comparingand ranking fuzzy numbers [7,15], some definitions of fuzzy temporal relations between vague events have alreadybeen proposed [33,38,42]. A key problem in generalizing temporal relations to cope with fuzzy time spans is thattraditionally, temporal relations have been defined as constraints on boundary points of intervals. Because such well-4 http://www.pokemonultimate.wanadoo.co.uk/picasso.html, accessed May 21, 2007.5 http://www.kettererkunst.com/details-e.php?obnr=410702527&anummer=315, accessed May 21, 2007.S. Schockaert, M. De Cock / Artificial Intelligence 172 (2008) 1158–11931161defined boundary points are absent in fuzzy time intervals, alternative ways of looking at temporal relations arerequired.Nagypál and Motik [33] start from the observation that several sets of time points can be associated with eachinterval A = [a−, a+], viz. the semi-intervals A<− = ] − ∞, a−[, A(cid:2)− = ] − ∞, a−], A<+ = ] − ∞, a+[, A(cid:2)+ =] − ∞, a+], A>− = ]a−, +∞[, A(cid:3)− = [a−, +∞[, A>+ = ]a+, +∞[ and A(cid:3)+ = [a+, +∞[. Qualitative constraintson the boundary points of two intervals A = [a−, a+] and B = [b−, b+] can be translated into set operations on thecorresponding semi-intervals. For example, m(A, B) holds iff a+ = b−, which can be expressed as A>+ ∩ B<− =∅ ∧ A<+ ∩ B>− = ∅. To define qualitative temporal relations between fuzzy time spans, Nagypál and Motik defineA<−, A(cid:2)−, A<+, A(cid:2)+, A>−, A(cid:3)−, A>+, A(cid:3)+ for a fuzzy set A as:A>−(p) = supq<pA(q)(cid:3)−A(p) = supq(cid:2)pA(q)A<+(p) = supq>pA(q)(cid:2)+A(p) = supq(cid:3)pA(q)(cid:2)−(p) = 1 − A>−(p)AA<−(p) = 1 − A(cid:3)−(p)(cid:3)+(p) = 1 − A<+(p)AA>+(p) = 1 − A(cid:2)+(p)The degree to which m(A, B) is satisfied, for instance, is then defined as(cid:2)1 − supm(A, B) = minp∈R(cid:2)A>+min(p), B<−(cid:3)(p), 1 − supp∈R(cid:2)A<+min(p), B>−(cid:3)(cid:3)(p)(cid:2)= mininfp∈R(cid:2)= mininfp∈R(cid:2)1 − A>+max(p), 1 − B<−(cid:2)1 − A<+max(p), 1 − B>−(cid:3)(cid:3)(p)(cid:2)Amax(cid:2)+(p), B(cid:3)−(cid:3)(p)(cid:3)+(cid:2)−(p), B(cid:3)(cid:3)(p)(cid:3), inf(p)p∈R(cid:2)Amax, infp∈RAlthough this approach has a certain appeal, the resulting fuzzy temporal relations do not always behave intuitively.For example, for crisp intervals the equals relation is reflexive, while starts, finishes and during are irreflexive. Takinginto account this intended meaning, we would expect that for fuzzy time spans e(A, A) = 1 and s(A, A) = f (A, A) =d(A, A) = 0, or at least, that e(A, A) > max(s(A, A), f (A, A), d(A, A)). However, using the definitions proposedby Nagypál and Motik, if A is a continuous fuzzy set, it holds that e(A, A) = s(A, A) = f (A, A) = d(A, A) = 0.5.The reason for this anomaly lies in the definition of the fuzzy sets A<−, A(cid:2)−, . . . , A(cid:3)+. While these definitions docorrespond to their intended meaning when A is a crisp interval, for a continuous fuzzy set A, we have the undesirableproperty that A>− = A(cid:3)−, A<− = A(cid:2)−, A>+ = A(cid:3)+ and A<+ = A(cid:2)+.In [38], a fundamentally different approach to modelling temporal relations between fuzzy time spans is taken. Thestarting point is that even for crisp intervals A and B, relations like before can hold to some degree. For example,if A = [0, 50] and B = [45, 100], we may intuitively think of A as being before B, instead of overlapping with B,because most of A is before the beginning of B. In [38], the degree to which b(A, B) holds is therefore definedbased on which fraction of A is before the beginning of B, where A and B may be crisp or fuzzy time spans. Whentemporal relations are defined in this way, we (deliberately) lose the original meaning of Allen’s relations. Althoughsuch definitions may definitely be useful in many domains (e.g., querying temporal databases), they are not suitableas a basis for fuzzy temporal reasoning.To the best of our knowledge, however, the issue of temporal reasoning about fuzzy time intervals has only beenaddressed in [40], where a sound but incomplete algorithm is introduced to find consequences of a given, restrictedset of assertions. Finally, note that this paper is an extended and generalized version of [43]. In addition to providing amore detailed discussion, as well as proofs of all results, we generalize the results from [43], where a purely qualitativeapproach was adopted, by also considering metric constraints.1162S. Schockaert, M. De Cock / Artificial Intelligence 172 (2008) 1158–11933. Preliminaries3.1. Fuzzy temporal relationsA fuzzy set [48] in a universe U is defined as a mapping A from U to [0, 1], representing a vague concept. For u inU , A(u) expresses the degree to which u is compatible with the concept A and is called the membership degree of uin A. In particular, we will use fuzzy sets in R to represent time spans of vague events. For clarity, traditional sets aresometimes called crisp sets in the context of fuzzy set theory. If A and B are fuzzy sets in the same universe U , A iscalled a fuzzy subset of B, written A ⊆ B, iff A(u) (cid:2) B(u) for all u in U .For every α in ]0, 1], we let Aα denote the crisp subset of U defined by(cid:4)u | u ∈ U ∧ A(u) (cid:3) α(cid:5)Aα =Aα is called the α-level set of the fuzzy set A. In particular, A1 is the set of elements from U that are fully compatiblewith the vague concept modelled by A. If A1 (cid:9)= ∅, the fuzzy set A is called normalized and elements from A1 arecalled modal values of A. The support supp(A) of A is the (crisp) set of elements from U which belong to A to astrictly positive degree:supp(A) =(cid:4)u | u ∈ U ∧ A(u) > 0(cid:5)A fuzzy set A in R is called convex if for every α in ]0, 1], the set Aα is convex (i.e., a singleton or an interval).To adequately generalize the notion of a time interval, a closed and bounded interval of real numbers, some naturalrestrictions on the α-level sets are typically imposed.Definition 1 (Fuzzy time interval). (See [42].) A fuzzy (time) interval is a normalized fuzzy set in R with a boundedsupport, such that for every α in ]0, 1], Aα is a closed interval.For example, the fuzzy sets corresponding to Picasso’s Blue, Rose and Cubist period from Fig. 1 are fuzzy timeintervals. The condition that all α-level sets of a fuzzy time span be intervals implies that any fuzzy time interval isa convex fuzzy set in R. Hence, fuzzy time intervals always consist of a monotonically increasing part, followed bya monotonically decreasing part. As a consequence, the fuzzy set depicted in Fig. 2(a) is a fuzzy time span, whereasthe fuzzy set from 2(b) is not, because of the decreasing part between a and b. By furthermore requiring that α-levelsets be closed sets, we restrict the kind of discontinuities allowed. For example, the fuzzy set from Fig. 2(d) is not afuzzy time interval, since its 0.4- and 0.7-level sets are half open intervals. On the other hand, the fuzzy set shown inFig. 2(c) is a fuzzy time interval. It can be shown that a bounded fuzzy set of real numbers is a fuzzy time interval iffit is convex and upper semi-continuous. For a fuzzy interval A and α ∈ ]0, 1], we let A−α denote the beginningand ending of the interval Aα.α and A+When the time spans of events are vague, also the temporal relations between them are a matter of degree. Tradi-tionally, temporal relations between time intervals have been defined by means of constraints on the boundary pointsof these intervals. Due to the gradual nature of fuzzy time spans, a different, more general approach has to be adoptedhere. The definitions of our fuzzy temporal relations are inspired by the fact that temporal relations between time inter-vals can alternatively be specified using first-order expressions that do not involve any boundary points. For example,for crisp intervals A = [a−, a+] and B = [b−, b+], it is easy to see that (d ∈ R)−a< b(cid:2)− − d ⇔ (∃p)(cid:3)p ∈ A ∧ (∀q)(q ∈ B ⇒ p < q − d)(1)To define the degree to which the beginning of a fuzzy time interval A is more than d time units before the beginning(cid:14)of B, written bbd (A, B), we generalize the right-hand side of (1) using fuzzy logic connectives. In fuzzy logic,elements from the unit interval [0, 1] represent truth degrees. To generalize logical conjunction to fuzzy logic, a wideclass of [0, 1]2 − [0, 1] mappings, called t-norms, can be used. The only requirements are that the mapping T beingused is symmetric, associative, increasing, and satisfies the boundary condition T (x, 1) = x for all x in [0, 1]. Logicalimplication can be generalized using the residual implicator IT of a t-norm T , i.e. the [0, 1]2 − [0, 1] mapping definedfor x and y in [0, 1] as(cid:4)IT (x, y) = supλ | λ ∈ [0, 1] ∧ T (x, λ) (cid:2) y(cid:5)S. Schockaert, M. De Cock / Artificial Intelligence 172 (2008) 1158–11931163Fig. 2. The fuzzy sets of real numbers displayed in (a) and (c) are fuzzy time spans, whereas those in (b) and (d) are not.Table 1Commonly used t-norms and their residual implicatorst-normTM (x, y) = min(x, y)TP (x, y) = x · yTW (x, y) = max(0, x + y − 1)Residual implicatorITM (x, y) =(cid:6)(cid:6)1yif x (cid:2) yotherwiseif x (cid:2) yotherwiseITP (x, y) =1yxITW (x, y) = min(1, 1 − x + y)Some commonly used t-norms are the minimum TM , the product TP and the Łukasiewicz t-norm TW . Their definitionsand the corresponding residual implicators are displayed in Table 1. Universal and existential quantification can begeneralized using the infimum and supremum respectively.This leads to the following definition [42]:bb(cid:14)d (A, B) = supp∈RT(cid:2)A(p), infq∈R(cid:2)B(q), LIT(cid:3)(cid:3)(cid:14)d (p, q)(2)(cid:14)d (p, q) = 1 iff p < q − d and L(cid:14)d (A, B)where L(cid:14)d (A, B) to which the beginning ofto which the end of A is more than d time units before the end of B, the degree beA is more than d time units before the end of B and the degree eb(cid:14)(A, B) to which the end of A is more than d timeunits before the beginning of B as [42]:(cid:14)d (x, y) = 0 otherwise. In the same way, we can define the degree ee(cid:2)B(q), infp∈R(cid:2)A(p), LIT(cid:2)B(q), LTTTeebeeb(cid:14)d (A, B) = supq∈R(cid:14)d (A, B) = supp∈R(cid:14)d (A, B) = infp∈RIT(cid:2)A(p), supq∈R(cid:2)A(p), infq∈R(cid:3)(cid:3)(cid:14)d (p, q)(cid:3)(cid:3)(cid:14)d (p, q)(cid:2)B(q), LIT(cid:3)(cid:3)(cid:14)d (p, q)(3)(4)(5)1164S. Schockaert, M. De Cock / Artificial Intelligence 172 (2008) 1158–1193Table 2Characterization of the fuzzy temporal relations when A and B correspond to crisp intervals [a−, a+] and [b−, b+]bbFuzzy(cid:14)d (A, B)(cid:14)d (A, B)(cid:14)d (A, B)(cid:14)d (A, B)ebbeeeCrispa− < b− − da+ < b+ − da− < b+ − da+ < b− − dbbFuzzy(cid:4)d (A, B)(cid:4)d (A, B)(cid:4)d (A, B)(cid:4)d (A, B)ebbeeeCrispa− (cid:2) b− + da+ (cid:2) b+ + da− (cid:2) b+ + da+ (cid:2) b− + dFig. 3. Since the definition of the fuzzy time intervals B and C are similar, it is desirable that |bb(cid:14)(A, B) − bb(cid:14)(A, C)| is small.Finally, the degree bbby(cid:4)d (A, B) to which the beginning of A is at most d time units after the beginning of B is definedbb(cid:4)d (A, B) = 1 − bbIn the same way, we define ee(cid:14)d (B, A)(cid:4)d (A, B), beeebeeb(cid:4)d (A, B) = 1 − ee(cid:4)d (A, B) = 1 − eb(cid:4)d (A, B) = 1 − be(cid:14)d (B, A)(cid:14)d (B, A)(cid:14)d (B, A)(cid:4)d (A, B) and eb(cid:4)d (A, B) as(6)(7)(8)(9)= bb(cid:14)). In this case, (2)–(9) expressFor convenience, we will sometimes omit the subscript when d = 0 (e.g., bbqualitative relations between fuzzy time intervals; e.g., ee(cid:14)(A, B) is the degree to which the end of A is strictlybefore the end of B, eb(cid:4)(A, B) is the degree to which the end of A is before or equal to the beginning of B. Notethat it is the vagueness of the events that gives rise to the vagueness of the temporal relations. If A and B correspondto crisp intervals [a−, a+] and [b−, b+], the fuzzy temporal relations reduce to classical temporal constraints. This isillustrated in Table 2.(cid:14)0There are several reasons why using the Łukasiewicz t-norm TW in the definitions (2)–(5) is advantageous overusing, for example, TM or TP . First, it is desirable that small changes in the definitions of the fuzzy time intervals A(cid:14)and B result in small changes of the values of bbd (A, B). This is particularlytrue in applications where fuzzy time intervals are constructed automatically from, for example, web documents, asin such applications, small variations in membership degrees may be due to noise (e.g., incorrect information on webpages, errors introduced by the information extraction technique that is used, etc.). Consider the fuzzy time intervals A,B and C depicted in Fig. 3. Because B and C are very similar, we would like to have that the value of bb(cid:14)(A, B)is close to the value of bb(cid:14)(A, C). Irrespective of the t-norm T being used, it holds that bb(cid:14)(A, B) = 1, i.e., thebeginning of A is strictly before the beginning of B to degree 1. When using TM , however, we have that(cid:14)d (A, B) and eb(cid:14)d (A, B), be(cid:14)d (A, B), ee(cid:14)bb(A, C) = supp∈R(cid:2) supp∈RTMTM(cid:2)A(p), infq∈R(cid:2)A(p), ITM(cid:2)C(q), LITM(cid:2)C(c1), L(cid:14)(cid:3)(cid:3)(p, q)(cid:3)(cid:3)(cid:14)(p, c1)S. Schockaert, M. De Cock / Artificial Intelligence 172 (2008) 1158–11931165Fig. 4. The generalized transitivity rule (11) may be violated when TM or TP is used.where c1 is defined as in Fig. 3. As for each p in R either A(p) = 0 or L(cid:14)(p, c1) = 0, we establish thatbb(cid:14)(A, C) = 0. In the same way, we can show that bb(cid:14)(A, C) = 0 when using TP . On the other hand, when T = TW ,we can show that(cid:2)A(p), infq∈R(cid:2)C(c1), LITW(cid:2)C(q), L(cid:14)(cid:3)(cid:3)(p, q)(cid:3)(cid:3)(cid:14)(a2, c1)(cid:14)bb(A, C) = supTWp∈R(cid:2)= TWA(a2), ITW= ITW (0.1, 0)= 0.9Another advantage of the Łukasiewicz t-norm is related to transitivity. To ensure that the fuzzy temporal relations(2)–(9) display an intuitive behaviour, it is desirable that they satisfy generalized transitivity rules like(cid:2)bb(cid:2)bbTT(cid:14)(A, B), bb(cid:14)(cid:4)(A, B), bb(cid:4)(cid:3)(B, C)(cid:3)(B, C)(cid:14)(cid:2) bb(cid:4)(cid:2) bb(A, C)(A, C)(10)(11)expressing that the degree to which the beginning of A is (strictly) before the beginning of C is at least as high as thedegree to which both the beginning of A is (strictly) before the beginning of B and the beginning of B is (strictly)before the beginning of C. While it is possible to show that (10) holds for any left-continuous t-norm (i.e., a t-normwhose partial mappings are left-continuous, such as TM , TP and TW ), (11) may be violated when TM or TP is used.For example, let A, B and C be defined as in Fig. 4. Regardless of whether T is TM , TP or TW , it holds that(cid:14)(cid:14)bbbb(A, B) = bb(A, C) = 1(cid:14)(B, C) = 0.5This impliesTM(cid:4)(cid:2)bb(C, B), bb(cid:2)(cid:14)1 − bb= min= 0.5(cid:4)> bb(C, A) = 0(cid:4)(cid:3)(B, A)(B, C), 1 − bb(cid:14)(cid:3)(A, B)violating (11). In the same way, we find(cid:2)bbTP(cid:4)(C, B), bb(cid:4)(cid:3)(B, A)= 0.25 > bb(cid:4)(C, A) = 0As shown in [41], all generalized transitivity rules of interest are satisfied when the Łukasiewicz t-norm is used.(cid:4)(cid:4)d , beAlthough we can use alternative definitions for bbd for which the generalized transitivity rules are(cid:4)satisfied for any left-continuous t-norm, we would then lose the important property that bbd (B, A),(cid:4)d (B, A), etc. We refer to [41] for more details. Henceforth, we will always assume that T = TW .eeFor convenience, we will write IW instead of ITW .(cid:14)d (A, B) = 1 − bb(cid:14)d (A, B) = 1 − ee(cid:4)d and eb(cid:4)d , eeFinally, we show two characterizations which will be useful for solving the satisfiability problem in Section 5.1166S. Schockaert, M. De Cock / Artificial Intelligence 172 (2008) 1158–1193Lemma 1. It holds that(cid:3)(cid:2)(cid:2)(cid:14)d (A, B) (cid:3) l ⇔∀ε ∈ ]0, l](cid:2)(cid:14)∀λ ∈ ]k, 1]d (A, B) (cid:2) k ⇔(cid:3)(cid:2)(cid:2)(cid:14)∀ε ∈ ]0, l]d (A, B) (cid:3) l ⇔(cid:2)(cid:14)∀λ ∈ ]k, 1]d (A, B) (cid:2) k ⇔(cid:3)(cid:2)(cid:2)(cid:14)∀ε ∈ ]0, l[d (A, B) (cid:3) l ⇔(cid:2)(cid:14)∀ε ∈ ]0, 1 − k[d (A, B) (cid:2) k ⇔(cid:2)(cid:14)∀ε ∈ ]0, l]d (A, B) (cid:3) l ⇔(cid:2)(cid:14)∃λ ∈ [1 − k, 1]d (A, B) (cid:2) k ⇔(cid:3)(cid:2)bbbbeeeebebeebeb(cid:3)(cid:2)(cid:3)(cid:14)d (Aλ, Bλ+ε−l)(cid:3)(cid:14)d (Aλ+ε−l, Bλ)∃λ ∈ ]l − ε, 1](cid:3)(cid:2)bb∃λ ∈ ]l − ε, 1](cid:3)(cid:2)bb(cid:3)(cid:4)d (Bλ−k, Aλ)(cid:3)(cid:2)ee(cid:3)(cid:4)d (Bλ, Aλ−k)(cid:3)(cid:2)ee∃λ ∈ [l − ε, 1](cid:3)(cid:2)(cid:3)(cid:14)d (Aλ, B1−λ−ε+l)(cid:3)(cid:2)be(cid:3)(cid:4)∀λ ∈ [k + ε, 1]ebd (B1−λ+ε+k, Aλ)(cid:3)(cid:2)(cid:3)(cid:14)∀λ ∈ [1 − l + ε, 1]d (A1−λ+ε+1−l, Bλ)(cid:3)(cid:4)d (Bλ, A2−λ−k)beeb(cid:3)(cid:2)(12)(13)(14)(15)(16)(17)(18)(19)Proof. See Appendix A.1. (cid:2)Lemma 2. Let A and B be normalized and convex fuzzy sets in R. Furthermore, let ma and mb be arbitrary modalvalues of A and B respectively. It holds thatbb(cid:14)d (A, B) =ee(cid:14)d (A, B) =supp+d<mb,p(cid:2)maTWsupp−d>ma,p(cid:3)mbTW(cid:3)(cid:2)A(p), 1 − B(p + d)(cid:3)(cid:2)B(p), 1 − A(p − d)Proof. See Appendix A.2. (cid:2)3.2. Linear constraints(20)(21)An atomic linear constraint over a set of variables X is an expression of the form a1x1 +a2x2 +· · ·+anxn (cid:4) b wherea1, a2, . . . , an, b ∈ R, x1, x2, . . . , xn ∈ X, and (cid:4) is <, (cid:2), >, (cid:3), = or (cid:9)=. If φ1, φ2, . . . , φm are atomic linear constraintsover X, φ1 ∨ φ2 ∨ · · · ∨ φm is called a linear constraint over X. If m > 1, the linear constraint is called disjunctive.Furthermore, φ1 ∨ φ2 ∨ · · · ∨ φm is called a Horn linear constraint if at least m − 1 of the disjuncts φi correspond to (cid:9)=.In particular, all atomic linear constraints are Horn, as well as, for example, 3x +4y (cid:2) 6∨x (cid:9)= 8∨y (cid:9)= 7∨x +3y (cid:9)= 12.On the other hand, a linear constraint like 3x + 4y (cid:2) 6 ∨ x (cid:3) 8 is not Horn.The framework of linear constraints subsumes most other frameworks for temporal reasoning, including the IntervalAlgebra [1] and Temporal Constraint Networks [12], but also, for example, approaches combining qualitative andquantitative information [31] or expressing constraints on the duration of events [35].+ a2xI2A P-interpretation I over X is a mapping that maps every variable x from X to a real number. For convenience,I(x) will also we written as xI . An atomic linear constraint a1x1 + a2x2 + · · · + anxn (cid:4) b is satisfied by I iffa1xI(cid:4) b. A disjunctive linear constraint φ1 ∨ φ2 ∨ · · · ∨ φm is satisfied by I iff I satisfies at1least one of the disjuncts φ1, φ2, . . . , φm. Let Ψ be a set of linear constraints; I is called a P-model of Ψ iff I satisfiesevery linear constraint in Ψ . If a P-model of Ψ exists, Ψ is called P-satisfiable. It has been shown independentlyin [23] and [27] that checking the P-satisfiability of a set of Horn linear constraints can be done in polynomial time.+ · · · + anxIn4. Temporal relations between vague events(cid:14)d (A, B), bbFor A and B fuzzy time intervals, bb(cid:14)d (A, B) and eb(cid:4)d (A, B),(cid:4)d (A, B) take values from [0, 1] (d ∈ R). The reasoning tasks discussed in this paper are basedebon upper and lower bounds for these values when the definitions of the fuzzy time intervals A and B are unknown.(cid:14)3 (x, y) (cid:3) 0.6,For example, knowing that x, y, and z are fuzzy time intervals, is it possible that simultaneously bb(cid:14)(cid:14)(cid:14)2 (y, z) (cid:2) 0.8, and ee8 (x, z) (cid:3) 0.3? From the available knowledge, what can be said about the4 (y, z) (cid:2) 0.5, bebb(cid:14)possible values of be9 (x, z)? Throughout the paper, we will assume that all upper and lower bounds are taken from a(cid:4)d (A, B), be(cid:4)d (A, B), ee(cid:14)d (A, B), be(cid:14)d (A, B), eeS. Schockaert, M. De Cock / Artificial Intelligence 172 (2008) 1158–11931167fixed, finite set M = {0, Δ, 2Δ, . . . , 1}, where Δ = 1and M1 for M \ {1}.ρ for some ρ ∈ N \ {0}. For convenience, we write M0 for M \ {0}Definition 2 (Atomic FI-formula). An atomic FI-formula over a set of variables X is an expression of the formr(x, y) (cid:3) l or r(x, y) (cid:2) k, where l ∈ M0, k ∈ M1, (x, y) ∈ X2 and r is bb(cid:14)d , be(cid:14)d or eb(cid:14)d (d ∈ R).(cid:14)d , eeNote that we will not consider atomic FI-formulas like bb(cid:4)d (x, y) (cid:3) l in this paper. Such expressions can beomitted from discussions without loss of generality because of their correspondence to atomic FI-formulas involving(cid:4)d (x, y) (cid:3) l as a notational alternativebbto bb(cid:14)d . In applications, however, it may be convenient to use bb(cid:14)(cid:14)d or ebd , ee(cid:14)d (y, x) (cid:2) 1 − l.(cid:14)d , beDefinition 3 (FI-formula). An FI-formula over a set of variables X is an expression of the formφ1 ∨ φ2 ∨ · · · ∨ φnwhere φ1, φ2, . . . , φn are atomic FI-formulas over X. If n > 1, the FI-formula is called disjunctive.Definition 4 (FI-interpretation). An FI-interpretation over a set of variables X is a mapping that assigns a fuzzyinterval to each variable in X. An FIM -interpretation over X is an FI-interpretation that maps every variable from Xto a fuzzy interval which takes only membership degrees from M.The interpretation I(x) of a variable x, corresponding to an FI-interpretation I, will also be written as xI . An FI-(cid:14)d (xI , yI ) (cid:3) l,d (x, y) (cid:3) l (x, y ∈ X, l ∈ M0, d ∈ R) iff bbinterpretation I over X satisfies the temporal formula bband analogously for other types of atomic FI-formulas. Furthermore, I satisfies φ1 ∨ φ2 ∨ · · · ∨ φn iff I satisfies φ1or I satisfies φ2 or . . . or I satisfies φn.(cid:14)Definition 5 (FI-satisfiable). A set Θ of FI-formulas over a set of variables X is said to be FI-satisfiable (resp.FIM -satisfiable) iff there exists an FI-interpretation (resp. FIM -interpretation) over X which satisfies every FI-formulain Θ. An FI-interpretation (resp. FIM -interpretation) meeting this requirement is called an FI-model (resp. FIM -model)of Θ.5. FI-satisfiabilityOne of the most important temporal reasoning tasks consists of checking whether a given knowledge base isconsistent. Here, this corresponds to checking the FI-satisfiability of a set of FI-formulas Θ. To solve this problem, wewill show how a set Ψ of linear constraints can be constructed which is P-satisfiable iff Θ is FI-satisfiable. In this way,existing, highly optimized reasoners for temporal problems can be reused to reason about vague temporal information.This reduction from FI-satisfiability to P-satisfiability is made possible by virtue of the following proposition, statingthat because the upper and lower bounds in a set of FI-formulas are taken from the set M, as defined above, we canrestrict ourselves to fuzzy intervals that only take membership degrees from M.Proposition 1. Let Θ be a finite set of FI-formulas over X. It holds that Θ is FI-satisfiable iff Θ is FIM -satisfiable.Proof. Clearly, if Θ is FIM -satisfiable then Θ is also FI-satisfiable. Conversely, we show that given an FI-model Iof Θ, it is always possible to construct an FIM -model I∗ of Θ.Let I be an FI-model of Θ, and let the [0, 1] − [0, 1] mappings l and u be defined for y0 in [0, 1] asl(y0) = max{y | y ∈ M ∧ y (cid:2) y0}u(y0) = min{y | y ∈ M ∧ y (cid:3) y0}From the definition of fuzzy time interval (Definition 1), we establish that for each x in X, there exists an mx in Rsuch that xI (mx) = 1. We now define I(cid:16) as a mapping from X to the class of fuzzy sets in R:(cid:6)I(cid:16)x(p) =l(xI (p))u(xI (p))if p (cid:2) mxif p > mx1168S. Schockaert, M. De Cock / Artificial Intelligence 172 (2008) 1158–1193Fig. 5. Relationship between the FI-interpretation I, the mapping I(cid:16)and the FIM -interpretation I∗.for all x in X and p in R. Fig. 5 depicts the relationship between I and I(cid:16). Although for x in X, the fuzzy set xI(cid:16)only takes membership degrees from M, I(cid:16) is not an FIM -interpretation as the α-level sets of xI(cid:16)do not necessarilycorrespond to closed intervals (α ∈ ]0, 1], x ∈ X). However, from I(cid:16), we can construct an FIM -interpretation I∗ asfollows. Let P be the (finite) set of points in which xI(cid:16)is discontinuous for at least one x in X (P ⊆ R), and let P xsbe the set of points in which xI(cid:16)s contains the endpoints of α-levelsets of xI(cid:16)which do not correspond to closed intervals. Furthermore, let D be the set of distances d occurring in theFI-formulas from Θ (D ⊆ R).is not upper semi-continuous (P xs⊆ P ), i.e., P xThe FIM -interpretation I∗ is defined as(cid:6)I∗x(p) =minq∈[p,p+ε[ xI(cid:16)xI(cid:16)(p)(q)if (∃q ∈ P xotherwises )(q ∈ ]p, p + ε[)for all x in X and p in R, where ε denotes an arbitrary, fixed element from ]0, min{|p + d − q|: p, q ∈ P ∧ d ∈D ∪ {0} ∧ p + d (cid:9)= q}[. The definition of xI∗is illustrated in Fig. 5c. To prove that I∗(x) satisfies all FI-formulasfrom Θ, we first show that for d in R, x and y in X, and m in M, it holds that(cid:2)x(cid:2)xII, y, y(cid:2)x(cid:2)x(cid:2)x(cid:2)x(cid:2)x(cid:2)xII, y, yIIII, y, y, y, yI (cid:3)I (cid:3)I (cid:3)I (cid:3)I (cid:3)I (cid:3)I (cid:3)I (cid:3)(cid:14)d(cid:14)d(cid:14)d(cid:14)d(cid:14)d(cid:14)d(cid:14)d(cid:14)dbbbbeeeebebeebeb(cid:2) m ⇒ ee(cid:3) m ⇒ ee(cid:2) m ⇒ bb(cid:14)d(cid:14)(cid:3) m ⇒ bbd(cid:14)d(cid:14)d(cid:14)(cid:2) m ⇒ bed(cid:14)d(cid:14)d(cid:14)d(cid:3) m ⇒ be(cid:2) m ⇒ eb(cid:3) m ⇒ eb(cid:2)x(cid:2)x(cid:2)x(cid:2)x(cid:2)x(cid:2)xI(cid:16)(cid:2)x(cid:2)xI(cid:16)I(cid:16), y, y, y, yI(cid:16)I(cid:16)I(cid:16)I(cid:16)I(cid:16), y, y, y, yI(cid:16) (cid:3)I(cid:16) (cid:3)I(cid:16) (cid:3)I(cid:16) (cid:3)I(cid:16) (cid:3)I(cid:16) (cid:3)I(cid:16) (cid:3)I(cid:16) (cid:3)(cid:2) m(cid:3) m(cid:2) m(cid:3) m(cid:2) m(cid:3) m(cid:2) m(cid:3) mTo show (22) and (23), we obtain by (20)(22)(23)(24)(25)(26)(27)(28)(29)S. Schockaert, M. De Cock / Artificial Intelligence 172 (2008) 1158–11931169(cid:2)xI(cid:16), yI(cid:16)(cid:3)=bb(cid:14)dsupp+d<my ,p(cid:2)mxTW=supp+d<my ,p(cid:2)mxTW(cid:2)x(cid:2)xI(cid:16)(p), 1 − yI(cid:16)(cid:3)(p + d)I(p) −(cid:2)xI(p) − xI(cid:16)(cid:3), 1 − y(p)I(p + d) +(cid:2)yI(p + d) − yI(cid:16)(cid:3)(cid:3)(p + d)(p)) ∈ [0, Δ[ and (yI (p + d) − yI(cid:16)(p + d)) ∈ [0, Δ[, forFrom the definition of I(cid:16), it follows that (xI (p) − xI(cid:16)p + d < my and p (cid:2) mx . Hence, we haveIII(cid:2)x(p), 1 − y(p + d) +(p + d) − y(cid:2)yI(cid:16)(cid:3)(cid:3)(p + d)(cid:2)x(cid:2)xII(p), 1 − yI(cid:3)(p + d)+(cid:2)yI(p + d) − yI(cid:16)(cid:3)(p + d)(p), 1 − yI(cid:3)(p + d)+ Δ(cid:2)xI, yI (cid:3)− Δ(cid:2)xI, yI (cid:3)∈ ]−Δ, Δ[(30)(cid:14), yI(cid:16)d (xI(cid:16)Assume that bbbb, yI(cid:16)In the same way, we establish from bbproving (23). The implications (24)–(29) can be shown entirely analogously.) > m would hold. Since both bb(cid:14)) (cid:3) m + Δ. Using (30) we establish that bb) and m are contained in M, this implies thatd (xI , yI ) > m also holds, proving (22) by contraposition.d (xI , yI ) < m,) (cid:2) m − Δ and thus bb) < m that bbd (xI(cid:16)d (xI(cid:16), yI(cid:16)(cid:14)(cid:14)(cid:14)(cid:14)d (xI(cid:16), yI(cid:16)(cid:2)(cid:2)<supp+d<my ,p(cid:2)mxTWsupp+d<my ,p(cid:2)mxTWsupp+d<my ,p(cid:2)mxI (cid:3)I(cid:2)x(cid:14)d, y= bbTW+ ΔSimilarly, we can show thatI(cid:16)I(cid:16)(cid:3), y> bb(cid:14)d(cid:2)xbb(cid:14)dHencebb(cid:14)d(cid:2)xI(cid:16)I(cid:16)(cid:3), yd (xI(cid:16)(cid:14)(cid:14)− bbd, yI(cid:16)I∗(cid:2)xI∗I(cid:16), ybb(cid:2)xI(cid:16)Next, we show thatI(cid:16)(cid:3)I(cid:16)(cid:3)I(cid:16)(cid:3)I(cid:16)(cid:3)(cid:14)d(cid:2)(cid:14)xd(cid:2)(cid:14)xd(cid:2)(cid:14)xd, y, y, ybeebeeI(cid:16)I(cid:16)(cid:14)= bbd(cid:2)(cid:14)= eexd(cid:2)(cid:14)= bexd(cid:2)(cid:14)= ebxdI∗I∗, y, y, yI∗ (cid:3)I∗ (cid:3)I∗ (cid:3)I∗ (cid:3)(34)First note that (31) immediately follows from the definition of I∗ by (20), as for each p satisfying p (cid:2) mx andp + d < my , xI∗(p + d). Turning now to (32), we find using (21) that(p) and yI∗, y(p) = xI(cid:16)I(cid:16)(cid:3)=(cid:2)x(cid:2)xee(cid:14)dee(cid:14)dI(cid:16), yI∗ (cid:3)I∗, ysupp−d>mx ,p(cid:3)myTW=supp−d>mx ,p(cid:3)myTW(p + d) = yI(cid:16)(cid:2)y(p), 1 − xI(cid:16)I(cid:16)(cid:3)(p − d)(cid:2)yI∗(p), 1 − xI∗(cid:3)(p − d)where mx and my are the smallest modal values of xI(cid:16)for every p1 satisfying p1 − d > mx and p1 (cid:3) my there exists a p2 satisfying p2 − d > mx and p2 (cid:3) my such that, or, equivalently, of xI∗. First, we show thatand yI∗and yI(cid:16)(cid:2)yI(cid:16)TWI(cid:16)(p1), 1 − x(cid:14)(cid:3)(p1 − d), yI(cid:16)I∗= TW(cid:14)(cid:2)yd (xI∗(p1) > yI∗I∗(p2), 1 − x, yI∗). If yI(cid:16)(p1) and xI(cid:16)(cid:3)(p2 − d)(p1) = yI∗(p1 − d) > xI∗d (xI(cid:16)) (cid:2) ee(p1 − d) we canwhich already proves eechoose p2 = p1. Next, assume that yI(cid:16)(p1 − d). This means that there is a q1 inP ys such that q1 ∈ ]p1, p1 + ε[ and q2 ∈ ]p1 − d, p1 − d + ε[. The latter implies that q2 + d ∈ ]p1, p1 + ε[s and q2 in P xwhich, combined with the former, yields |q2 + d − q1| < ε. By definition of ε, this is only possible if q2 = q1 − d,since for q2 + d (cid:9)= q1, the definition of ε would imply ε < |q2 + d − q1|. We show that (37) is satisfied for p2 = q1 − ε.s , hence mx (cid:9)= q2 and my (cid:9)= q1, and even mx < q2 and my < q1. TheNote that mx, my ∈ P but mx /∈ P xs and my /∈ P y(p1) and xI(cid:16)(p1 − d) = xI∗(31)(32)(33)(35)(36)(37)1170S. Schockaert, M. De Cock / Artificial Intelligence 172 (2008) 1158–1193If yI(cid:16)(p1 − d).(p2) = yI(cid:16)(p2) = yI(cid:16)(p2) = yI∗(p1) and xI(cid:16)(p2), and yI(cid:16)(q1 − ε) = yI(cid:16)(q1 − ε) = yI(cid:16)(p1 − d), there is a q1 in P y(q1 − ε) = yI(cid:16)(p2) = yI(cid:16)is constant over [p2, p1], hence yI(cid:16)is continuous in [q1 − d − ε, q1 − d[. Indeed, if xI(cid:16)is constant over [q1 − ε, q1[, by definition of ε, it holds that yI∗definition of ε implies that ε < q1 + 0 − my and ε < q2 + 0 − mx . Since q2 = q1 − d and p2 = q1 − ε, this entails p2 (cid:3)my and p2 − d > mx . Since yI(cid:16)(q1 − ε),or yI∗(p1). Inthe same way, we establish xI∗(p1) and xI(cid:16)(p1) > yI∗(p2). As p1 ∈ ]q1 − ε, q1[, it holds that yI(cid:16)(p2 − d) = xI(cid:16)(p1 − d) = xI∗in [q1 − d − ε, q1 − d[ furthermore implies that xI∗(q1 − d − ε) = xI(cid:16)(p1) = yI∗s such that q1 ∈ ]p1, p1 + ε[. We showthat (37) is satisfied for p2 = q1 − ε. As in the previous case, the definition of ε implies that ε < q1 + 0 − my , hencep2 (cid:3) my . Again, we have that yI∗(p1). Note thatxI(cid:16)were discontinuous in a point q2 in [q1 − d − ε, q1 − d[, itwould hold that 0 < |q2 − q1 + d| (cid:2) ε, which is impossible by definition of ε. Since p1 − d > mx and there are nodiscontinuities in [q1 −d −ε, p1 −d], we know that q1 −d −ε > mx (recall that mx is the smallest modal value of xI(cid:16)).The continuity of xI(cid:16)(q1 − d − ε), and, sincep1 − d < q1 − d, xI(cid:16)(p2 − d) = xI(cid:16)(p1 − d)The case where yI(cid:16)Conversely, we show that for every p2 satisfying p2 −d > mx and p2 (cid:3) my there exists a p1 satisfying p1 −d > mxand p1 (cid:3) my such that (37) is satisfied. If yI(cid:16)(p2 − d) we can choose p1 = p2.If yI(cid:16)(p2 − d) > xI∗(p2) and xI(cid:16)s such that q1 ∈ ]p2, p2 + ε[and q2 ∈ ]p2 − d, p2 − d + ε[. We show that (37) is satisfied for p1 = q1. Again, this is only possible if q2 = q1 − dby definition of ε. First note that p1 = q1, q1 ∈ ]p2, p2 + ε[ and p2 (cid:3) my entail p1 (cid:3) my , while p1 = q1, q1 − d ∈]p2 − d, p2 + ε − d[ and p2 − d > mx entail p1 − d > mx . As q1 ∈ P yis lower semi-continuousis decreasing in q1, this means that yI(cid:16)in q1. Since yI(cid:16)is right-continuous in q1. Furthermore, by definition of εwe know that yI(cid:16)is continuous over [q1 − ε, q1[ and over ]q1, q1 + ε]. Together with p2 ∈ ]q1 − ε, q1[, this yields(p2) = yI(cid:16)yI∗If yI(cid:16)(q1 − d − ε) = xI(cid:16)(p1 − d). From p2 = q1 − ε we can conclude that xI∗s such that q1 ∈ ]p2, p2 + ε[. We show that(37) is satisfied for p1 = q1. As before, we have that p1 (cid:3) my , p1 − d > mx , and yI∗iscontinuous in [q1 − d − ε, q1 − d[∪]q1 − d, q1 − d + ε]. Indeed, for every q2 in [q1 − d − ε, q1 − d + ε] \ {q1 − d}, itholds that 0 < |q2 − q1 + d| (cid:2) ε, which implies q2 /∈ P , using the definition of ε. If xI(cid:16)is also continuous in q1 − d,then obviously xI∗(q1 − d). If xI(cid:16)is also left-continuous(as xI(cid:16)cannotbe lower semi-continuous in q1 − d. Indeed, this would imply that q1 − d ∈ P x(p2 − d),which contradicts the assumption that xI(cid:16)(p2 − d) = xI(cid:16)is decreasing in q1 − d), hence xI(cid:16)(p2) = yI∗(p2) and xI(cid:16)(p2 − d) there is a q1 in P yis upper semi-continuous in q1 − d then xI(cid:16)(p1). Similarly, we can show that xI∗(p2 − d). Finally, we show that xI(cid:16)(p1 − d) is shown entirely analogously.(p2 − d) there is a q1 in P ys , we know that yI(cid:16)(q1). Note that xI(cid:16)(p2 − d) = xI∗s and thus xI(cid:16)(p1 − d) > xI∗(p2 − d) > xI∗(p2 − d) = xI∗(p2 − d) = xI∗(p2 − d) = xI(cid:16)(q1 − d) = xI(cid:16)s and q2 in P x(p2) and xI(cid:16)(p2) > yI∗(p2) > yI∗(p2) = yI(cid:16)(q1) = yI(cid:16)(p2 − d) = xI∗(p2 − d).(q1 − d).The case where yI(cid:16)(p1) = yI∗Finally, (33) and (34) can be shown analogously. (cid:2)(p1) and xI(cid:16)(p1 − d) > xI∗(p1 − d) is shown in the same way.From Lemma 1, we already know that upper and lower bounds of fuzzy temporal relations can be characterized bycrisp temporal relations between the α-level sets of the fuzzy time intervals involved. As the next proposition shows,when these fuzzy time intervals only take membership degrees from M, only a finite number of α-level sets needs tobe considered. The intuition behind this proposition is that a fuzzy interval A taking only membership degrees from Mis completely characterized by the set of crisp intervals {AΔ, A2Δ, . . . , A1}, which is in turn completely characterized+++−−−by the set of instants (real numbers) {A2Δ, A1 , . . . , A1 , A2Δ, . . . , AΔ, AΔ}.Proposition 2. Let A and B be fuzzy intervals that only take membership degrees from M, k ∈ M1 and l ∈ M0. Itholds that:bbbbeeeebebe+ d ∧ B(cid:14)−−−− d ∨ Ad (A, B) (cid:3) l ⇔ Al+Δ < Bl < BΔ(cid:14)−−−d (A, B) (cid:2) k ⇔ B(cid:2) Ak+ΔΔ2Δ(cid:14)+++− d ∨ Ad (A, B) (cid:3) l ⇔ A2Δ < BΔ < Bl(cid:14)+++d (A, B) (cid:2) k ⇔ B(cid:2) A+ d ∧ Bk+Δk+2ΔΔ(cid:14)−+−d (A, B) (cid:3) l ⇔ A− d ∨ Al < Bl+Δ < B1(cid:14)+−+(cid:2) Ad (A, B) (cid:2) k ⇔ Bk+Δ1−Δ1−−−− d− d ∨ · · · ∨ A1 < B1−l+Δ2Δ−−−(cid:2) A(cid:2) A1−kk+2Δ1+++− d− d ∨ · · · ∨ A1−l+Δ < Bl+Δ1++++ d(cid:2) A+ d ∧ · · · ∧ B(cid:2) A1−k2Δ1+−+− d− d ∨ · · · ∨ A1 < B1−Δl−+−(cid:2) A(cid:2) Ak+Δk+2Δ1+ d ∧ · · · ∧ B+ d ∧ · · · ∧ B+ d ∧ B+ d+ d(38)(39)(40)(41)(42)(43)S. Schockaert, M. De Cock / Artificial Intelligence 172 (2008) 1158–1193ebeb(cid:14)+d (A, B) (cid:3) l ⇔ A1 < B(cid:14)−d (A, B) (cid:2) k ⇔ B1−k−1−l+Δ+(cid:2) A1+−− d ∧ A1−Δ < B1−l+2Δ+−(cid:2) A1−Δ1−k+Δ−+− d ∧ · · · ∧ A1−l+Δ < B1+−+ d(cid:2) A+ d ∨ · · · ∨ B1−k1+ d ∨ B− d1171(44)(45)bbProof. As an example, we show (38). From Lemma 1 we already know that(cid:14)d (A, B) (cid:3) l ⇔(cid:2)∀ε ∈ ]0, l]−First note that if ε1 < ε2, Bλ+ε1−l(cid:2)∀ε ∈ ]0, Δ[(cid:14)d (A, B) (cid:3) l ⇔∃λ ∈ ]l − ε, 1]−(cid:2) Bλ+ε2−l and therefore bb(cid:3)(cid:2)∃λ ∈ ]l − ε, 1](cid:3)(cid:14)d (Aλ, Bλ+ε−l)(cid:14)d (Aλ, Bλ+ε1−l) ⇒ bb(cid:3)(cid:14)d (Aλ, Bλ+ε−l)bbbbbb(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:14)d (Aλ, Bλ+ε2−l). We thus obtainLet ε ∈ ]0, Δ[ and let λ in ]l − ε, 1] be such that bb{l, l + Δ, . . . , 1} such that bbfrom M. Moreover, Bchoose λ(cid:16) = l. Similarly, if λ ∈ ]iΔ, (i + 1)Δ[(i ∈ N, l (cid:2) iΔ < (i + 1)Δ (cid:2) 1), we have that bbbbd (Aλ, Bλ+ε−l). We first show that there must exist some λ(cid:16) in(cid:14)d (Aλ(cid:16), Bλ(cid:16)+ε−l). If λ ∈ ]l − ε, l[, then Aλ = Al as A only takes membership degrees(cid:14)(cid:14)(cid:2) Bd (Al, Bl+ε−l), i.e., we cand (Aλ, Bλ+ε−l) we establish bb(cid:14)d (Aλ, Bλ+ε−l) implies−l+ε−l, hence from bb−λ+ε−l(cid:14)(cid:14)bb(cid:14)d (A, B) (cid:3) l ⇔d (A(i+1)Δ, B(i+1)Δ+ε−l), and we can choose λ(cid:16) = (i + 1)Δ. This yields(cid:3)(cid:2)(cid:2)∀ε ∈ ]0, Δ[bbSince now λ ∈ M and ε ∈ ]0, Δ[, we have that Bλ+ε−l = Bλ+Δ−l:(cid:3)(cid:14)d (Aλ, Bλ+Δ−l)(cid:3)(cid:14)d (Aλ, Bλ+ε−l)∃λ ∈ {l, l + Δ, . . . , 1}∃λ ∈ {l, l + Δ, . . . , 1}(cid:3)(cid:2)bbbb(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:2)∀ε ∈ ]0, Δ[(cid:2)∃λ ∈ {l, l + Δ, . . . , 1}(cid:14)d (A, B) (cid:3) l ⇔⇔(cid:3)(cid:14)d (Aλ, Bλ+Δ−l)bbproving (38). (cid:2)Given a set of atomic FI-formulas Θ over a set of variables X, we construct a set of variables X(cid:16) and a set of linearconstraints Ψ over X(cid:16) such that Θ is FI-satisfiable iff Ψ is P-satisfiable. From Proposition 1, we know that we canrestrict ourselves to fuzzy intervals that only take membership degrees from M. Proposition 2 furthermore reveals thatchecking whether an FIM interpretation satisfies an FI-formula can be done by evaluating a constant number of linearinequalities. This suggests the following procedure for constructing X(cid:16) and Ψ .Let X(cid:16) and Ψ initially be the empty set. For each variable x in X, we add the new variables x+1 ,Δ to X(cid:16). Intuitively, these new variables correspond to the beginning and ending points of α-level sets. . . , xof the fuzzy interval corresponding with x. By adding the following linear constraints to Ψ , for each m in M1 \ {0},we ensure that in every P-model I of Ψ , these new variables can indeed be interpreted as beginning and ending pointsof α-level sets of a fuzzy interval:−2Δ, . . . , x+2Δ and x−1 , x−Δ, x+xxx(cid:2) x(cid:2) x−1−m+m+Δ+1−m+Δ+(cid:2) xm(46)(47)(48)In this way, every P-model I of Ψ corresponds to an FIM -interpretation I(cid:16) of Θ in which xI(cid:16)taking only membership degrees from M, defined through its α-level sets by (I(cid:16)(x))m = [I(x−m ∈ M0.is the fuzzy intervalm ), I(x+m )] for allProposition 2. For example, if Θ contains the FI-formula bbFinally, for each FI-formula in Θ, we add a particular set of linear constraints to Ψ , based on the equivalences of(cid:14)d (x, y) (cid:2) k, we add the following set of linear constraints:+ d(49)+ d, y(cid:4)y(cid:2) x(cid:2) x(cid:2) x(cid:5)−Δ−k+Δ−2Δ−k+2Δ−1−k+ d, . . . , y(cid:14)d (x, y) (cid:3) l, we add the following linear constraint:−1Similarly, if Θ contains the FI-formula bb−l < y−Δ− d ∨ x−l+Δ < y−2Δx(50)Clearly, Θ ∪ {r1 ∨ r2} is FI-satisfiable iff either Θ ∪ {r1} is FI-satisfiable or Θ ∪ {r2} is FI-satisfiable. Therefore, weonly needed to consider sets of atomic FI-formulas in the procedure described above. Nonetheless, this procedure−1 < y−1−l+Δ− d− d ∨ · · · ∨ x1172S. Schockaert, M. De Cock / Artificial Intelligence 172 (2008) 1158–1193Fig. 6. There exists an FIM -interpretation I for a set of FI-formulas Θ iff there exists a P-interpretation I(cid:16)constraints.for the corresponding set Ψ of linearis not inherently restricted to sets of atomic FI-formulas, as disjunctive FI-formulas correspond to (sets of) linearconstraints as well. However, the number of linear constraints can be exponential in the number of disjuncts in theFI-formulas.As expressed by the following proposition, it holds that the set of linear constraints Ψ is P-satisfiable iff Θ isFI-satisfiable.Proposition 3. Let Θ be a finite set of atomic FI-formulas over X, and let Ψ be the corresponding set of linearconstraints over X(cid:16), obtained by the procedure outlined above. It holds that Θ is FI-satisfiable iff Ψ is P-satisfiable.(cid:3)(cid:3)=I(cid:16)I(cid:16)−iΔ and xProof. Assume that Θ is FI-satisfiable. Then there exists an FIM -model I of Θ by Proposition 1. We define the+P-interpretation I(cid:16) for all variables xiΔ as (i ∈ N, Δ (cid:2) iΔ (cid:2) 1):(cid:2)x(cid:2)x(cid:2)−xiΔ(cid:2)+xiΔ+In other words, I(cid:16)(xiΔ) correspond to the beginning and ending of the iΔ-level set of the fuzzy timeinterval xI . Fig. 6 illustrates the relationship between I and I(cid:16). Clearly, I(cid:16) satisfies (46)–(48). By Proposition 2, wealso have that all (sets of) linear constraints like (49) and (50) are satisfied. Hence, I is a P-model of Ψ .I (cid:3)−iΔI (cid:3)+iΔ−iΔ) and I(cid:16)(xConversely, assume that Ψ is P-satisfiable. Then there exists a P-model I(cid:16) of Ψ . We define the FIM -interpretation(51)(52)=I from I(cid:16) asIx(r) =(cid:6)max{λ | λ ∈ M ∧ r ∈ [I(cid:16)(x0−λ ), I(cid:16)(x+λ )]}if r ∈ [I(cid:16)(xΔ)−, I(cid:16)(xΔ)+]otherwise(53)for each x in X and r in R. By construction of Ψ , we have that xI is a fuzzy time interval. Moreover, by Proposition 2,we establish that I satisfies every FI-formula in Θ. (cid:2)+Δ+2Δ= xInterestingly, by reducing FI-satisfiability to P-satisfiability of a set of linear constraints, we can impose additionalconstraints on the variables involved. For example, we can express that a given variable x corresponds to a crisp= x=interval, rather than a fuzzy interval, by adding the linear constraints {x++} to Ψ . By additionally adding xx1 , we can even ensure that x is always interpreted as an1−Δ, . . . , x+instant (time point). Similarly, we can add x1 to express that x should never be interpreted as a time point. If−}.we know that the beginning of x is inherently gradual, we can even impose {x2Δ, xSuch additional constraints can be very useful if it is a priori known which variables correspond to (possibly) vagueevents, crisp events, and instants. Moreover, adding such constraints does not change the computational complexityof the algorithm.−3Δ, . . . , x−3Δ, . . . , x−1−Δ < x−2Δ < x−1 < x−Δ < x−2Δ, x−1 , x−1−Δ= x= x= x−2Δ−1−1+1−ΔAnother important advantage of the reduction to P-satisfiability is that existing, optimized algorithms for reasoningabout linear constraints can be used. Existing algorithms cannot only be used for checking FI-satisfiability, but alsoS. Schockaert, M. De Cock / Artificial Intelligence 172 (2008) 1158–11931173to find FI-models (or consistent scenarios) of FI-satisfiable sets of FI-formulas. This technique is illustrated in thefollowing example.Example 1. Let Θ = {bbM = {0, 0.25, 0.5, 0.75, 1}. The linear constraints of the form (46)–(48) are given by(cid:14)10(a, b) (cid:3) 0.5, eb(cid:14)5 (c, a) (cid:3) 0.5, eb(cid:14)5 (b, c) (cid:3) 0.75}. We can choose Δ = 0.25, and thus(cid:4)Ψ1 =(cid:2) aaba−0.25+1−0.25+b1−0.25+1cc−−(cid:2) a0.5, a0.5++0.75, a0.75−−(cid:2) b0.5, b0.5++0.75, b0.75−−(cid:2) c0.5, c0.5++0.75, c0.75(cid:2) a−−(cid:2) a0.75, a0.75++(cid:2) a0.5, a0.5−−(cid:2) b0.75, b0.75++(cid:2) b0.5, b0.5−−(cid:2) c0.75, c0.75++(cid:2) c0.5, c0.5−(cid:2) a1 , a+0.25,−(cid:2) b1 , b+0.25,−1 , c(cid:5)(cid:2) b(cid:2) c+0.25(cid:2) c(cid:2) b(cid:2) c−1(cid:2) a+1 ,−1(cid:2) b+1 ,−1(cid:2) c+1 ,The additional linear constraints corresponding to the FI-formulas in Θ are given by(cid:4)Ψ2 =−−0.5 < ba0.25−+1 < a0.75−+b1 < c0.5−− 10 ∨ a0.75 < b−+− 5, c0.75 < a1−+− 5, b0.75 < c0.75−0.5− 5,− 5, bc(cid:5)+0.5 < c−1− 5− 10 ∨ a−1 < b−0.75− 10,The set Ψ of all linear constraints corresponding with Θ is then given by Ψ1 ∪ Ψ2. It holds that Ψ can be satisfied−− 10. In [20], an algorithm is presented to find a solution of a set of atomic linear constraints, i.e., aby choosing the first disjunct a10 ∨ aP-interpretation I satisfying Ψ . One possible solution of Ψ is defined by(cid:3)− 10 in the disjunctive linear constraint a−0.75 < b−0.5 < b−0.5 < b− 10 ∨ a−1 < b−0.25−0.75−0.25−0.5(cid:3)(cid:3)IIII(cid:2)−a0.25(cid:2)−a0.75(cid:2)−b0.25(cid:2)(cid:3)+b1(cid:2)−c0.5(cid:3)(cid:3)= I= I= I(cid:2)= I(cid:3)b(cid:2)−0.5(cid:3)−1−0.5(cid:3)(cid:2)a(cid:2)a(cid:2)b+0.75−c0.75= I(cid:3)(cid:2)−= Ic0.25(cid:3)(cid:2)+a1(cid:2)−= Ib0.75(cid:3)(cid:2)+b0.5(cid:3)(cid:2)−c1= I(cid:3)= I(cid:3)= 0(cid:2)a= I(cid:2)= I(cid:2)(cid:3)+0.75(cid:2)−b1+b0.25(cid:3)+1= I(cid:3)(cid:2)a= 11= 11(cid:2)+c0.75(cid:3)I(cid:2)cAs explained above, the P-model I of Ψ defines an FIM -model I(cid:16) of Θ.+0.5= I= I= I= I= I= Icc(cid:3)(cid:3)(cid:2)+0.25(cid:3)= 16(cid:3)= I(cid:3)(cid:2)a+0.25= 22+0.5In applications, we usually need to find an FI-satisfiable set of FI-formulas, corresponding to some given (naturallanguage) description, rather than checking the FI-satisfiability of a given set of FI-formulas. Typically, in this context,the information provided may be inconsistent when interpreted as classical, crisp temporal relations. The goal is thento weaken information such as A happened before B to A happened before B at least to degree 0.8. The various lowerand upper bounds introduced in this way (e.g., 0.8) should be the strongest possible, w.r.t. a given precision Δ. Thenext example illustrates this process.Example 2. Consider again the example about Picasso’s work from the introduction. To allow for a concise descrip-tion, we use the following abbreviations to refer to the relevant events and periods:BFTPicasso creates Bread and Fruit Dish on a TableDMA Picasso creates the Demoiselles d’AvignonACCPicasso’s Analytical Cubism periodPicasso’s Cubism periodThe information that Bread and Fruit Dish on a Table marks the beginning of Picasso’s Analytical Cubism can berepresented as1174S. Schockaert, M. De Cock / Artificial Intelligence 172 (2008) 1158–1193(cid:4)(cid:4)bbbb(cid:14)ee(BFT, AC) (cid:3) λ1(AC, BFT) (cid:3) λ2(BFT, AC) (cid:3) λ3(54)(55)(56)where initially λ1, λ2 and λ3 are assumed to be 1. Values lower than 1 are only considered when inconsistenciesarise. Similarly, the information that the Demoiselles d’Avignon marks the beginning of Picasso’s Cubist period canbe represented as(cid:4)(cid:4)bbbb(cid:14)ee(DMA, C) (cid:3) λ4(C, DMA) (cid:3) λ5(DMA, C) (cid:3) λ6Next, the information that Analytical Cubism is the first stage of Picasso’s Cubism can be represented by(cid:4)(cid:4)bbbb(cid:14)ee(AC, C) (cid:3) λ7(C, AC) (cid:3) λ8(AC, C) (cid:3) λ9(57)(58)(59)(60)(61)(62)In addition to this qualitative description, we also have some quantitative information. In particular, we know thatBread and Fruit Dish on a Table was created in 1909, the Demoiselles d’Avignon was created in 1907 and Analyt-ical Cubism lasted from somewhere in 1908 to somewhere in 1912. We can encode this information using metricconstraints by referring to an artificial time point Z, for instance, corresponding to the beginning of the year 1900:bbeebbbb(cid:4)8 (Z, AC) (cid:3) λ10(cid:4)12(Z, AC) (cid:3) λ12(cid:4)9 (Z, BFT) (cid:3) λ14(cid:4)7 (Z, DMA) (cid:3) λ16bbeeeeee(cid:14)−9(AC, Z) (cid:3) λ11(cid:14)−13(AC, Z) (cid:3) λ13(cid:14)−10(BFT, Z) (cid:3) λ15(cid:14)−8(DMA, Z) (cid:3) λ17(63)(64)(65)(66)−Δ−2Δ= Z+= Z1−= · · · = Z1When checking the FI-satisfiability of this representation for various values of the lower bounds λi , we need to ensure=that Z is a time point. As discussed above, this can be done by adding the constraint Z+· · · = ZΔ to the corresponding set of linear constraints. From available domain knowledge, we may moreover find outthat creating a painting is a crisp event,6 and therefore impose that DMA and BFT are crisp intervals in a similar way.For λ1 = λ2 = · · · = λ17 = 1, the description above is not FI-satisfiable. Hence, we need to weaken one or more ofthe lower bounds, i.e., we let some of the λi correspond to values from M lower than 1. Different sets of lower boundsmay be weakened to obtain an FI-satisfiable representation. Moreover, the actual strategy adopted to decide how toarrive at such a representation may differ from application to application, as well as depend on additional backgroundinformation (e.g., degrees of confidence in each of the original natural language statements). In the example at hand,we may impose that λ14 = λ15 = λ16 = λ17 = 1, as Z, BFT and DMA all refer to crisp events. Furthermore, wemay initially require that λ1 = λ2 = · · · = λ13, as we lack any further background knowledge for differentiatingbetween the FI-formulas. Assuming Δ = 0.25, we first try λ1 = · · · = λ13 = 0.75, which is not FI-satisfiable, andnext λ1 = · · · = λ13 = 0.5, which turns out to be FI-satisfiable. Although we have now arrived at an FI-satisfiableinterpretation of the natural language statements, it is not necessarily maximally FI-satisfiable, i.e., it may be the casethat not all of the λi ’s (i ∈ {1, 2, . . . , 13}) need to be weakened to 0.5. Therefore, we subsequently try to strengthenthe λi ’s again, one by one. For example, when λ2 = 0.75 or even λ2 = 1, the resulting representation remains FI-satisfiable. On the other hand, strengthening λ1 to 0.75 leads to a representation which is not FI-satisfiable anymore(even when λ2 = 0.5). Thus, after a linear number of FI-satisfiability checks, we obtain the following maximallyFI-satisfiable representation:6 Although the assumption made in this example is reasonable in most contexts, creating a painting could be seen as a vague event as well,assuming, for instance, that related studies and sketches made prior to the actual painting belong to the creation to varying degrees.S. Schockaert, M. De Cock / Artificial Intelligence 172 (2008) 1158–11931175Fig. 7. FI-interpretation of events corresponding to the creation of Bread and Fruit Dish on a Table (BFT) and the Demoiselles d’Avignon (DMA),as well as Picasso’s Analytical Cubism (AC) and Cubism (C) periods.λ14 = λ15 = λ16 = λ17 = 1λ2 = λ3 = λ4 = λ6 = λ7 = λ8 = λ9 = λ10 = λ12 = λ13 = 1λ1 = λ5 = λ11 = 0.5A corresponding FI-interpretation is depicted in Fig. 7, illustrating that the inconsistencies in the original natural lan-guage statements are caused by the vagueness of the Analytical Cubism and Cubism periods. In this FI-interpretation,both periods are assumed to have started in 1907 to degree 0.5, and to have started completely in 1909.6. Computational complexityLet A be a subset of FX, the set of all FI-formulas over a set of variables X. In the following discussion, weassume that X contains a sufficiently large, or infinite number of different variables. We call FISAT(A) the problemof deciding whether a finite set of FI-formulas from A is FI-satisfiable. Deciding the P-satisfiability of an arbitraryset of linear constraints is NP-complete [44]. To decide whether a set Θ of FI-formulas is FI-satisfiable, we can guesswhich disjuncts can be satisfied for all disjunctive FI-formulas, resulting in a set of atomic FI-formulas Θ (cid:16). Checkingif Θ (cid:16) is FI-satisfiable can be polynomially reduced to checking the P-satisfiability of a set of linear constraints, asexplained above. We thus find that FISAT(A) is in NP for every A ⊆ FX. As will become clear below, FISAT(FX)is also NP-hard and thereby NP-complete. However, checking the P-satisfiability of a set of linear constraints withoutdisjunctions is tractable [23,27]. From Proposition 2, it follows that a significant subset of the FI-formulas do not leadto disjunctive linear constraints. We will refer to this subset as F tX:F tX=(cid:7)(cid:7)(cid:2)(cid:4)bb(cid:14)d (x, y) (cid:2) k | k ∈ M1(cid:5)(cid:4)(cid:5)(cid:4)∪ee(cid:5)(cid:14)d (x, y) (cid:2) k | k ∈ M1(cid:5)d∈R(cid:4)be(cid:4)bb(x,y)∈X2(cid:14)d (x, y) (cid:2) k | k ∈ M1∪(cid:14)d (x, y) (cid:3) 1, eeX) is tractable. Note, however, that the procedure described above for deciding FISAT(F t(cid:14)d (x, y) (cid:3) l | l ∈ M0(cid:14)d (x, y) (cid:3) 1, eb∪(cid:14)d (x, y) (cid:3) 1, be(cid:14)d (x, y) (cid:2) 0eb(cid:5)(cid:3)∪Clearly FISAT(F tweakly polynomial, as it depends on the value of 1Δ= ρ.To support efficient reasoning, it is of interest to identify maximally tractable subsets of FX, i.e., sets of FI-formulas A ⊆ FX such that FISAT(A) is tractable and for any proper superset A(cid:16) of A, it holds that FISAT(A(cid:16)) isNP-complete.7 As we show in the following two propositions, when extending F tX with FI-formulas, it is not possibleto keep tractability without putting restrictions on the variables.X) is onlyProposition 4. Let k ∈ M1 \ {0} and d ∈ R. FISAT(A) is NP-complete if A contains any of the following sets ofFI-formulas:7 Throughout the paper, we assume P (cid:9)= NP.1176S. Schockaert, M. De Cock / Artificial Intelligence 172 (2008) 1158–1193F tX∪F tX∪F tX∪F tX∪(cid:7)(cid:4)bb(cid:14)d (x, y) (cid:3) k(cid:5)(x,y)∈X2(cid:7)(cid:4)(x,y)∈X2(cid:7)(cid:4)(x,y)∈X2(cid:7)(cid:4)(x,y)∈X2ee(cid:14)d (x, y) (cid:3) k(cid:5)be(cid:14)d (x, y) (cid:3) keb(cid:14)d (x, y) (cid:2) k(cid:5)(cid:5)(67)(68)(69)(70)Proof. As an example, we show (67) for d = 0. The proof for (68)–(70) and d (cid:9)= 0 is entirely analogous.Since FISAT(FX) is in NP, we already have that FISAT(A) is in NP. To establish the NP-hardness of FISAT(A),we will show that 3SAT can be polynomially reduced to it. The proof is inspired by [37], where a similar reduction ismade to prove NP-hardness for the satisfiability problem in a subfragment of the Interval Algebra.Let D = {C1, C2, . . . , Cn}, where Ci denotes a clause of the form li1 ∨ li2 ∨ li3, containing exactly three disjuncts.Each literal lij is either an atomic proposition or the negation of an atomic proposition. 3SAT is the problem ofdeciding whether D is satisfiable, i.e., deciding if there exists a truth assignment of the atomic propositions that makesall clauses from D true. To prove (67), we will construct a set Θ of FI-formulas from A which is FI-satisfiable iff Dis satisfiable, thereby reducing 3SAT to FISAT(A).For each i in {1, . . . , n} and j in {1, 2, 3}, we add the following FI-formulas to Θ:(cid:14)(cid:14)bbbb(aij , bij ) (cid:3) k(cij , bij ) (cid:2) k − Δwhere aij , bij and cij are different variables from X.These FI-formulas correspond to the following linear constraints:(aij )(cid:4)(bij )−−−−∨ (aij )k+Δ < (bij )k < (bij )Δ2Δ−−−−−(cid:2) (cij )(cid:2) (cij )k+Δ, . . . , (bij )k , (bij )1−k+ΔΔ2Δ−−∨ · · · ∨ (aij )1 < (bij )1−k+Δ(cid:5)−(cid:2) (cij )1(71)(72)(73)(74)Linear constraints can be depicted as a graph in which nodes correspond to variables, and edges labeled with <or (cid:2) are added between two nodes if < or (cid:2) is imposed on the corresponding variables. Fig. 8 shows the graphcorresponding to (73)–(74). Linear constraints with disjunctions are displayed as dotted lines, as only one of severalpossible edges needs to be satisfied in this case. Furthermore, we add the following FI-formulas to Θ:(cid:14)(cid:14)bbbb(ci1, di1) (cid:3) 1(ci2, di2) (cid:3) 1(cid:14)(cid:14)bbbb(ai2, di1) (cid:2) 1 − Δ(ai3, di2) (cid:2) 1 − ΔFig. 8. Linear constraints (73)–(74).S. Schockaert, M. De Cock / Artificial Intelligence 172 (2008) 1158–11931177(cid:14)bb(ci3, di3) (cid:3) 1(cid:14)bb(ai1, di3) (cid:2) 1 − ΔThe corresponding linear constraints are given by(ci1)(ci2)(ci3)−−1 < (di1)Δ−−1 < (di2)Δ−−1 < (di3)Δ(di1)(di2)(di3)−Δ−Δ−Δ−(cid:2) (ai2)1−(cid:2) (ai3)1−(cid:2) (ai1)1(75)(76)(77)Fig. 9 contains a graph corresponding to Fig. 8 for ai1, bi1 and ci1, as well as the graph for ai2, bi2 and ci2, and thegraph for ai3, bi3 and ci3. For clarity, the nodes for the bij -variables are omitted. Furthermore, these three subgraphs−−−−−−1 < (ci3)1 and (ai3)1 < (ci2)1 , (ai2)1 < (ci1)are linked together by the constraints (75)–(77). If (ai1)1 would−−−−−−−−−1 < (ai1)1 , and thus (ai1)1 < (ai1)1 < (ci3)1 < (ai3)1 < (ci2)1 < (ai2)1 < (ci1)hold, we obtain (ai1)1 whichFig. 9. Linear constraints (75)–(77).(78)(79)(80)(81)(82)(83)(84)(85)(86)(87)(88)1178S. Schockaert, M. De Cock / Artificial Intelligence 172 (2008) 1158–1193−−(cid:3) (ci2)1 and (ai3)1−−(cid:3) (ci1)cannot be satisfied. Hence, every FI-model of Θ corresponds to a P-model in which at least one of (ai1)1 ,1−−(cid:3) (cij )(ai2)1 will therefore1make all clauses in D true. To ensure that such a truth assignment indeed exists, what remains is to make sure that anatomic proposition lij and its negation, denoted below by lrs , are not made true simultaneously. If we want to define a−−−−correspondence between Θ and D, we therefore need to encode that one of (aij )1 < (crs)1 or (ars)1 < (cij )1 musthold. This can be accomplished by adding the following FI-formulas to Θ:−−(cid:3) (ci3)1 holds. A truth assignment that makes lij true if (aij )1(cid:14)(cid:14)(cid:14)(cid:14)(cid:14)(cid:14)bbbbbbbbbbbb(eij rs, cij ) (cid:2) Δ(eij rs, fij rs) (cid:3) 1(ars, fij rs) (cid:2) k − Δ(ersij , crs) (cid:2) Δ(ersij , frsij ) (cid:3) 1(aij , frsij ) (cid:2) k − Δwhich correspond to the following (sets of) linear constraints(cid:4)(cij )−−−(cid:2) (eij rs)2Δ, (cij )Δ2Δ−−(eij rs)1 < (fij rs)Δ(cid:4)−−−(cid:2) (ars)(fij rs)k , (fij rs)Δ2Δ(cid:4)−−−(cid:2) (ersij )(crs)2Δ, (crs)Δ2Δ−−(ersij )1 < (frsij )Δ(cid:4)−−−(cid:2) (aij )(frsij )k , (frsij )Δ2Δ−−(cid:2) (eij rs)3Δ, . . . , (cij )1−Δ−(cid:2) (eij rs)1(cid:5)−−−(cid:2) (ars)(cid:2) (ars)k+Δ, . . . , (fij rs)1−k+Δ1(cid:5)−−−(cid:2) (ersij )(cid:2) (ersij )3Δ, . . . , (crs)1−Δ1(cid:5)(cid:5)−(cid:2) (aij )1−−(cid:2) (aij )k+Δ, . . . , (frsij )1−k+Δ(89)−−−−Fig. 10 displays these linear constraints. In particular, (84)–(89) imply that (cij )1−Δ < (aij )k and (crs)1−Δ < (ars)k .−−Assume that there exists an FI-model of Θ such that the corresponding P-model I(cid:16) neither satisfies (aij )1 < (cij )1−−1 . Then there exist a k1 and a k2 in M such that k (cid:2) k1 (cid:2) 1 − Δ and k (cid:2) k2 (cid:2) 1 − Δ, and such thatnor (ars)1 < (crs)−−−−−I(cid:16) satisfies (aij )(cid:2) (crs). We obtain (cij )and (ars)< (crs)< (cij )1−Δ <1−Δ < (ars)k1k1k−−−−−−(cid:2) (cij )(cid:2) (aij )(aij )1−Δ would hold. Hence, any FI-model of Θ1−Δ < (cij )1−Δ, and thus that (cij )< (cij )k1k1k−−−−−−−−corresponds to a P-model satisfying (aij )1 < (crs)1 and (ars)1 < (cij )1 . If both (aij )1 < (crs)1 or (ars)1 < (cij )1would be satisfied in an FI-model of Θ, we can arbitrarily choose to make either lij or lrs true without making any ofthe clauses in D false. Therefore, we have established that whenever Θ is FI-satisfiable, D must be satisfiable.−(cid:2) (ars)k2< (crs)−k2−k2−k2To complete the proof, we also show the converse, i.e., whenever D is satisfiable, there exists an FI-model of Θ,or equivalently, a P-model of the linear constraints corresponding to Θ. If the literal lij is interpreted as true, we−−−choose the disjunct (aij )1 <1−k in (73), while if lij is interpreted as false, we choose the disjunct (aij )1−Δ < (bij )−(bij )1−k+Δ. Thus we obtain a set Ψ of linear constraints without disjunctions whose P-satisfiability implies the FI-satisfiability of Θ. It holds that Ψ is P-satisfiable iff the graph representation of Ψ does not contain any cyclesinvolving at least one edge labeled with <.We begin by considering the edges corresponding to linear constraints of the form (73), (74) and (75)–(77), asdepicted in Fig. 9. Note that in the construction of Ψ , as mentioned above, we chose one specific disjunct in (75).Since at least one of the literals li1, li2, li3 is interpreted as true, for at least one j in {1, 2, 3}, we chose the disjunct−−−−−−(aij )1 < (cij )1−Δ instead of (aij )1−Δ < (cij )1−k, resulting in (aij )1−Δ < (bij )1 . For a cycle, however, we would−−−−−−need (ai1)1 < (ci3)1 and (ai3)1 < (ci2)1 , (ai2)1 < (ci1)1 . From this we conclude that the constraints of the form(73), (74) and (75)–(77) alone do not lead to cycles in the graph representation of Ψ .Any cycle would therefore have to include at least one edge corresponding to a linear constraint of the form (84)–−−−(89). Such a cycle can only occur if for some i, j, r, s in {1, 2, . . . , n}, we have that (cij )1−Δ <k , (ars)1−Δ < (ars)−−−−−−−−−(crs)1−Δ < (aij )k and (crs)1−Δ < (ars)1−Δ. By construction, (cij )1−Δ < (cij )k and (aij )1−Δ < (aij )1−Δ, (crs)k−−are only implied by Ψ iff lij ≡ ¬lrs . However, if this is the case, either lij or lrs is false, and (ars)1−Δ < (crs)1−Δ−−and (aij )1−Δ cannot both be contained in Ψ . Hence Ψ cannot contain any cycle, which completes the1−Δ < (cij )proof. (cid:2)S. Schockaert, M. De Cock / Artificial Intelligence 172 (2008) 1158–11931179Fig. 10. Linear constraints (84)–(89).Proposition 4 shows that, when no restrictions on the variables are imposed, F tX cannot be extended with atomicFI-formulas without losing tractability. From the next proposition, it follows that this also holds for disjunctive FI-formulas.Proposition 5. Let rd and sd be bbfollowing sets of FI-formulas:(cid:7)F tX∪(x,y,u,v)∈X4(cid:14)d , ee(cid:14)d , be(cid:14)d or eb(cid:14)d (d ∈ R). FISAT(A) is NP-complete if A contains any of the(cid:4)rd1 (x, y) (cid:3) l1 ∨ sd2 (u, v) (cid:3) l2(cid:5)(90)1180S. Schockaert, M. De Cock / Artificial Intelligence 172 (2008) 1158–1193F tX∪F tX∪(cid:4)(cid:4)(cid:7)(x,y,u,v)∈X4(cid:7)(x,y,u,v)∈X4rd1 (x, y) (cid:3) l1 ∨ sd2 (u, v) (cid:2) k2(cid:5)rd1 (x, y) (cid:2) k1 ∨ sd2 (u, v) (cid:2) k2(cid:5)for any d1, d2 ∈ R, l1, l2 ∈ M0 and k1, k2 ∈ M1.(91)(92)Proof. As an example, we show (90) for rd1(cid:8)(u,v)∈X2{sd2 (u, v) (cid:3) l2} (cid:9)⊆ F tconsider the case where l1 = l2 = 1. We will establish that FISAT(F t∪Xcomplete by Proposition 4, can be polynomially reduced to FISAT(F tX1}).(cid:8)= bb= sd2(cid:14)0 . First note that ifX orX, (90) follows straightforwardly from Proposition 4. Therefore, we only need to(x,y)∈X2{bb(cid:14)(x, y) (cid:3) 1 − Δ}), which is NP-(cid:8)(x,y,u,v)∈X4{bb(cid:14)(x, y) (cid:3) 1 ∨ bb(cid:14)(u, v) (cid:3)(x,y)∈X2{rd1 (x, y) (cid:3) l1} (cid:9)⊆ F t(cid:8)∪Let Θ1 be a set of FI-formulas from F tX(x,y)∈X2{bb(cid:14)(x, y) (cid:3) 1 − Δ}. We construct a set Θ2 of FI-formulas(x,y,u,v)∈X4{bb(cid:14)(x, y) (cid:3) 1 ∨ bb(cid:14)(u, v) (cid:3) 1}) by replacing every FI-formula in Θ1 of the form(cid:8)∪from FISAT(F tXbb(cid:14)(x, y) (cid:3) 1 − Δ by the following FI-formulas∪(cid:8)(cid:14)(u, y) (cid:3) 1(cid:14)(cid:14)(cid:14)bbbbbb(x, v) (cid:3) 1 ∨ bb(u, x) (cid:2) Δ(y, v) (cid:2) Δgiving rise to the following linear constraints:(93)(94)−−−∨ ux1 < v1 < yΔ(cid:4)−−−(cid:2) u2Δ, xxΔ2Δ(cid:4)−−−(cid:2) y2Δ, vvΔ2Δ−Δ−−(cid:2) u3Δ, . . . , x1−Δ−−(cid:2) y3Δ, . . . , v1−Δ(cid:5)−(cid:2) u1(cid:5)−(cid:2) y1(95)These linear constraints are depicted in Fig. 11. On the other hand, the corresponding FI-formula bb(cid:14)(x, y) (cid:3) 1 − Δfrom Θ1 gives rise to∨ xx−1−Δ < y−Δ−1 < y−2ΔLet Ψ1 and Ψ2 be the sets of linear constraints corresponding to Θ1 and Θ2 respectively. By Proposition 3, itsuffices to show that Ψ1 is P-satisfiable iff Ψ2 is P-satisfiable. Clearly, if I is a P-model of Ψ2, I is also a P-model ofΨ1. Conversely, we show that if I is a P-model of Ψ1, there exists a P-model I(cid:16) of Ψ2. For all variables a occurringin Ψ1, we define I(cid:16)(a) = I(a). Moreover, for additional variables occurring in (93)–(95), I(cid:16) is defined as follows. Foreach k in {2Δ, 3Δ, . . . , 1}, we define(cid:2)x= II(cid:16)(cid:3)(cid:3)(cid:2)−uk−k−Δwhile for each k in {Δ, . . . , 1 − 2Δ, 1 − Δ}, we defineI(cid:16)(cid:3)(cid:2)v−k(cid:2)= Iy−k+Δ(cid:3)Finally, we defineFig. 11. Linear constraints (93)–(95).S. Schockaert, M. De Cock / Artificial Intelligence 172 (2008) 1158–11931181I(cid:16)I(cid:16)(cid:3)(cid:3)(cid:2)u(cid:2)v−Δ−1(cid:3)(cid:3)= I(cid:16)= I(cid:16)(cid:2)−u2Δ(cid:2)−v1−Δ1−Δ) < I(cid:16)(y−Note that I(cid:16)(xI(cid:16)(y1 ) < I(cid:16)(y2Δ). Clearly, I(cid:16) also satisfies (94) and (95), hence I(cid:16) is a P-model of Ψ2. (cid:2)2Δ) implies that I(cid:16) satisfies (93), as I(cid:16)(xΔ ) ∨ I(cid:16)(x−−−−−1−Δ) = I(cid:16)(u−1 ) and I(cid:16)(v−Δ) =To find tractable sets of FI-formulas that are larger than F tX, we can impose restrictions on the variables in the FI-(cid:14)(cid:14)(cid:14)d (x, x) = 0 for any d (cid:3) 0 [41]. Hence, ford (x, x) = ebd (x, x) = ee(cid:14)d (x, x) (cid:2) k is satisfied by any FI-interpretation for every k ∈ M1, while no FI-interpretation can satisfy(cid:14)(cid:14)d (x, x) (cid:2)d (x, x) (cid:2) k1 ∨ ee(cid:14)d (x, y) (cid:2) k2formulas. For example, it can be shown that bbexample, bbbbk2 ∨ bbwill be satisfied by any FI-interpretation.(cid:14)d (z, z) (cid:3) l1}) is still tractable. In the same way, if k1 (cid:2) k2, a formula like bb(cid:14)d (x, x) (cid:3) l for l ∈ M0. Therefore, if φ is an FI-formula from F t(cid:14)d (x, y) (cid:3) k1 ∨ bbX, FISAT(F tX∪ {φ ∨ bbThese extensions of F tX are of limited practical value because of their rather trivial character. More useful tractableextensions can be derived by considering disjunctive FI-formulas that give rise to disjunctive linear constraints whichare Horn. For example, let φ be an FI-formula from F tX and let the corresponding set of linear constraints be given by(cid:14){ρ1, ρ2, . . . , ρs}. An FI-formula like φ ∨ bb−d (y, x) (cid:3) Δ gives rise to the set of linear constraints{α1, α2, . . . , αs}, where(cid:14)d (x, y) (cid:3) Δ ∨ bbαi = ρi ∨ x−∨ yΔ= ρi ∨ x−−Δ < yΔ− d < x−−(cid:9)= yΔΔ− d ∨ x−−∨ yΔ2Δ− d ∨ x−−2Δ < y2Δ− d < x−−(cid:9)= y2Δ2Δ− d ∨ · · · ∨ x−−∨ · · · ∨ y2Δ1− d ∨ · · · ∨ x−−1 < y1− d < x−−(cid:9)= y11− d−1− dIn other words, each αi is a Horn linear constraint (i ∈ {1, 2, . . . , s}), hence FISAT(F tXbb(cid:14)d (y, x) (cid:3) Δ}) is tractable.More generally, let the set GX of FI-formulas be defined as follows:(cid:7)(cid:7)GX ={bb(cid:14)d (x, y) (cid:3) Δ ∨ bb(cid:14)−d (y, x) (cid:3) Δ,∪ {φ ∨ bb(cid:14)d (x, y) (cid:3) Δ ∨(x,y)∈X2d∈Ree(cid:14)d (x, y) (cid:3) Δ ∨ ee(cid:14)−d (y, x) (cid:3) Δ,be(cid:14)d (x, y) (cid:3) 1 ∨ be(cid:14)−d (y, x) (cid:3) 1(cid:5)Furthermore, let HX be recursively defined as followsX, then φ ∈ HX(1) If φ ∈ F t(2) If φ1 ∈ HX and φ2 ∈ GX, then (φ1 ∨ φ2) ∈ HX(3) HX contains no other elementsAs any FI-formula in HX corresponds to a Horn linear constraint, or a set of Horn linear constraints, we have thatFISAT(HX) is tractable.When Δ = 1 (i.e., M = {0, 1}), we know by Proposition 1 that a set of FI-formulas is FI-satisfiable iff there existsan interpretation that assigns a crisp interval to every variable. The set of FI-formulas HX is then exactly equal tothe set of all Horn linear constraints involving the endpoints of these crisp intervals. Hence, for Δ = 1, our (tractable)fuzzy temporal reasoning framework degenerates to reasoning about (Horn) linear constraints. By decreasing the valueof Δ to 15 , . . ., an increasingly higher expressiveness is achieved.4 , 13 , 12 , 17. EntailmentLet Θ be a set of FI-formulas over X, and γ an FI-formula over X. We say that Θ entails γ , written Θ |= γ , iffevery FI-model of Θ is also an FI-model of {γ }. The notion of entailment is important for applications, because it1182S. Schockaert, M. De Cock / Artificial Intelligence 172 (2008) 1158–1193allows to draw conclusions that are not explicitly contained in an initial set of assertions. Obviously, Θ |= γ if Θ and(cid:14)the negation of γ can never be satisfied at the same time. For example, Θ |= bbd (x, y) > k}is not FI-satisfiable. Unfortunately, our procedure for checking FI-satisfiability cannot be applied for strict inequal-(cid:14)d (x, y) > k, as Proposition 1 does not hold in this case. However, for every FIM -interpretation I, weities like bb(cid:14)d (xI , yI ) (cid:3) k + Δ. Inspired by this observation, we say that Θ weakly entails γd (xI , yI ) > k iff bbhave that bb(w.r.t. M), written Θ |=M γ iff every FIM -model of Θ is also an FIM -model of {γ }. Checking weak entailment canstraightforwardly be reduced to checking FI-satisfiability.(cid:14)d (x, y) (cid:2) k iff Θ ∪ {bb(cid:14)Proposition 6. Let Θ be a set of FI-formulas and let r(x, y) be one of bb(d ∈ R, (x, y) ∈ X2). For k in M1 and l in M0 it holds that(1) Θ |=M r(x, y) (cid:3) l iff Θ ∪ {r(x, y) (cid:2) l − Δ} is not FI-satisfiable.(2) Θ |=M r(x, y) (cid:2) k iff Θ ∪ {r(x, y) (cid:3) k + Δ} is not FI-satisfiable.(cid:14)d (x, y), ee(cid:14)d (x, y), be(cid:14)d (x, y) and eb(cid:14)d (x, y)Proof. The proof follows trivially from the fact that for any FIM -interpretation I, r(xI , yI ) < l implies r(xI , yI ) (cid:2)l − Δ and r(xI , yI ) > k implies r(xI , yI ) (cid:3) k + Δ. (cid:2)As the name already suggests, weak entailment is a weaker notion than entailment, i.e., (Θ |= γ ) ⇒ (Θ |=M γ ).Nonetheless, weak entailment can still be used in applications to derive sound conclusions, by virtue of the followingproposition.Proposition 7. Let Θ be a set of FI-formulas and let r(x, y) be one of bb(d ∈ R, (x, y) ∈ X2). For k in M1 \ {1 − Δ} and l in M0 \ {Δ} it holds that(cid:14)d (x, y), ee(cid:14)d (x, y), be(cid:14)d (x, y) and eb(cid:14)d (x, y)(1) If Θ |=M r(x, y) (cid:3) l then Θ |= r(x, y) (cid:3) l − Δ.(2) If Θ |=M r(x, y) (cid:2) k then Θ |= r(x, y) (cid:2) k + Δ.Proof. If Θ |=M r(x, y) (cid:3) l, then by Proposition 6, Θ ∪ {r(x, y) (cid:2) l − Δ} is not FI-satisfiable. Hence in every FI-interpretation of Θ, it holds that r(x, y) > l − Δ, and in particular, r(x, y) (cid:3) l − Δ. The second implication is shownin the same way. (cid:2)In the remainder of this section, we will investigate when weak entailment coincides with entailment, i.e., in whichsituations Proposition 6 also holds for (regular) entailment. Clearly Θ ∪ {φ1 ∨ φ2 ∨ · · · ∨ φn} |= γ iff Θ ∪ {φ1} |= γand Θ ∪ {φ2} |= γ and . . . and Θ ∪ {φn} |= γ . Therefore, we can restrict ourselves to the case where Θ only containsatomic FI-formulas.As we discussed in Section 5, for each set of FI-formulas Θ, we can find a set of linear constraints Ψ which isP-satisfiable iff Θ is FI-satisfiable. If Ψ does not contain any disjunctive linear constraints, we can represent Ψ as a(l ∈ M0). If Ψ contains a linear constraint x + d (cid:2) y,graph G whose nodes correspond to variables like xwe add an edge from the node corresponding with x to the node corresponding with y which is labeled with ((cid:2), d).Similarly, if Ψ contains a linear constraint x + d < y, we add an edge labeled with (<, d). The sum of two labels((cid:2), d1) and ((cid:2), d2) is defined as ((cid:2), d1 + d2), while the sum of (<, d1) and ((cid:2), d2), ((cid:2), d1) and (<, d2), or (<, d1)and (<, d2), is defined as (<, d1 + d2). A cycle for which the edge labels sum up to ((cid:2), d), with d > 0, or to (<, d (cid:16)),with d (cid:16) (cid:3) 0, is called a forbidden cycle. It holds that Ψ is P-satisfiable iff there are no forbidden cycles in G [25]. IfΨ does contain disjunctive linear constraints, every choice of the disjuncts leads to a different graph representation,and Ψ is P-satisfiable as soon as one of these graphs is free of forbidden cycles.−l or x+lIn the following, nodes corresponding to variables like x+l will be called ending nodes. Furthermore, we will sometimes assume that Δ = 1−l will be called beginning nodes, while nodes correspond-2p for some+l will then be called white nodes if l ∈ {2Δ, 4Δ, . . . , 1} and black nodes otherwise.++k+Δ) will be called the left neighbour of xk ), while−l−Δ (resp. x−l or x(resp. x−ling to variables like xp ∈ N \ {0}. Nodes like xFinally, for l ∈ M \ {0, Δ} and k ∈ M1, x−k+Δ (resp. xx+l−Δ) will be called the right neighbour of x−k (resp. x+l ).S. Schockaert, M. De Cock / Artificial Intelligence 172 (2008) 1158–11931183Graphs representing linear constraints derived from a set of FI-formulas exhibit some interesting properties. Inparticular, the following two lemmas will be useful in reducing entailment checking to FI-satisfiability checking, or,equivalently, weak entailment checking.Lemma 3. Let Δ = 12p for some p ∈ N \ {0}, and let Θ be a (finite) set of FI-formulas. Let Ψ be the correspondingset of linear constraints and let G be the graph representation corresponding to a particular choice of disjuncts forthe disjunctive constraints in Ψ . Furthermore, assume that there is a path in G from v to u in which each edgeeither corresponds to a linear constraint of the form (46)–(48), or is the result of an FI-formula in Θ of the form(cid:14)d (x, y) (cid:3) l for some k in {0, 2Δ, 4Δ, . . . , 1 − 2Δ} and l inbb{2Δ, 4Δ, . . . , 1}). Assume, moreover, that:(cid:14)d (x, y) (cid:2) k, or eb(cid:14)d (x, y) (cid:2) k, be(cid:14)d (x, y) (cid:2) k, ee(1) v is a black beginning node and u is a white beginning node, or(2) v is a white ending node and u is a black ending node, or(3) v is a white ending node and u is a white beginning node, or(4) v is a black beginning node and u is a black ending node.It holds that there is a path in G from v to the left neighbour of u, as well as a path from the right neighbour of v to u.Moreover, for both paths, the edge labels sum up to the same value as for the original path.Proof. The proof is presented in Appendix A.3. (cid:2)We define the right (resp. left) neighbour of an edge from v to u as the edge from the right (resp. left) neighbour ofv to the right (resp. left) neighbour of u.Lemma 4. Let Δ = 12p for some p in N \ {0}, and let Θ and Ψ be defined as before. Moreover, assume that all upperand lower bounds in Θ are taken from {0, 2Δ, 4Δ, . . . , 1}. Let I be a P-model of Ψ , and let G1 be the correspondinggraph representation of Ψ without forbidden cycles. Let the graph G2 be constructed from G1 by replacing(1) edges resulting from an FI-formula of the form bbbeginning node;(2) edges resulting from an FI-formula of the form eeending node;(3) edges resulting from an FI-formula of the form bestart from a black beginning node.(cid:14)d (x, y) (cid:3) l by their right neighbour if they start from a black(cid:14)d (x, y) (cid:3) l by their right neighbour if they start from a white(cid:14)d (x, y) (cid:3) l or eb(cid:14)d (x, y) (cid:2) k by their right neighbour if theyIt holds that G2 does not contain any forbidden cycles.Proof. The proof is presented in Appendix A.4. (cid:2)Using Lemmas 3 and 4, we can show the following lemma about FI-satisfiability when all upper and lower boundsare of the form 2iΔ.Lemma 5. Let Δ = 12p for some p in N \ {0}, let Θ be a set of atomic FI-formulas in which all upper and lowerbounds are taken from {0, 2Δ, 4Δ, . . . , 1}. For l in {0, 2Δ, 4Δ, . . . , 1 − 2Δ} and k in {2Δ, 4Δ, . . . , 1}, it holds that:(1) Θ ∪ {bb(2) Θ ∪ {ee(3) Θ ∪ {be(4) Θ ∪ {eb(cid:14)(cid:14)d (x, y) (cid:3) l + 2Δ} is FI-satisfiable;d (x, y) (cid:3) l + Δ} is FI-satisfiable iff Θ ∪ {bb(cid:14)(cid:14)d (x, y) (cid:3) l + 2Δ} is FI-satisfiable;d (x, y) (cid:3) l + Δ} is FI-satisfiable iff Θ ∪ {ee(cid:14)(cid:14)d (x, y) (cid:3) l + 2Δ} is FI-satisfiable;d (x, y) (cid:3) l + Δ} is FI-satisfiable iff Θ ∪ {be(cid:14)(cid:14)d (x, y) (cid:2) k − 2Δ} is FI-satisfiable.d (x, y) (cid:2) k − Δ} is FI-satisfiable iff Θ ∪ {ebProof. The proof is presented in Appendix A.5. (cid:2)1184S. Schockaert, M. De Cock / Artificial Intelligence 172 (2008) 1158–1193Finally, we can show the following characterization of entailment in terms of FI-satisfiability for FI-formulas ofthe form bb(cid:14)d (x, y) (cid:2) k, ee(cid:14)d (x, y) (cid:2) k, be(cid:14)d (x, y) (cid:2) k, and eb(cid:14)d (x, y) (cid:3) l.Proposition 8. Let Θ be a set of atomic FI-formulas. It holds for k in M1 and l in M0 that(1) Θ |= bb(2) Θ |= ee(3) Θ |= be(4) Θ |= eb(cid:14)(cid:14)d (x, y) (cid:3) k + Δ} is not FI-satisfiable;d (x, y) (cid:2) k iff Θ ∪ {bb(cid:14)(cid:14)d (x, y) (cid:3) k + Δ} is not FI-satisfiable;d (x, y) (cid:2) k iff Θ ∪ {ee(cid:14)(cid:14)d (x, y) (cid:3) k + Δ} is not FI-satisfiable;d (x, y) (cid:2) k iff Θ ∪ {be(cid:14)(cid:14)d (x, y) (cid:2) l − Δ} is not FI-satisfiable.d (x, y) (cid:3) l iff Θ ∪ {ebProof. As an example, we show that Θ |= bbif Θ ∪ {bbis an FI-model of Θ which does not satisfy bb(cid:14)d (x, y) (cid:3) k + Δ} is FI-satisfiable, then Θ (cid:9)|= bbLet I be an FI-model of Θ, and assume that bb2n . Obviously, we have that Θ ∪ {bb(cid:14)d (x, y) (cid:3) k + Δk + Δobtain using Lemma 5 that Θ ∪ {bb(cid:14)d (x, y) (cid:3) k + ΔΘ ∪ {bb2n−2k + Δ} is FI-satisfiable. (cid:2)(cid:14)(cid:14)(cid:14)d (x, y) (cid:2) k iff Θ ∪ {bbd (x, y) (cid:3) k + Δ} is not FI-satisfiable. Clearly,(cid:14)d (x, y) (cid:2) k. Therefore, we only need to show that if there(cid:14)d (x, y) (cid:2) k, it holds that Θ ∪ {bbd (xI , yI ) > k. There exists an n in N such that bb(cid:14)d (x, y) (cid:3) k + Δ} is FI-satisfiable.d (xI , yI ) (cid:3)2n play the role of Δ, we} is FI-satisfiable. Again applying Lemma 5 reveals that also(cid:14)d (x, y) (cid:3)2n } is FI-satisfiable. By letting Δ(cid:14)} is FI-satisfiable. By repeating this argument n times, we find that Θ ∪ {bb(cid:14)d (x, y) (cid:3) k + Δ2n−1To find a characterization of entailment for FI-formulas of the form bb(cid:14)d (x, y) (cid:3) l, be(cid:14)d (x, y) (cid:2) k, we restrict ourselves to the case where Θ only contains FI-formulas from F tX.(cid:14)d (x, y) (cid:3) l, eeand eb(cid:14)d (x, y) (cid:3) l,Lemma 6. Let Δ = 1X in which all upper and lowerbounds are taken from {0, 2Δ, 4Δ, . . . , 1}. For l in {0, 2Δ, 4Δ, . . . , 1 − 2Δ} and k in {2Δ, 4Δ, . . . , 1}, it holds that:2p for some p ∈ N \ {0}, let Θ be a set of FI-formulas from F t(1) Θ ∪ {be(2) Θ ∪ {eb(cid:14)(cid:14)d (x, y) (cid:2) k − 2Δ} is FI-satisfiable;d (x, y) (cid:2) k − Δ} is FI-satisfiable iff Θ ∪ {be(cid:14)(cid:14)d (x, y) (cid:3) l + 2Δ} is FI-satisfiable.d (x, y) (cid:3) l + Δ} is FI-satisfiable iff Θ ∪ {ebMoreover, for k in {4Δ, 6Δ, . . . , 1}, it holds that(1) Θ ∪ {bb(2) Θ ∪ {ee(cid:14)(cid:14)d (x, y) (cid:2) k − 2Δ} is FI-satisfiable;d (x, y) (cid:2) k − Δ} is FI-satisfiable iff Θ ∪ {bb(cid:14)(cid:14)d (x, y) (cid:2) k − 2Δ} is FI-satisfiable.d (x, y) (cid:2) k − Δ} is FI-satisfiable iff Θ ∪ {eeProof. The proof is presented in Appendix A.6. (cid:2)Note that the FI-satisfiability of Θ ∪ {bbFI-satisfiable. For example, for d (cid:16) + d > 0, it holds that {bb{bb{ee(cid:14)(cid:14)d (x, y) (cid:2) 0} is not. Similarly, we have that {eed(cid:16) (y, x) (cid:2) 0, bb(cid:14)(cid:14)d (x, y) (cid:2) 0} is not.d(cid:16) (y, x) (cid:2) 0, e(cid:14)d (x, y) (cid:2) Δ} does not necessarily imply that Θ ∪ {bb(cid:14)d(cid:16) (y, x) (cid:2) 0, bb(cid:14)d(cid:16) (y, x) (cid:2) 0, ee(cid:14)d (x, y) (cid:2) 0} is(cid:14)d (x, y) (cid:2) Δ} is FI-satisfiable, while(cid:14)d (x, y) (cid:2) Δ} is FI-satisfiable andProposition 9. Let Θ be a set of atomic FI-formulas from F tX. For k in M1 and l in M0, it holds that(1) Θ |= be(2) Θ |= eb(cid:14)d (x, y) (cid:3) l iff Θ ∪ {be(cid:14)d (x, y) (cid:2) k iff Θ ∪ {eb(cid:14)d (x, y) (cid:2) l − Δ} is not FI-satisfiable;(cid:14)d (x, y) (cid:3) k + Δ} is not FI-satisfiable.Moreover, for l in M0 \ {Δ}, it holds that(1) Θ |= bb(2) Θ |= ee(cid:14)(cid:14)d (x, y) (cid:2) l − Δ} is not FI-satisfiable;d (x, y) (cid:3) l iff Θ ∪ {bb(cid:14)(cid:14)d (x, y) (cid:2) l − Δ} is not FI-satisfiable.d (x, y) (cid:3) l iff Θ ∪ {eeS. Schockaert, M. De Cock / Artificial Intelligence 172 (2008) 1158–11931185Proof. The proof is entirely analogous to the proof of Proposition 8, using Lemma 6 instead of Lemma 5. (cid:2)Proposition 9 does not hold in general when Θ contains atomic FI-formulas from FX \ F tX. As a counterex-ample, let Δ = 0.25 and Θ = {bb(cid:14)(a, e) (cid:3) 0.75, bb(cid:14)(d, g) (cid:3) 0.75, bb(cid:14)(e, f ) (cid:3) 1, bb(cid:14)(b, c) (cid:3) 1, bb(cid:14)(b, a) (cid:2)0.5, bb(cid:14)(d, c) (cid:2) 0.5, bb(cid:14)(g, f ) (cid:2) 0.5, bb(cid:14)(d, e) (cid:2) 0.75}. It holds that Θ ∪ {bb(cid:14)(a, g) (cid:2) 0.375} is FI-satisfiable,implying that Θ (cid:9)|= bb(cid:14)(a, g) (cid:3) 0.5, whereas Θ ∪ {bb(cid:14)(a, g) (cid:2) 0.25} is not FI-satisfiable.Note that Proposition 9 provides no characterization of entailment for the case where bb(cid:14)d (x, y) (cid:3) Δ. However, to check entailment for bb(cid:14)d (x, y) (cid:3) Δ or(cid:14)d (x, y) (cid:3) Δ, we can always redefine theee2 , 1}, i.e., we let Δset M as {0, Δ2 , Δ, . . . , 1 − Δ2 play the role of Δ. Also note that from Propositions 8 and 9, it fol-lows that the tractability of F tX w.r.t. FI-satisfiability carries over to entailment checking. Indeed, if Θ only containsX, Θ |= γ can be checked by checking the FI-satisfiability of a set of FI-formulas which containsFI-formulas from F tat most one FI-formula which is not in F tX. Although this one FI-formula may correspond to a disjunctive linearconstraint, the number of disjuncts is bounded by |M|. Therefore, FI-satisfiability can be checked in polynomial time,using O(|M|) P-satisfiability checks of sets of linear constraints without disjuncts.(cid:14)d (x, y) (cid:3) Δ or eeIn addition to entailment checking, it may also be of interest to know what the strongest upper bound or lower(cid:14)d (x, y), given that a set of FI-formulas Θ is satisfied.(cid:14)(cid:14)d (x, y), asd (x, y) and bebound is for the value of bbAs a corollary of Proposition 8, we find that the strongest upper bound of bb(cid:14)d (x, y), is always a value from M:well as the strongest lower bound of eb(cid:14)d (x, y) or eb(cid:14)d (x, y), ee(cid:14)d (x, y), be(cid:14)d (x, y), eeCorollary 1. Let Θ be a set of atomic FI-formulas. It holds that (d ∈ R, (x, y) ∈ X2)(cid:4)(cid:14)= mind (x, y) (cid:2) kk | k ∈ M ∧ Θ |= bb(cid:4)(cid:5)(cid:14)= mind (x, y) (cid:2) kk | k ∈ M ∧ Θ |= ee(cid:4)(cid:14)d (x, y) (cid:2) kk | k ∈ M ∧ Θ |= be= min(cid:4)(cid:5)(cid:14)d (x, y) (cid:3) kk | k ∈ M ∧ Θ |= eb= max(cid:4)k | k ∈ [0, 1] ∧ Θ |= bbinf(cid:4)k | k ∈ [0, 1] ∧ Θ |= eeinf(cid:4)k | k ∈ [0, 1] ∧ Θ |= beinf(cid:4)k | k ∈ [0, 1] ∧ Θ |= eb(cid:14)d (x, y) (cid:2) k(cid:5)(cid:14)d (x, y) (cid:2) k(cid:14)d (x, y) (cid:2) k(cid:14)d (x, y) (cid:3) ksup(cid:5)(cid:5)(cid:5)(cid:5)(cid:5)In the same way, as a corollary of Proposition 9, we can establish the strongest lower bound of bb(cid:14)d (x, y) and be(cid:14)d (x, y), as well as the strongest upper bound of eb(cid:14)d (x, y),(cid:14)d (x, y), given that a set of atomic FI-formulaseefrom F tX is satisfied.(cid:5)(cid:4)= max(cid:4)= minX. It holds that (d ∈ R, (x, y) ∈ X2)(cid:14)d (x, y) (cid:3) kk | k ∈ M ∧ Θ |= be(cid:5)(cid:14)d (x, y) (cid:2) kk | k ∈ M ∧ Θ |= eb(cid:14)d (x, y) (cid:3) Δ or Θ ∪ {ee(cid:5)(cid:14)d (x, y) (cid:2) 0} is FI-satisfiable, resp. Θ |= ee(cid:14)d (x, y) (cid:2) 0}Corollary 2. Let Θ be a set of atomic FI-formulas from F t(cid:4)(cid:14)k | k ∈ [0, 1] ∧ Θ |= bed (x, y) (cid:3) ksup(cid:4)(cid:5)(cid:14)k | k ∈ [0, 1] ∧ Θ |= ebd (x, y) (cid:2) kinf(cid:14)d (x, y) (cid:3) Δ or Θ ∪ {bbIf Θ |= bbis FI-satisfiable, it holds that(cid:4)k | k ∈ [0, 1] ∧ Θ |= bb(cid:4)k | k ∈ [0, 1] ∧ Θ |= eesupsup(cid:14)d (x, y) (cid:3) k(cid:5)(cid:14)d (x, y) (cid:3) k(cid:5)(cid:14)d (x, y) (cid:3) kk | k ∈ M ∧ Θ |= bb(cid:5)(cid:14)d (x, y) (cid:3) kk | k ∈ M ∧ Θ |= ee(cid:4)= max(cid:4)= max(cid:14)d (x, y) (cid:2) 0} is not FI-satisfiable, resp. Θ |= ee(cid:5)(cid:14)d (x, y) (cid:3) Δ while(cid:14)d (x, y) (cid:3) Δ while Θ ∪ {bbFinally, if Θ |= bb(cid:14)d (x, y) (cid:2) 0} is not FI-satisfiable, it holds that in any FI-model I of ΘΘ ∪ {ee(cid:14)d(cid:2)(cid:14)xd(cid:2)xII (cid:3)I (cid:3)> 0> 0bb, y, yeeIwhile for any k > 0, there exists an FI-model I of Θ in whichI(cid:2)xI(cid:14)d(cid:2)(cid:14)xdbbee, y, yI (cid:3)I (cid:3)< k< kIn other words, in this last case, the strongest lower bound implied by Θ is a strict lower bound.1186S. Schockaert, M. De Cock / Artificial Intelligence 172 (2008) 1158–1193As becomes clear from Corollary 1 and 2, finding the strongest upper and lower bounds on bb(cid:14)d (x, y), or eb(cid:14)d (x, y) implied by Θ can be done by O(log(|M|)) FI-satisfiability checks, using binary search.(cid:14)d (x, y), ee(cid:14)d (x, y),be8. Concluding remarksIn this paper, we have shown how temporal reasoning about fuzzy time intervals can be reduced to reasoning aboutlinear constraints. An important advantage of this approach is that we can draw upon well-established results forsolving disjunctive temporal reasoning problems, as well as reuse existing, optimized tools for crisp temporal reason-ing. The problem of satisfiability checking was shown to be NP-complete. Hence, introducing vagueness in temporalreasoning does not increase the computational complexity. Moreover, an important tractable subfragment HX wasidentified in this paper, which for Δ = 1 degenerates to the well-known framework of Horn linear constraints. In gen-eral, for Δ = 1 our framework degenerates to reasoning about crisp intervals, i.e., if only 0 and 1 are used as upper andlower bounds, a set of FI-formulas can be satisfied by fuzzy time intervals iff it can be satisfied by crisp intervals. ForΔ = 0.5, the framework degenerates to reasoning about three valued intervals. Such intervals can be represented as apair of crisp intervals (a, a), where a contains the dates which fully belong to the vague time period and a containsthe dates which at least belong to the vague time period to some extent (a ⊆ a). This essentially corresponds to atemporal counterpart of the Egg-Yolk calculus [11] for spatial reasoning about vague regions. Further decreasing thevalue of Δ leads to an increasingly higher expressiveness, requiring, however, an increasing amount of computationtime.In contrast to crisp temporal reasoning frameworks, entailment checking in our framework cannot straightforwardlybe reduced to satisfiability checking. To cope with this, we have introduced the notion of weak entailment, which canbe used to derive sound conclusions. Next, we have investigated in Propositions 8 and 9 how entailment relates toweak entailment. Finally, we have discussed how the strongest upper and lower bound on the possible values of afuzzy temporal relation, applied to a particular pair of variables, can be obtained.Our work is complementary to existing approaches for fuzzy temporal reasoning, which have focused on modellingpossibilistic uncertainty and preferences (e.g., [4]). An interesting direction for future work might be to combine ourframework with, for example, the IAfuz framework from [4] to allow temporal reasoning with uncertain informationabout vague time periods, or with fuzzy temporal constraint networks to allow imprecise metric constraints like “Ahappened about three weeks before B”. Further investigation is also needed to optimize the reasoning procedures.Properties about the specific structure of the linear constraints that arise from a set of FI-formulas may be very usefulto prune the search space.Appendix A. ProofsA.1. Proof of Lemma 1First, we consider (12):bb(cid:3)(cid:3)IWTW(cid:2)B(q), L(cid:2)(cid:14)d (A, B) (cid:3) l ⇔ supA(p), infq∈Rp∈R(cid:2)(cid:2)⇔ (∀ε > 0)A(p), infq∈R(cid:2)(cid:2)⇔ (∀ε > 0)(∃p ∈ R)A(p), infTWq∈R(cid:14)d (p, q))) = 0. Therefore, we can assume that A(p) > 0. Hence,(cid:14)d (p, q)(cid:2)B(q), L(cid:2)> l − ε(cid:3)(cid:3)(cid:14)d (p, q)(cid:14)d (p, q)> l − εB(q), Lsupp∈R(cid:3) lTWIWIW(cid:3)(cid:3)(cid:3)(cid:3)If A(p) = 0, it holds that T (A(p), infq∈R IT (B(q), Lthere must exist a λ in ]0, 1] such that λ = A(p) and thus p ∈ Aλ:(cid:14)d (p, q)(cid:2)B(q), LTW(cid:2)λ, infq∈R(cid:3)(cid:2)∃λ ∈ ]0, 1]⇔ (∀ε > 0)(cid:3)(cid:2)∃λ ∈ ]0, 1]⇔ (∀ε > 0)(cid:3)(cid:2)∃λ ∈ ]0, 1]⇔ (∀ε > 0)(cid:2)(∃p ∈ Aλ)(cid:2)(∃p ∈ Aλ)(cid:2)(∃p ∈ Aλ)IW(cid:2)B(q), L(cid:3)(cid:14)d (p, q)(cid:3)(cid:14)d (p, q)IWλ + infq∈R(cid:2)B(q), LIWinfq∈R(cid:3)(cid:3)(cid:3)> l − ε− 1 > l − ε(cid:3)(cid:3)> l + 1 − λ − εS. Schockaert, M. De Cock / Artificial Intelligence 172 (2008) 1158–11931187(cid:14)d (p, q) is lower semi-continuous, the mapping defined by IW (B(q), LAs any fuzzy time interval is upper semi-continuous, the mapping defined by 1 − B(q) for each q in R is lower semi-(cid:14)d (p, q)) for eachcontinuous. Moreover, as L(cid:14)d (p, q)) is attained for some q in R.q in R is lower semi-continuous as well. Hence, the infimum infq∈R IW (B(q), LWe therefore find:(cid:2)(cid:3)(cid:2)∃λ ∈ ]0, 1]⇔ (∀ε > 0)IW(cid:14)d (p, q)) > l + 1 − λ − ε can never be satisfied, hence:(cid:2)For λ (cid:2) l − ε, IW (B(q), L(∃p ∈ Aλ)(∀q ∈ R)(cid:3)(cid:14)d (p, q)> l + 1 − λ − ε(cid:2)B(q), L(cid:3)(cid:3)(cid:3)(cid:2)(∃p ∈ Aλ)(∀q ∈ R)∃λ ∈ ]l − ε, 1]⇔ (∀ε > 0)(cid:14)d (p, q)) = 1, while IW (B(q), L(cid:14)d (p, q) = 1, then IW (B(q), L(cid:2)B(q), LIW> l + 1 − λ − ε(cid:3)(cid:14)d (p, q)(cid:14)d (p, q)) = 1 − B(q) if L(cid:14)d (p, q) = 0. We therebyIf Lobtain:(cid:3)(cid:2)(∃p ∈ Aλ)(∀q ∈ R)∃λ ∈ ]l − ε, 1]⇔ (∀ε > 0)(cid:3)(cid:2)(∃p ∈ Aλ)(∀q ∈ R)∃λ ∈ ]l − ε, 1]⇔ (∀ε > 0)(cid:2)(cid:2)LL(cid:14)d (p, q) = 1 ∨ 1 − B(q) > l + 1 − λ − ε(cid:14)d (p, q) = 1 ∨ ¬(cid:2)B(q) (cid:3) λ + ε − l(cid:3)(cid:3)(cid:3)If ε > l, then ¬(B(q) (cid:3) λ + ε − l)) can always be satisfied by choosing λ = 1. This yields:⇔⇔⇔⇔(cid:2)∀ε ∈ ]0, l](cid:2)∀ε ∈ ]0, l](cid:2)∀ε ∈ ]0, l](cid:2)∀ε ∈ ]0, l](cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(∃p ∈ Aλ)(∀q ∈ R)∃λ ∈ ]l − ε, 1](cid:3)(∃p ∈ Aλ)(∀q ∈ R)∃λ ∈ ]l − ε, 1](cid:3)(cid:2)(∃p ∈ Aλ)(∀q ∈ R)∃λ ∈ ]l − ε, 1](cid:3)(cid:2)(cid:3)(cid:14)∃λ ∈ ]l − ε, 1]bbd (Aλ, Bλ+ε−l)(cid:2)B(q) (cid:3) λ + ε − l(cid:2)L(cid:2)Lq ∈ Bλ+ε−l ⇒ L(cid:14)d (p, q) = 1 ∨ ¬(cid:3)(cid:14)d (p, q) = 1 ∨ ¬(q ∈ Bλ+ε−l)(cid:14)d (p, q) = 1(cid:3)(cid:3)(cid:3)proving (12).Turning now to (13), we find:bb(cid:2)(cid:14)d (A, B) (cid:2) k ⇔ supA(p), infq∈Rp∈R(cid:2)(cid:2)⇔ (∀p ∈ R)TWA(p), infq∈RTWIW(cid:2)B(q), L(cid:3)(cid:3)(cid:14)d (p, q)(cid:2) k(cid:2)B(q), LIW(cid:3)(cid:3)(cid:14)d (p, q)(cid:3)(cid:2) k(A.1)If A(p) = 0, then TW (A(p), infq∈R IW (B(q), Lshow that for every p satisfying A(p) > 0, it holds that TW (A(p), infq∈R IW (B(q), Lto show that for every λ ∈ ]0, 1] and every p in Aλ:(cid:2)(cid:2)(∀p ∈ Aλ)B(q), LTW(cid:3)(cid:2)∀λ ∈ ]0, 1](cid:14)d (p, q))) (cid:2) k is trivially satisfied. Consequently, it is sufficient to(cid:14)d (p, q))) (cid:2) k, or equivalently,(cid:2) kIW⇔(cid:3)(cid:3)(cid:3)(cid:14)d (p, q)(cid:2)A(p), infq∈Rwhich implies(cid:3)(cid:2)(cid:2)(∀p ∈ Aλ)∀λ ∈ ]0, 1]TW(cid:2)λ, infq∈R(cid:2)B(q), LIW(cid:3)(cid:3)(cid:14)d (p, q)(cid:3)(cid:2) ksince p ∈ Aλ means that A(p) (cid:3) λ. Conversely, we also have that (A.3) implies (A.2). Indeed, if (A.2) is violated,(cid:14)d (p0, q))) > k for some λ0 ∈ ]0, 1] and some p0 ∈ Aλ0 , then (A.3) is violated fori.e., TW (A(p0), infq∈R IW (B(q), Lλ = A(p0) and p = p0. We conclude that (A.1) is equivalent to (A.3). We furthermore find(cid:14)d (p, q)(cid:2)B(q), L(cid:2) k(cid:2) kIW⇔(cid:3)(cid:3)(cid:3)(cid:3)(cid:3)(cid:3)(cid:14)d (p, q)(cid:2)(cid:2)(cid:2)(∀p ∈ R)TWA(p), infB(q), Lq∈R(cid:3)(cid:2)(cid:2)(cid:2)(∀p ∈ Aλ)∀λ ∈ ]0, 1]λ, infq∈R(cid:3)(cid:2)(cid:2)(∀p ∈ Aλ)∀λ ∈ ]0, 1](cid:3)(cid:2)(cid:2)(∀p ∈ Aλ)∀λ ∈ ]0, 1]λ + infq∈R(cid:2)B(q), LTWIWIW⇔⇔IW(cid:2)B(q), Linfq∈R(cid:3)(cid:14)d (p, q)(cid:3)(cid:14)d (p, q)− 1 (cid:2) k(cid:3)(cid:3)(cid:2) 1 − λ + kIf λ (cid:2) k, then IW (B(q), L(cid:14)d (p, q)) (cid:2) 1 − λ + k is trivially satisfied. Therefore, we have(A.2)(A.3)1188S. Schockaert, M. De Cock / Artificial Intelligence 172 (2008) 1158–1193(cid:3)(cid:2) 1 − λ + k(cid:3)(cid:2)(cid:2)(cid:2)(cid:2)(cid:2)(cid:2)(cid:2)(cid:2)(cid:2)⇔⇔⇔⇔⇔⇔⇔⇔⇔(cid:3)LIWinfq∈R(cid:2) 1 − λ + k(cid:3)(cid:14)d (p, q)(cid:2)(∀p ∈ Aλ)(cid:2)(cid:3)∀λ ∈ ]k, 1]B(q), L(cid:3)(cid:2)(cid:2)(cid:3)(cid:14)∀λ ∈ ]k, 1](∀p ∈ Aλ)(∃q ∈ R)B(q), LIWd (p, q)(cid:3)(cid:2)(cid:14)∀λ ∈ ]k, 1](∀p ∈ Aλ)(∃q ∈ R)d (p, q) = 0 ∧ B(q) (cid:3) λ − k(cid:3)(cid:2)(cid:14)∀λ ∈ ]k, 1](∀p ∈ Aλ)(∃q ∈ R)d (p, q) = 0 ∧ q ∈ Bλ−kL(cid:3)(cid:2)(cid:14)∀λ ∈ ]k, 1](∀p ∈ Aλ)(∃q ∈ Bλ−k)d (p, q) = 0L(cid:3)(cid:2)(cid:2)(cid:14)(∀p ∈ Aλ)(∃q ∈ Bλ−k)∀λ ∈ ]k, 1]d (p, q) = 1¬L(cid:2)(cid:9)(cid:2)(cid:14)¬(∃p ∈ Aλ)(∀q ∈ Bλ−k)∀λ ∈ ]k, 1d (p, q) = 1)L(cid:3)(cid:2)(cid:3)(cid:14)¬bb∀λ ∈ ]k, 1]d (Aλ, Bλ−k)(cid:3)(cid:4)d (Bλ−k, Aλ)∀λ ∈ ]k, 1]bb(cid:3)(cid:2)(cid:3)(cid:3)(cid:3)(cid:3)(cid:3)(cid:3)which proves (13). The characterizations (14)–(19) can be shown in the same way as (12) or (13).A.2. Proof of Lemma 2By definition of bbbb(cid:14)d (A, B) = supp∈R= max(cid:14)d , we obtain(cid:2)A(p), infq∈R(cid:2)A(p), infq∈RTW(cid:2)supp(cid:3)mb−dIW(cid:2)B(q), LTW(cid:2)A(p), infq∈RTWsupp<mb−d(cid:3)(cid:3)(cid:14)d (p, q)(cid:2)B(q), LIW(cid:2)B(q), LIW(cid:14)d (p, q)(cid:3)(cid:3),(cid:3)(cid:3)(cid:3)(cid:14)d (p, q)From the convexity of B, we establish that B is increasing for values smaller than mb and decreasing for values greaterthan mb. Hence, we obtain(cid:2)B(q), L(cid:14)d (p, p + d))=(cid:6)(cid:3)(cid:14)d (p, q)IW (B(p + d), L(cid:14)d (p, mb))IW (B(mb), Lif p < mb − dif p (cid:3) mb − dIWinfq∈RWe thus find(cid:2)max(cid:2)A(p), infq∈RTW(cid:2)B(q), LIW(cid:14)d (p, q)(cid:3)(cid:3),(cid:2)A(p), infq∈RTW(cid:2)B(q), LIW(cid:3)(cid:3)(cid:3)(cid:14)d (p, q)(cid:2)B(p + d), L(cid:3)(cid:3)(cid:3)(cid:14)d (p, p + d)supp(cid:3)mb−d(cid:2)= max(cid:2)= max(cid:2)= max= supp<mb−dsupp<mb−d(cid:3)(cid:3),supp(cid:3)mb−dsupp(cid:3)mb−dTWTW(cid:2)(cid:2)B(mb), LA(p), IW(cid:2)(cid:3)A(p), IW (1, 0),(cid:3)(cid:2),A(p), 0(cid:14)d (p, mb)(cid:2)A(p), IWsupp<mb−d(cid:2)B(p + d), 0(cid:2)A(p), IW(cid:3)(cid:3)(cid:3)TWTWsupp<mb−d(cid:2)A(p), 1 − B(p + d)TW(cid:3)(cid:3)TWsupp(cid:3)mb−d(cid:3)(cid:2)A(p), 1 − B(p + d)supp<mb−dTWDue to its convexity, A is increasing for values smaller than ma and decreasing for values greater than ma. Hence ifp < mb − d and p > ma, it holds that TW (A(p), 1 − B(p + d))) (cid:2) TW (A(ma), 1 − B(ma + d)). Therefore, we havethat(cid:3)(cid:2)A(p), 1 − B(p + d)supp<mb−dTW=supp<mb−d,p(cid:2)maTW(cid:3)(cid:2)A(p), 1 − B(p + d)proving (20). Eq. (21) is shown entirely analogously.S. Schockaert, M. De Cock / Artificial Intelligence 172 (2008) 1158–11931189A.3. Proof of Lemma 3As an example, we show that there is a path from v to the left neighbour of u when v is a black beginning nodeand u is a white beginning node. Let v0 = v, v1, v2, . . . , vn = u be a path in G from v to u. If an edge from vj(cid:14)d (x, y) (cid:2) k, withto vj +1 in G corresponds to a linear constraint that is the result of an FI-formula of the form bbk ∈ {0, 2Δ, 4Δ, . . . , 1 − 2Δ}, then vj and vj +1 are either both white beginning nodes, or both black beginning nodes.(cid:14)d (x, y) (cid:2) k, vj and vj +1 are both white ending nodes or bothIf this edge is the result of an FI-formula of the form ee(cid:14)d (x, y) (cid:2) k, orblack ending nodes. Finally, if the edge from vj to vj +1 is the result of an FI-formula of the form be(cid:14)d (x, y) (cid:3) l, with l ∈ {2Δ, 4Δ, . . . , 1}, either vj is a white ending node and vj +1 a blackan FI-formula of the form ebbeginning node, or vj is a black ending node and vj +1 a white beginning node. The only remaining possibility is thatthe edge from vj to vj +1 corresponds to a linear constraint of the form (46)–(48).First assume that none of the edges on the path from v to u corresponds to a linear constraint of the form (46)–(48). Then all of the nodes v1, . . . , vn−1 need to be beginning nodes, as none of the remaining types of edges startsat a beginning node and ends at an ending node. This means that all edges (v0, v1), (v1, v2), . . . , (vn−1, vn) would(cid:14)d (x, y) (cid:2) k. Thus, from the fact thatcorrespond to a linear constraint that is the result of an FI-formula of the form bbv is a black node, we establish that v1, v2, . . . , vn are all black nodes. This, however, is not possible since u = vn is awhite beginning node.Hence, at least one of the edges corresponds to a linear constraint of the form (46)–(48). Let (vs, vs+1) be the lastof these edges. If (vs, vs+1) corresponds to an edge of the form (46), vs+1 is a white ending node. Then all edges(cid:14)d (x, y) (cid:3) l. Thisbetween vs+1 and vn correspond to FI-formulas of the form eewould imply that the nodes vs+2, vs+3, . . . , vn are all white ending nodes or black beginning nodes. This, however, isnot possible since u = vn is a white beginning node. Therefore, (vs, vs+1) has to correspond to either (47) or (48). Inboth cases, vs+1 is the right neighbour of vs , and the path v0, v1, . . . , vs, v(cid:16)i denotes the leftneighbour of vi , is a path from v to the left neighbour v(cid:16)s+3, . . . , v(cid:16)n are thesame as those of vs+2, vs+3, . . . , vn (i.e., ((cid:2), 0)), and the edge label of (vs, vs+1) is ((cid:2), 0), which adds nothing to thesum of the edge labels on the original path.n of u. Moreover, the edge labels of v(cid:16)(cid:14)d (x, y) (cid:2) k, or ebn, where v(cid:16)s+2, v(cid:16)(cid:14)d (x, y) (cid:2) k, bes+3, . . . , v(cid:16)s+2, v(cid:16)A.4. Proof of Lemma 4Assume that G2 contains a forbidden cycle v1, v2, . . . , vn, v1, and let (vr , vr+1) be an edge in G2 that does notoccur in G1. Then (vr , vr+1) is the right neighbour of the edge (v(cid:16)r , v(cid:16)r+1) from G1.(cid:14)d (x, y) (cid:3) l, be(cid:14)d (x, y) (cid:3) l or ebMoreover, first assume that vr is a white beginning node and vr+1 is a black beginning node. Suppose that the(cid:14)d (x, y) (cid:3) l,edge from vr to vr+1 is the only edge in the cycle that corresponds to an FI-formula of the form bb(cid:14)d (x, y) (cid:2) k. This means that the path vr+1, vr+2, . . . , vn, v1, . . . , vr in G2 alsoeeexists in G1. Indeed, none of the constraints on the edges of this path fulfills the conditions for replacement in theconstruction process of G2 from G1. Furthermore, all of the constraints on the edges of this path fulfill the conditionsof Lemma 3. Hence, we establish that in G1 there is a path from vr+1 to v(cid:16)r whose edge labels sum up to the samevalue as the edge labels of the path vr+1, vr+2, . . . , vr−1, vr . This would mean that G1 contains the forbidden cycler to v(cid:16)consisting of the path from vr+1 to v(cid:16)r+1 to vr+1. Note that the latteredge exists since v(cid:16)r+1 and the edge from v(cid:16)r , the edge from v(cid:16)r+1 is the left neighbour of vr+1.(cid:14)d (x, y) (cid:3) l or ebTherefore, at least two edges in the forbidden cycle have to correspond to an FI-formula of the form bb(cid:14)d (x, y) (cid:3) l, be(cid:14)d (x, y) (cid:3) l,(cid:14)d (x, y) (cid:2) k. Let the edge from vs to vs+1 be the first such edge in the forbiddeneecycle after vr+1, and let the edge from vt to vt+1 be the last such edge in the forbidden cycle before vr (where r + 1 = sor t + 1 = r are also allowed). Fig. A.1 depicts the forbidden cycle. It holds that vs is either a white beginning nodeor a black ending node, because of the way we transformed G1 to G2. In both cases, we can establish by Lemma 3that there is a path from vr+1 to the left neighbour v(cid:16)s of vs whose edge labels sum up to the same value as those ofthe path from vr+1 to vs . In the same way, we have by construction of G2 that vt+1 is either a black beginning nodeor a white ending node. From Lemma 3, we obtain that there is a path from vt+1 to v(cid:16)r , whose edge labels sum up tothe same value as those of the path from vt+1 to vr .Thus we have established that the forbidden cycle in G2 is independent from the fact that the edge (v(cid:16)r+1) inG1 was replaced by (vr , vr+1). In a similar way, we can show this result when vr is a black ending node and vr+1r , v(cid:16)1190S. Schockaert, M. De Cock / Artificial Intelligence 172 (2008) 1158–1193Fig. A.1. The forbidden cycle in G2 is independent from the fact that the edge (v(cid:16)r , v(cid:16)r+1) in G1 was replaced by (vr , vr+1).is a white ending node, or when vr is a white beginning node and vr+1 is a white ending node. We can repeat thisargument for every edge that was changed in the transformation from G1 to G2. Hence, if G2 contained a forbiddencycle, then G1 would contain a forbidden cycle as well.A.5. Proof of Lemma 5As an example, we show that Θ ∪ {bb(cid:14)d (x, y) (cid:3) l + Δ} is FI-satisfiable iff Θ ∪ {bb(cid:14)d (x, y) (cid:3) l + 2Δ} is FI-satisfiable. If Θ is not FI-satisfiable, or x or y does not occur in the FI-formulas in Θ, the proof is trivial. There-fore, assume that Θ is FI-satisfiable and contains both FI-formulas involving x and FI-formulas involving y. If(cid:14)d (x, y) (cid:3) l + 2Δ} is not FI-satisfiable either.Θ ∪ {bb(cid:14)d (x, y) (cid:3) l + Δ} cannotHence, we only need to show that if Θ ∪ {bbbe FI-satisfiable.(cid:14)d (x, y) (cid:3) l + Δ} is not FI-satisfiable, then clearly Θ ∪ {bb(cid:14)d (x, y) (cid:3) l + 2Δ} is not FI-satisfiable, Θ ∪ {bbLet Ψ be the set of linear constraints corresponding to the FI-formulas in Θ, and let I be a P-model of Ψ . Thelinear constraint corresponding to bb−2Δ−l+2Δ < y−l+Δ < y− d ∨ x−Δx(cid:14)d (x, y) (cid:3) l + Δ is given by:−− d− d ∨ · · · ∨ x1 < y−1−l(A.4)while the linear constraint corresponding to bb(cid:14)d (x, y) (cid:3) l + 2Δ is given byx−Δ−2Δ− d(A.5)− d ∨ x−1 < y−1−l−Δ−2Δ to xIf Θ ∪ {bb−l+3Δ < y− d ∨ · · · ∨ x−l+2Δ, a path from y−l+2Δ < y(cid:14)d (x, y) (cid:3) l + 2Δ} is not FI-satisfiable, a forbidden cycle emerges when adding an edge corresponding toany of the disjuncts of (A.5) to the graph representation of Θ which corresponds with I. This means that any P-modelof Θ will correspond to a choice of disjuncts that leads to a graph representation G of Θ in which there is a path from−−Δ to xyl+(2+i)Δ sum upto a value (di, (cid:2)) or (di, <) such that di + d (cid:3) 0 (i ∈ {0, 1, 2, . . . , 1−lΔ−l+3Δ, etc. Moreover, the edge labels of the path from yWe now transform the graph G to a graph G(cid:16) by applying the transformation from Lemma 4. The changing ofedges in this transformation corresponds to choosing different disjuncts for the disjunctive linear constraints in Ψ .As this transformation cannot introduce forbidden cycles, the graph G(cid:16) corresponds to a P-model of Ψ . Therefore G(cid:16)−contains a path from yl+2Δ be−a path from yl+2Δ.l+(2+i)Δ for every i in {0, 1, 2, . . . , 1−l= v0, v1, v2, . . . , vn = xIf this path contains no edges that correspond to an FI-formula of the form bb(cid:14)d(cid:16) (x(cid:16), y(cid:16)) (cid:3) l(cid:16) or ebd(cid:16) (x(cid:16), y(cid:16)) (cid:3) l(cid:16),−−Δ to xbel+Δ,−−the left neighbour of vn, and a path from yΔ , to xl+2Δ. As none of the edges in these pathsare changed in the transformation from G to G(cid:16), these paths also occur in G.d(cid:16) (x(cid:16), y(cid:16)) (cid:2) k(cid:16), we can apply Lemma 3 to establish that there is a path in G(cid:16) from y−2Δ, the right neighbour of yd(cid:16) (x(cid:16), y(cid:16)) (cid:3) l(cid:16), ee−(i+1)Δ to x−(i+1)Δ to x− 2}. Let y−Δ to x− 2}).−Δ(cid:14)(cid:14)(cid:14)Δ−(cid:14)d(cid:16) (x(cid:16), y(cid:16)) (cid:3) l(cid:16), eeNext, assume that the path from v0 to vn contains at least one edge which corresponds to an FI-formula of thed(cid:16) (x(cid:16), y(cid:16)) (cid:2) k(cid:16). Let (vs, vs+1) and (vr , vr+1) be the firstform bband last of these edges respectively. Then vs is either a white beginning node or a black ending node, because of thenature of the transformation from G to G(cid:16). The path between v0 and vs therefore satisfies the conditions of Lemma 3.d(cid:16) (x(cid:16), y(cid:16)) (cid:3) l(cid:16) or ebd(cid:16) (x(cid:16), y(cid:16)) (cid:3) l(cid:16), be(cid:14)(cid:14)(cid:14)S. Schockaert, M. De Cock / Artificial Intelligence 172 (2008) 1158–11931191−Δ , to x−2Δ, the right neighbour of yIn the same way, we find from the fact that G(cid:16) contains a path from y−Thus we find that G(cid:16) contains a path from ybeginning node, or a white ending node. By Lemma 3 we find that G(cid:16) contains a path from yneighbour of vn.−l+2Δ. Similarly, vr+1 is either a black−−Δ to xl+Δ, the left−l+4Δ that G(cid:16) also contains a path3Δ to xl+4Δ, etc. Adding an edge to G(cid:16) corresponding to any of the disjuncts in (A.4)from ytherefore leads to a forbidden cycle in G(cid:16). Using Lemma 4, we can conclude from this that adding an edge to Gcorresponding to any of the disjuncts in (A.4) would lead to a forbidden cycle as well. Hence, in any P-model of Θ,− d can be satisfied, or, in other words, thatit holds that neither xΘ ∪ {bb−l+2Δ < y(cid:14)d (x, y) (cid:3) l + Δ} is not FI-satisfiable.−l+3Δ and from y4Δ to x− d, . . . , or x−l+Δ < y−3Δ to x−1 < y− d, x−1−l−2Δ−Δ−A.6. Proof of Lemma 6As an example, we show that for k ∈ {4Δ, 6Δ, . . . , 1}, Θ ∪ {bb(cid:14)d (x, y) (cid:2) k − 2Δ} is FI-satisfiable. Clearly, if Θ ∪ {bb(cid:14)d (x, y) (cid:2) k − Δ} is FI-satisfiable. Conversely, we show that if Θ ∪ {bb(cid:14)d (x, y) (cid:2) k − Δ} is FI-satisfiable iff Θ ∪(cid:14)d (x, y) (cid:2) k − 2Δ} is FI-satisfiable, then also Θ ∪(cid:14)d (x, y) (cid:2) k − 2Δ} is not FI-satisfiable,{bb{bbthen also Θ ∪ {bb(cid:14)d (x, y) (cid:3) k − Δ} is not FI-satisfiable.Let Ψ be the set of linear constraints corresponding to Θ. The linear constraints corresponding to bbk − 2Δ are given by:−Δ−k−Δ(cid:4)y(cid:2) x+ d, y−2Δ(cid:2) x−k+ d, . . . , ywhile the linear constraints corresponding to bb(cid:4)y−Δ(cid:2) x−k+ d, y−2Δ(cid:2) x−k+Δ+ d, . . . , y−1−k+Δ(cid:2) x−1+ d(cid:5)−1+ d(cid:2) x−1−k+2Δ(cid:14)d (x, y) (cid:2) k − Δ are given by(cid:5)(cid:14)d (x, y) (cid:2)(A.6)(A.7)−−Δ(cid:14)(cid:14)(cid:14)(cid:14)−kto y−k−Δ to yAssume that Θ ∪ {bb(cid:14)d (x, y) (cid:2) k − 2Δ} is not FI-satisfiable. This means that the graph G corresponding to the−linear constraints in Ψ contains a path from x1 to1−k+2Δ. Moreover, the edge labels in this path sum up to (<, d (cid:16)) where d (cid:16) + d (cid:3) 0, or ((cid:2), d (cid:16)(cid:16)) where d (cid:16)(cid:16) + d > 0,yi.e., adding the edges corresponding to (A.6) would introduce a forbidden cycle in the graph. Note that there is onlyone graph G corresponding to Ψ , as Ψ contains no disjunctive linear constraints.−2Δ, or . . . , or a path from x−Δ , or a path from x(cid:14)d (x, y) (cid:2) k, bed(cid:16) (x(cid:16), y(cid:16)) (cid:3) 1 or ebLet v1, v2, . . . , vn be a path from x−k+(i−1)Δ to yd(cid:16) (x(cid:16), y(cid:16)) (cid:3) 1, ee(1+i)Δ, for some i in {0, 1, . . . , 1 + 1−k}, where v1 and vn are bothwhite beginning nodes or both black beginning nodes. First assume that this path contains no edges correspondingd(cid:16) (x(cid:16), y(cid:16)) (cid:2) 0. Note that edgesd(cid:16) (x(cid:16), y(cid:16)) (cid:3) 1, beto an FI-formula of the form bb(cid:14)(cid:14)d (x, y) (cid:3) l always start at an end-d (x, y) (cid:2) k, and ebcorresponding to FI-formulas of the form ee(cid:14)(cid:14)d (x, y) (cid:2) k, andd (x, y) (cid:2) k, being node. Hence, either the path from v1 to vn contains no edges of the form ee(cid:14)d (x, y) (cid:3) l, or this path contains at least one edge corresponding to (46). In the former case, however, it is notebpossible to obtain a path from a node aif k1 > k2. Hence, since k > 2Δ, the path from v1 to vnneeds to contain at least one edge of the form (46). Assume that v1 and vn are white beginning nodes, and let the edgefrom vi to vi+1 be the last edge of the form (46). Then vi+1 is a white ending node, and by Lemma 3 there exists a path−from vi+1 to the left neighbour of vn. Hence, there is a path from xiΔ. In particular, we obtain that adding(cid:14)d (x, y) (cid:3) k − Δ}the edges corresponding to (A.7) would introduce a forbidden cycle, in other words, that Θ ∪ {bbcannot be FI-satisfiable. Next, assume that v1 and vn are black beginning nodes and let the edge from vj to vj +1 bethe first edge of the form (46). Using Lemma 3, we now find that there must exist a path from the right neighbourof v1 to vj , and again, that Θ ∪ {bb(cid:14)d (x, y) (cid:3) k − Δ} is not FI-satisfiable.−k+(i−1)Δ to yto a node bd(cid:16) (x(cid:16), y(cid:16)) (cid:3) 1, beFinally, assume that the path from v1 to vn contains at least one edge corresponding to an FI-formula of the form(cid:14)(cid:14)d(cid:16) (x(cid:16), y(cid:16)) (cid:2) 0. Let the edge from vi to vi+1 and the edged(cid:16) (x(cid:16), y(cid:16)) (cid:3) 1, eebbfrom vj to vj +1 be the first and the last of these edges respectively. Then vj +1 is either a black beginning node ora white ending node and vi is either a white beginning node or a black ending node. Using Lemma 3, we find thatthere must exist a path from v1 to the left neighbour of vn if v1 and vn are white beginning nodes, and a path fromthe right neighbour of v1 to vn if v1 and vn are black beginning nodes. In either case, we find that adding the edgescorresponding to (A.7) would introduce a forbidden cycle.d(cid:16) (x(cid:16), y(cid:16)) (cid:3) 1 or eb−k1−k2(cid:14)(cid:14)1192S. Schockaert, M. De Cock / Artificial Intelligence 172 (2008) 1158–1193References[1] J. Allen, Maintaining knowledge about temporal intervals, Communications of the ACM 26 (11) (1983) 832–843.[2] J. Allen, Planning as temporal reasoning, in: Proceedings of the Second International Conference on Principles of Knowledge Representationand Reasoning, 1991.[3] E. André, T. Rist, Coping with temporal constraints in multimedia presentation planning, in: Proceedings of the Thirteenth National Confer-ence on Artificial Intelligence (AAAI-96), 1996.[4] S. Badaloni, M. Giacomin, The algebra IAfuz: a framework for qualitative fuzzy temporal reasoning, Artificial Intelligence 170 (10) (2006)872–908.[5] S. Barro, R. Marín, J. Mira, A. Patón, A model and a language for the fuzzy representation and handling of time, Fuzzy Sets and Systems 61 (2)(1994) 153–175.[6] R. Barzilay, M. Elhadad, K. McKeown, Inferring strategies for sentence ordering in multidocument news summarization, Journal of ArtificialIntelligence Research 17 (2002) 35–55.[7] U. Bodenhofer, A new approach to fuzzy orderings, Tatra Mountains Mathematical Publications 16 (1999) 21–29.[8] A. Bosch, M. Torres, R. Marin, Reasoning with disjunctive fuzzy temporal constraint networks, in: Proceedings of the 9th InternationalSymposium on Temporal Representation and Reasoning, 2002.[9] F. Bry, B. Lorenz, H. Ohlbach, S. Spranger, On reasoning on time and location on the web, in: Proceedings of the International Workshop onPrinciples and Practice of Semantic Web Reasoning (PPSWR 2003), in: LNCS, vol. 2901, Springer, 2003.[10] M. Buchanan, P. Zellweger, Scheduling multimedia documents using temporal constraints, in: Proceedings of the Third International Work-shop on Network and Operating System Support for Digital Audio and Video, 1992.[11] A. Cohn, N. Gotts, The ‘egg-yolk’ representation of regions with indeterminate boundaries, in: P.A. Burrough, A.U. Frank (Eds.), GeographicObjects with Indeterminate Boundaries, Taylor and Francis Ltd., 1996.[12] R. Dechter, I. Meiri, J. Pearl, Temporal constraint networks, Artificial Intelligence 49 (1–3) (1991) 61–95.[13] T. Drakengren, P. Jonsson, Eight maximal tractable subclasses of Allen’s algebra with metric time, Journal of Artificial Intelligence Research 7(1997) 25–45.[14] T. Drakengren, P. Jonsson, Twenty-one large tractable subclasses of Allen’s algebra, Artificial Intelligence 93 (1–2) (1997) 297–319.[15] D. Dubois, H. Prade, Ranking fuzzy numbers in the setting of possibility theory, Information Sciences 30 (3) (1983) 183–224.[16] D. Dubois, H. Prade, Processing fuzzy temporal knowledge, IEEE Transactions on Systems, Man, and Cybernetics 19 (4) (1989) 729–744.[17] A. El-Kholy, B. Richards, Temporal and resource reasoning in planning: the parcPLAN approach, in: Proceedings of the 12th EuropeanConference on Artificial Intelligence (ECAI-96), 1996.[18] R. Erfle, Specification of temporal constraints in multimedia documents using HyTime, Electronic Publishing 6 (4) (1993) 397–411.[19] M. Fox, D. Long, PDDL2.1: an extension to PDDL for expressing temporal planning domains, Journal of Artificial Intelligence Research 20(2003) 61–124.[20] A. Gerevini, M. Cristani, On finding a solution in temporal constraint satisfaction problems, in: Proceedings of the International Joint Confer-ence on Artificial Intelligence, 1997.[21] H. Guesgen, J. Hertzberg, A. Philpott, Towards implementing fuzzy Allen relations, in: Proceedings of the ECAI-94 Workshop on Spatial andTemporal Reasoning, 1994.[22] S. Harabagiu, C. Bejan, Question answering based on temporal inference, in: AAAI-2005 Workshop on Inference for Textual QuestionAnswering, 2005.[23] P. Jonsson, C. Bäckström, A unifying approach to temporal constraint reasoning, Artificial Intelligence 102 (1) (1998) 143–155.[24] P. Kalczynski, A. Chou, Temporal document retrieval model for business news archives, Information Processing and Management 41 (2005)635–650.[25] H. Kautz, P. Ladkin, Integrating metric and qualitative temporal reasoning, in: Proceedings of the Ninth National Conference on ArtificialIntelligence (AAAI-91), 1991.[26] L. Khatib, P. Morris, R. Morris, F. Rossi, Temporal constraint reasoning with preferences, in: Proceedings of the 17th International JointConference on Artificial Intelligence, 2001.[27] M. Koubarakis, Tractable disjunctions of linear constraints: basic results and applications to temporal reasoning, Theoretical Computer Sci-ence 266 (1) (2001) 311–339.[28] A. Krokhin, P. Jeavons, P. Jonsson, Reasoning about temporal relations: The tractable subalgebras of Allen’s interval algebra, Journal of theACM 50 (5) (2003) 591–640.[29] M. Lapata, A. Lascarides, Proceedings of the North American chapter of the association of computational linguistics, in: Proceedings of theInternational Conference on Ontologies, Databases and Applications of Semantics (ODBASE), in: LNCS, vol. 2888, Springer, 2004.[30] R. Marín, S. Barro, A. Bosch, J. Mira, Modelling the representation of time from a fuzzy perspective, Cybernetics and Systems 25 (2) (1994)217–231.[31] I. Meiri, Combining qualitative and quantitative constraints in temporal reasoning, Artificial Intelligence 87 (1) (1996) 343–385.[32] D. Moldovan, C. Clark, S. Harabagiu, Temporal context representation and reasoning, in: Proceedings of the 19th International Joint Confer-ence on Artificial Intelligence, 2005.[33] G. Nagypál, B. Motik, A fuzzy model for representing uncertain, subjective and vague temporal knowledge in ontologies, in: Proceedings ofthe International Conference on Ontologies, Databases and Applications of Semantics (ODBASE), in: LNCS, vol. 2888, Springer, 2003.[34] A. Nakhimovsky, Temporal reasoning in natural language understanding: the temporal structure of the narrative, in: Third Conference of theEuropean Chapter of the Association for Computational Linguistics, 1987.S. Schockaert, M. De Cock / Artificial Intelligence 172 (2008) 1158–11931193[35] I. Navarrete, A. Sattar, R. Wetprasit, R. Marin, On point-duration networks for temporal reasoning, Artificial Intelligence 140 (1–2) (2002)39–70.[36] B. Nebel, Solving hard qualitative temporal reasoning problems: Evaluating the efficiency of using the ORD-Horn class, Constraints 1 (3)(1997) 175–190.[37] B. Nebel, H.-J. Bürckert, Reasoning about temporal relations: a maximal tractable subset of Allen’s interval algebra, Journal of the ACM 42 (1)(1995) 43–66.[38] H. Ohlbach, Relations between fuzzy time intervals, in: Proceedings of the 11th International Symposium on Temporal Representation andReasoning, 2004.[39] E. Saquete, P. Martínez-Barco, R. Muñoz, J. Vicedo, Splitting complex temporal questions for question answering systems, in: Proceedingsof the 42nd Annual Meeting of the ACL, 2004.[40] S. Schockaert, D. Ahn, M. De Cock, E. Kerre, Question answering with imperfect temporal information, in: Proceedings of the 7th Interna-tional Conference on Flexible Query Answering Systems, in: LNAI, vol. 4027, Springer, 2006.[41] S. Schockaert, M. De Cock, E. Kerre, Fuzzifying Allen’s temporal interval relations, IEEE Transactions on Fuzzy Systems, in press.[42] S. Schockaert, M. De Cock, E. Kerre, Imprecise temporal interval relations, in: Proceedings of the 6th International Workshop on Fuzzy Logicand Applications, in: LNAI, vol. 3849, Springer, 2006.[43] S. Schockaert, M. De Cock, E. Kerre, Qualitative temporal reasoning about vague events, in: Proceedings of the 20th International JointConference on Artificial Intelligence, 2007.[44] E. Sontag, Real addition and the polynomial time hierarchy, Information Processing Letters 20 (3) (1985) 115–120.[45] K. Stergiou, M. Koubarakis, Backtracking algorithms for disjunctions of temporal constraints, Artificial Intelligence 120 (1) (2000) 81–117.[46] I. Tsamardinos, M.E. Pollack, Efficient solution techniques for disjunctive temporal reasoning problems, Artificial Intelligence 151 (1–2)(2003) 43–90.[47] J. Zacks, B. Tversky, Event structure in perception and conception, Psychological Bulletin 127 (1) (2001) 3–21.[48] L. Zadeh, Fuzzy sets, Information and Control 8 (3) (1965) 338–353.