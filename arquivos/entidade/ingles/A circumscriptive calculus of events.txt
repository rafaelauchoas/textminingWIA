ELSEVIER Artificial Intelligence 77 (1995) 249-284 Artificial Intelligence A circumscriptive calculus of events Murray Shanahan* Imperial College, Department of Computing, 180 Queen’s Gate, London SW7 ZBZ, UK Received July 1992; revised January 1994 Abstract to the frame problem A calculus of events events with nondeterministic solution developed theorem minimisation nondeterminism. continuous for is presented in which domain constraints, concurrent events, and effects can be represented. The paper offers a nonmonotonic two of the techniques that combines for this formalism the situation is presented which guarantees this solution, Finally, calculus, namely causal and state-based minimisation. A that temporal projection will not interfere with and to cope with in domains with ramifications, the paper shows how the formalism can be extended concurrency, even in change, whilst preserving the conditions for the theorem to apply. 1. Introduction the thoughts and Hayes by McCarthy if we deploy classical The frame problem was first described in the Sixties of AI researchers ever since. In a nutshell, logic in a straightforward way to [23], and has occupied the problem is this: describe are not affected by each action, as well as those because huge in all but the most trivial domains.’ By the early Eighties, the frame problem could be solved using the newly developed formal default reasoning demonstrated counter-intuitive the effects of actions, we have to represent explicitly which properties that are. This is a problem that are not affected by an action tends to be it was thought that techniques of [8] to these results. Many authors, such as Lifschitz [13] and Shoham [37], (McCarthy the naive application [22]). However, Hanks and McDermott the number of properties techniques could lead that of * Telephone: +44 171589 5111. E-mail: rnps@doc.ic.ac.uk. 1 A particularly clear description of the frame problem is to be found in McDermott [24]. 0004-3702/95/$09.50 SSDZ 0004-3702(94)00036-Z 0 1995 Elsevier Science B.V. All rights reserved 250 M. Shanahan I Artificial Intelligence 77 (1995) 249-284 rose to the challenge of finding solutions that yielded correct conclusions with the earlier attempts.’ examples that had undermined By the end of the Eighties, the emphasis of research on the frame problem had shifted towards providing solutions which could deal with the features of complex (which arise domains. Baker [l], for example, addressed the with domain constraints). Lin and Shoham [19], on the other hand, examined problem of concurrent is issues still need perhaps now within our grasp. However, a number of outstanding that effects, to be resolved, chief among which are actions with nondeterministic is actions whose precise effects are unknown, and continuous change. the issue of ramifications to the frame problem events. A complete solution Besides focussing on the features of complex domains such as concurrency, and continuous change, current proposals for solving the frame in another way. No longer is it to argue for the validity of a proposed solution using only a such as Hanks and McDermott’s Yale nondeterminism problem are distinguished considered acceptable small number of benchmark shooting scenario. Following Lifschitz [15], a proposal has to be mathematically justified for a substantial class of problems (see also Sandewall [32]). from their antecedents examples, for is given this formalism, This paper offers a predicate-calculus-based formalism the representation effects.” A nonmonotonic based on for representing and of concurrent events reasoning about change, which facilitates solution to the frame and events with nondeterministic the problem extensions of certain predicates using standard prioritised circumscription.4 The solution works for examples and events with nondeterministic which suggests that the solution has very general application. Another presented with facilitates the construction Finally, change, whilst preserving results. algorithms. to cope with continuous the conditions of applicability of these mathematical involving effects. A mathematical the paper shows how to extend of temporal projection (domain constraints) idea of minimising is demonstrated the formalism ramifications result result is the Unlike most of the work cited in this introduction, to the frame problem offered in this paper is not based on the situation calculus of McCarthy and Hayes [23]. Although some authors have offered hints and suggestions as to how continuous change could be formulated using the situation calculus (Gelfond the solution celebrated such as Loui [20], questioned the Yale shooting actions ’ Hanks and McDermott’s authors, this example. The task I set myself scenario Yale shooting representing ’ I will not distinguish ’ A number solutions “elaboration-tolerance” domain necessitates elaboration-tolerant theory. the complete solution, of authors, the frame problem to example has become known as the Yale shooting the assumptions in the present paper underlying Hanks and McDermott’s is to address the frame problem. scenario. Some analysis of I will use the in simply as an example of where the frame problem arises. I am not interested scenario per se. from events in this paper. notably Haas for [7], Schubert the situation [33], and Reiter calculus. Arguably, (John McCarthy’s term), because the acquisition reconstruction of the domain in which new knowledge is automatically [28], have proposed monotonic solutions these of new knowledge theory. The present paper into absorbed do not offer the about supplies an the existing M. Shanahan I Artificial Intelligence 77 (1995) 249-284 251 et al. [6]), it is not yet clear how this could be done. On the other hand, work event calculus of Kowalski and already exists which extends Sergot [ll] [35]), and this work, taken out of the framework of logic programming and augmented with a circumscriptive approach is the basis of the formalism presented here. to deal with continuous change (Shanahan to default reasoning, the narrative-based types, includes event initiated, negation-as-failure once a property has been The ontology of Kowalski and Sergot’s formalism time points and properties. Properties are initiated and terminated by events. In their is used formalism, to it, and this is assume that it persists by default until an event occurs to terminate how the frame problem in this paper is similar unlike Kowalski and Sergot’s in extended Horn clauses and uses negation-as- formalism, which is expressed the full expressive power of first-order that presented failure, cannot be relied on to supply predicate calculus, and therefore negation-as-failure a solution solution offered here takes advantage of the insights of several previous authors, whose work I will now briefly review. is addressed. The calculus of events presented to the frame problem. The circumscriptive respects.5 However, here exploits in many [12], Kautz [8] discovered such as Lifschitz [3] and Lifschitz [lo] and Shoham such as McCarthy’s flaws in early efforts [l, 21, Baker and Ginsberg After Hanks and McDermott to overcome [22], several authors developed more the frame problem, robust solutions, [37] who use chronological minimisation, Haugh [9] and Lifschitz [13] who use causal minimisa- [15] who use tion, and Baker state-based minimisation. The last two approaches, which were developed for the situation calculus, are based on the following simple observation. The Hanks- of McDermott minimisationP This independence in by minimising predicates whose which the frame problem In other words, of projection. extensions to be minimised if the predicates minimisation can be separated facts. For example, with express causal minimisation, true facts about the effects of actions. is independent can be achieved by designing a formalism can be overcome the outcome from projection the predicates which are minimised express problem does not arise if temporal projection do not depend on than time-varying true facts, rather timelessly timelessly the principle The difficulty with this approach of separating minimisation the formalism has sufficient expressive power that the only predicates is from projection to capture rich to ensure that to be minimised domains, whilst preserving express the existing work using causal timelessly minimisation does not cope adequately with ramifications, as shown by Baker [l]. [l]). With State-based minimisation handles state-based minimisation, timelessly true facts about the abnormality of certain actions with respect to change. These to states, whose existence and facts are timelessly true because they are relativised (Baker ramifications much better the predicates which are minimised express facts. For example, true 5 In what follows, I will use the term “event calculus” to refer to the formalism presented here, not to Kowalski and Sergot’s formalism. 6 This separation is also the basis of the more recent approach of Crawford and Etherington [4]. 252 M. Shanahan I Ardficial Intelligence 77 (1995) 249-284 properties problem are described independent of temporal projection. The solution to the frame here uses a hybrid of causal and state-based minimisation. The paper is organised to the frame problem as follows. The event are presented calculus and the accompanying in the next of its use, without two sections, any proof of correctness. followed by Blocks World example the mathematical solution a traditional Then are developed: class of problems, algorithms. presented, illustrate examples with ramifications formalism the mathematical is extended Further results which properties of the formalism are investigated. one which suggests and another examples that to aid the the frame problem the construction of application the use of these mathematical and events with nondeterministic of the is solved of temporal formalism results. These Two results for a wide projection are then include the that effects. Finally, in a way which ensures to cope with continuous change still apply. 2. States I will use a many-sorted variables including language for time points of the (s, s,, s?. .). truth first-order (t, f,, t2, values predicate . .), properties (u, ul, u?, . calculus with (p, p,, p2, .), and truth denoted f, , f2, . . .). The domain of truth values has two members, True and False. A pair ( p. u) is a truth element. The first part of is the properties to be presented concerns of states. A state the predicate E is defined as a set of truth elements. To capture this, equality, q, ql, q2, . . .), states (f, elements by the constants the represented as follows.’ formalism (S1) (S2) (S3) truth elements. to give another s, =s2 t-, Vf[fEs, c-, f’Es,]. vs,,fl 3s2 Vf2 [J; Es, - [.fiEEs, " f2 =f,ll3 3SVf[lfES]. Axiom (Sl) says that two states are equal (S2) says that any truth element can be added if they have the same to any state Axiom state. Axioms truth elements, formulation predicate Holdsln. We have (S2) and (S3) guarantee that a state exists for every combination of and are analogous to the existence-of-situations axiom [l, 21. The properties which hold in a given state are described in Baker’s by the the following axioms. HoldsZn(p,s) + [ (p,True) ES A lAbState( , lHofdsZn(p,s) + [( p,Fulse) Es A lAbState( . (El) WI Axioms (Sl)-(S3) and (El) and (E2) will be part of the formalisation of any ’ Throughout the paper, all variables are universally quantified unless otherwise indicated. M. Shanahan I Artificial Intelligence 77 (1995) 249-284 253 Es, then information If (p,True) Es, in the absence of further of this kind may be present the property p holds in state s. Conversely then the property p does not hold in state s. If (p,True)$s then, if domain. and (p,Fulse) about HoZMn, we (p,Fulse)$s, further cannot say whether or not the property p holds in state s. However, in the form of domain constraints information expressed as extra HoldsZn formulae. Such formulae can be admitted without giving rise to contradiction because of the AbStute conditions on (El) and (E2). The predicate Al&ate will be minimised, making axioms (El) into states are those ruled out by domain constraints. Baker’s defaults. Abnormal approach adopts a similar tactic. there into primitive the members of a set can be thought of as the primitive properties derived, hold/don’t extra Holdsln formulae can then be thought of as yielding “derived” properties. The presence of such domain constraints means that an event can have compli- cated to the frame that states are problem. represented that hold in them, and (El) and (E2) cannot be replaced by a simple biconditional. Ramifications will be discussed ramifications, which must be dealt with by any approach It is because of domain constraints and ramifications and that in the form of by partial descriptions of the properties in some detail in a later section. is no overall partitioning state. Domain constraints hold in the corresponding of properties and (E2) Although 3. A calculus of events Now the main axiom of the formalism in a form which is suitable is presented it will be modified to cater for domains which involve only discrete change. Later, case. The axiom defines the predicate State. The formula for the continuous that time point t is associated with state s. Each time point is Stute(t,s) represents Es if and only state s,* such that (p,True) associated with a single, characterising if the property p was initiated by some event before t and still holds at C, and ( p,FuZse) E s if and only if p was terminated by some event before t and still does not hold at t. The axiom we require the following. is essentially Stute(t,s) t, Vp [[(p,True) Es - Znitiuted(p,t)] A [(p,Fulse) Es ++ Terminuted(p,t)]]. In order facilitate above formulae Znitiuted(p,t) and Terminuted(p,t) to make the formalism easier to use, the final form of the axiom will of the initial situation. But for now, let’s assume the the meaning of Initiated and Terminated. The are not part of the language, but are the representation and consider axiom, ’ In fact, this is not quite true. The improper use of domain constraints can lead to time points for which no corresponding state exists. Thus, State is a predicate rather than a function. 254 M. Shanuhan I Arlijicial Intelligence 77 (1995) 249-284 just abbreviations, introduced here. .). e2,. which are defined along with variables Znitiafed( p,fZ) fde, as fol10ws.~ Several more predicates for the new sort of event types are (e, e,, 3e,t,,s [Huppens(e,t,) A f, <f, A Stute(t,,s) A Znitiutes(e,p,s) A iCfipped(t, ,p,f2)] . Terminated( p,f?) sdcf 3e,t,.s [Huppens(e.t,) A t, <fl A Stute(t,,s) A Terminates(e,p,s) A lDeclipped(t, ,p&)] Again, language, the formulae Clipped(t,,p,t,) but are abbreviations. which are defined as follows. and Declipped(t,,p,t,) are not part of the Clipped(t, .p,r3) edC, 3e,t2,s [Happens(e,tz) A t, < t2 A t, < f, A State(t,,s) A Terminutes(e,p,s)] Declipped(r, .p.f3) =dc, 3e,f,,s [Huppens(e,l,) A t, ( t2 A t, A t, A Stutes(t,,s) A Zniciutes(e,p.s)] formula The initiated in state predicates represents represents interpreted in which < is interpreted Znitiutes(e,p,s) the property by an event of type e, and the formula Terminute.s(e,p,s) represents s, the property is terminated represents p an event Initiates and Terminates will be minimised. that that by the naturals, time e happens t2. For the discrete of t, is before and I will assume time time type at is s, that, in state p that, by an event of type e. The “causal” formula Huppens(e,t) t, <t, formula time points can be only models that we are considering t. The case, The To make it easy to represent Initially is introduced. situation. initial predicate p holds sents be minimised, in the that property ~1 does not hold although our knowledge in the initial of the accordingly.” the initial The formula Conversely, state at time 0), situation (the Initially(p) represents that property the formula ZnitiufZy(Not(p)) repre- that ZnitiuZly will incom- situation. Note initial situation might be the Initialed, Terminutc~d. Clipped and Declipped don‘t have policies. them when designing circumscription the status of predicates, we don’t about to worry ’ Because have “I I will make several assumptions on our ability, satisfaction. From procedural For example. in principle. attachment like this in the paper. The legitimacy to till the resulting gap between model the point of view of computation, a second-order axiomatisation of the “<” predicate the existence of numerical algorithms is a source of comfort. of these manoeuvres and proof theory depends to our theory could be provided. the possibility and of M. Shanahan I Artificial Intelligence 77 (1995) 249-284 255 plete. The final form of the main axiom incorporates follows. Two further abbreviations are used to make the axiom clear. the Initially predicate as Stute(t,s) t) VP [[(p,True) Es - TrueAt(p,t)] [ (p,FuZse) Es f-, F&eAt(p,t)]] A . TrueAt( p,t) = def (E3) Znitiuted(p,t) v [Initially(p) A p = Not(p’) A -Clipped(O,p,t)] . FufseAt( p,t) =def Terminuted( p,t) v [Znitiully(Not(p)) A lDeclipped(O,p,t)] . It is important to note here that the state s which characterises a time t is not that hold (or don’t hold) at t. Rather, s is a subset of those the set of uff properties properties-the “primitive” ones. The presence of domain constraints, expressed in terms of Hofdsln, means that further “derived” properties might hold (or not hold) at t. The last axiom of the formalism defines the predicate HoldsAt, which that this possibility. The formula HoldsAt(p,t) takes property p holds at time t. into account represents HofdsAr( p,r) - Vs [Stute(t,s) A HoldsZn( p,s)] . PI The HofdsAt predicate is still not a complete description of which properties with (El)-(E4) times, because initial situation. However, there may be nondeterministic actions, or an hold at what it takes into account all that is incompletely described the conjunction of axioms known about each time point. In the rest of the paper, a temporal will be denoted by EC. (Sl)-(S3) projection problem will be captured by the conjunction of EC with a conjunction of Happens conjunction domain. The answer HoldsAt and Initially formulae of Initiates, Terminates and a the in the set of to the temporal projection problem representing and HoldsZn that are consequences. a history of events, representing In general, formulae formulae resides [21]. Circumscription is to insist that it contains only those objects is overcome using circumscription the extensions of certain predicates. To minimise The frame problem works by minimising the it is forced extension of a predicate to contain by the formula being circumscribed. The extensions of other predicates are optionally allowed to vary to accommodate ; P* ; Q*] the circumscription of A, minimising P* and allowing Q* to vary, where to denote this is sometimes written If Q* is empty, P* and Q* are sets of predicates. CZRC[A ; P*]. The circumscription defined by a second-order in terms of minimal models. Consider sentence, but it can be equivalently presented two models M, and M,. We have this. We write CIRC[h is conventionally of a formula 256 M. Shanahan I Artificial Intelligence 77 (1995) 249-284 M, &*:e* M2 if l M, and M, agree on the interpretation of everything except P* and Q* l For allp in P*. the extension of p in M, C its extension in M2. d Then, a model M of A is minimal with respect to 5 r*;y* if there is no model M’ v* M and not M C p*,a,M’. A formula in ‘only if it is true in all models of A which are minimal to include than others [12]). Let PF , PT and Q* be sets of predicates. We write the circumscription of A, minimising Pr with a of A such that M’II.. CZRC[A ; P* ; Q*] ‘f 1 an with respect to F Pa ,+*. This notion of circumscription can be extended the idea of mmimising certain predicates with a higher priority (Lifschitz CIRC[A higher priority definition than PT. and allowing Q* to vary. Again, sentence. but this is equivalent the conventional to ; PT > PT ; Q*] to denote is via a second-order is true CZRC[A ; P; ; P; U Q*] A CZZ?C[A : P; ; Q*] . the in which they are minimised, and which predicates are allowed to vary, is theory of the circumscription policy. For a thorough The exact choice of which predicates are minimised order called circumscription, in a circumscription, review of [ 161. the see Lifschitz The circumscription policy for overcoming representing the frame problem, the assumptions that the only domain constraints are the known domain constraints, that the only events which occur are those which are known to occur, and that the is to minimise AbState at a high only effects of events are the known effects, Initiates and Terminates at a lower priority, and to minimise Initially, Happens, the priority, minimisation than necessary extension of AbState is traded for a smaller than desired extension of Initiates or Terminates. The circumscription of a formula A according to this policy will be written CZRCJA]. to prioritise in which a larger allowing HoldsAt and State to vary. to exclude models It is necessary of AbState in order 4. The Blocks World Fortunately, the mathematical the next section, is mostly transparent the foregoing machinery to anyone who uses the formalism, and descriptions of domains and histories are intuitive and elegant. of the event calculus are In investigated, the claim that the frame problem has been solved for a large class of examples. But first, I will show how the formalism could be used to represent a simple version of the Blocks World. The ontology of this world includes blocks and locations. A new sort is introduced for these, with variables x, y and _r.ll An event of type Move(x,y) and a result is developed which supports is an attempt properties to ‘I Blocks and locations should really have different sorts. but this would complicate the example. M. Shanahan I Artificial Intelligence 77 (1995) 249-284 257 move block x to location of block y. The property On(x,y) represents is at location y or on block y. The domain of time points is assumed natural numbers.” We have the following formulae. that block x to be the Znitiates(Move(x,y),On(x,y),s) t ZZoZdsZn(CZear(x) ,s) A ZZ&fsln(CZear( y),s) A n # y . Znitiutes(Move(x,y),Cleur(z),s) +- HoldsZn(Clear(x) ,s) A HoldsZn(CZear( y) ,s) A x # y A ~ddd?Z(O~(X,Z),S) A y #Z . Terminutes(Move(x,y),On(x,z),s) +-- HoZdsZn(Cfeur(x) ,s) A HoldsZn(Cleur( y) ,s) A x # y A fk’h!Sh(O~(X,Z),S) A y # Z . Terminutes(Move(x, y) ,Cleur( y) ,s) + HoZdsZn(CZear(x) ,s) A HoZdsZn(Cleur( y) ,s) A x # y . The key feature of these formulae is that no mention is made of the HoldsAt is made of actual times at all. Instead, the HoZdsZn predicate. No mention predicate by referring are timelessly minimisation is used to give access to the properties to the corresponding state. Because states are timeless, that hold when an event occurs, the formulae the vital separation of permits true. This style of representation from temporal projection. Instead of explicitly specifying the conditions under which an event initiates or the CZeur property, a domain constraint could be used. This would be to the On to have at most one terminates achieved by writing ZZoZdsZn formulae which related the Clear property property, block on it. every block or location and which constrained For each domain, and event properties iqueness-of-names explicitly set of uniqueness-of-names UNA notation a set of uniqueness-of-names types. is required for to include other un- I will not locations. list these axioms in the examples in rest of the paper, but here is the full axioms for this Blocks World domain, using Lifschitz’s It might also be necessary in this case for blocks and axioms, axioms [13]. UNA[Move] . UNA [ Clear, On] . UNA[A,B,C,&,-&,X,l n A particular sequence of events or actions formulae. For example, onto block B at time 5, then block C is moved onto location Xi at time 8. the following formulae represent is described using Happens that block A is moved I2 The axioms of the event calculus do not depend on this assumption, and in Section 10 on continuous change, I will consider the case in which time points are interpreted by the reals. 258 M. Shanahun I Artifictal Intelligence 77 (1995) 249-284 Happens(Move(A,B),5) Huppens(Move(C,X, ),8) is so long as their effects are not cumulative (like time) or cancelling two blocks identical at the same time arguments, Concurrent such as moving events, as Happens independent, formulae with that represented are events putting two weights on a pair of scales at the same to lift an object and pressing down on it at the same of concurrent whose formulae, ments. exact order of occurrence or using Happens to write is not known, is described that which it is easy events. Note the calculus can cope with formulae with existentially time). cumulative formulae which using disjunctions time, are easily SO long as the (like trying In Section 9, a version cancelling events of Happens argu- time and represent quantified Suppose respectively. blocks A, B and c’ are initially clear and at locations X,, X, and X, Then we have: Initially(On(A ,X, )) . Initially(Clear(A)) Initially(On(B,X,)) ZnitiaZly(On(C,X,) . . Initially(Cleur(B)) Initially(Clear(C)) . , If the conjunction of all axioms the above is denoted by H, then uniqueness-of-names and Znitially formulae have, for example, HoldsAt(On(A,B),l2). but the results of the next section will provide hold at what Intuitively, times and history. though, how has the frame problem for any domain in all models of CZRC,,[EC Initiates by D, and the conjunction formulae and Terminates and of the Happens A D A H], we this here, a basis for proving which properties to prove I will not attempt been solved? Note the and and to represent policy to capture problem minimises and history predicates. for overcoming The frame results of temporal in terms of the predicate HoldsAt, which doesn’t formulae. needed are Initiates, Terminates, HoldsIn, Happens the Blocks World domain are expressed and history predicates of events cumscription domain hand, domain sation. This has been domain, HoldsAt of Znitiates and Terminates would vary according projection. and a predicate instead, by using Holdsln It would for states altogether. But then the outcome result of the next section would not is independent the in have been problem would arise. the Hanks-McDermott So, temporal The strong on states. projection, projection the need obviating achieved indexed to representation tempting Initially. The that the only a history cir- these on the other appear in of minimi- only of the to use the extensions of temporal then be applicable, 5. Some properties of the calculus As Lifschitz to approach points out frame the [15]. we would yields problem like correct to be able results, to demonstrate not that an just with a single M. Shanahan I Artificial Intelligence 77 (1995) 249-284 259 example, but with a significant class of examples. General results of this sort have been produced for the situation calculus by Lifschitz [15] and Lin and Shoham [18], but neither of these papers addresses continuous change, concurrent events, their or events with nondeterministic work to deal with concurrent events [19], but the general result they prove is built on a criterion of epistemological the possibility of events with nondeterministic effects. Lin and Shoham have extended completeness which apparently excludes effects. In this section, I present a theorem which says that any collection of domain from the and history formulae of a certain form can be minimised independently axioms of the event calculus. The demands on the form of domain and history events are allowed, and in later sections I formulae are very liberal. Concurrent show that domains events and continuous change can and also be represented applies not only to the calculus above, but also to any calculus having the right form. I will write x to denote a tuple of variables, and xi to denote the ith variable in such a tuple. involving nondeterministic is very general, in the required form. The theorem Definition 1. A formula in argument k Vx q(x) t-, 4(x), where q is a predicate whose kth argument 4(x) conjunctions of the form q(z) A z, <x,. if it has form is a time point and in which x is free, and all occurrences of q in 4(x) are in is chronological is a formula the For example, axiom it is easy (E3) to work out conditions, conjunction of a formula with a chronological the consequences formula. is chronological in argument 1. Under of circumscribing certain the Theorem 2. Consider only models in which the time points are interpreted by the naturals, and in which < is interpreted accordingly. Let P” and Q* be sets of predicates such that Q* includes q. Let 9 = Vx q(x) - #J(X) be a formula which is chronological in some argument. Let x be a formula which doesn’t mention the predicate q. Then CZRC[x A $ ; P” ; Q”] k CZRC[,y ; P* ; Q*] . The proof of Theorem 2 is given in Appendix A. Since both axioms (E3) and that any (E4) are chronological domain and history can be minimised the event calculus axioms, so long as the domain and history formulae don’t mention HoldsAt or the event calculus axioms can be used classically to State. After this minimisation, derive which properties another times. Appendix B contains theorem, which facilitates in one of their arguments, Theorem 2 ensures independently hold at what the construction of temporal projection algorithms. from to see that meeting the conditions for applying Theorem 2 is not It is important to get the It is still necessary in itself sufficient and (El) right before (E3) and (E4) are added. Axioms (Sl)-(S3) minimisation and (E2) play a crucial role in this respect. Theorem 2 simply supplies certain the frame problem. to solve 260 M. Shanahan i Artificial Intelligence 77 (1995) 249-284 conditions under which projection tion. This sort of interference problem. is guaranteed not to interfere with minimisa- is what gives rise to the Hanks-McDermott In order to minimise domains and histories, of cir- cumscription will be useful. Theorems 3 and 4 are due to Lifschitz. They are reproduced in [16]. Let A be any formula and 6(x) be any formula here without proof, but proofs can be found two other properties in which x is free. ; p] is equivalent to A A Vx p(x) Theorem 3. CIRC[A A Vx p(x) +-6(x) if A and 6(x) are formulae containing no occurrences of the predicate p. - 6(x) Theorem 4. If all occurrences of fhe predicates p, , pZ, . . . , p, in .a formula A are positive, then CIRC[A ; P*], where P* = {p,, p?, . is equivalenr to , p,}, CZRC[A ; p,] A CZRC[A ; p2] A . . A CIRC[A ; p,] 6. The Yale shooting problem With the results above, it’s easy to show that the event calculus can solve the three [8]. The domain comprises two properties--Alive Yale shooting problem Sneeze and Shoot-and properties are represented with the requisite uniqueness-of-names there are no axioms for the Sneeze event, since it doesn’t affect any property. and Loaded. These events and along axioms will be denoted by D,. Note that by the following formulae, whose conjunction types of event--load, Initiates(Load,Loaded,s) Terminates(Shoot,Alive,s) t HoldsZn(Loaded,s) The Yale shooting scenario can be represented by the (D1.l) (D1.2) following history three events- formulae, whose conjunction will be denoted by H,, describing Load then Sneeze then Shoot. The Sneeze event substitutes for the Wait action of the original Yale shooting scenario. Using the event calculus, waiting is most than as an event naturally which has no effect. The Sneeze event here serves the same purpose as waiting in the original formulation: to go wrong. simply as a pause between events, rather it provides an opportunity for the minimisation represented Initially(Alive) . Happens(Load, 10) . Happens(Sneeze,lS) . Happens(Shoot,20) . (H1.3) (H1.2) (H1.3) (H1.4) Proposition 5. CIRCJEC A D, A H,] /= lHoldsAt(Alive,25). M. Shanahan I Artificial Intelligence 77 (1995) 249-284 261 Proof. Let x be the conjunction of D, with H, and EC without (E3) and (E4). CIRCJxJ is defined as the conjunction of CZRC[x ; Initially, Happens, Initiates, Terminates ; State, HoldsAt] with CZRC[x ; AbState ; Znitially , Happens, Initiates, Terminates, State, HoldsAt] . We will consider each conjunct in turn. Take Terminates the first conjunct. in x are positive, Since all occurrences of Happens, Initiates and CZRC[x ; Znitially, Happens, Initiates, Terminates] is equivalent to CZRC( x ; Initially) A CZRC[x ; Happens] A CZRC[x ; Initiates] A CZRC[x ; Terminates] from Theorem 4. Then, by applying Theorem 3, to each conjunct it can be seen that the completions of Happens, in all of its models. In particular, we have the following. in this formula, Initiates and Terminates are true Terminates(e,p,s) - e = Shoot A p = Alive A HoldsZn(Loaded,s) . Happens(e,t) - [e = Load A t = lo] v [e =Sneeze A t = 151 v [e =Shoot A t = 201. (1) (2) Since there are no occurrences of State or HoldsAt in all models of CZRC,,[x], where these predicates are allowed to vary. in ,Y, (1) and (2) are also true Now constraints which include both CZRC[x in D,, (p,False) ; AbState ; Happens, let’s look at the second conjunct of CZRC,,[x]. Without any domain the only abnormal combinations of truth elements are those for some p. So, in all models of and (p,True) Initiates, Terminates] we have AbState(s) - 3p [(p,False) Es A (p,True) ES]. (3) Since there are no occurrences of State or HoldsAt to vary does not affect the outcome of the circumscription, models of CZRC,,[x]. in ,y, allowing these predicates so (3) is also true in all Now, since (E3) and (E4) are chronological, by applying Theorem 2, first to add (E3) and then to add (E4), we can show that (l), (2) and (3) are also true in all models of CZRCJEC A H,]. A D, The combination of (3) with axioms (S2), (S3) and (El) ensures that every includes a state in which Alive and Loaded hold. Given this, along with model 262 M. Shanahan I Artificial Intelligence 77 (1995) 249-284 (2) and (3), it’s easy to show ciassically from D, and H, that in all models of (l), the circumscription we have 3s [Scate(2O,s) A HoldsZn(Alive,s) A HoldsZn(Loaded,s)] and therefore, 3s [State(25,s) A lHofdsfn(Alive,s)] and lHoZdsAt(Alive,25). Cl 7. Ramifications Domain constraints can be expressed as Hold&z property Dead can be defined in the following way. formulae. For example, the HoldsZn(Dead,s) - lHofdsln(Alive,s) . (D1.3) Let D; denote the conjunction of (Dl .l)-(D1.3) with the requisite uniqueness- of-names axioms. Proposition 6. CZRCJEC A D; A H,] t= HoldsAt(Afive,20) A HoldsAt(Dead,25) Proof. The addition of Proposition 5. Instead of (3) we have, (D1.3) does not substantially affect the proof for AbSface( f,s) ++ 3p[ (p,False) Es A ( p.True) f s] v [(Alive,True) ES A (Dead,True) E.S] v [ ( AliveJalse) E s A (Dead,False) Es] . Every model still includes a state in which Alive and Loaded hold. But we also get 3s [State(ZS,s) A Holdsln(Dead,s)] and therefore HoldsAt(Dead,25). 0 involving Here we will only look at simple examples. But in general, a domain constraint in which the only term is a universally quantified variable. In addition, a domain constraint Initially, to formalise a problem involving a chess board in the next two predicates Black and White to be used in domain could be any formula situation could involve any predicate apart from HoldsAt, and State. For example, section, I will introduce constraints. just the HoZdsZn predicate Initiates, Terminates, M. Shanahan I Artificial Intelligence 77 (1995) 249-284 263 that Note (D1.3) doesn’t ensure initiates Dead also terminates Alive. A property that holds because it was initiated by an event, can only be terminated directly by an event, and not by an event which terminates a to is that a property which is property on which it depends. What this amounts initiated by an event must be considered as primitive until it is terminated. that an event which This principle can be illustrated by introducing a new property Walking, and a [2]).13 The that if Walking holds then Alive must hold (Baker further constraint obvious way to try to represent this is with a ZZoZdsZn formula. HoldsZn( Walking,s) ---, HoldsZn(AZive, s) . (D1.4) However, this formula only yields intuitive conclusions under certain circum- stances. With the addition of (D1.4), we can show lHoldsAt(Wulking,25). But suppose we add a new event type Walk and the following additional domain and history axioms. Znitiates(Walk,Walking,s) . Happens( Walk,S) . (D1.5) (H1.5) Let 0’; be the conjunction requisite uniqueness-of-names 1HoZdsAt(Walking,25) (E3), we get of (Dl.l), (D1.4) and (D1.5) with the axioms. Let HI be HI A (H1.5). Do we still have in all models of CZRC,,[EC A 0; A Hi]? From axiom (D1.2), Stute(25,s) + [ (Alive,Fulse) ES A (Wulking,True) ES] . Therefore, from (D1.4) (El) and (E2), we have Stute(25,s) + Al&ate(s) . So we can no longer deduce anything interesting about time 25. A better way to is to use Initiates and Terminates. This the principle that a property which is initiated directly by an event must represent a domain constraint preserves also be terminated directly by an event. like (D1.4) Terminates(e,Walking,s) t Terminates(e,Alive,s) . (D1.6) Both (D1.4) and (D1.6) can be present theory. Axiom (D1.4) would be used to deduce that Alive holds when Walking holds, given an event that initiates Walking but none that initiates Alive, and axiom (D1.6) would be used to deduce that terminates (D1.5) and (D1.6) with the Alive. Let 0; be the conjunction of (D1.1) requisite uniqueness-of-names that Walking does not hold after an event in the same domain axioms. (D1.2) Proposition 7. CIRC,,[h] k lHoldsAt(WuZking,25), HI. where A is EC A 0: A I3 This variant of the Yale shooting scenario is sometimes called the “walking turkey shoot”. 264 M. Shanahan I Artificial Intelligence 77 (1995) 249-284 Proof. Theorem 2 is applied in the usual way. CZZ?C,,[A] yields (3) as in the proof of Proposition 5, but instead of (1) and (2), CZRC,,[h] now gives Terminates(e,p,s) - [e = Shoot A p = Alive A Holdsln(Loaded,s)] v [e = Shoot A p = Walking A Holdsln(Loaded,s)] , Happens(e,t) f-, [e = Walk A t = 51 v [e = Load A t = lo] v [e = Sneeze A t = 151 v [e = Shoot A t = 201 . From (3), (4) and (5), it’s easy to show classically that lHoldsAt(Walking,25). (4) (5) 0 8. Nondeterministic effects The separation of temporal projection and minimisation permitted by Theorem 2 allows us to represent events whose effects are nondeterministic, knowing that this will not precipitate problems with temporal projection. Examples of events effects are those which initiate a disjunction of properties with nondeterministic or a property which is existentially quantified. Consider the following problem, due to Ray Reiter.14 The action of moving an object onto a chess board either that it is on initiates white, or both properties at once (if it straddles is on black, or the property that the object two squares). the property the conditions the effects of moving an object onto Can the effects of such an action be represented for applying Theorem in the event calculus, whilst that 2? There is a danger preserving the the board will exclude minimising possibility of moving it to a position where it is on both black and white, since such an action would initiate two properties when it could have initiated only one. in which such an action The circumscription initiates both properties. Also, in which the flickers between black and white. If it is object, once moved onto moved onto a particular location on the board, then it should stay there until it is moved again. should allow at least one model to exclude models it is important the board, Events with nondeterministic effects, such as the one in this problem, can often as initiating an intermediate property, which has nondeterministic be represented ramifications. This is the approach is introduced one event location c. There are two other properties: OnBlack and OnWhite. taken in the following solution. The variable c is is either black, white or mixed. There is at type Move. The property Lot(c) for locations. A location the object represents that I4 Personal communication M. Shanahan I Artificial Intelligence 77 (1995) 249-284 265 Vs 3c [Znitiates(Move,Z_.oc(c),s)] . Vc [Black(c) v White(c) v Mixed(c)] . Black(c) - vs [Hofdszn(Loc(c),s) + (D2.1) (D2.2) HoldsZn(OnBlack,s) A lHoldsZn(OnWhite,s)] . (D2.3) White(c) - Vs [HoZdsZn(Loc(c),s) + HoldsZn(OnWhite,s) A lHoldsZn(OnBlack,s)]. (D2.4) Mixed(c) ++ Vs [HoldsZn(Loc(c),s) -+ HoldsZn(OnWhite,s) A HoldsZn(OnBlack,s)] . (D2.5) It is easy to see that minimising Initiates does not affect HoldsZn, since HoldsZn (Lemma A.22, in in which there then there will further is held fixed. Nor is HoldsZn affected by temporal projection Appendix A guarantees is a state s such that HoldsZn(OnBluck,s) be such a model of EC conjoined with (D2,1)-(D2.5).) domain constraints, that if there is a model of (D2.1)-(D2.5) A HoldsZn(OnWhite,s), it will not be possible to show that So, without lHoldsAt(OnBlack,t) v lHoldsAt(OnWhite,t) for any time t after a Move event, unless there is another event between event and t which terminates Lot(c). in which the object board, which is the result we require. the Move In other words, there will always be a model it is put on the chess is both on black and on white after One further complication arises with events whose effects are nondeterministic. As things stand, within any given model, the same event will always have the same effect when the same fluents hold, even though that effect can be different in different models. One way around is to omit axiom (Sl), which identifies states with the fluents that hold in them, and add an axiom which insists that there is at most one state for each time point. With a larger space of possible time point, models can exist in which the same event has a states different outcome at two different the same fluents hold. time points, even though exactly this problem for each 9. Concurrent events A simple modification permits to the event calculus axioms, which I will describe in this section, are cumulative or cancelling. Two or more events are cumulative if their simultaneous occurrence has effects that none of them has on its own. One event cancels the events whose effects of concurrent representation the 266 M. Shanahan I Artificial Intelligence 77 (1995) 249-284 if their simultaneous occurrence prevents effect of another the second event from having an effect which it does have if it occurs on its own. It should be noted that, as with the suggestions in the previous section, none of the amendments I propose the applicability of Theorem 2, as axioms (E3) and (E4) will remain affects chronological. With the present axioms, it is possible to represent the simultaneous occurrence of two events, but not the fact that their effects are in any way dependent on each the this with an example. Suppose we want other. Let’s see If we pull following. If we push a supermarket on it it will go backwards. But if we push on it at the same time as pulling on it, then it will spin around. The first two facts are easily represented by the following event calculus formulae. trolley then it will move forwards. to formalise Initiates(Push,Forwards,s) Terminates(Push,Backwards,s) . Initiates(Pull,Backwards,s) . Terminates(Pull,Forwards,s) . Suppose we push the trolley at time 5 and then pull it at time 10. Happens(Push,S) . Happens(Pull,lO) If the conjunction of the above Initiates and Terminates formulae with the axioms is denoted by D,, and the conjunction of requisite uniqueness-of-names the Happens formulae by H3, then in all models of CIRCJEC A D, A H3] we have, Now consider what happens that we pull the trolley at time 5 as well as pushing it, and that we push the trolley at time 10 as well as pulling it. and Hola!sAt(Backwards,l2). information for example, HoldsAt(Forwards,7) if we try to represent the additional Happens(Pull,S) . Happens(Push,lS) If we denote How can we represent the conjunction of H3 with these formulae by Hi, then A D, A Hi], we still have HoldsAt(Forwards,7) models of CZRCJEC that simultaneously HoldsAt(Backwards,12). instead of moving either pushing and pulling on the trolley makes it spin around forwards or backwards? Two steps are required. First, we need to be able to write Initiates and Terminates formulae which describe the effect of two or more events occurring together. Then we need to be able to express the fact that one event can cancel the effect of another occurring at the same time. To achieve the first aim, an extra axiom is introduced, along with the infix function + which maps a pair of event types onto a third event type. A compound event of type e, + e2 happens if events of type e, and e2 happen concurrently. in all and the fact M. Shanahan I Artificial Intelligence 77 (1995) 249-284 267 Happens(e, + e,,t) + Huppem(e,,t) A Happens(e,,t) h e, Ze, . (E5) Note that this axiom will accumulate any number of concurrent events into a it is only necessary type.” Now, to represent to write single event events, formulae extra Initiates and Terminates formulae will suffice. in the usual manner. For the supermarket the cumulative effect of two concurrent Initiates and Terminates the appropriate the following trolley example, Initiates(Push + Pull,Spinning,s) . Terminates(Push + Pull,Forwards,s) . Terminates(Push + Pull,Backwards,s) . terminate representing For completeness there should be two further formulae Spinning. Now we will get the fact the desired that Push and Pull each the unwanted previous cumulative effect of both events, but we will still retain following this problem, conclusions about a new predicate Gelfond et al. [6] and Lin and Shoham Cancels. The formula Cancels(e,,e,) that if an event of type e, occurs then it cancels the effects of any event of type e2 occurring at the same time. Now we have to modify the definitions of Initiated and Terminated to take account of Cancels. their individual effects. To overcome [19], I will introduce represents Znitiated( p,t2) = def 3e,t,,s [Huppens(e,t,) A t, < t, A Stute(t,,s) A Znitiates(e,p,s) A lClipped(t, ,p,t2) A lCancelZed(e,t,)] . Terminated(p,t,) zddef 3e,t,,s [Happens(e,t,) A t, < t, A State(t,,s) h Terminates(e,p,s) A lDeclipped(t, ,p,t2) A 1CancelZed(e,t,)] . CunceZfed(e, ,t)Eddef 3e, [Huppens(e, ,t) A Cuncels(e,,e,)] . Similar modifications are required for Clipped and Declipped. 3e,t2,s [Huppens(e,t,) A t, <t, A t, <t, A Stute(t, ,s) A Terminates(e,p,s) A lCancelZed(e,t,)] . I5 Axioms for the associativity and commutativity of the “+” operator are unnecessary. 26X M. Shanahan 1 Artificial Intelligence 77 (1995) 249-284 3e,tz,s [Happens(e.t,) A t, < t2 A t, < t, A State(t,,s) A Znitiates(e,p,s) A lCancefled(e,t,)] . Finally, Cancels must be minimised at the same priority as Happens, Initiates to ensure and Terminates, effects unless an axiom events, events events, in the description to add have as required is described even representing they are known the assumption to. It is interesting that events don’t cancel each other’s for is no need to note there that that a compound in the approach entirely if they are concurrent. in event inherits the effects of its component of Lin and Shoham a history of terms of the separate Cancellation of individual formulae may now be included [19]. Instead, occurrences of a domain. To complete the supermarket trolley example, we the following. Cancels(Push, Pull) . Cancels(Pull,Push) of the modified event calculus the extra domain formulae of EC’ A 0; A H_; according axioms by EC’ and in all models by DA, then to the above policy, we as as well lHoldsAt(Forward.s,7) and lHoldsAt(Backwards,l2) the conjunction of D, with If we denote the conjunction of the circumscription have HoEdsAt(Spinning,7) and HofdsAt(Spinning,l2). 10. Continuous change This section extends as discrete well introduction a,, a>, . . .). The property property certain distance velocity from 9 is initiated p holds. For example, and property its starting point. change, as of two new predicates. Variables Trajectory(q,s,p,a) the event calculus of Section 3 to deal with continuous through [35]. This time are introduced if the discrete of time a the continuous in state s, then after a period for elapsed represents in Shanahan is achieved formula that, as the (a, property p could be 9 could be that a ball the ball has that is moving at a travelled a certain The Trajectory predicate facilitates the representation supply any means such as the height of a falling object or the level of liquid doesn’t events continuous reaches introduced type e happens for this purpose. The formula Triggers(s,e) hold. For example, when the vessel’s in state s. representing properties rim, that of of continuous change, in a filling vessel, but certain occur when in a vessel is that an event of represents the then an overflow event occurs. A second new predicate level of liquid There are now two ways in which a property to represent that the discrete property can be caused directly by an event. p holds at time the continuous- to represent that t by an event, and Znitiated,(p,t) I will write Znitiated,(p,t) and was initiated ly varying property p holds at time r and was initiated by an event. The same M. Shanahan i Artificial Intelligence 77 (1995) 249-284 269 property can be continuous at some times and discrete at others. The location of a continuous while the ball is moving but ball, for instance, can be considered discrete while it’s stationary. We have the following replacement definitions for Initiated. Initiated,(p,t,)-,,, 3t,,e,s [tl < t, A State(t,,s) A [Happens(e,t,) v Triggers(s,e)] A Znitiates(e,p,s) A lClipped(t,,p,t,)] . Znitiated,(p,t,)=,,, 3t,,e,s,q [tl < t, A State(t,,s) A [Happens v Triggers(s,e)] A hitiates(e,q,s) A iClipped(t,,q,t,) A a = t, -t, A Trajectory(q,s,p,a)] . Initiated(p,t)=,,,lnitiated,(p,t) v Initiated,(p,t) . The rest of the definitions of Section 3 are modified to cope with Triggers, but are otherwise the same as before. C@N(fl,P,t3)=def 3e,t2,s [tl <t, A t, < t, A State(t,,s) A Terminates(e,p,s) A [Happens(e,t,) v Triggers(s,e)]] . 3e,t,,s [tl <t, A t, < 1, h State(t,,s) A Znitiates(e,p,s) A [Happens(e,t,) v Triggers(s,e)]] . Terminated(p,t,)=,,, 3e,t,,s [tl < t, A State(t,,s) A [Happens(e,t,) v Triggers(s,e)] v Terminates(e,p,s) A lDeclipped(t, ,p,&)] . Apart from these modifications, the axioms of EC are retained from Section 3. is to minimise A&State The circumscription policy to overcome Initiates and with high priority, Terminates, allowing HoldsAt and State to vary. Given a formula A, I will write CZRC,,,[h] then Trajectory, Triggers, Initially, Happens, the frame problem its circumscription to this policy. to denote according interpreted The statement of Theorem 2 and its proof in Appendix A assume that time genuinely points are continuous change, time points need to be interpreted by the reals. A variant of Theorem 2 can be proved when time points are interpreted by the reals, but the that that for the naturals. Also, a certain condition proof the natural numbers. To accommodate is more complicated by 270 M. Shanahan I Artificial Intelligence 77 (1995) 249-284 this condition states that it must be possible to map the must hold. Intuitively, real time line onto a well-founded (known as a marker set) in such a structure way that the recursive formula VX q(x) * 4(x) is also well-founded with respect is the set to that structure. of time points at which events occur. This condition clearly holds, for example, if there In the case of the event calculus axioms, this structure is a finite number of events. Shortly I will illustrate the use of the axioms presented above with an example, but first I will present the extended version of Theorem 2. Definition 8. A marker set is a subset S of R such that, for all T, in R, the set of T, in S such that T, < T, is finite. From the definition, countable. Furthermore, element of a marker set and that this will be less than the (n + 1)th element. set can be finite or infinite, but must be that we can speak of the nth a marker the definition ensures Definition 9. A formula Cc, is real-chronological formula x and a marker set S if in argument k with respect to a (a) It has argument the form VX q(x) t, 4(x), where q is a time point and @$) is a formula is a predicate whose kth in which x is free, and (b) All occurrences of q in 4(x) are in conjunctions of the form q(z) A zk <xk A 8, where x A $ k 10 if zk,&S. Under the right conditions, axiom (E3) will be real-chronological in argument 1 to a conjunction of domain and history formulae and a marker set triggered to the set of time points at which events (including with respect corresponding events) occur. Theorem 10. Consider only models in which the time points are interpreted by the reals, and in which < is interpreted accordingly. Let P* and Q* be sets of predicates such that Q* includes q. Let 4 = Vx q(x) t, 4(x) be a formula which is real-chronological in some argument with respect to a formula x which doesn’t mention the predicate q, and a marker set S. Then CIRC[x A Ic, ; P* ; Q*] /= CZRC[x ; P* ; Q*] The proof of Theorem 10 is given in Appendix C. Now let x be the conjunction of a domain formula and a history formula with EC, but without (E3) and (E4). Let S be the set of time points at which events occur according to (E3) A x. It can be seen that (E3) is real-chronological in argument 1 with respect to x and S, so long as S is a marker set. So Theorem 10 can be used in exactly the same way the as Theorem 2 to add (E3) and (E4) to a circumscribed x without affecting minimisation. Under what circumstances does S constitute a marker set? Here are some It is clear that S is a market set if there is a finite number of events. It examples. M. Shanahan / Artificial Intelligence 77 (1995) 249-284 271 can easily be shown that it is also a marker set if there exists a smallest non-zero interval size between any two non-concurrent events. On the other hand, S is clearly not a market set if an event occurs at every time point in the infinite series i, $, A, and so on. Examples of this kind actually do arise, as in the 0, 3, idealised description of a bouncing ball (see Davis [5]), and the proof might be generalised to cope with these cases using transfinite induction. To illustrate this approach I will to the representation formalise Sandewall’s “ball and shaft” example (Sandewall [29]). A ball is moving along a surface towards a vertical shaft. When it reaches the shaft, it horizontally starts the walls of the shaft, until it reaches to fall, bouncing back and forth between the bottom where it comes to rest. of continuous change, The “ball and shaft” can be represented as follows. New sorts are introduced to rest. The property Moving(u) in for velocities, distances and heights, and I will consider only interpretations which these sorts are interpreted by the reals.16 There are four types of event: Propel(u), Drop, Bounce and Stop. A Propel(u) event sets the ball in motion with velocity u. A Drop event, which occurs when the ball is no longer supported, starts the ball falling. A Bounce event, which occurs when the ball hits a vertical surface, reverses the ball’s direction of motion. A Stop event occurs when the ball is moving comes horizontally with velocity u, Fulling is in freefall, Distance(d) assumed horizontal distance A, consider only interpretations meanings. that the ball is distance d from its starting point which is the ball is at height h. The to be at height 0. The near wall of the shaft is at is at height C. I will functions have their usual the far wall is at distance B and the bottom to be 0, and Height(h) in which the arithmetic is assumed represents represents represents represents the ball the ball surface that that that Znitiutes(Propel(u),Moving(u),s) . Trujectory(Moving(u),s,Distunce(d),u) + d = u*u . Triggers(s) Drop) t ZZoldsZn(Distunce(d),s) A d = A A Hol&Zn(Moving(u),s) A u > 0 . Znitiutes(Drop , Fulling,s) . Trujectory(Fulling,s,Height(h),u) + h = -4.9*u2 . Triggers(s,Bounce) t iYohz!sZn(Distunce(d),s) A HoldsZn(Moving(u),s) A [d=B A u>o] v [d=A A u<o]. (D4.1) (D4.2) (D4.3) (D4.4) (D4.5) (D4.6) I6 The set of fluents is now as large as the reals. However, note that axioms (Sl)-(S3) only insist on the existence of states with finitely many fluents. In practice, only states with finitely many fluents will usually arise. 272 M. Shanahan I Artificial Intelligence 77 (1995) 249-284 Initiates(Bounce,Moving(u2),s) +- HoldsZn(Moving(u,),s) A u, = -u2 Terminates(Bounce,Moving(u),s) Triggers(s,Stop) + Holdsin(Height(h),s) A h = C A HoldsIn(Falling,s) . Terminates(Stop,Moving(u),s) . Terminates(Stop,Falling,s) (D4.7) (D4.8) (D4.9) (D4.10) (D4.11) Eleven domain axioms are required, as in Sandewall’s formulation conjunction by D,. Now consider the following event. along with the requisite uniqueness-of-names [29]. Their axioms will be denoted Huppens(Propel( 5) .O) (H4.1) Proposition 11. CZK’,,,[EC A D, A (H4.1)] k 3t [Happens(Stop,t) A f >O] In other words, the ball eventually reaches the bottom of the shaft. Then, of EC without 3 to x yields the completions Proof. Let x be the conjunction (E3) and (E4) with D, A (H4.1). The proof is similar to the proof of Proposition 5. Applying Theorem 4 of the predicates minimised by then Theorem the new CZRC,,, definitions, Theorem 10 can be applied, first to add (E3) to x then to add (E4), to show that A D, A (H4.1)]. There are no domain constraints, so CZRC,,, yields (3) as in the proof of to show classically from these completions and Proposition 5. It is straightforward 0 the event calculus axioms that the proposition (E4) are still chronological with in all models of CZRC,,,[EC these completions (E3) and are true is true. since change, extended introduce The same example to cope with continuous is formalised by Sandewall [29] using a form of chronologi- in which discon- cal minimisation tinuities are postponed until as late as possible. Sandewall’s formulation, although it has the same number of axioms, is more concise. It uses temporal modalities It is arguable and doesn’t whether is achieved at the expense of expressive power. Indeed, when Sandewall does try to combine reasoning about action with reasoning about continuous [30]. One is that it does drawback problems. However, Sandewall has recently not cope well with explanation attempted comparison of thorough to address Sandewall’s approach with that presented here would be useful. formalisation as noted by Kautz [lo], to chronological minimisation, there are discontinuities. a much more complex [31,32]. A more this succinctness events where this problem change, results M. Shanahan I Artificial Intelligence 77 (1995) 249-284 273 11. Concluding remarks solutions Arguably, to default the most pleasing in classical, monotonic are reasoning problems logic what we know about the propositions of which we are certain and from which we can draw modular. First, we represent world-the the apparatus for jumping to reasonable, definite conclusions. Then, we formalise conclusions whose validity we cannot absolutely guarantee. The but defeasible, to this ideal, since solution presented the formalisation of states were introduced to be safely default persistence to circumscribed conclude that there is a flaw in the solution, since it has forced the ontology of the formalism. On the other hand, it could be argued that the exercise of formalising default persistence has simply brought of the need for default persistence, of an ontology which includes states. in this paper does not seem to conform into the ontology solely to facilitate from the axioms of the event calculus. It is tempting to light the desirability, by allowing domain independently and history separately formulae This paper does not address the issue of explanation, from reasoning problems have an explanation that is reasoning such as the bloodless variation of the Yale shooting scenario effects to causes. A number of temporal component, (in which the victim is alive after the shot has been fired), and Kautz’s stolen car [lo]. In terms of the circumscriptive event calculus, a HoldsAt fact might problem formulae. This be given, demanding conforms properties hold because events initiate causes”. in terms of Happens the event calculus-that themselves are “first to a representational principle underlying them, whilst events an explanation There are two approaches to explanation with the event calculus: deductive and are facts requiring explanation In the deductive approach, HoldsAt abductive. conjoined with the domain, history and event calculus formulae, and explanations to be among the logical consequences. This approach, using other are expected and Stein [26], Lifschitz (Morgenstern formalisms, and Rabinov [17], Baker [l, 21). In the abductive approach, which is less common (Shanahan formulae which, when conjoined with the domain and history formulae and event calculus axioms, yield the facts to be explained as logical consequences. [34,35]), explanations are Happens in the literature is common The abductive approach seems to fit better the above-mentioned representa- no extra representation tional principle. Furthermore, to solve explanation problems using abduction. Only the reasoning mode changes. to explanation, on the other hand, violates the conditions The deductive approach to for applying Theorems 2 and 10. If extra HoldsAt axiom (E4), the results of minimisation become unpredictable. formulae are conjoined is required apparatus An interesting topic for further research the calculus of events presented here and the situation calculus of McCarthy and Hayes [23]. the set of The two formalisms can be compared with respect basic relations I will briefly discuss each of these in turn. The ontologies of the two formalisms are similar- both and their treatment of persistence. is the relationship between (or actions). The event (or fluents) and event to their ontologies, include properties they represent, types 274 M. Shanahan I Artificial Intelligence 77 (199.5) 249-284 calculus includes also points, which features rarely been employed Miller and Shanahan [25]). states-which time in McCarthy and Hayes’ 1969 paper, although they have in subsequent work using the situation calculus (but see situations-and resemble strongly time. sequences of events. However, in the situation calculus literature. in the situation calculus? The event calculus relates properties in the situation calculus through they do not explore One of the main motivations of this paper was to extend approaches to the to deal with continuous change, a subject which has been almost frame problem entirely neglected It is not clear, at first glance, that the ontology of the situation calculus is adequate for representing continuous snapshots of the world which are change, since it is centered on instantaneous into a tree structure via the Result function. Gelfond et al. [6] argue organised the that continuous change could be represented introduction of infinitely divisible actions. Unfortunately, this suggestion very far. It is particularly difficult to see how triggered events, which to represent all but the simplest examples of continuous change, could are needed that lacks real-valued narrative be captured with an ontology represented How do the basic relations in the event calculus compare with to time those points, whilst the situation calculus relates them to situations. Since situations are hypothetical whilst time points are actual, this leads to an emphasis in the event calculus on an actual narrative of events, whilst the situation calculus concentrates the event calculus of this paper on hypothetical includes states, which are hypothetical like situations, so there is no fundamental reason why it could not match the situation calculus in representing hypothetical the situation calculus can incorporate predicates sequences of events. Similarly, [27]), or which distinguish actual from hypothetical [25]). So, which map situations onto a narrative with respect to their ontologies and the basic relations it seems to be possible Perhaps to extend both formalisms until they merge into each other. the most significant difference between is in the treatment of persistence. Frame axioms in the situation calculus literature usually in the relate preceding situation, whilst the event calculus persistence axiom (E3) relates the properties which hold at a time point to earlier events. This has two important consequences. First, situation calculus frame axioms are usually bidirectional- persistence works backwards as well as forwards. Persistence in the event calculus works forwards only.17 Second, properties only persist in the event calculus if they are not “caught” by the persistence are initiated by events. Other properties the frame axiom usually In the situation calculus axiom. applies to all fluents, although in Lifschitz [14, 1.51 its application to a subset of the fluents known as the frame fluents. time line (Miller and Shanahan the properties which hold the two formalisms those which hold (Pinto and Reiter they represent, in a situation is restricted situations literature, however, to Hopefully further insight into the relationship between be gained in the future. Ultimately, what we would like to develop the two formalisms can is a deeper “This was not true in the original event calculus of Kowalski and Sergot [ll] M. Shanahan I Artificial Intelligence 77 (1995) 249-284 275 of the space of possible formalisms for representing understanding an understanding would map out the possible ontologies, and approaches choice. particular formalisms would disappear altogether. In the light of such an understanding, and would highlight change. Such sets of basic relations, implications of each the apparent boundaries between to persistence, the Acknowledgements Thanks to Tony Kakas, Vladimir Lifschitz, Rob Miller, Ray Reiter and Pierre- invaluable mathematical referees for their helpful comments by an SERC Advanced Research Yves Schobbens. Special assistance. Thanks also to several anonymous on Fellowship. this work. The author to Mark Ryan is supported thanks for Appendix A. Proof of Theorem 2 First we have some preliminary definitions. Definition A.1 A J-indexed set S is a set, every member of which is associated with exactly one element of the set J (its index). I will write Sj to denote the set of all s ES such that j is the index of s. Consider a many-sorted Y of sorts, an Y’* x y-indexed 9’ of predicate symbols.” language 2 of first-order predicate calculus with a set set set 9 of function symbols and an Y*-indexed Definition A.2. A pre-interpretation y-indexed mapping from 9,, x . f - X LSsds, where 9 set of objects, and for every n-ary function f E ss,,.,.,,,,,, Fn(f) is a pair to gs. (9,Fn), of 2 is an is a Definition A.3. A partiaf interpretation of 2 (9,Fn) Pr(P) is a pre-interpretation where of 2, and for every n-ary predicate P E 9’s,,...,Sn, (( 9, Fn),Pr), is a pair is a partial mapping from gs, x * * * x LBSn to TRUE or FALSE. Definition A.4. An such that for every predicate P E 9, Pr(P) interpretation of 23 is a partial is a total mapping. interpretation (Zp,Pr) of 2 Definition AS. A model of a formula +b of language 2 is an interpretation which I,!J is true, where truth in an interpretation in the standard way for predicate calculus. of 2? in is defined in terms of Pr and Fn IRY* is the set of all finite tuples of elements of 9’. 276 M. Shanahan I Artificial Intelligence 77 (1995) 249-284 Definition A.6. If (Zp,Pr, ) is a partial interpretation and for all X, E gS,, Pr,(P)(X,, of 2, then (Zp,Pr,) interpretation fills out (Zp,Pr, ) for 9 , X,) = V implies Pr,(P)(X,, . . of .Y and (Zp,Pr,) is an if for all P E 9 s,,,,,. s, , X,) = V. Definition A.7. A formula of Y has the truth value TRUE tion Z of 2 if it is true in every interpretation truth value FALSE Otherwise. in Z is it is false in every interpretation its truth value is not defined in I. in a partial interpreta- that fills out Z for 9, and has the that fills out Z for 2. Definition A.8. The n-ary predicate P E 9,,,, interpretation defined in 1. Conversely, the truth value of P(X,, I of 9 ,,,,, is uninterpreted if for all X, E gSd,, , the truth value of P(X, , . the predicate P is fully interpreted in Z if for all X, E &BS,, . , X,,) is defined in 1. in a partial , X,) is not Now let the set Y of sorts include the sorts s,, the set 9’ of predicates sort of time points. Let 9 5 ,..... 5,. Am’ Consider only interpretations interpreted by the natural numbers, meaning. Let Zp = (9,Fn) interpretation predicate of 2 which is chronological in argument of 2 in 9’ is fully interpreted. Finally, let be a pre-interpretation in which q is uninterpreted, of 2 . , s,, . . . , s,, where S, is the include < E PS:,,,Y, and q E in which the time points are that is 63, = N, and in which < has its usual of 22. Let (Zp,Pr) be a partial in which every other I,!J = Vx q(x) +-+ 4(x) be a formula but t. Definition A.9. A q-map is a partial mapping FALSE. from 6SS, X . . . x %,vm to TRUE or A q-map can be used to extend an interpretation in which q is uninterpreted to one in which it is fully interpreted. Definition A.lO. A q-map M is total below T E N if for all X, E 63, where X, < T, M(X,. is defined. . . . ,X,) The proof of the theorem relies on several lemmas, which I will now prove. Definition A.ll. Let M be a q-map and P E 9 be an n-ary predicate. The function 63 is defined as follows. (Pr@W(P) = (z(p), if P is q . otherwise . Lemma A.12. For any T E N, and any q-map M which is total below T, for all X, E gs, where X, s T, in (Zp,Pr@M). truth value of 4(X,, is defined . . . , X,,,) the M. Shanahan I Artificial Intelligence 77 (1995) 249-284 277 Proof. Since $ is chronological, in conjunctions of the form q(Z,, X, G T, the (Zp,Z’r@M). Consequently, (Zp,Pr Cl3 M) , because Pr CD M is a total mapping for all predicates occurring apart from q. the only occurrences of q in 4(X,, A Z,<X,.IfMistotalbelow . . . , X,) A 2, <Xc truth value of 4(X,, value of q(Z,, is defined is defined . . . , X,) . . .,Z,) truth then the . . . , X,) are Tand in in in 4 0 Definition A.13. The q-map M, is defined for any (Y E N as follows. MJX,, . . . ,X,1 V, = undefined, 1 ifcw>Oand4(X,,.. . ,X,J has truth value V in (Zp,Pr@M,_,) otherwise . , that MO is undefined everywhere. The mapping M, will facilitate Note definition uninterpreted properties of M, which will be required that extends of a q-map to a model of the chronological later. a partial the is formula r,k First I will prove some in which q interpretation Lemma A.14 For any (Y E N, M, is total below a. Proof. The proof is by induction. Clearly the proposition is true for the base case where (Y is 0. For the inductive case, consider any Z3 and suppose that MO is total the truth value below p. Then from Lemma A.12, for all Xi E gsi where X, <p, is of+(Xr,..., total below p + 1. 0 is defined in (Zp,Pr@ MO). So from Definition A.15, M,,, X,) Lemma A.15 For any (Y E N and all Xi E gx,, if M,(X, , . . . , X,,,) = V then Mm+l(X,, . . . ,X,,J=V. Proof. The proof is by induction. Clearly the proposition where (Y is 0. For the inductive case, consider any ~3, and suppose X~~~~~,ifM,(X,,...,X,)=VthenM~+,(X,,...,X,)=V.Fromthishypoth- the esis, (Zp,PrCBM,), from Defimtron A. 13 tf MD + I(XI, . . . , X,)=VthenMP+z(X1,...,X,)=V. truth value of 4(X,, for all Xi E gsi, . . . ,X,,,) . . if then it has the same truth value in (Zp,PrG3Mp+1). Therefore, is true for the base case that for all is defined in q Note that Lemma A.15 doesn’t imply that M, is the same as M,,, , because M, is only a partial interpretation. Lemma A.M. For any cy E N, and all Xi E Bs, where X, < (Y, if q(X,, (ZP,Pr 03 M, ) then 4(X,, truth value V . . . , X,) in . . . , X,) has in has truth value V (Zp,Pr@M,). Proof. Clearly, if 4(X,, . . . ,X,J has truth value V in (Zp,Pr @ M, ) then 278 M. Shunahun i Artificiul lnteliigence 77 (1995) 249-284 because . . . , X,,) = V, M,(Xi, M,(X, 1 . . V in (Zp,Pr $ M, ~, ) Therefore, value V in (Zp,Pr CT3 Mcy ) , X,,,) = V then, Ll q is uninterpreted in (@Jr). from Definition A.13, 4(X,, from Lemma A. 15, 4(X,, But if has truth value truth . X,,) has . ,X,) . Definition A.17. The q-map M,,, is defined as follows. WJ(X,, . .,X,,)=V. if there is some (Y E F+J such that M,(X, , . . , X,,,) = V. Lemma A.15 a partial extends chronological ensures that MU is a well-defined function. interpretation in which q is uninterpreted The mapping M, to a model of the formula I,!J, as I will now show. Lemma A.18. M, is a total mapping from 9,, x . . . X a,,,, to TRUE or FALSE. any T E W. From Lemma A. 14, M,,, is total below T + 1. That Proof. Consider is, for all X, E 9,, where X, G T. M,, A.17, defined. for all X, E GJ5,. if M,+,(X,. Therefore Mw is a total mapping , (X,. . .X,,,) . is defined. , X,) is defined is from 9,, , X . . . X 9s,,, to TRUE or From Definition then M,(X,, . ,X,) . FALSE. 0 Lemma A.19. For all X E 9 (Ip,PrC%MM,) then 4(X,. f . .ii,‘) ~~s~r%z’~~~ub X tin ) has truth value V in (Zp,Pr$Mw). then Mw(X,. (Y such Proof. Since q in uninterpreted (Zp,Pr@M,) there is some Lemma A.16, 4(X,, tions A.11 (Zp,Pr@M,). and A.17, Cl this that M,,(X,, . in (Zp,Pr), if q(X,, , X,,,) = V. From Definition A.17, , X,) has truth value V in that from Definition A.11 and . X,,) has truth value V in (Zp,Pr 63 M, ) . From Defini- in , X,,,) = V. Then this implies that 4(X,, implies value V truth ,X,,) has . . Lemma A.20. (Zp,Pr 63 MU ) is an interpretation of 60. Proof. From Lemma A.18, M, is a total mapping a total mapping mapping for every predicate for every predicate P E 9’. P E 9’ except q, 0 for q. Therefore, (Pr@ Mm)(P) since Pr(P) is is a total Lemma A.21. (Zp,Pr Q3 M, ) is II model of Ic, = Vx q(x) ++ 4(x). Proof. The proposition follows directly from Lemmas A.19 and A.20. 0 Now, chronological language I can show formula as g, but without that circumscribing is easy, under the conjunction the right conditions. of a formula with Let 9 a be the same that the predicate q. Let X be a formula of _Y. Note M. Shanahan I Artificial Intelligence 77 (1995) 249-284 since (Zp,Pr) is a partial interpretation Ze-, and recall that q is uninterpreted it is also a partial interpretation of 9, in (Zp,Pr) . 279 of Lemma A.22. Zf (Zp,Pr ) is a model of ,y, then (Zp,Pr 03 M,,, ) is a model of x A *. Proof. From Lemma A.21, of x then, since x doesn’t mention q, (Zp,Pr@M,) (Zp,Pr$M,) is a model of 4. If (Zp,Pr) is a model is also a model of x. 0 Let P* and Q* be subsets of 9 such that Q* includes q. Lemma A.23. All models of CZRC[x A + ; P* ; Q*] have the form where ; P* ; Q*], and M is a q-map. is a model of CZRC[x (Zp,Pr’) (Zp,Pr’@M) Proof. Any model (Zp,Pr”) of CZRC[x A I$ ; P* ; Q*] can be written in the form and (Zp,Pr’@M), is Pr”(P) for every predicate P E 9 except q. Then it remains to show that Pr’(P) (Zp,Pr’) where M is the q-map Pr”(q), q is uninterpreted is a model of CZRC[x in (Zp,Pr’), ; P* ; Q*]. Suppose is not a model of CZRC[x (Zp,Pr’) model of x, since (Zp,Pr’@M) isn’t mentioned in P*, with Q* allowed (Zp,Pr”‘@ M,) be smaller in P* than predicate P E 9’ except q. Therefore $ ; P* ; Q*], which is a contradiction. is a ; P* ; Q*]. Clearly is a model of x and M interprets only q which in x. So there must be some model (Zp,Pr”‘) of x which is smaller from Lemma A.22, is a model of x A I). With q allowed to vary, (Zp,Pr”‘@ M,) must (Pr”‘@ M,)(P) = Pr”‘(P) for every is not a model of CZRC[x A (Zp,Pr’@ M), because (Zp,Pr’$ M) to vary, (Zp,Pr’). (Zp,Pr’) Then, than 0 Lemma A.24 Every formula which is true in all models of CZRC[x also true in all models of CZRC[x A $ ; P* ; Q*]. ; P* ; Q*] is Proof. Consider any model of CZRC[x A JI ; P* ; Q*]. From Lemma A.23, has the form (Zp,Pr’@M) (Zp,Pr’) M is a q-map. The theorem true in (Zp,Pr’) it ; P* ; Q*], and is a model of CZRC[x then follows from the fact that any formula which is is also true in (Zp,Pr’@ M). q where Theorem 2 follows from directly from Lemma A.24. Appendix B. Temporal projection algorithms Theorem B.4 presented here, facilitates the construction temporal projection. Recall Definitions A. 1-A. 11 and the corresponding tions from Appendix A. Definition B.l. The q-map C, is defined for any (Y E N as follows. of algorithms for assump- 280 M. Shanahun I Artificial Intelligence 77 (1995) 249-284 C,(X,,. . ,x,,,>= V, if (Y > 0, and for all models (Zp,Pr’) of CZRC[X ; P* ; Q*], $(X,. . . ,X,) has truth value V in (Zp,Pr’@ C,_,) , undefined. otherwise Lemma B.2. For any q(X,, (Y E N and for all X, E 9 s,, if C,(X,. . , X,) = V then . . . , X,,,) has truth value V in all models of CZRC[x A Cc, ; P* ; Q*]. is trivially Proof. The proof case where CP(X,, q(X, , . . . , X,,) has truth value V in all models of CZRC[x The proposition p. Suppose (Y = 0. Consider is by induction. any true for , X,) = V A II, ; P* ; Q*]. . the base implies From Definition B. 1, C,, , (X, , interpretation . X,,,) = V implies 4(X,. of the form (Zp,Pr’ $ CO), where , X,,,) has truth (Zp,Pr’) . value V in every partial is a model of CZRC[x every CZRC[x interpretation A 9 ; P* ; Q*] 4(X,, 4(X,, so does q(X,, . . . X,,,). ; P* ; Q*], which by definition means interpretation. that fills out such a partial . . . ,X,,) . . . , X,,,) has truth value V in all models of CZRC[x truth value V has fills out such a partial in all models interpretation of CZRC[x it has truth value V in But every model of so (see below), A + ; P” ; Q*]. If then A I/J ; P* ; Q*] To see that every model of CZRC[x (Zp, Pr’ G3 C, ) , where A 4 (Zp,Pr’) ; P* ; Q*] fills out a partial is a model of CZRC[x tion of the form recall Lemma A.23. From Lemma A.23, every model of CZRC[x has the form M M(X,, is a model of CZRC[x C,(X,, (Zp,Pr’@CC,). hypothesis, fills out where induction So (Zp.Pr’$M) is a q-map. (Zp,Pr’$M) ,X,,,)=V. (Zp,Pr’) From the . . . . . X,) = V 0 A I) ; P’ interpreta- ; P* ; Q*], ; P* ; Q*] ; Q*] and implies Lemma B.3. For any cy E N. Cct is total below (Y. Proof. The proof is the same as for Lemma A.14. 0 Theorem B.4. For any LY EN 4~ ; P* ; Q*] b q(X, . , X,,,) and if’ and only all X, E gshJ, where X,C CY, CZRC[x A if C,(X, , . , X,,,) = TRUE. Proof. The lemma follows directly from Lemmas B.2 and B.3. 0 Theorem facilitates B.4 , X,,,) (or false) q(X,, is true any X, E 9*,. Let cy be X,. An algorithm will compute and TRUE, FALSE. From Theorem B.4, all models membership the set S, of all tuples the set S, of all tuples of CZRC[x A of S, (or S,). I) the construction of algorithms in all models of CZRC[x built according for deciding whether A $ ;P* ; Q*], given schema to the following (Y,, (Y,, . . . , Y,) to check whether q(X,, ; P* ; Q*], . , Y,,,) such such . is simply that C,(Y,, that C,(Y,, , X,) necessary it . . . , Y,,,) = . . , Y,) = in for to check is true (or false) M. Shanahan I Artificial Intelligence 77 (1995) 249-284 281 SE.:={ >, f&J:={ 1, FOR Y,:=O TO (Y S,:=S&J{(Y* )...) Y,)ITRUE(Y, )...) Y,)} S, := S, U { ( Yl, . . . , Y,) 1 FALSE(Y,, . . . , Y,)} . TRUE(Y,, is shorthand . . . , Y,) CZRC[x ; P* ; Q*]“, and FALSE(Y,, is false in all models of CZRC[x computing the sets for “+(Y,, . . . , Y,) . . . , Y,) is shorthand is true in all models of . . . , Y,) for is required for “+(Y,, ; P* ; Q*]“. Another algorithm WI? *. ., Yn) 1 TRUE(Y,, . . . , Y,,J> and WI,. *. , Y,) 1 f’A~!=(y,, . d . , Y,J> at each iteration. The details of this second algorithm depend on ,y and 4, but it can exploit the fact that all occurrences of q in 4(Y,, . . . , Z,,,) A Z, < Y,. On any given iteration of the algorithm, a of the form q(Z,, conjunction of that form is true in all models of CZRC[,y ; P* ; Q*] if and only if (Z,, (E3), since theorem proving negation-as-failure domain and history formulae. resolution sets, and to minimise Horn clause fragments of the the definitions of Initiated and Terminated are clausal, the required . . .,Z,)~S,,andisfalseifandonlyif . . . , Y,) are in conjunctions could be used to compute (Z,,...,Z,)ES,.Inthecaseof could be used techniques There is nothing surprising about It simply in time in the way we might expect. The purpose of Theorem B.4 the use of the obvious algorithm. Effectively, Theorem B.4 allows us in the same way that Theorems 2 and 10 allow works forwards is to endorse to forget about 9 computationally, us to forget about it from the point of view of minimisation. this algorithm schema, of course. Appendix C. Proof of Theorem 10 Consider the same language 9 as in Appendix A. Consider only interpretations by the reals, in which time points are interpreted of 2 which < has its usual meaning for real numbers. Let $ = VX q(x) - formula of 9 which is real-chronological of 9 and a marker set S. Let Zp = (9,Fn) (Zp,Pr) be a partial interpretation every other predicate of M,, and of M, from Appendix A. that is 9st = R, and in 4(x) be a t with respect to a formula x of 9. Let but in which in 9 is fully interpreted. Recall the definitions of a q-map, in which q is uninterpreted, be a pre-interpretation in argument of 2 282 M. Shanahan I Artificial intelligence 77 (1995) 249-284 Definition C.l. A q-map M is total up to T E Iw if for all Xi E gsd,, where X, d T, M(X,, , X,,,) is defined. . Lemma C.2. For any (Y E N where (Y > 0, if S has (Y or more elements then M, is total up to any T E 1w such that T c ath element of S. . ,X,) 4(X,, By hypothesis, Proof. The proof is by induction. Clearly the proposition is true for the base case where LY is 1. For the inductive case, consider any p, and suppose that MP is total up to any T E IJ! such that T c Pth element of S. Then, from the definition of M,, we have to show that for all X, E 9*, where X, < (/3 + l)th element of S, the truth value of 4(X,, in (Zp,Pr$M,). for all Xi E 9,?, where X, G /3th is defined element of S. So consider any X, G (p + 1)th element of S such that X, > Pth element of S. Now, since I/J is real-chronological, it can be seen that the only . . , X,) are in conjunctions of the form q(2) A Z, < occurrences of 4 in 4(X,, is false X, A 0 which are false. To see this, consider 2,. Clearly the conjunction the Pth if Z,> X,. On the other hand, if 2, <X, then, since X, is strictly between and (p + 1)th elements of S, 2, is not in S, and 13 is therefore false from the definition of real-chronological. is defined 1 X,) . 0 Lemma C.3. For any (Y E N, if S has fewer than (Y elements then M, is total up to any TEIW. to show that for all Xi E 9Js, where X, > Proof. From Lemma C.2, n/r, is total up to the last element of S. So, from the the last definition of M,, we have in (Ip,Pr CB M, _, ). element of S, the truth value of 4(X,, in From if 4(X,, is always X, > the last element of S. Therefore defined for any xi E 9s , and M, is total up to any T E Iw. q of q the only occurrences of the form q(z) A 6, where 8 is false the truth value of 4(X,, the definition . . X,,,) are in conjunctions last element of S. So 4(X,, . . . , X,) is defined real-chronological, if X, > the is defined . . . ,X,) . , X,) of The proofs of Lemmas A. 15 and A. 16 are unchanged from Appendix A. Lemma C.4. M, is a total mapping from ad,, x . . ’ X gsrn to TRUE or FALSE. . . , X,) Proof. It is easy to show that for all X, E Bsl there exists some (Y such that is defined. To see this, consider X,. If there is no T E S before M,(X,, X,, then M,(X,, if there is no . . . , X,) T E S after X,, then from Lemma C.2, M,(X,, is defined, where (Y is the . . . , X,) in S. Finally, if there is some T E S after or equal to X, and number of elements some T’ ES before X,, then from Lemma C.2, M,(X,, is defined, the smallest T E S after or equal to X, is the ath element of S. The fact where that these three cases are exhaustive. From the that S is a marker set ensures is defined, from Lemma C.3. Otherwise, . . . ,X,) M. Shanahan I Artificial Intelligence 77 (1995) 249-284 283 definition of M,, if 44,(X,, Therefore M, is a total mapping from gS, x + . . x gsa,m to TRUE or FALSE. is defined then &(X1, . . . , X,,,) is defined. . . . , X,) Cl The rest of the proof is the same as the proof of Theorem 2 in Appendix A, that J, is to the formula x and some 10 in the same way, but under in some argument with respect the assumption yielding Theorem real-chronological marker set. References 111 PI [31 [41 [51 161 [71 PI 191 [lOI 1111 [I21 iI31 iI41 1151 1161 u71 W31 1191 WI IJCAI- reasoning Formalizing in: Proceedings and D.W. Etherington, about change: a qualitative in: Proceedings KR-89, Toronto, in: Proceedings KR-92, Boston, MA for temporal persistence and projection, logic and temporal projection, Artif. Zntell. 33 frame axioms, in: Proceedings 1987 Workshop on the reasoning in the framework of the situation calculus, Artif. Zntell. 49 in: Proceedings AAAI-92, San Jose, CA (1992) 577-583. A.B. Baker, A simple solution to the Yale shooting problem, Ont. (1989) 11-20. A.B. Baker, Nonmonotonic (1991) 5-23. A.B. Baker and M.L. Ginsberg, Temporal projection and explanation, 89, Detroit, MI (1989) 906-911. J.M. Crawford reasoning approach, E. Davis, Infinite loops in finite time: some observations, (1992) 47-58. M. Gelfond, V Lifschitz and A. Rabinov, What are the limitations of the situation calculus? in: R. Boyer, ed., Essays for Bledsoe (Kluwer Academic, Boston, MA, 1991) 167-179. A.R. Haas, The case for domain-specific Frame Problem, Lawrence, KS (1987) 343-348. S. Hanks and D. McDermott, Nonmonotonic (1987) 379-412. B.A. Haugh, Simple causal minimizations ings AAAZ-87, Seattle, WA (1987) 218-223. H. Kautz, The logic of persistence, in: Proceedings AAAI-86, Philadelphia, PA (1986) 401-405. R. A. Kowalski and M.J. Sergot, A logic-based calculus of events, New Gen. Comput. 4 (1986) 67-95. V. Lifschitz, Pointwise circumscription: preliminary phia, PA (1986) 406-410. V Lifshitz, Formal Lawrence, KS (1987) 35-37. V. Lifschitz, Frames in the space of situations, Artif. Intell. 46 (1990) 365-376. V. Lifschitz, Toward a metatheory 376-386. V Lifschitz, Circumscription, Handbook Reasoning and Uncertain Reasoning (Oxford University Press, Oxford, 1994) 297-352. V. Lifschitz and A. Rabinov, Miracles 225-237. F. Lin and Y. Shoham, Provably correct theories of action, in: Proceedings AAAI-91, Anaheim, CA (1991) 349-354. F. Lin and Y. Shoham, Concurrent actions in the situation calculus, in: Proceedings AAAI-92, San Jose, CA (1992) 590-595. R.P. Loui, Response temporal evolution, Cognitive Sci. 11 (1987) 283-297. in: D.M. Gabbay, C.J. Hogger and J.A. Robinson, in Artificial Intelligence and Logic Programming, Vol. 3: Nonmonotonic in: Proceedings 1987 Workshop on the Frame Problem, in: Proceedings KR-91, Boston, MA (1991) temporal evolution of beliefs and beliefs about theories of action, Artif. Zntell. 38 (1989) in: Proceedings AAAI-86, Philadel- to Hanks and McDermott: theories of action, in: Proceed- eds., The of action, in formal of Logic report, 284 M. Shanahan I Artificial Intelligence 77 (1995) 249-284 [21] J. McCarthy, 27-39. [22] J. McCarthy, Circumscription-a form of non-monotonic reasoning. Artif. lntell. 13 (1980) Applications of circumscription to formalizing common sense knowledge, Artif. Intell. 28 (1986) 89-116. (231 J. McCarthy and P.J. Hayes. Some philosophical problems from the standpoint eds., Machine Zntelligence 4 (Edinburgh of artificial University intelligence, Press, Edinburgh, in: D. Michie and B. Meltzer. 1969) 463-502. framed: Scotland. Pylyshyn. York, 1987) 113-122. (24) D. McDermott, We’ve been in: Z.W. ed., The Roboi’s Dilemma: The Frame Problem in Artificial Intelligence (Ablex, New or why AI is innocent problem, of the frame [25] R.S. Miller and M.P. Shanahan, Narratives in the situation calculus, J. Logic Comput. 4 (1994) 513-530. [26] L. Morgenstern and L.A. Stein. Why things go wrong: a formal theory of causal reasoning, in: Proceedings AAAI-88, St. Paul. MN (1988) 518-523. [27] J. Pinto calculus, Hungary Temporal the situation and R. Reiter. in: Proceedings Tenth International Conference on Logic Programming, Budapest, (1993) 203-221. in logic programming: reasoning a case for [28] R. Reiter, The completeness frame problem in the situation calculus: result for goal regression. in: V. Lifschitz, cal Theory of Computation: Papers in Honour of John McCarthy 1991) 359-380. solution a simple and a ed., Artificial Intelligence and Mathemati- Press, New York (sometimes) (Academic [29] E. Sandewall, Combining logic and differential equations for describing real-world systems, in: Proceedings KR-89, Toronto, Ont (1989) 412-420. for the Filter preferential entailment (301 E. Sandewall, logic of action in almost continuous worlds, in: Proceedings [31] E. Sandewall, Computer (321 E. Sandewall, and and tluents. IJCAI-89, Detroit. MI (1989) 894-899. Features Information The Report Science, Linkoping University, of nonmonotonic (1993) 738-743. range of applicability Technical France IJCAI-93. Chambtry. Proceedings LiTH-IDA-R-92-30, Sweden logics (1992). the for Department of inertia problem, in: 1331 L.K. Schubert, Monotonic R. Loui and G. Carlson. Boston, MA, 1989) 23-67. Prediction [34] M.P. Shanahan, solution of the frame problem cds.. Knowledge Representation and Defeasible Reasoning in the situation in: H. Kyburg, (Kluwer, calculus, is deduction but explanation is abduction, in: Proceedings IJCAI-89, Detroit, MI (1989) 1055-1060. Representing continuous change in the event calculus, in: Proceedings ECAI-90, [35] M.P. Shanahan. Stockholm, [36] M.P. Shanahan, Sweden (1990) 598-603. Explanation in the situation calculus, in: Proceedings IJCAI-93, Chambery, France (1993) 160-165. [37] Y. Shoham, Reasoning about Change: Time and Causation from the Standpoint of Artificial Intelligence (MIT Press. Cambridge, MA. 1988). 