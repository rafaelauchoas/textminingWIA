Artificial Intelligence 172 (2008) 541–569www.elsevier.com/locate/artintManaging parallel inquiries in agents’ two-sided searchDavid Sarne ∗, Sarit Kraus 1Department of Computer Science, Bar-Ilan University, Ramat Gan, 52900 IsraelReceived 25 September 2006; received in revised form 8 September 2007; accepted 9 September 2007Available online 19 September 2007AbstractIn this paper we address the problem of agents engaged in a distributed costly two-sided search for pairwise partnerships in Multi-Agent Systems (MAS). While traditional two-sided search mechanisms are based on a purely sequential search of all searchers,our mechanism integrates an ability of some of the agents to maintain several search efforts in parallel at each search stage. Weshow that in many environments the transition to the new mechanism is inevitable since the adoption of the parallel-interactionsbased search suggests a greater utility for the searching agents. By exploring the appropriate model equations, we present thenew dynamics that drive the equilibrium when using such a mechanism in MAS environments. Complementary algorithms areoffered, based on the unique equilibria characteristics found, for facilitating the extraction of the agents’ strategies. The analysismethodology used supplies a comprehensive solution to a self contained model, and also offers a great value for future workconcerning distributed two-sided mechanisms for MAS. Towards the end of the paper we review two of these important modelsthat can benefit from the proposed analysis.© 2007 Elsevier B.V. All rights reserved.Keywords: Multi-agent systems; Autonomous agents; Equilibrium analysis; Matching1. IntroductionIn this paper we consider the problem of agents engaged in a distributed costly two-sided search for partners [8] inMulti-Agent Systems (MAS). The problem is often classified as a matching problem, since the agents’ goal is to formpairwise partnerships. In this problem each agent is satisfied with only one partner and gains no utility from extending(upon finding a partner) its partnership further or from operating on its own. The matching problem is a unique variantof the general coalition formation model and its main incentive is similar to the one which drives coalitions of agents:throughout partnering, the agents can operate more effectively and coordinate their activities [39], thus increase theparticipants’ benefits [7].Various centralized matching mechanisms can be found in literature [3,10,14]. However, in many MAS environ-ments, in the absence of any reliable central matching mechanism, the matching process is completely distributed.In a distributed matching model the agents need to search for partnering opportunities. The agents learn about new* Corresponding author.E-mail addresses: sarned@cs.biu.ac.il (D. Sarne), sarit@cs.biu.ac.il (S. Kraus).1 The research was partially supported by NSF grant IIS0705587 and ISF. Sarit Kraus is also affiliated with the Institute for Advanced ComputerStudies, University of Maryland, College Park, MD.0004-3702/$ – see front matter © 2007 Elsevier B.V. All rights reserved.doi:10.1016/j.artint.2007.09.002542D. Sarne, S. Kraus / Artificial Intelligence 172 (2008) 541–569partnering opportunities (and the benefits encapsulated in them) through bilateral interactions. The search process isconsidered two-sided when all agents in the environment engage in search. Thus a partnership eventually formed isthe result of the combined search activities of both sides of the interaction (i.e., the agents forming it). Similarly, thetwo-sided nature of the search suggests that a partnership between a pair of agents is formed only if it is mutuallyaccepted by them.This concept of two-sided search for forming partnerships can be found in many traditional economical applicationssuch as the marriage market [40] and the job market [27]. It can also be found in many MAS applications [22], e.g.,buyer and seller agents operating in electronic marketplaces and peer-to-peer distributed applications.2 An importantclass of such applications includes secondary markets for exchanging unexploited resources. An exchange mechanismis used in those cases where selling the resources is not the core business of the organization or when the overhead forselling them makes it non-beneficial. For example, through a two-sided search, agents representing different serviceproviders can exchange unused bandwidth [37] and communication satellites can transfer communication with agreater geographical coverage. In all these applications an agent can gain a utility only if it eventually partners withanother agent. However, once a partnership is formed, adding more agents as partners does not produce any additionalbenefit.The main idea of this paper is that a distributed two-sided search in MAS environments should take into consid-eration agents’ capability to use parallel (simultaneous) interactions with other agents. This is in comparison to thetraditional models found in the two-sided search literature [8,40] where the agents’ search is conducted in a purelysequential manner: each agent locates and interacts with one agent in its environment at a time.3 Autonomous com-puter agents have unique inherent filtering and information processing capabilities and, most important, the abilityto efficiently (in comparison to people) maintain concurrent interactions with several other agents at each given time[2,15,21]. This way an agent can make a decision at each stage of its search based on interactions with several otheragents (instead of one). Such use of parallel interactions in search is favorable especially when the search is costly, asexplained in the following paragraphs. The transition into using this new search technique results in new dynamics inMAS environments and consequently new equilibrium structures. Specifically, we consider environments where theagents are associated with two possible types (i.e., a buyer and a seller) and only agents of one of the types use theparallel interaction search method. While this model is self contained and associated with specific applications (asillustrated in the following paragraphs) it can also be used for understanding the dynamics formed in models whereagents of all types use parallel search. The various aspects concerning the transition to the latter model are discussedtowards the end of the paper.The motivation for using the parallel search technique is mainly the existence of search costs. These costs are acommon inherent part of MAS environments where there is no central source that can supply full immediate reliableinformation on the environment and the different opportunities that can be found in it. The costs reflect the resources(not necessarily monetary) that need to be invested/consumed by an agent to perform its search activities (e.g., the costassociated with the interaction and negotiation between agents, locating other agents, analyzing and comparing offers,decision making, self-advertisement and the cost of maintaining the agent in an idle state until finding a partnership).The introduction of search costs leads to a more realistic description of MAS environments. Many authors have arguedthat recent advances in communication technologies reduce search costs and other environmental inefficiencies inMAS environments [6]. However the general agreement is that these cannot be ignored completely [2] and shouldbe integrated into the agents’ expected utility computation process, given their specific search strategy. Others haveargued that the search cost for locating an opportunity is insignificant compared to the utility encapsulated in mostopportunities. Nevertheless the growing interoperability between different systems and environments in the internetage, followed by a phenomenal increase in the number and complexity of opportunities available, makes the overallcost of acquiring such information an important parameter that needs to be considered when forming the agents’strategies [9,21,36].Given the search cost, the key issue for each agent engaged in a distributed two-sided search is to determine theset of agents with whom it is willing to form a partnership. By forming a partnership the agent gains an immediate2 The use of the term “partnership” in this context refers to the agreement between two individual agents to cooperate in a pre-defined manner.For example, in the buyer-seller application a partnership is defined as an agreed transaction between the two parties [16].3 As we report in the related work section, the use of parallel search was suggested for problems of a single searcher [29]. However, these weremerely optimization problems that did not concern equilibrium dynamics.D. Sarne, S. Kraus / Artificial Intelligence 172 (2008) 541–569543utility and terminates its search. On the other hand, if the search is resumed, a more suitable partner might be found,but some resources will need to be consumed for maintaining the extended search process. The advantage of parallelsearch within this context is mainly in reducing the average cost of an interaction with an agent of the other type.This reduction is achieved whenever the cost of interacting with a batch of agents is smaller than the overall cost ofinteracting with each of them sequentially. For example, in [37] the analysis of the costs associated with evaluatingpotential partnerships between service providers reveals both fixed and variable components when using the parallelsearch. Thus the average cost per interaction decreases as the number of parallel interactions increases.The main contributions of this paper are threefold: First, we formally model and analyze a distributed two-sidedsearch model in which agents of a specific type can use parallel interactions in their search for a pairwise partnership.This model is a general search model which can be applied in various (not necessarily computer-agent based) domains.As detailed in the next sections, the adoption of the new search technique creates new dynamics (mutual strategies ad-justments) that drive the agents’ strategies towards a stable equilibrium (different from the purely sequential models).Second, we show that our mechanism is a generalization of the traditional purely sequential two-sided search model,thus the agent’s utility will never decrease when using our proposed mechanism. As we illustrate, the agents have astrong incentive to deviate from the sequential search strategy to the new strategy in many environments. The task ofextracting the agents’ new equilibrium strategies adds some computational complexity. This is mainly because nowthe agents are not limited to strategies in which they only need to decide what agents to accept, but rather can influencethe intensity of their search by deciding on the number of agents with which they will interact in parallel. Therefore,finally, by using the unique characteristics identified for the agents strategies and for the equilibrium structure wesupply appropriate algorithms that facilitate the calculation of the agents’ equilibrium strategy.As a framework for our analysis we use a legacy two-sided agents’ search application—the buyer-seller search inan electronic marketplace. Issues concerning the design of agent-mediated electronic trading systems involve find-ing solutions for a diverse set of interaction problems. These range from behavioral to organizational issues andalso encompass complex computational, information and system level challenges [15,18,32,41]. Our specific focus inecommerce is on the C2C (Consumer-to-Consumer) segment, where a transaction is always associated with two con-sumers. In C2C we usually find non-repeated transactions and thus no a-priori information concerning specific buyersand sellers is collected prior to the buyer’s “need identification” stage of the process.4 Therefore each agent needs toexplore the market for opportunities to buy or sell according to its owner’s personal preferences and requirements.Notice that the seller agents in C2C marketplaces usually have a single item (or a limited quantity) they wish to sellon an irregular basis. Therefore, even though the seller agents do not search proactively for buyer agents, they act in aselective manner in order to maximize their total utility.5 Also, in the C2C application, typically, buyer agents are theones capable of searching in parallel since they are the ones that approach the seller type agents.Additional MAS-based two-sided search applications in which only agents of a specific type can search in parallelcan be found in the task/resource allocation domain. Consider, for example a scenario of self-interested servers thatoffer their computational services to agents in an open MAS environment. Since each server has a limited set ofresources it may prefer to reject “non-profitable” jobs (assuming each server charges a (different) fixed price forexecution, thus the profit is a function of the time it takes to execute a specific task). The agents, on the other hand,try to minimize the payment to the servers for processing their jobs. Since the jobs vary in their characteristics andthe servers highly vary in their configuration and load, there is no general correlation between a job and the time ittakes to execute it on any specific server. Here, only agents can search in parallel (interact with servers to learn thecost of executing the job), since the servers do not know the identity of the incoming agents/jobs prior to the time theyapproach them. Another MAS-based interesting application that has been recently introduced in this domain is the onewhere experts offer their services, for example as in kasamba.com.6 Since those who seek for service are not listedon the web-site (only the service providers are listed), they are the only ones who have the capability of proactively4 This is the stage in the Consumer Buying Behavior (CBB) model, in which the consumer realizes her need for the product [15].5 Notice that the concept of “search” in this case is very different from the classical definition of “search” in AI. While AI search is an activeprocess in which an agent finds a sequence of actions that will bring it from the initial state to a goal state, in the buyer-seller domain search refersto the identification of the best agent to sell to or buy from. In general, the concept here refers to the determination of with whom to commit to apartnership.6 People use Kasamba when they need immediate professional guidance, or help on a project. Nowadays, one can find more than 30,000 profes-sionals offering their services to people and hundreds of thousands of visitors seeking service arriving to the web-site every month.544D. Sarne, S. Kraus / Artificial Intelligence 172 (2008) 541–569addressing service providers (and thus search in parallel). The service seekers’ objective is to maximize their utilitywhich is a function of the money they spend on the service, the time they spend looking for the service provider (andthe interaction with experts along the way) and the quality of the service/solution they obtain. The service providers,on the other hand, have a resource constraint (i.e., an expert has limited time throughout the day in which she canengage in providing the service) thus an expert’s utility function depends on the money she obtains, the amount oftime she needs to invest in this service, the deadline set for this service (and the way it aligns with other jobs it received(or expects to receive)), etc.In the following section we formally describe the model and detail the agents’ interaction mechanism. We derivethe mechanism’s innovative characteristics from an analytic investigation of the agents’ expected benefit equations,presented in Section 3. We expand the analysis in that section to a complete equilibrium analysis by exploring thedynamics that drive the agents’ strategies given the strategies set by the other agents in their environment. Throughoutthe analysis section we use a specific synthetic artificial environment to illustrate the unique characteristics of themodel and the equilibrium dynamics. In addition, we supply efficient algorithms for extracting the agents’ strategiesthat can be used by market makers and agent designers. In Section 4 we discuss two important future extensions ofthe model and draw the guidelines for their analysis. A review of relevant work both in multi-agent systems and inthe related area of economical search theory is given in Section 5. We conclude with a discussion concerning thegenerality and applicability aspects of the suggested model (Section 6).2. The modelWe begin by describing the model and its assumptions, and provide the appropriate notations which are used laterin our analysis sections.2.1. Model descriptionWe consider an environment populated with numerous self-interested agents of two types, where each agent isinterested in forming a partnership with a single agent of the opposite type. For illustrative purposes, in our modeldescription we adopt the eCommerce domain terminology. Therefore, the two types can be seen as buyer and selleragents, respectively, residing in a C2C marketplace environment. Each agent is interested in buying or selling a specificitem as described below. Being in a dynamic environment with a high rate of entrance and exit of agents, the agentshave no a-priori valuation concerning the utility that can be obtained by partnering with specific agents of the othertype in the environment. In order to learn this information, an agent needs to interact with the other agents (accordingto given conventions defined by ontology and a language). This is in the absence of a centralized trusted mediatorwith global immediate knowledge that can direct the agents into partnerships they all accept. Having no a-prioriinformation, each agent interacts randomly with others and if the buyer agent’s preferences and requirements for theproduct attributes and functionalities are met, then a possible transaction may be formed. The transaction defines thespecific terms (including the price) and policies by which the item exchanges hands.The utility an agent gains from any given transaction, is a function of many factors. While for simple products (likeCDs), the utility is mostly a matter of price, for more complex products, the purchasing decision generally requires acomplex trade-off between a set of preferences. Concentrating on C2C we note that most users in this type of marketbuy and sell assorted items that are often difficult to describe, and are not easily evaluated. Since in most cases a useditem is considered, the value for the buyer will be influenced mostly by the specific functionalities (including attributeslike color, size, etc.), quality and the current condition of the product. In addition, the transaction which will eventuallybe made will include many terms and policies (concerning warranties, return policy, payment policy, delivery timeand policy, insurance, etc.). All these terms have values for both sides and can be critical to their buying/sellingdecision, regardless of the manner of shopping [15]. Adding reputation and trust factors to the agents’ considerations,and keeping in mind that in reference to many features, terms and policies buyers and sellers do not have directcompeting interests [12], we assume that the perceived utilities for a buyer and a seller agent from a given transactionare non-correlated. Similar to most other two-sided partnership formation models [8,40] we assume that the utility ofeach agent from any given potential transaction can be seen as randomly drawn from a population associated with aspecific probability distribution function according to its type. This latter assumption is often justified by the richnessof opportunities that may be found in the environment and the complexity of each opportunity. Loyal to the economicalD. Sarne, S. Kraus / Artificial Intelligence 172 (2008) 541–569545principles of market forces as the driving forces that set the terms and conditions of potential partnerships that can beestablished, we can expect each agent to face a similar distribution of partnership utilities.The interaction between buyer and seller agents may involve bargaining, however we are interested in the resultsof the bargaining process (i.e., the terms and policies that define the transaction) rather than the bargaining protocolitself. Therefore bargaining is just another factor contributing to the variance in outcomes and the existence of utilitiesdistribution.We assume that agents, while ignorant of the utility associated with partnering with specific individual agents ofthe other type, are acquainted with the overall utility distribution functions7 and that this distribution remains constantover time. Similarly, the interaction with other agents does not imply any new information about the environmentstructure.Before specifying our assumptions concerning the agent’s parallel search capability, we would like to re-emphasizethat all the assumptions made until this point concerning the utilities distribution are standard and appear in most two-sided search literature cited in this paper (e.g., [8,40]).While traditional two-sided partnership formation models assume pure sequential search [8], where each buyeragent is acquainted with only one seller agent in a search stage, in our model we integrate the capability to maintainparallel interactions. Specifically, we assume that agents of the buyer type can consider parallel interactions withseveral sellers (interested in selling an item similar to the one they seek to buy) at each search round, whereas sellerscannot control the intensity of their interactions. This suits the electronic marketplace domain since in current C2Cmarkets sellers are usually approached by buyers and do not approach buyers in a proactive manner (e.g., buyers andsellers on eBay.com). Still, we do not completely ignore the option in which both sides in the search model use parallelinteractions and we briefly discuss some of the aspects of such a model in Section 4.2.We assume that the agents’ operation in the eMarketplace, and in particular their search process, is associatedwith some cost representing the resources they need to consume for their operation. Seller agents interact with onebuyer agent at a time, thus their search cost per search stage is fixed. Buyer agents’ search cost is more complex andis assumed to combine fixed and non-decreasing variable components, where the variable cost is a function of thenumber of interactions maintained in parallel. We assume that the marginal cost from interacting with an additionalseller agent in parallel is non-decreasing. This is simply because there are some fixed cost components associated withany additional interaction (e.g., communication costs, processing costs [37]).We assume that the agents’ utility from transactions, as well as the resources required for maintaining the search,can be measured on a similar scale. Thus the total search utility can be obtained by subtracting the search “costs”from the perceived utility for any given transaction. Similar to most of the other two-sided partnership formationmodels [8,40] we assume that the costs are common to all agents of a given type.8 This assumption well suits MASenvironments since the agents are principally technically similar or supplied by the same market maker (unlike inenvironments populated with people). A model where different agents of the same type use different search coststructures may also be considered. In this case we obtain a set of sub-types that can be integrated into the appropriateequations given in the analysis section along with their distribution in the general population. For simplification, inthis paper we use the analysis where all the agents of a specific type (e.g. buyer agents) share the same cost structure,which is applicable for most markets where agents are supplied to the users by the market maker.After reviewing and evaluating the perceived utility in a potential partnership each agent makes a decision whetherto commit to it or reject it. A transaction (which is the result of the partnership) takes effect only if both agents arewilling to commit to it. For simplicity we assume that the agents use synchronous interactions thus if the buyer agentdecides to encounter several seller agents in parallel, it commits (if at all) to its “best opportunity”, i.e., the one with thehighest utility, and rejects the rest of the agents with whom it interacted. A model based on a-synchronous interactionsin which the buyer agent considers committing to more than a single opportunity in the same search stage is brieflyintroduced in Section 4.1. If a dual acceptance is not reached, both agents resume their search in a similar manner(with the same cost structures).7 There are several methods by which an agent can be acquainted with this distribution function: past experience, bayesian update throughsampling, etc.8 One major factor influencing the search cost is the environment opportunities liquidity and volatility, thus the search cost is usually common tomost agents in the environment.546D. Sarne, S. Kraus / Artificial Intelligence 172 (2008) 541–569Since the agents are self-interested, their goal is to maximize their total search utility (defined above as the perceivedutility from the partnership they eventually form minus the accumulated search costs). Therefore, upon meeting apotential partner at any given stage of the search, the agent’s problem is to decide whether to form a partnershipwith this agent or to continue its search. If it commits to a partnership with that agent and that agent commits tothe partnership as well (i.e. “dual commitment”) then the agent obtains an immediate gain (the expected utility fromthe partnership). Otherwise, the agent needs to continue searching, bearing additional search costs. In the latter casethe agent’s future expected utility will be derived from the benefit future interactions might offer, as well as theencountered agents’ willingness to form a partnership. Therefore, an agent’s decision of whether to join the currentpossible partnership depends on the strategies set by the other agents. In a similar manner the other agents’ strategiesdepend on the decision of the agent. Thus, we are seeking strategies that are in equilibrium.Lastly, we assume that utilities from a partnership are immediate (e.g., payments versus shipment of the product).Furthermore, the nature of eCommerce and agents technology suggest fast search stages and short interaction sessions.Thus even though the agents are not limited by a decision horizon or by the number of search rounds, the probabilitythat an agents’ overall search will last more than a few hours/days is negligible. Therefore, in our model we see noneed in discounting utilities over time. As we briefly discuss in Section 3, the inclusion of a discounting factor doesnot affect the analysis methodology.2.2. Assumptions summaryBefore formally introducing the model, we recap the assumptions used and correlate them to the different entitiescombining our model:1. Environment—populated with numerous self-interested agents;2. Agents—each agent can be of one of two types (e.g., buyers and sellers); benefits from forming a partnershipwith a single agent of the opposite type; has no a-priori valuation concerning the utility that can be obtainedby partnering with specific agents of the other type; can learn the utility of a partnership with a specific agentby interacting with it; is acquainted with the overall utility distribution functions of forming partnerships in theenvironment; incurs costs when interacting with agents of the opposite type; attempts to maximize its total searchutility (defined as the perceived utility from the partnership it eventually forms minus the accumulated searchcosts);3. Partnerships—form only if both agents commit to them; are associated with non-correlated utilities of the twoagents forming them, according to their type;4. The Search Process—each agent interacts randomly with others to learn the utility of partnerships with them;agents of one specific type (buyers) can consider parallel interactions with several agents of the other type (sellers)at each search round, whereas agents of the other type (sellers) cannot control the intensity of their interactions;5. The Interaction Protocol—at the end of the interaction each agent decides whether to accept the partnership withthe other agent or reject the partnership; if a dual acceptance is not reached, both agents resume their search;whenever parallel interactions are used, the agent uses a synchronous interaction protocol and commits (if at all)to the partnership associated with the highest utility, while rejecting the rest of the agents with whom it interacted;6. Utilities and Costs—the utility of each agent from any given potential transaction can be seen as randomly drawnfrom a population associated with a specific probability distribution function according to its type; utilities areimmediate and do not need to be discounted; the cost of interacting with other agents is similar to all agents of thesame type; when interacting with several agents in parallel, the marginal cost of interaction with any additionalagent is non-decreasing; the cost of search and the utility from a partnership can be measured on the same scale.2.3. Problem formulationWe use U s and U b to denote the seller and buyer agents’ utility perceived from a specific transaction between them(respectively). These utilities can be seen as randomly drawn from a population with p.d.f. f s(U s) and c.d.f. F s(U s)for the seller agent and f b(U b) and F b(U b) for the buyer agent (0 (cid:2) U s < ∞, 0 (cid:2) U b < ∞). The buyer agents’search cost of sampling N seller agents is denoted C(N) (satisfying dC(N )(cid:3) 0). The seller agents’search cost is fixed per any search round, denoted by c. We use U bbest to denote the utility associated with the “bestdN > 0 and d2C(N )dN 2D. Sarne, S. Kraus / Artificial Intelligence 172 (2008) 541–569547best(1), . . . , U bopportunity” among the potential opportunities available to an agent of the buyer type upon interacting with N agents= max(U bof the seller type in a given search round, i.e., U bThe problem of each seller agent is to find a strategy Sseller : U s → {accept, reject} that will map the perceivedutility of each potential interaction to a decision of whether to commit to the proposed transaction or reject it. As forthe buyer agent, its strategy is a little more complex. The buyer agent needs to set a strategy, given the value of the bestopportunity found in the current search round, that defines both whether to commit to an opportunity or reject it andwith how many seller agents it wants to interact in parallel over the next search round (if at all). Thus the buyer agent’s→ {accept, N} where accept suggests committing to the best opportunitystrategy can be specified as Sbuyer : U bin the current search stage (yielding a utility U bbest) and N is the number of seller agents to interact with next if thecurrent set of opportunities is rejected.best(N )).Before concluding the problem definition section, we formally summarize the two-sided search mechanism detailedabove. We divide the description according to the agent’s type. Each buyer type agent will be performing the followingsteps:Set a value NLocate randomly N seller type agents and initiate interaction with all of them in parallelEvaluate the utility U bReject all partnerships with a utility smaller than U bif Satisfied with utility U b(i) from a partnership (transaction) with each agent i (i (cid:2) N).bestbest thenCommit to a partnership with the agent associated with this utilityif Other agent commits to the partnership as well thenTerminate the process (terminate search)Reject the agent associated with this utility1: loop2:3:4:5:6:7:8:9:10:11:12:end if13:14: end loopelseend ifEach seller type agent will be performing the following steps:Interact with the agent and evaluate the utility U s from a partnership with it.if Satisfied with utility U s thenCommit to the partnershipif Other agent commits to the partnership as well then1: loop2: Wait to be approached by a buyer type agent3:4:5:6:7:8:9:10:end if11:12: end loopReject the agent associated with this utilityTerminate the process (terminate search)end ifelseFor convenience, we have added a summary at the end of the paper summarizing all the notations used and theirmeanings.3. AnalysisSince the agents are not limited by a decision horizon, and given the fact that the interaction with other agents doesnot imply any new information about the market structure and that the number of search rounds is not limited, theagents’ search strategy is stationary (i.e. an agent will not accept an opportunity it has rejected beforehand, and the548D. Sarne, S. Kraus / Artificial Intelligence 172 (2008) 541–569number of seller agents with which each buyer agent interacts during a search round, N , will remain constant overtime). Similarly, the number of search rounds an agent has already participated in does not affect its optimal strategy,since the cost incurred in earlier search rounds is considered “sunk cost” and do not affect future expected utility fromresuming the search, calculated from any decision point and on. This implies a reservation-value based strategy bothfor the buyer and seller agents.9 We denote the seller agent’s reservation value by xs and the buyer agent’s reservationvalue by xb. The agents’ reservation-value strategy suggests that a commitment for a potential transaction will bereceived from the seller agent only if U s (cid:3) xs (i.e., if its immediate utility U s is greater than or equal to its reservationvalue xs ), and from the buyer agent only if U b (cid:3) max(U b(N ), xb) (i.e., only if the current transaction yieldsa utility U b that is the highest utility among the different interactions maintained by the buyer agent at this stage andif it is greater or equal to the reservation value it uses). We use xbN to denote the reservation value that maximizes thebuyer agent’s utility as a function of the number of parallel interactions it maintains during a search round, N , andthe strategy used by the seller agents. Similarly, we use xsN to denote the reservation value that maximizes the selleragent’s expected utility as a function of the reservation value and the number of parallel interactions, N , used by buyeragents.(1), . . . , U bOur goal is to find a set of equilibrium strategies, i.e., a reservation value xsN for the seller agents and a pair(N, xbN ) for the buyer agents, from which no single agent of any of the types will have an incentive to deviate, aslong as the other buyer and seller agents follow this strategy. For this purpose, we first analyze the strategies that willbe used by each agent type, for any given number of parallel interactions, N . This is achieved by understanding howan agent’s strategy is affected by changes in the strategies used by agents of the other type. The analysis is followedby an efficient approximation means for extracting the agents’ reservation value in those cases where the strategiescan not be immediately obtained using direct calculation. Consequently, based on the analysis presented, we manageto suggest an efficient means for finding the number of parallel interactions, N , that is used by the buyer agents inequilibrium and the appropriate equilibrium reservation values both for the buyer and seller agents.3.1. Agents’ strategies(cid:3)(cid:3)∩(cid:4)(cid:2)(cid:3)(cid:5)bestV b• 1= E(cid:3) xb(cid:2)xb(cid:4)U b(cid:2)U s (cid:3) xsWe begin by formulating the appropriate equations describing each agent’s expected utility as a function of thestrategy it uses and the strategy used by the other agents’ type. Consider a buyer agent using a reservation value xb,interacting in parallel with N seller agents at each stage of its search. This buyer agent’s expected utility, denotedV b(xb), when seller agents use a reservation value xs is given by:(cid:3)(cid:2)xbU bbestwhere the term •1[(U b(cid:3) xb) ∩ (U s (cid:3) xs)] represents the indicator of the event where the specific buyer agent andits “best” encountered seller agent (in the current search round) have found the perceived utility from a transactionbetween the two of them to be greater than or equal to their reservation values, resulting in a dual commitment.best < xb) ∪ (U s < xs)] represents the indicator of the complementary event (i.e., where the sellerThe term •1[(U band/or the buyer reject the potential partnership between them). In the latter case, the buyer agent resumes its searchin the same manner, i.e., conducts an additional search round in which it interacts with N seller agents using thesame reservation-based acceptance rule, hence resulting in an expected future utility which equals V b(xb) due to thestationary nature of the problem. Notice that if gains are to be discounted, then the only required change in Eq. (1)above is the discounting of the expected future utility V b(xb) on the right hand side of the equation.(cid:5)− C(N)(cid:2)U s < xsbest < xbU b+ V b• 1(1)best(cid:3)(cid:5)(cid:4)(cid:2)∪(cid:3)A similar equation can be formulated to represent the seller agents’ expected utility, denoted V s(xs), when using areservation value xs and given the number of parallel interactions, N , and the reservation value xb used by the buyeragents:(cid:3)(cid:2)xsV s= E(cid:4)(cid:2)(cid:4)U s • 1(cid:3)(cid:2)xs+ V sU b = U b(cid:4)(cid:2)∃U b• 1(cid:3)(cid:3)∩(cid:2)U b (cid:3) xbbest(cid:3)(j ) > U b, j (cid:2) N(cid:2)(cid:3)(cid:5)U s (cid:3) xs∩(cid:3)(cid:2)U b < xb∪(cid:2)U s < xs(cid:3)(cid:5)∪− c(cid:5)(2)9 Notice the reservation value of the search strategy is different from the reservation price usually associated with a buyer or a seller that are notinvolved in a search. While the reservation price denotes an agent’s true evaluation of a specific potential opportunity, the reservation value of asearch strategy is mainly a lower bound for the utility from an accepted opportunity, derived from the expected utility optimization considerations.D. Sarne, S. Kraus / Artificial Intelligence 172 (2008) 541–569549In this case, we need to ensure that U b (the utility for the buyer from a partnership with the specific seller) is thehighest among the utilities from partnering with any of the seller agents with whom it interacts. This is in additionto the requirement that both agents’ (the seller’s and the buyer’s) perceived utilities are equal to or greater than thereservation values they set.For simplification, we use the notations F b] to denote the c.d.f., p.d.f. and the mean of themaximum utility for the buyer agent when interacting with N seller agents in parallel, respectively. Notice that thesevalues can be calculated using the standard utility c.d.f. and p.d.f. functions (F b(x) and f b(x)) as follows:10N (x) and E[U bNN (x), f bF bN (x) =(cid:3)(cid:2)F b(x)Nf bN (x)dF bN (x)dx∞(cid:6)(cid:5)(cid:4)U bNE=(cid:2)1 − F b(cid:3)N (y)dyy=0= NF b(x)N −1f b(x)Using the above notations, we attain (see Appendix A for more details):(cid:3)(cid:2)xbV b=(1 − F s(xs))(1 − F b(cid:7) ∞y=xb yf bN (y) dy − C(N)N (xb))(1 − F s(xs))(3)(4)In order to simplify the flow of the paper, we will present only the equations associated with the buyer type agents.Unless stated otherwise, similar modifications for the seller type agents are given in Appendix B or can be extractedusing methods similar to those we use for the buyer type agents’ equations.Eq. (4) and its sellers’ modification can be used by each agent to calculate its expected utility, when using differentreservation value strategies, given the search cost parameters and the strategy used by the agents of the opposite type.From this equation we can derive an agent’s reaction to changes in the other agents’ strategies, towards a completeequilibrium analysis. Notice that Eq. (4), as well as the rest of the following analysis, is also applicable for thetraditional pure sequential two-sided search [8], simply by using N = 1.Continuing our analysis, we point to an immediate result from Eq. (4):(cid:3)(cid:2)xbV b= −∞;limxb→∞(cid:3)(cid:2)xbV b= E(cid:5)(cid:4)U bN− C(N)1 − F s(xs)limxb→0(5)The content of Eq. (5) is intuitive: if the reservation value xb is very large, the chances of obtaining a utility greaterthan this reservation value from a given search round are small. Thus, repeated search rounds must be taken, leadingto an overall low utility due to the accumulated search costs. If, on the other hand, the reservation value, xb, is verysmall, almost surely a potential transaction suggesting a sufficient utility can be obtained during the first search round.Theorems 1–2 below, suggest several additional important properties of the agents’ expected utility function, thatare used later for designing the algorithms for extracting the agents’ strategies. Appropriate modifications of thesetheories for the seller agents are given in Appendix B.Theorem 1. The expected utility function V b(xb) is quasi concave, with a unique maximum obtained at point xbN ,satisfying:(cid:2)xbN= xbNV b(6)(cid:3)Proof. Deriving Eq. (4) we obtain:dV b(xb)dxb=N (xb)(V b(xb) − xb)f b(1 − F bN (xb))(cid:2)xb≡ r(cid:3)(cid:2)V b(cid:3)(cid:2)xb− xb(cid:3)10 The third equation can be obtained using integration by parts over the expression:(cid:7) ∞y=0 yf bN (y) dy.(7)550D. Sarne, S. Kraus / Artificial Intelligence 172 (2008) 541–569The value xbr(xbN for which the above expression equals zero must satisfy V b(xbN ) = xbN satisfying V b(xbN :(cid:2)(cid:3)(cid:2)xbNN ) > 0, hence for xb(cid:2)d2V b(xbN )xbN2dxbNN ) (and in the same manner V s(xsThus V b(xbV b(cid:9) (cid:2)xbN− xbN− 1= r+ rxbN< 0V b(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:3)(cid:3)(cid:9)N )) is quasi concave with a unique maximum. (cid:2)N ) = xbN . Notice that f bN (xbN ) > 0 implies(8)Equality (6) is very common in models in which agents use reservation-value based strategies [26]. It suggests thatthe expected utility when using the optimal reservation value equals the optimal reservation value. Intuitively, thiscan be explained by the fact that the agent’s optimal reservation value is the point where it becomes indifferent tothe selection between the utility that can be obtained from a transaction and the utility associated with continuing theN ) =search. Similarly, if we were about to use a discounting factor λ for gains, Eq. (6) would transform into: V b(xbλxbN .11In order to illustrate the dynamics of changes in the agent’s policy we use the following synthetic artificial envi-ronment.12Environment 1. The environment contains numerous buyer and seller agents, where each interaction between anybuyer and any seller agents produces utilities drawn from a triangular distribution function, i.e.:13−Uupperf (x) = 22x(Uupper)2x2(Uupper)2where in our case Uupper = 100 and the search costs are C(N) = 2 + 0.5N and c = 2.5 for the buyer and the selleragents, respectively.14 The environment can be used both for experimenting with the traditional sequential (singleinteraction at a time) search and the parallel-based search.F (x) = 2xUupper(0 (cid:2) x (cid:2) Uupper)−Fig. 1, illustrates the agents’ expected utility as a function of their reservation value in two settings (here it isassumed that the agents of the other type use the value 30 as their reservation value). In the first setting, all the agentsuse the pure sequential search (N = 1). The middle curve depicts the expected utility of any of the agents in thisscenario as a function of the reservation value used (the horizontal axis). Since both the buyer and the seller agentsuse a sequential search, the curve describes a utility function that is common to all the agents. In the second setting,buyer type agents use the new parallel search method, sampling N = 4 seller agents in each search round. In thisscenario buyer type agents have the incentive to use the new technique (represented by the upper curve) since theirutility increases for any reservation value they use in comparison to the pure sequential search. Similarly, the expectedutility for the seller type agents (represented by the lower curve) always decreases when the buyer agents adopt thenew method.The incentive for the buyer agents to use the combined parallel search technique is strong. Any single buyer agentwill prefer to use more than a single interaction during a search round, if it finds the expected utility to be higher inthis manner. Fig. 2 demonstrates this phenomena using Environment 1. The cost functions used for this example are:C(N) = α + βN and c = α + β. A two-sided search in this environment will take place only if the expected utilityfor the agents when using the pure sequential equilibrium strategy is positive. The set of α and β combinations thatguarantee a positive utility (when using the equilibrium set of strategies with N = 1) is represented by the bottomtriangular area in the graph. Out of this area, we have isolated (on the bottom left side) all combinations of α and11 From this point and on the introduction of the appropriate utility-discounting modification to each equation used is straightforward and fits intothe analysis methodology presented.12 As we show in the following paragraphs the transition of buyer agents to the parallel interaction technique is inevitable in many environmentsand non-questionable given the benefits encapsulated in this mechanism. Therefore, our goal with this example is mainly to demonstrate the differenttheorems and analysis that we introduce throughout the paper. The selected synthetic artificial environment is rich enough for this purpose.13 This distribution function can be associated with most electronic marketplaces. It reflects a high probability to draw an opportunity producinga low utility, and vice versa.14 Thus when buyer agents use N = 1, all agents’ search cost structures are symmetric.D. Sarne, S. Kraus / Artificial Intelligence 172 (2008) 541–569551Fig. 1. Agent’s expected utility as a function of its reservation value in Environment 1.Fig. 2. Agents’ incentive to use parallel search (in comparison to sequential search).β values where a buyer agent can increase its expected utility by deviating from such a pure sequential strategy(assuming all other agents’ strategies are sequential) to a parallel search strategy (i.e., using N > 1). We learn fromthe graph that buyer agents have an incentive to deviate from the traditional pure sequential search strategy for manyplausible combinations of α and β values. Furthermore, the advantage of the new technique is mostly revealed incombinations of small α and β values (in comparison to the average utility from a partnership), which characterizemost MAS applications. A simple tool (applicable for any distribution function) for checking if buyer agents have anincentive to deviate from the pure sequential search technique to the parallel one is given in Theorem 5 (in Section 3.5).Next, we introduce a theorem that enables us to extract the agents’ optimal reservation value as a function of thereservation value used by agents of the other type. Notice that our aim, at the current stage, is to find the reserva-tion value that maximizes the agent’s utility given the strategy used by other agents’ type, rather than finding theequilibrium strategies.Theorem 2. Given the reservation value that was set by the seller agents, xsvalue when using N parallel interactions, xbN , the buyer agents’ optimal reservationC(N) =(cid:2)1 − F s(cid:2)xsN(cid:8)(cid:3)(cid:3)(cid:5)(cid:4)U bNE−N , satisfies:xbN(cid:6)(cid:2)1 − F b(cid:3)N (y)(cid:9)dy(9)y=0Proof. Deriving the expected utility given in Eq. (4), setting it to zero, and using integration by parts for calculating(cid:7) ∞y=xbNN (y) dy, we finally obtain Eq. (9). (cid:2)yf bFrom Theorem 2 we conclude that the buyer agents’ optimal reservation value (and thus the expected utility forthese agents, based on Theorem 1) decreases as C(N) increases. This also has an intuitive explanation: when the552D. Sarne, S. Kraus / Artificial Intelligence 172 (2008) 541–569search costs increase, the agent becomes less selective, reducing its reservation value. Secondly, we can conclude fromTheorem 2 that the buyer agents’ optimal reservation value (and thus the total utility for the agent), given the selleragent’s reservation value, decreases as xsN increases. Similar results can be obtained for the seller (see Appendix B).3.2. Approximation techniqueBoth Eqs. (6) and (9), and their appropriate modifications for the seller agent, can be used for calculating the optimalreservation values of any agent type in the search, given the reservation values used by the agents of the oppositetype. However, for some distribution functions (e.g., normal distribution function) it is impossible to extract xsN andxbN using direct immediate calculations (see the example given in Appendix B).15 Fortunately, the characteristicsof the optimal strategies (given the other agents’ reservation values) as proven in Theorems 1–2, enable us to usebinary search as an efficient means for approximating these values up to any required precision level. In order toapply binary search here we first need to find an interval that bounds the optimal reservation value of the agent and acondition by which we can tell whether any of the specific values in this interval are greater or smaller than the optimalreservation value. Notice that in most scenarios the distribution functions of U s and U b are finite (assuming the utilityof the person represented by an agent from a specific exchange is finite) and can be used as a bounding interval forthe optimal reservation value of the agents. Still, in the following Proposition 1 we supply a bounding interval andnecessary conditions for binary search within this interval that are applicable even for distribution functions that arenot necessarily defined over a finite interval.N − = 0, can be usedProposition 1. (a) The values xbN ))as upper and lower bounds, respectively, for the buyer agents’ optimal reservation value (given the seller agents’reservation value). Similar bounds can be found for the sellers’ optimal reservation value; (b) Within the intervaldefined above, any value xb for which V b(xb) > xb is smaller than the optimal reservation value and vice versa.N + satisfying (1 − F s(xsN (y) dy = C(N) and xbyf bN+(cid:7) ∞y=xb] − C(N )Proof. For the proof we make use of Fig. 3 which sketches the general shape of any of the agents’ expected utility as afunction of the reservation value used.16 Taking the buyer type agents, as an example, the expected utility for the casewhere xb = 0 is E[U b1−F s (xs ) (see Eq. (5)). From this point and on the expected utility increases as xb increases,Nreaching a global maximum at the point xbN and decreases beyond that point (derived fromTheorem 1 that indicates the concavity of the function and its limit given in Eq. (5) for xb → ∞). Since V bN (0) > 0(see Appendix C for the analysis of the case where V b(0) < 0), the expected utility V b(xb) calculated using Eq. (4)N . Now all we need to prove is that xbis always greater than xb for xb < xbN and always smaller than xb for xb > xbNis in the bounding interval specified in the theorem. For the upper bound, we note that a reservation value xbN + thatsatisfies the condition in part (a) of the theorem always yields V b(xbN + when used in Eq. (4). Therefore,given the antecedent part of the proof, xbN . The lower bound,N − = 0, is obvious. (cid:2)xbN + is an upper bound for the optimal reservation value, xbN + ) = 0 < xbN where V bN ) = xbN (xbTherefore, an algorithm for extracting the optimal reservation value, xbN for the seller= 0 (see the analysisagents) should first check the value of V (0) using Eq. (4). If this latter value is negative then xbNin Appendix C). Otherwise, the algorithm should set the appropriate bounding values (according to Proposition 1) andconduct a binary search in this interval, each step checking if the current value xb is greater or smaller than V b(xb).The interval should be trimmed to include all values smaller than x if V b(xb) > xb and vice versa. The algorithmshould stop when reaching a value xb for which |V bN (xb) − xb| (cid:2) ρ, where ρ is the required precision level. Thesesteps are summarized in Algorithm 1.N , for the buyer agents (or xs15 The case of non-integrated terms in Eq. (9) (due to the complexity of a specific distribution function) can be resolved by using specific function-dependent approximation techniques. For example, solving Taylor series expansion, or using the Trapezoidal Rule and Simpson’s Rule. In thissection we introduce a general approximation algorithm (i.e., distribution-independent) based on binary search.N ) = xb16 A unique scenario, in which the expected utility function strictly decreases and never satisfies V b(xbN , is analyzed in Appendix C.D. Sarne, S. Kraus / Artificial Intelligence 172 (2008) 541–569553Fig. 3. Specific characteristics of an agent’s expected utility function V s (xsN ).N —the reservation valuereturn 0N —precise approximation for the buyer agent’s optimal reservation value.Input: ρ—required precision level; N —number of parallel interactions used by the buyer agent; xsused by the seller type agents.Output: xb1: if Vequation(4)(0) < 0 then2:3: end if4: Calculate the values of xupper and xlower according to Proposition 15: while |Vequation(4)(x) − x| > ρ doSet x = (xlower + xupper)/26:if Vequation(4)(x) > x then7:8:9:10:11:12: end while13: return xSet xlower = xSet xupper = xend ifelseAlgorithm 1. An algorithm for calculating (using approximation) the optimal reservation value xbN for a buyer agent, given the strategies used bythe other agents and the number of parallel interactions it uses. The notation equation(i) is used in the algorithm to denote the calculation of theparameter using equation i.Proposition 2. Given the number of parallel interactions buyer agents use, N , a reservation value of the seller, xbN anda required precision level, ρ, Algorithm 1 returns a reservation value for a buyer agent that is close to the optimumwithin ρ. The complexity of the algorithm is O(lnxbN+ρ ).Proof. According to Proposition 2, the algorithm always handles the interval that bounds the optimal reservationvalue. Since the algorithm is based on binary search, its complexity is given by O(lnxbN+ρ ). (cid:2)3.3. Finding a stable set of reservation valuesThe equilibrium in our model can be described by a set (N, xbN ) where a single buyer agent cannot gain a betterutility by changing N and/or xbN (as long asthe other agents do not change their strategies). Using the analysis given in the previous section, we can now combinethe reactions of both types of agents to changes in the other agents type reservation value, towards equilibrium.N , xsN which it uses and a seller agent cannot gain a better utility by changing xs554D. Sarne, S. Kraus / Artificial Intelligence 172 (2008) 541–569Fig. 4. Agents’ reaction curves—the buyer agent’s optimal reservation value as a function of the reservation value used by the seller agents (verticalaxis) and the seller agent’s optimal reservation value as a function of the reservation value used by the buyer agents (horizontal axis).Recall that an important result from Eq. (9), is that an agent’s optimal reservation value decreases as the reservationvalue used by the agents of the opposite type increases, i.e., for any specific N we obtain:dxbNdxsN,dxsNdxbN< 0xbNlimxs→∞N= limxb→∞NxsN= 0(10)This behavior is illustrated in Fig. 4, which reflects characteristics similar to those described in [8] for the puresequential two-sided search. Nevertheless, while in [8] any point of interception between the two curves is an equi-librium point, in our model every such point is merely a potential “suspected” equilibrium point. If the buyer agentscan only change their reservation value, then each such point is an equilibrium point for the specific N value used bythe buyer agents. Nevertheless, since buyer agents can control the number of seller agents with whom they interact inparallel then these intersection points can merely be considered “suspected” equilibrium points and the determinationof whether these points are in equilibrium requires further validation as described in the following paragraph.From Eq. (10) we conclude that at least one “suspected” equilibrium exists for each N value (in the extreme case,we obtain a set of strategies where agents of a specific type or of both types accept any agent of the opposite type). Insome environments we have a single “suspected” intersection point (for example, for the uniform distribution func-tion). However, theoretically, a general distribution function might produce several equilibria points with uncertaintyregarding the identity of the one that will eventually be used. None of these “suspected” equilibria dominates the otherfor both agent types (buyer agents and seller agents), i.e., none of the “suspected” equilibria Pareto dominates anyof the others. This can be observed by recalling the fact that V b(xbN for both agents (Eq. (6)) and given thestructure of the two curves in Fig. 4. An additional important result is that the total number of “suspected” equilibriumstrategies sets for any given N is odd. This, again, is derived from the unique structure of the two curves described inFig. 4.N ) = xbN , xsN )1, . . . , (xbIn order to find all these “suspected” equilibrium sets of strategies, for any given N value, we can use the followingAlgorithm 2. The algorithm operates in a recursive form (see steps 17–18). It starts with an initial set of “suspected”N )k}, that were found in earlier recursive executions of thisequilibrium sets of strategies, Q = {(xbalgorithm for the specific N value that is used. It adds to this set new “suspected” equilibrium sets upon finding them.Thus for its initial execution we can use Q = ∅ as an input. On each of its recursive executions it operates on a specificinterval of buyer agents’ reservation values. Therefore, for its initial execution we can use the interval (0, xbN ) wherexbN is the optimal reservation value of the buyer type agents when seller agents use a reservation value zero (xbN canbe found using either a direct calculation through Eq. (9) or Algorithm 1 that was given in the previous subsection).N reaches its maximum value when xs = 0 (see Eq. (10)) then there will be no set of strategies in equilibriumSince xbin which buyer agents use a reservation value greater than this latter xbN value. Therefore all suspected equilibriumN , xsD. Sarne, S. Kraus / Artificial Intelligence 172 (2008) 541–569555= 0Input: Q—a set of “suspected” equilibria strategies; ρ—required precision level; N —number of parallel interactions used bythe buyer agent; (xupper, xlower)—an interval in which the buyer agents’ reservation values of new “suspected” equilibria shouldreside.Output: Q—an extended set of “suspected” equilibria strategies.1: Set xb = xupper= xb2: Set xsstorestore3: for (i = 1 to 2) dodiff = ρ + 14:while diff > ρ do5:Set xs = xs6:Set xb = xbSet diff = |xs − xsSet xs= xs ; xbend whileif (xb, xs ) /∈ Q thenadd (xb, xs ) to Qequation(B.6)(xb)equation(9)(xs )store| + |xb − xb= xb7:|storestorestoreend ifSet xb = xlower8:9:10:11:12:13:14:15: end for16: if found different sets (xb, xs ) in both executions of steps 4–13 then17: Q = FindSuspect(Q, ρ, N, (xlower,18: Q = FindSuspect(Q, ρ, N, (19: end if20: return Qxupper+xlower))2, xupper))xupper+xlower2Algorithm 2. FindSuspect(Q, ρ, N, (xupper, xlower))—An algorithm for finding “suspected” equilibria when the buyer agents use N parallel inter-actions at each search round.sets are within the interval with which the algorithm begins. In its main loop (steps 5–10) the algorithm finds a set ofstrategies “suspected” to be in equilibrium, by sequentially changing the reservation values used by the different agenttypes, where at each stage one type sets its optimal reservation value given the last reservation value set for the othertype. This calculation method always converges to a point of intersection of the two curves as depicted in Fig. 4 (i.e.,“suspected” equilibrium set) since each agent’s reservation value is sequentially increased/decreased (as a reaction tothe changes in the other agent’s reservation value) in a decreasing rate, in each subsequent stage of the process. If onlya single equilibrium set exists in the specified interval, then when executing steps 5–10 from both ends of the intervalthe same set of reservation values is reached, thus there is no point in searching for further “suspected” strategy setsin this interval. Otherwise, if a new “suspected” set of strategies is found, then we divide the interval into two partsand recursively activate the algorithm for any of these two new intervals (steps 17–18). This is due to the fact thatwe do not know the number of “suspected” equilibrium sets that might exist in this interval. In any case, any new“suspected” equilibrium sets of strategies are added to the set Q (steps 11–13).Proposition 3. Algorithm 2 will reach all suspected equilibria strategy sets. The number of recursive executions ofitself that will be initiated is bounded by Z ∗ ln(d/ρ) , where d is the interval given in its most initial execution and Zis the number of suspected equilibria in the specific environment.17Proof. Further recursive executions of the algorithm occur only if the interval contains “suspected” equilibrium sets(steps 17–18), in which case the interval is divided into two equal sub-intervals. If the given interval does not contain“suspected” equilibrium sets (i.e., both executions of steps 4–13 end up with the same set of strategies) then no furtherexecutions take place for this interval. Therefore, the number of recursive executions is equivalent to a binary search17 The actual number of times the code is executed is smaller since the search is performed in intervals that decrease exponentially on eachexecution.556D. Sarne, S. Kraus / Artificial Intelligence 172 (2008) 541–569Fig. 5. Finding “suspected” equilibrium sets of strategies (N = 4).(in an interval smaller than d) for any “suspected” set of strategies that exist (i.e., for any intersection of the twocurves). (cid:2)= 65.6 and seller type agents use xs4Fig. 5 illustrates the changes in the strategies of the two-types of agents when using Environment 1 (where buyeragents use N = 4). From this figure we can clearly see that the singular intersection point is where buyer type agents= 9.2. This is in comparison to the (46.5, 46.5) equilibrium reservationuse xb4values, associated with the traditional sequential two sided search model (for N = 1), obtained from the middle curvein Fig. 1 by calculating V b(xb1 . Recall that in Theorem 1 we obtained V b(xbN (and similarly for the sellertype agents). Thus in the former scenario, the buyer type agents’ revenue increases at the expense of the seller typeagents. This is always true since the buyer agents become more selective, thus the probability for the seller agents tobe accepted in a given encounter decreases (and the increase in the number of search rounds the seller agents need toexecute results in increased aggregated search costs).N ) = xb1 ) = xb3.4. Finding equilibria strategiesNow that agents of both types are capable of calculating their strategies, given the number of parallel interactionsset by the buyer agents, N , we proceed to find the equilibria strategies. As noted in the previous subsection, the agentscan identify suspected equilibrium strategies set for each N value. However in order to guarantee that this is a set ofequilibria strategies, we need to make sure no single buyer agent has an incentive to deviate from its specified strategyby using a different strategy (N (cid:9), xb(cid:9)N ) and all other seller agentsN ) for any N (cid:9) (cid:12)= N value. Theuse strategy xsfollowing Theorem 3 suggests that we only need to check if a single buyer agent has an incentive to deviate towardsusing strategies (N + 1, xbN ) while all other buyer agents use strategy (N, xbN , xsN . Fortunately, we do not need to check the stability of the set (N, xbN −1) in order to declare a set of strategies as equilibrium.N +1) and (N − 1, xbTheorem 3. (a) If V bN −k(xbN ) > V bN (xbV bN (xbN +1(xbN ) > V bN −k), ∀1 < k < N .N +1) then V bN (xbN ) > V bN +k(xbN +k), ∀k > 1; (b) If V bN (xbN ) > V bN −1(xbN −1) thenProof. We first prove part (a) of the theorem. Assume otherwise, i.e., assume V bN +1(xbV bN +2). Therefore, given Eq. (9), we obtain:N +1) < V bN +2(xbN (xbN ) > V bN +1(xbN +1) andC(N) + C(N + 2) − 2C(N + 1)(cid:2)1 − F s(cid:2)xsN=(cid:3)(cid:3)(cid:8) ∞(cid:6)(cid:2)1 − F b(cid:3)N (y)dy +∞(cid:6)(cid:2)1 − F b(cid:3)N +2(y)dy − 2∞(cid:6)(cid:2)1 − F b(cid:3)N +1(y)dy(cid:9)(11)y=xbNy=xbN+2y=xbN+1D. Sarne, S. Kraus / Artificial Intelligence 172 (2008) 541–569557Since C(N ) is an increasing linear (or convex) function of N then C(N) + C(N + 2) − 2C(N + 1) (cid:3) 0. Also, fromthe assumption used in the prelude of the proof, we know (using Theorem 1) that: xbN +2,thus:N +1 and xbN +1 < xbN > xb∞(cid:6)0 <(cid:2)1 − F b(cid:3)N (y)dy +∞(cid:6)(cid:2)1 − F b(cid:3)N +2(y)dy − 2∞(cid:6)(cid:2)1 − F b(cid:3)N +1(y)dyy=xbN+1y=xbN+1F b(y)N(cid:2)(cid:3)1 − F b(y)2y=xbN+1∞(cid:6)= −y=xbN+1(12)where the last equality is derived using the substitution F bis a contradiction, thus the assumption made at the beginning of the proof is invalid. Thus V bnecessarily results in V b(∀k > N ) decreases as k increases, thus V bof the theorem. (cid:2)i (y) = (F b(y))i as given in Eq. (3). The result of Eq. (12)N +1)k (xbk )N +k), ∀k > 1. A similar proof can be written for part (b)N +1(xbN +1) then the value of V bN +2). Therefore, if V bN +k(xbN ) > V bN +2(xbN (xbN +1) > V bN ) > V bN ) > V bN +1(xbN +1(xbN (xbN (xbTherefore, in order to find an equilibrium in a given environment, one needs to find the “suspected” equilibriumstrategy sets for each N value (as explained in Section 3.3), and then check if stability holds for these sets by evaluatingthe buyer type agents’ utility when shifting to N + 1 or N − 1 parallel interaction strategies. Nevertheless, this processrequires an upper bound for N (for a lower bound we can use N = 1). The following theorem suggests such an upperbound.Theorem 4. The number of parallel interactions, N ∗, that is used by buyer agents in equilibrium is bounded (fromabove) by any N that satisfies:(cid:10)(cid:11)N > maxE[U s]c,E[U b] + C(2) − 2C(1)NC(2) − C(1)Proof. First, we will prove Lemmas 1–3. The first lemma suggests that the expected maximum utility of a sam-ple increases as the sample size increases (however in a decreasing rate). This lemma is then used in the proof ofLemmas 2–3, that specify the condition under which both seller and buyer agents will accept any agent they comeacross.Lemma 1. (1)dE[U bN]dN > 0;(2)]dE[U bNd2N< 0.Proof. (1) Formulating the explicit expression E[U bN +1] − E[U bN], we obtain:(cid:5)(cid:4)U bN +1E− E(cid:5)(cid:4)U bN=∞(cid:6)(cid:2)F b(y)N − F b(y)N +1(cid:3)dyy=0which is always positive.(2) Formulating the explicit expression E[U bN +2∞(cid:6)(cid:5)(cid:4)U bEN +2− 2E(cid:5)(cid:4)U bN +1+ E(cid:5)(cid:4)U bN(cid:2)(cid:3)1 − F b(y)2 dy= −F b(y)Ny=0] − 2E[U bN +1] + E[U bN], we obtain:which is always negative. (cid:2)Lemma 2. Seller agents will commit to any partnership if the buyer agents use N > E[U s ]cparallel interactions.(13)(14)(15)558D. Sarne, S. Kraus / Artificial Intelligence 172 (2008) 541–569Proof. Substituting N > E[U s ]obtain:cin the appropriate seller’s modification for Eq. (4) (see Eq. (B.2) in Appendix B) we(1 − F b(xb)N )(cid:7) ∞y=xs yf s(y) dy − E[U s](cid:3)(cid:2)xsV s<(1 − F b(xb)N )(1 − F s(xs))(cid:7)xsy=0 yf s(y)(cid:7) ∞y=xs yf s(y)F b(xb)N dy −(1 − F b(xb)N )(1 − F s(xs))(16)−=Now notice that the right hand side of Eq. (16) above is negative for any xs value. Therefore V s(0) < 0, and accordingto Theorem 8 (given in Appendix C), V s(xs) is a strictly decreasing function of xs . Thus the seller agents’ strategy inthis scenario would be to use xs = 0, i.e., accept any partnership. (cid:2)Lemma 3. Buyer agents will use a reservation value xbNE[U b]+C(2)−2C(1)N > max( E[U s ]NC(2)−C(1)).,c= 0 if the number of parallel interactions they use satisfies:Proof. From Lemma 2, we ascertain that in this case the seller agents accept any partnership, thus (1 − F s(xs)) = 1.Now notice that C(1)+(C(2)−C(1))(N −1) (cid:2) C(N) for any N > 1 (because the cost function C(N) is an increasingN ) < C(1) + (C(2) − C(1))(N − 1) (equivalentlinear (or convex) function). Therefore if we use N that satisfies E(U b) then we can apply the same methodology used in Lemma 2 and prove that any buyer’s= 0 as their reservationto N >expected utility when using this N value is negative and therefore the buyer agents use xbNvalue. (cid:2)E[U b]+C(2)−2C(1)NC(2)−C(1)Returning to the proof of Theorem 4, notice that for any N that satisfies the theorem’s condition, all agents’ strategywould be to use a zero reservation value. Therefore, buyer and seller agents’ expected utility becomes V b(0) =] − C(N) and V s(0) = E[U s] − Nc, respectively (derived from Eq. (4) and its appropriate modification for theE[U bNseller as given in Appendix B). Since the buyer’s utility V b(0) = E[U b] − C(N) is negative for this N value (seeNLemma 3), it is also a decreasing function of N for any N value that satisfies the theorem’s condition. Therefore,a buyer agent will always have an incentive to deviate from strategy (N (cid:9), xb= 0) for anyN (cid:9) = 0) to strategy (N, xbNN (cid:9) > N . Thus there is no equilibrium in which buyer agents use a strategy (N (cid:9) > N, xbN (cid:9)). Since both E[U s] − care increasing concave functions (see Lemma 1), an N value that satisfies Eq. (13) alwaysE[U b]+C(2)−2C(1)NC(2)−C(1)andexists. (cid:2)Once we have bounded the range of possible values for the equilibrium number of parallel interactions to be usedby the buyer agents, we can suggest Algorithm 3 as a computational means for finding the equilibrium strategies.While Algorithm 3 returns all the “suspected” equilibrium sets of strategies, we do not attempt to determine whichone will eventually be used. The research on multiple non-dominating equilibrium strategies in game and agentstheory is quite rich [17], and thus we do not include this question within the scope of the current paper.Fig. 6, illustrates the expected utility of buyer agents as a function of the number of parallel interactions, N , thatthey use when in Environment 1. In this case, the optimal expected utility will be obtained when using N = 11. Thisexpected utility that the buyer agents obtain in equilibrium is greater than the one obtained in the purely sequentialtwo-sided search model (see Fig. 1). The utility of the seller agents significantly drops in this case.3.5. Buyer agents’ incentive to use parallel searchAs demonstrated in Fig. 2, in many environments buyer agents have a strong incentive to adopt the new parallelsearch mechanism. The following Theorem 5 suggests a simple rule for checking whether or not buyer agents indeedhave an incentive to adopt parallel search in a given environment.D. Sarne, S. Kraus / Artificial Intelligence 172 (2008) 541–569559Input: ρ—required precision level.Output: Result—set of equilibrium strategy sets, in which each element defines the number of parallel interactions used by buyeragents and the reservation values used by the buyer and seller agents.1: Set an upper bound, Nupper according to Theorem 4.2: Set Result = ∅3: for i = 1 to Nupper do4:5:6: end for7: return ResultFind the “suspected” equilibrium strategy sets using Algorithm 2 when the buyer agents use i parallel interactions.Add to Result each of the sets found in step 3 that satisfies the conditions given in Theorem 3.Algorithm 3. An algorithm for finding the equilibrium strategies.Fig. 6. Extracting equilibrium sets of strategies for Environment 1.Theorem 5. If the index I , calculated according to Eq. (17) below, is greater than 1 then any single buyer agent hasan incentive to deviate from a purely sequential search strategy to a parallel one.I =C(1)C(2)(cid:7) ∞y=xb(cid:7) ∞1y=xb1(1 − F b(y)2) dy(1 − F b(y)) dyProof. From Theorem 3 we learn that if a buyer agent’s expected utility decreases when it shifts from its (N = 1, xb1 )strategy to a new strategy (N = 2, xb2 ), while seller agents do not change their reservation values, then its expectedutility when using strategy (N = 1, xb1 ) is greater than when using any other strategy (N = k, xbk ), k > 1. Therefore, theadoption of a parallel search strategy occurs only if V b1 (xb1 ) holds (while the seller agents use a reservationvalue xs1). Thus, given Theorem 1, all we need to prove is that if I > 1 then xb2 ) > V b1 holds.2 > xb2 (xb1 ) and the other for (N = 2, xb2 ), while the seller type agentsUsing two instances of Eq. (9), one for (N = 1, xb1, we obtain:continue to use their equilibrium strategy xs1 =(1 − F b(y)2) dy(1 − F b(y)) dyC(1)(cid:7) ∞y=xb(cid:7) ∞2y=xb11 then replacing xbC(2)2 with xbIf xb2 > xbthan 1. (cid:2)1 in Eq. (18) above will result in the right hand side of the equation being greaterTheorem 5 is applicable for any distribution function. Its advantage is that it supplies a simple tool for determiningwhether the analysis suggested in this section should be applied in the specific environment in which the agentsoperate. Using Eq. (17), the agents (or a market maker or a market designer) can identify if a single buyer agent willhave an incentive to deviate from the traditional sequential search strategy to a parallel search strategy (assuming allother agents use sequential search). If such an incentive exists, then a sequential-search based equilibrium will not(17)(18)560D. Sarne, S. Kraus / Artificial Intelligence 172 (2008) 541–569hold in the environment and all buyer agents will use the parallel search technique. The new equilibrium in this casecan be found using the algorithms developed throughout this section.4. Future extensionsThe work presented in this paper is the first step towards adding parallel search into MAS two-sided search models.Obviously, once the analytical foundations for analyzing a model of this type are set, many further two-sided searchvariants can be considered. In this section we review two of these models, which we perceive as a natural extensionsof our work. While the analysis of these two model variants is beyond the scope of this paper, we do choose to presentthe basic equations on which their analysis should be built (which are modifications of those given in the previoussections) and point to issues that need to be addressed as part of the attempt to apply the methodology presentedabove.4.1. Considering several sellers at each search stageIn the previous section we assumed that a buyer agent engaged in parallel interactions is required to reply to all theagents it interacts with simultaneously, thus the agent commits only to the seller associated with the highest utility atthat search stage (assuming the utility is above its reservation value). Notice that within any search round of the buyeragent, there might be several seller agents, with whom it interacts, associated with a utility greater than its reservationvalue. In such a scenario, the buyer agent can benefit from an a-synchronous decision making mechanism, in whichit holds its reply to some of the agents. This way, the buyer agent, upon receiving a rejection from the seller agentassociated with the highest utility, can improve its expected utility by considering committing also to partnershipswith other seller agents within the current search stage.In this scenario, the buyer agent first identifies set A of seller agents to whom it is willing to commit (i.e., associatedwith a utility greater than its reservation value) out of those reviewed in the current search stage, and rejects the rest.Then it commits to the agent Aj ∈ A that is associated with the partnership yielding the highest utility. If a rejectionwas received from agent Aj then this agent is removed from A and the buyer commits to a new partnership accordingto the same criteria. The process continues until either: (a) set A is empty, in which case the buyer agent initiatesanother search round; or (b) a dual commitment is obtained, in which case the agent rejects all remaining agentsin A.Notice that the above change does not affect the interaction protocol followed by the seller agents. Buyer agents,on the other hand, alter their interaction protocol (in comparison to the one presented in Section 2.3) as fol-lows:1:2:3:4:5:6:7:8:9:10:11:12:13:14:loopSet a value NLocate randomly N seller type agents and initiate interaction with all of them in parallelEvaluate the utility U bSet A = {all partnerships the agent is willing to commit to}Reject all partnerships not included in set Awhile (A (cid:12)= ∅) do(i) from a partnership (transaction) with each agent i (i (cid:2) N).Commit to the partnership associated with the highest utility in A and remove it from set Aif (the other agent responded “commit”) thenReject all the remaining agents in ATerminate searchend ifend whileend loopThe analysis of this new mechanism variant requires the introduction of several additional definitions and notationsto aid in formally introducing its equations. Consider a buyer agent that interacts with N seller agents at a specificsearch stage. We use Gk(x) to denote the probability that the k-th best seller agent (in terms of associated utility)among the agents with whom the buyer agent interacts will offer a utility equal to or smaller than x. The value ofD. Sarne, S. Kraus / Artificial Intelligence 172 (2008) 541–569Gk(x) can be calculated using:18k(cid:12)(cid:10)(cid:11)(cid:2)(cid:3)F b(x)Ni − 1Gk(x) =i=1N −i+1(cid:2)(cid:3)1 − F b(x)i−1;x (cid:3) 0Notice that the function Gk(x) satisfies:Gk(x) = 0Gk(x) = 1;limx→∞limx→0561(19)(20)The above is intuitive since the probability that the k-th best partnership will be associated with a utility smaller orequal to the maximum possible value is always 1. Similarly, the probability that the k-th best partnership will beassociated with a utility smaller than the discrete value 0 is equal to zero (since the distribution is continuous). Noticethat Gk(x) increases as a function of k. This, also, is intuitive since the probability that the k-th best element ina sample of N > k values is smaller than a value x is always smaller than the probability that the (k + 1)-th bestelement in the sample is smaller than x.Since Gk(x) per se is a c.d.f. (cummulative distribution function), we can find its associated p.d.f., denoted gk(x),by deriving Eq. (19):gk(x) = dGk(x)dx(cid:10)Ni − 1=k(cid:12)i=1(cid:11)(cid:3)(cid:2)F b(x)f b(x)N −i(cid:3)(cid:2)1 − F b(x)i−2(cid:3)(cid:2)N − i + 1 − NF b(x)(21)Using the above definitions, we can calculate the expected value of a buyer agent when interacting with N selleragents while using a reservation value xb and while the seller agents use a reservation value xs . This is given by:(cid:3)(cid:2)xbV b=(cid:13)Ni=1(former (i−1) rejected(cid:17)(cid:15)(cid:16)(cid:14)(F s(xs))i−1seller accepts buyer(cid:17)(cid:15)(cid:16)(cid:14)(1 − F s(xs))(cid:13)Ni=1(1 − F s(xs))(F s(xs))i−1(1 − Gi(xb))using the i-th best seller(cid:15)(cid:16)(cid:14)(cid:17)(cid:7) ∞y=xb ygi(y) dy ) − C(N)(22)Here, the buyer agent would have liked to partner with the k-th best seller in the sample only if all N − k betterseller agents have turned it down and this k-th seller agent is associated with a better utility than the buyer agent’sreservation value.((cid:7)(cid:7)(cid:13)Ni=1(cid:13)V s(xs) =Similarly, the expected utility of a seller agent using a reservation value xs while the buyers use a reservation valueNy=xb f b(y)Ny=xb f b(y)(xb and sampling N sellers at a time, and the other sellers use a reservation value xs(cid:9)(cid:3)(cid:2)(F b(y))N −i(1 − F b(y))i−1(F s(xs(cid:9)))i−1)NN −i(cid:2)NNi=1N −i(cid:7)(cid:3)(F b(y))N −i(1 − F b(y))i−1(F s(xs(cid:9)))i−1) represents the probability that theHere, the term (current buyer agent will accept the specific seller agent for which the calculation takes place. This will happen onlyif the utility associated with this seller agent is above the buyer agent’s reservation value, and as long as all otherpartnerships considered by the buyer agent, that are associated with a utility greater than the one of a partnership withthe seller agent, have been rejected by the other sellers.(cid:3)(F b(y))N −i(1 − F b(y))i−1(F s(xs(cid:9)is given by:(cid:7) ∞y=xs yf s(y) dy − c))i−1)(1 − F s(xs))Ny=xb f b(y)(cid:2)NN −iNi=1(23)(cid:13)It is notable that in this model variant the seller agents’ strategy is affected also by the strategy used by other selleragents in the environment. This, is in comparison to the model where buyer agents commit only to the best selleragent with whom they interact (if their perceived utilities are above their reservation value), in which seller agents’strategies are affected only by the buyer agents’ strategy (see Eq. (B.2) in Appendix B).The optimal number of parallel interactions, N , in this model might be different from the one in the model presentedin the previous sections. This is obviously a better model for the buyer type agents since it reduces their overall searchcosts. It is also beneficial for the seller type agents since it increases the probability of being accepted by the buyer,18 The probability that the k-th best seller will have a utility smaller than x is the probability of having at least N − k + 1 sellers with a utilityequal to or smaller than x. Therefore the index i goes from 1 to k, adding the probability of having exactly i − 1 sellers with a utility greater thanx and N − i + 1 sellers with a utility smaller or equal to x.562D. Sarne, S. Kraus / Artificial Intelligence 172 (2008) 541–569even if the seller is not associated with the highest utility in the buyer’s sample. Nevertheless, since the interactionmechanism is required to be a-synchronous, various aspects need to be considered prior to the formal equilibriumanalysis. For example, a seller agent in this model is required to wait until the buyer agent receives responses fromseveral other seller agents. It is possible that during this time period this seller agent will be addressed by a new buyerwith possibly a better utility associated with a partnership with it. Furthermore, the asynchronous communicationrequires defining appropriate protocols for maintaining timeouts and failures while communication takes place. Wedo believe however, that once these setbacks are resolved, the analysis of this model variant will benefit from theanalysis methodologies presented in the previous section.4.2. Adding the parallel search technology to the seller’s searchAs noted, a model where sellers are also capable of conducting parallel search is not used in current markets.However, we do anticipate its application in future C2C marketplaces, where sellers will use more proactive methodsto approach buyers. Though this is not the main focus of this paper, we provide a short review of such a model.Using Cs(Ns) and Cb(Nb) to denote the seller and buyer agents’ search costs, respectively (where Ns and Nb arethe sample sizes used by the seller and the buyer agents), we obtain:19(cid:3)(cid:2)xsV s= E(cid:4)(cid:2)(cid:4)U s+ V s• 1best(cid:3)(cid:2)xsU b (cid:3) U b(j )(cid:4)(cid:2)∃U b∀j (cid:2) N(j ) > U b, j (cid:2) N∩(cid:3)• 1(cid:3)(cid:3)(cid:2)U b (cid:3) xb∪(cid:2)U b < xb∩(cid:3)(cid:3)(cid:5)(cid:2)U s(cid:3) xsbest(cid:2)best < xsU s∪(cid:3)(cid:5)(cid:5)− Cs(Ns)resulting in:20V s(xs) =(1 − F bNb(xb))(1 − F sNs(cid:7) ∞y=xs yf sNs(xs))(1 − F bNb(y) dy − NbCs(Ns)(xb))Here, again, we obtain:(cid:3)(cid:2)xsV slimxs →∞and:= limxb→∞V b(xb) = −∞(cid:3)(cid:2)xsV s= E(cid:3)(cid:2)U sNslimxs →0− NbCs(Ns)1 − F bN (xb)We can also suggest a theory similar to Theorem 2, where the modification of Eq. (9) is:NbCs(Ns) =(cid:8)(cid:3)(cid:2)1 − FN (x)(cid:5)(cid:4)U sNsE−xs(cid:6)(cid:2)1 − F b(cid:3)N (y)dy(cid:9)y=0(24)(25)(26)(27)(28)In this general model the equilibrium dynamics are highly influenced by the different cost function structures. Theequilibrium in this model is a set of strategies defining both the number of parallel interactions and the reservationvalues that need to be used, (xs, Ns, Nb), for each agent type. However finding such an equilibrium is notNstrivial (we need to guarantee that no single agent of any of the types will have an incentive to change the numberof parallel interactions and/or the reservation value specified for its type) and we cannot guarantee that one actuallyexists., xbNbThe table in Fig. 7 is an example of the reservation values that will be used by buyer and seller agents, when bothagents use parallel search. It uses the same environment characteristics that are detailed in Environment 1. Noticethat each pair (xb) is an equilibrium candidate (i.e., reflecting the stable set of reservation values used whenNbthe seller type agents use Ns parallel interactions and the buyer type agents use Nb). Therefore, each pair should beevaluated according to possibilities of using other N values and different reservation values. This is demonstrated by, xsNs19 In this scenario, both seller and buyer equations are equivalent.20 Here we used: (U bi > U b(j )∀i (cid:12)= j, j (cid:2) N ) =(cid:7) ∞xbNbF b(y)N −1f (y) dy =1−F b(xbNbNb)Nb.D. Sarne, S. Kraus / Artificial Intelligence 172 (2008) 541–569563Fig. 7. Dual parallel search—the upper value in each cell in the table is the buyer agents’ utility and the lower value is the seller agents’ utility, foreach combination of parallel interactions (Ns , Nb) they use.the two sets of graphs in Fig. 7. In this example we learn that (Nb = 4, Ns = 6) is an actual equilibrium, becauseneither agent has an incentive to use a different strategy. Contrarily, the pair (Nb = 1, Ns = 5), is not an equilibriumpoint, since both agents can improve their expected utility by using different sample sizes (Nb = 3 for the buyer andNs = 8 for the seller).While this model suggests many interesting dynamics when analyzing the agents’ strategies it is beyond the scopeof this paper.5. Related workThe process of searching for partners, often associated with the agent matchmaking concept, has wide evidence inMAS literature [7,22]. Service matchmaking and brokering have also been referred to in several systems and applica-tions [23,43]. In its wider context the pairwise partnership formation can be seen as part of the multi-agent coalitionformation model found mostly in the electronic marketplace [19,24,36]. The emphasis on coalition formation mech-anisms in ecommerce is usually associated with the advantage of potentially obtaining discounts based on volume asan incentive for buyer agents to cooperate [45,46]. Additional coalition formation models for the electronic market-place consider extensions of the transaction-oriented coalitions into long-term ones [7], and for large-scale electronicmarkets [24].Nevertheless, while agents’ search is recognized to be costly [9,21], coalition and partnership formation modelstypically ignore this important factor. For example, in many mechanisms an assumption is made that agents can scanas many agents as needed [19], or that a central matcher or middle agents are available to support the matching process[10]. This applies also to coalition formation models where the analysis is derived from equilibrium considerations[5,44]. Furthermore, many of these models do not consider the temporal continuity of the agents (i.e., their long term564D. Sarne, S. Kraus / Artificial Intelligence 172 (2008) 541–569considerations).21 Only a few works have considered the problem of finding matches for cooperative tasks without thehelp of a predefined organization or a central facilitator [31]. None of these has considered the parallel search option.The concept of matching agents with other agents is an important function of many domains and processes (otherthan MAS), thus relevant research can also be found in economics and social studies (e.g., students applying to col-leges, workers seeking employers, the marriage market, etc.). The review of economic literature reveals two additionalrelevant research areas. The first concerns the legacy two-sided matching application [14]. Here we find two types ofagents where an agent of one type can be matched only with agents of the other type [28,34]. A matching in thiscontext is considered stable only if no two agents can be found who would prefer to be matched with each otherrather than with their current matches. A special property of such two-sided markets is that stable matchings alwaysexist and that the set of stable matchings is a lattice under the common preferences of all agents of the same type.These results were further used for the analysis of many extensions of the model [20,38] and for empirical studies oftwo-sided search markets (e.g., the labor markets [33]). The main difference between the stable matching model andour decentralized costly two-sided search model is that the first considers a centralized match-making design, wherethe matching process does not involve costly search (i.e., the “stable matching” results are valid only if the processallows each searcher to consider all potential opportunities). In our two-sided search based model, this assumptionthat all parties involved have complete knowledge about the available options from which to choose is relaxed.The second relevant economic research area, known as search theory, considers the problem of an individualinterested in locating an opportunity which will minimize its expected cost (or maximize its expected utility), whilethe search process is associated with a search cost ([25,26], and references therein). Within the framework of searchtheory, three main clusters of search models can be found. These are (a) the fixed sample size model; (b) the sequentialsearch model; and (c) the variable sample size model. In the fixed sample size model, the searcher executes a singlesearch round in which it obtains a large set of opportunities simultaneously [42] and chooses the one associated withthe highest utility. In the sequential search strategy [25,35] the searcher obtains a single opportunity at a time, allowingmultiple search stages. Several attempts were made to adopt the fixed sample size search [21] and the sequentialsearch [9] models in agent-based electronic trading environments associated with search costs. In these cases themain focus was on establishing the appropriate characteristics of the environment and search strategy rather than thecomputational aspects of extracting it. Last, the variable sample size search method [4,13,29,30] suggests a combinedapproach in which several opportunities are obtained during each search period. Nevertheless, all these economicsearch models focus on establishing optimal strategies for the searcher, assuming no mutual search activities aretaken. The environment in which the searcher operates in these models is completely static, and is not affected by thesearcher’s strategy. Therefore, the searcher mainly needs to extract the strategy that optimizes its expected utility anddoes not need to model the effects changes in its strategy will have on the strategy of others in the environment. Incontrast, the analysis of two-sided search is driven mainly by equilibrium considerations.In an effort to understand the effect of dual search activities in such models, the “two-sided” search researchfollowed. This notion was explored within the equilibrium search framework [1,3,8,27,40]. The main drawback ofeconomic two-sided search models in the context of MAS environments is that they all consider a purely sequentialsearch, sampling one partnering opportunity at a time, while agents’ technology allows us to maintain a large numberof parallel interactions when searching. Furthermore, while traditional two-sided search research is more concernedwith describing the equilibrium equations and the equilibrium affect on global economic phenomena, MAS applica-tions research requires computational means for deriving the agents’ policies for different settings and the distributedcomputation of the equilibrium strategy.6. Discussion and conclusionsThe parallel interaction technique is inherent in the infrastructure of autonomous information agents. Nowadays,as agents technology is a reality and traditional processing and communication limitations have been removed, it ishigh time to consider parallel search models in MAS domains and in particular the two-sided search application.Furthermore, as proven and demonstrated throughout the paper, there is a strong incentive for individual agents to usesuch techniques in many different environment settings.21 In our model the agent has a temporal continuity, i.e., it is a continuously running process and not a “one-shot” computation that maps a singleinput to a single output and then terminates [11].D. Sarne, S. Kraus / Artificial Intelligence 172 (2008) 541–569565We show that the agents can control their search intensity by initiating parallel interactions with other agents, forimproving their utility. Furthermore, the mechanism we introduce is general, and can be applied to traditional searchtheory domains. For example, even in the classical marriage market application, nowadays, we can find equivalentsfor parallel search such as TV shows where a candidate becomes acquainted with several potential partners or evenspeed-dating.We emphasize that the agent’s utility will never decrease when using our proposed mechanism. This is becausethe agent controls the number of parallel interactions it uses in each search round, hence in the worst case scenariothe proposed calculations will indicate that the optimal number of interactions is 1, thus the expected utility will beidentical to the case where the traditional pure sequential method is used. In fact, the latter method is actually a specificcase of our general model, using a single interaction over each search round.Deriving the equilibrium strategy for the agents is a complex task. The novelty of the proposed analysis is that itresults in efficient algorithms that allow the agents to quickly eliminate non-equilibrium strategies. Furthermore, wehave managed to establish a simple thumb rule for determining in which environments the use of more than a singleinteraction at a time is beneficial.While the model uses pairwise partnerships, we see a potential for extending it to limited size coalitions, e.g., acarpooling application in which the coalition size is limited to 4–5 members (based on the capacity of different carmodels). In this case, the set of equations used can be replicated to include a limited number of additional extensionsof the coalition and the use of different opportunities distribution functions for each coalition size.This paper reveals two potential future extensions of the analysis. The first concerns an alternative a-synchronouscommunication protocol the buyer agents can use to improve their performance and the second is a model in whichall agents use the parallel search. Our initial results relating to these two extensions suggest that the analysis method-ology and results given in this paper can nurture and play a significant role in the analysis and development of theseinteresting variants.Appendix A. The buyer agent’s expected utility functionRecall that the expected utility, V b(xb), of a buyer agent that uses a strategy (N, xb) while seller agents use areservation value xs is given by (Eq. (1) from Section 3.1):(cid:4)(cid:2)(cid:3)(cid:5)(cid:3)(cid:3)• 1U b(cid:3) xb∩(cid:2)xbV b(cid:4)U b= E(cid:2)U s (cid:3) xs(cid:3)(cid:2)xb• 1(cid:4)(cid:2)+ V bbest < xbU b(cid:3)(cid:2)U s < xs(cid:3)(cid:5)(cid:5)− C(N)∪(A.1)bestbestbest(cid:3) xb) ∩ (U s (cid:3) xs)] represents the indicator of the event where the specific buyer agent andThe term •1[(U bits "best" encountered seller agent (in the current search round) have found the perceived utility from a transactionbetween the two of them to be greater than or equal to their reservation values, resulting in a dual commitment. In thiscase, the buyer agent’s utility from the partnership is U bbest is characterized by the probability distribution• 1[(U bN (x) (see Eq. (3)). Therefore, E[U bfunction f bN (y) dy. Thebestterm •1[(U bbest < xb) ∪ (U s < xs) represents the indicator of the complementary event (i.e., where the seller and/orN (xb))(1 −the buyer reject the potential partnership between them). The probability for the latter event is 1 − (1 − F bF s(xs)), and the expected future utility (due to the stationarity of the problem) is V b(xb).(cid:3) xb) ∩ (U s (cid:3) xs)]] = (1 − F s(xs))best, where U bbest(cid:7) ∞y=xb yf bTherefore, the above Eq. (A.1) transforms into:(cid:3)(cid:2)xbV b=(cid:3)(cid:2)1 − F s(xs)∞(cid:6)y=xbyf bN (y) dy +(cid:2)1 −(cid:2)1 − F bN(cid:2)xb(cid:3)(cid:3)(cid:2)1 − F s(cid:2)xs(cid:3)(cid:3)(cid:3)V b(cid:3)(cid:2)xb− C(N)resulting with Eq. (4):(cid:3)(cid:2)xbV b=(1 − F s(xs))(1 − F b(cid:7) ∞y=xb yf bN (y) dy − C(N)N (xb))(1 − F s(xs))(A.2)(A.3)Appendix B. Appropriate seller agents’ equation modificationsIn this appendix we present the appropriate modifications for seller agents for primary equations and theoremspresented in the paper.566D. Sarne, S. Kraus / Artificial Intelligence 172 (2008) 541–569B.1. A modification of Eq. (4)A seller agent’s expected utility when using a reservation value xs while buyer agents interact with N seller agentsin parallel and use a reservation value xb can be calculated using:(cid:3) (cid:7) ∞y=xs yf s(y) dy − cN −1(y)f b(y) dy(cid:3)(1 − F s(xs))y=xb F b(cid:2) (cid:7) ∞(cid:2) (cid:7) ∞(cid:2)xsN −1(y)f b(y) dyy=xb F bV s=(cid:3)(B.1)(cid:7) ∞y=xb F bN −1(y)f b(y) dy) represents the probability that the buyer agent commits to a partnership with theThe term (seller agent (i.e., the probability that the utility from partnering with the seller agent is greater than the maximumutility associated with partnering with any of the other N − 1 seller agents with whom the buyer interacts). Recall that(cid:7) ∞N −1(y)f b(y) dy =y=xb F b(cid:2)xs(cid:7) ∞y=xb F b(y)N −1f b(y) dy = (1 − F b(xb)N )/N , thus:(cid:7) ∞y=xs yf s(y) dy − Nc(1 − F b(xb)N )(B.2)V s=(cid:3)(1 − F b(xb)N )(1 − F s(xs))B.2. A modification of Eq. (5)An immediate result from Eq. (B.2):(cid:2)xs= −∞;(cid:2)xsV sV s(cid:3)limxs →∞limxs →0(cid:3)(cid:5)(cid:4)U s−= ENc1 − F b(xb)N(B.3)B.3. A modification of Theorem 1Theorem 6. The expected utility function V s(xs) is quasi concave, with a unique maximum obtained at point xsN ,satisfying:(cid:2)xsN= xsN(B.4)V s(cid:3)The proof is identical to the one used in Theorem 1.B.4. An example where xbN cannot be computed directly from Eq. (9)Consider for example the environment where utilities are normally distributed (a common distribution in mostreal-life applications). Here Eq. (9) becomes:(cid:8)xsN(cid:6)C(N) =1 −y=0−(y−μ)22σ 2√eσ2πdy(cid:9)(cid:8)(cid:5)(cid:4)U bNE−(cid:8)xbN(cid:6)(cid:6)1 −y=0(cid:9)(cid:9)dydy−(y−μ)22σ 2√eσ2πThis function is certainly not trivial and contains non-integrated terms.B.5. A modification for Theorem 2(B.5)Theorem 7. Given the number of parallel interactions used by the buyer agents, N , and the reservation value theyset, xbN , satisfies:N , the seller agents’ optimal reservation value, xscN =(cid:2)1 − F bN(cid:2)xbN(cid:8)(cid:3)(cid:3)(cid:5)(cid:4)U sE−xsN(cid:6)(cid:3)(cid:2)1 − F s(y)dy(cid:9)y=0The proof is identical to the one used in Theorem 2.(B.6)D. Sarne, S. Kraus / Artificial Intelligence 172 (2008) 541–569567Appendix C. Scenarios where the expected utility of an agent strictly decreases as a function of its reservationvalueAs discussed in Proposition 1, there is a unique scenario, in which the expected utility function strictly decreasesand never satisfies V b(xbN ) = xbN . The following theorem presents this scenario.Theorem 8. If the expected utility of a buyer agent when using a reservation value xbNpartnership) is negative, then the expected utility function V b(x) (V s(x) for the seller) strictly decreases.= 0 (i.e., accepting any potentialN ) = xbProof. If V b(0) < 0 then Eq. (7) results in a negative first derivative at point xb = 0. Therefore, a value xbN satisfyingV (xbN is non-feasible (given the concavity characteristic found in Eq. (8)). Thus, given the limit found in Eq. (5)for the case where xb → ∞, the expected utility function of the agent strictly decreases and reaches its maximum value(which is negative) for xb = 0. (cid:2)Furthermore, it can easily be shown directly from Eq. (4) that if V b(0) < 0 then V b(xb) < 0 for any xb > 0.Substituting V b(0) < 0 in Eq. (4) we obtain:∞(cid:6)C(N) >yf bN (y) dyy=0(C.1)Therefore, for any xb > 0 the numerator in Eq. (4) is always negative and the denominator is inevitably positive,resulting in a negative expected utility (thus a scenario where V b(xbN ) = xbN does not exist).References[1] A. Atakan, Assortative matching with explicit search costs, Econometrica 74 (3) (2006) 667–680.[2] Y. Bakos, Reducing buyer search costs: Implications for electronic marketplaces, Management Science 42 (1997) 1676–1692.[3] G. Becker, A theory of marriage, Journal of Political Economy 81 (1973) 813–846.[4] J. Benhabib, C. Bull, Job search: The choice of intensity, Journal of Political Economy 91 (1983) 747–764.[5] B. Bernheim, B. Peleg, M. Whinston, Coalition-proof Nash equilibria: I concepts, Journal of Economic Theory 42 (1987) 1–12.[6] S. Biswas, Y. Narahari, Analysis of supplier competition in electronic marketplaces, in: Proceedings of the International Conference onAutomation, Energy, and Information Technology, EAIT-2001, Indian Institute of Technology, Kharagpur, December 2001.[7] S. Breban, J. Vassileva, Long-term coalitions for the electronic marketplace, in: B. Spencer (Ed.), Proceedings of E-Commerce ApplicationsWorkshop, 2001.[8] K. Burdett, R. Wright, Two-sided search with nontransferable utility, Review of Economic Dynamics 1 (1998) 220–245.[9] S. Choi, J. Liu, Optimal time-constrained trading strategies for autonomous agents, in: Proc. of MAMA’2000, 2000.[10] K. Decker, K. Sycara, M. Williamson, Middle-agents for the internet, in: Proc. of IJCAI, 1997.[11] O. Etzioni, D. Weld, Intelligent agents on the internet: Fact, fiction, and forecast, IEEE Expert 10 (3) (1995) 44–49.[12] P. Faratin, C. Sierra, N. Jennings, Using similarity criteria to make issue tradeoffs in automated negotiations, Artificial Intelligence 142 (2)(2002) 205–237.[13] S. Gal, M. Landsberger, B. Levykson, A compound strategy for search in the labor market, International Economic Review 22 (3) (1981)597–608.[14] D. Gale, L. Shapley, College admissions and the stability of marriage, American Mathematical Monthly 69 (1962) 9–15.[15] R. Guttman, A. Moukas, P. Maes, Agent-mediated electronic commerce: A survey, Knowledge Engineering Review 13 (2) (1998) 147–159.[16] M. Hadad, S. Kraus, Sharedplans in electronic commerce, in: M. Klusch (Ed.), Intelligent Information Agents, Springer, 1999, pp. 204–231.[17] J. Harsanyi, R. Selten, General Theory of Equilibrium Selection in Games, MIT Press, Cambridge, MA, 1988.[18] M. He, N. Jennings, H. Leung, On agent-mediated electronic commerce, IEEE Transaction on Knowledge and Data Engineering 15 (4) (2003)985–1003.[19] T. Ito, H. Ochi, T. Shintani, A group-buy protocol based on coalition formation for agent-mediated e-commerce, International Journal ofComputer and Information Science (IJCIS) 3 (1) (2002) 11–20.[20] A. Kelso, V. Crawford, Job matching, coalition formation, and gross substitutes, Econometrica 50 (6) (1982) 1483–1504.[21] J. Kephart, A. Greenwald, Shopbot economics, JAAMAS 5 (3) (2002) 255–287.[22] M. Klusch, Agent-mediated trading: Intelligent agents and e-business, Journal on Data and Knowledge Engineering 36 (3) (2001).[23] A. Kraft, S. Pitsch, M. Vetter, Agent-driven online business in virtual communities, in: Proc. of HICSS-33, Maui, Hawaii, January 2000.[24] K. Lermann, O. Shehory, Coalition formation for large scale electronic markets, in: Proceedings of ICMAS’2000, Boston, 2000, pp. 216–222.[25] S. Lippman, J. McCall, The economics of job search: A survey, Economic Inquiry 14 (1976) 155–189.568D. Sarne, S. Kraus / Artificial Intelligence 172 (2008) 541–569[26] J. McMillan, M. Rothschild, Search, in: R. Aumann, S. Amsterdam (Eds.), Handbook of Game Theory with Economic Applications, 1994,pp. 905–927.[27] J. McNamara, E. Collins, The job search problem as an employer-candidate game, Journal of Applied Probability 27 (4) (1990) 815–827.[28] S. Mongell, A. Roth, Sorority rush as a two-sided matching mechanism, American Economic Review 81 (3) (1991) 441–464.[29] P. Morgan, Search and optimal sample size, Review of Economic Studies 50 (4) (1983) 659–675.[30] P. Morgan, R. Manning, Optimal search, Econometrica 53 (4) (1985) 923–944.[31] E. Ogston, S. Vassiliadis, Local distributed agent matchmaking, in: Proc. of the 9th International Conference on Cooperative InformationSystems, vol. 2172, 2001, pp. 67–79.[32] S. Park, E. Durfee, W. Birmingham, Use of Markov chains to design an agent bidding strategy for continuous double auctions, Journal ofArtificial Intelligence Research (JAIR) 22 (2004) 175–214.[33] A. Roth, The evolution of the labor market for medical interns and residents: A case study in game theory, Journal of Political Economy 92 (6)(1984) 991–1016.[34] A. Roth, E. Peranson, The redesign of the matching market for American physicians: Some engineering aspects of economic design, AmericanEconomic Review 89 (1999).[35] M. Rothschild, Searching for the lowest price when the distribution of prices is unknown, Journal of Political Economy 82 (1961) 689–711.[36] T. Sandholm, K. Larson, M. Andersson, O. Shehory, F. Tohme, Coalition structure generation with worst case guarantees, Artificial Intelli-gence Journal 111 (1999) 209–238.[37] D. Sarne, S. Kraus, Agents strategies for the dual parallel search in partnership formation applications, in: Proc. of AMEC2004, LNCS,vol. 3435, 2004, pp. 158–172.[38] L. Shapley, M. Shubik, The assignment game i: the core, International Journal of Game Theory 1 (1972) 111–130.[39] O. Shehory, S. Kraus, Methods for task allocation via agent coalition formation, Artificial Intelligence Journal 101 (1–2) (1998) 165–200.[40] R. Shimer, L. Smith, Assortative matching and search, Econometrica 68 (2) (2000) 343–370.[41] C. Sierra, F. Dignum, Agent-mediated electronic commerce: Scientific and technological roadmap, in: F. Dignum, C. Sierra (Eds.), AgentMediated Electronic Commerce (AMEC2001), Springer, 2001, pp. 1–18.[42] G. Stigler, The economics of information, Journal of Political Economy 69 (3) (1961) 213–225.[43] K. Sycara, S. Widoff, M. Klusch, J. Lu, Larks: Dynamic matchmaking among heterogeneous software agents in cyberspace, AutonomousAgents and Multi-Agent Systems 5 (2002) 173–203.[44] F. Tohme, T. Sandholm, Coalition formation processes with belief revision among bounded rational self-interested agents, Journal of Logicand Computation 9 (6) (1999) 793–815.[45] N. Tsvetovat, K. Sycara, Y. Chen, J. Ying, Customer coalitions in electronic markets, in: Proceedings of AMEC 2000, Barcelona, 2000,pp. 121–138.[46] J. Yamamoto, K. Sycara, A stable and efficient buyer coalition formation scheme for e-marketplaces, in: Proceedings of the Fifth InternationalConference on Autonomous Agents, Montreal, Canada, 2001, pp. 576–583.Summary of notations used for special variables and constantsU s , U b the seller and buyer agents’ utility perceived from a specific transaction between them (respectively) (drawn from the probability distrib-ution functions f s (U s ) and f b(U b))f s (U s ), F s (U s ) p.d.f. and c.d.f. functions of the utility obtained by seller agents from any potential transactionf b(U b), F b(U b) p.d.f. and c.d.f. functions of the utility obtained by buyer agents from any potential transactionC(N ) the buyer-agents’ search cost when interacting with N seller agents (satisfying dC(N )cSseller : U s → {accept, reject} seller agents’ strategy (determines whether to accept or reject the current potential partnership that yields a utilitydN > 0 and d2C(N )dN 2the seller-agents’ search cost per search round (a seller agent interacts with a single buyer agent at a time)(cid:3) 0)U s )Sbuyer : U bbest→ {accept, N } buyer agents’ strategy (determines whether to accept or reject the best potential opportunity found in the currentsearch stage (yielding a utility U bbest ) or to resume the search by interacting with N new seller agents)bestthe utility associated with the “best opportunity” among the potential opportunities available to the buyer agent at a given stage of its searchU bxs a reservation value used by a seller agentxb a reservation value used by a buyer agentV b(x), V s (x) the expected utility of buyer and seller agents, respectively, when using a reservation value xU b(i)xbN the buyer agent’s reservation value that maximizes its expected utility when maintaining N parallel interactions with seller agents at eachthe utility for a buyer agent obtained by a partnership with the i-th seller agent with which it interacts at a specific search stagesearch round, given the strategy used by the seller agentsxsN the seller agent’s reservation value that maximizes its expected utility when buyer agents maintain N parallel interactions with seller agents ateach search round, given the strategy used by the buyer agentsF bN (x) the cumulative distribution function of the maximum utility for the buyer agent when interacting with N seller agents in parallelf bN (x) the probability distribution function of the maximum utility for the buyer agent when interacting with N seller agents in parallelE[U bNxbN + , xbρ a precision level used in the suggested approximation means] the expected maximum utility for the buyer agent when interacting with N seller agents in parallelN − upper and lower bounds for the buyer agents’ optimal reservation value, respectivelyD. Sarne, S. Kraus / Artificial Intelligence 172 (2008) 541–569569Ian index used for determining if a single buyer agent has an incentive to deviate from a purely sequential search strategy to a parallel oneA a set of seller agents with whom a buyer agent is considering committing to a partnership, when trying to improve its acceptance probability(see Section 4.1)Gk(x) the probability that the k-th best seller agent (in terms of associated utility) among the agents with whom the buyer agent interacts isoffering a utility equal to or smaller than x (see Section 4.1)(cid:9)gk(x) the probability distribution function derived from the function Gk(x) (see Section 4.1)xsthe reservation value used by other sellers, used in the process of setting a single seller agent’s strategy in the variant where buyer agents aretrying to improve their acceptance probability (see Section 4.1)Cs (Ns ), Cb(Nb) the seller and buyer agents’ search costs, respectively, when all agents use parallel search (see Section 4.2)Ns , Nb the sample sizes used by the seller and the buyer agents, respectively, when all agents use parallel search (see Section 4.2)