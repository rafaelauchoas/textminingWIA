ELSEVIER Artificial Intelligence 90 (1997) 177-223 Artificial Intelligence Semantics and complexity of abduction from default theories * Thomas Eiter a**, Georg Gottlob a~1, Nicola Leone avb*2 a Christian Doppler Laboratory for Expert Systems, Information Systems Department, TU Vienna, Paniglgasse 16, A-1040 Wien, Austria b Istituto per la Sistemistica e l’lnformatica - C.N.R., c/o DEIS - UNICAL, 87036 Rende, Italy Received December 1995; revised June 1996 Abstract Abductive reasoning (roughly speaking, find an explanation for observations out of hypothe- ses) has been recognized as an important principle of common-sense reasoning. Since logical is commonly based on nonclassical formalisms like default logic, au- knowledge representation toepistemic logic, or circumscription, it is necessary to perform abductive reasoning from theories logics. In this paper, we investigate how abduction can (i.e., knowledge bases) of nonclassical be performed from theories in default logic. In particular, we present a basic model of abduc- tion from default theories. Different modes of abduction are plausible, based on credulous and skeptical default reasoning; they appear useful for different applications such as diagnosis and planning. Moreover, we thoroughly analyze the complexity of the main abductive reasoning tasks, namely finding an explanation, deciding relevance of a hypothesis, and deciding necessity of a hypothesis. These problems are intractable even in the propositional case, and we locate them into the appropriate slots of the polynomial hierarchy. However, we also present known classes of default theories for which abduction is tractable. Moreover, we also consider first-order default theories, based on domain closure and the unique names assumption. In this setting, the abduction tasks are decidable, but have exponentially higher complexity than in the propositional case. @ 1997 Elsevier Science B.V. Keywords: Abduction; Default logic; Algorithms and complexity; Tractability *A short and preliminary version of this paper appeared International Joint Conference on Artificial Intelligence (IJCAI-95) in: C. Mellish, ed., Proceedings of the Fourteenth ( AAAI press, 1995) 870-876. author. E-mail: eiter@dbai.tuwien.ac.at. * Corresponding ’ E-mail: gottlob@dbai.tuwien.ac.at. leone@dbai.tuwien.ac.at, * E-mail: nik@si.deis.unical.it. 0004-3702/97/$17.00 PIISOOO4-3702(96)00040-9 @ 1997 Elsevier Science B.V. All rights reserved. 178 7: Eiter et al. /Artificial Intelligence 90 (1997) 177-223 1. Introduction Abductive reasoning has been recognized as an important principle of common-sense speech recognition formalizations having applications [ 121. Various are well known. These fruitful [ 16,45,46], is represented. Roughly, by a function reasoning based diagnosis [ 341, and vision posed, among which set-covering-based [ 15,16,45,46] knowledge edge is represented are atomic entities i.e. observed tions, if X explains of X; tive explanation. On the other hand, edge potheses tions M. For a more detailed comparison see [22]. is an abductive is represented by a logical explanation, representing symptoms. The set e(X) all manifestations M, reasoning of abductive [ 301, maintenance [ 7,431 and logic-based approaches two types basically differ approach, in a number of areas such diverse as model- of database views have been pro- approaches in the way domain the domain knowl- subsets X of hypotheses, which to subsets e(X) of manifesta- power then X is an abduc- the domain knowl- language. A subset X of hy- can be seen as the explanation i.e., e(X) = M, approach in the set-covering e which maps all possible disorders, of these and other approaches by X derives the manifesta- to abduction, in the logic-based theory T in some if T augmented Until now, mainly logical abduction from theories of classical logic has been stud- ied. However, formalisms situations edge bases) as hybrid malisms [ 21. like default it is necessary of nonclassical reasoning, i.e., logical knowledge representation is commonly logic, autoepistemic logic, or circumscription. to perform logics; reasoning reasoning abductive in a sense, this on a knowledge from theories is orthogonal to what base built using different based on nonclassical Thus, in such (i.e., knowl- is known for- Since default logic [52] languages important fault motivating lead us towards a formal model of abduction that emerged to investigate how abduction In this paper, we address examples; they show that abductive logic. in the field of nonmonotonic is one of the most used logical knowledge (cf. theories [ 18,53]), (W, D) this problem. We start by first considering reasoning from can be performed representation it is in de- some logic is needed, and reasoning from default in default theories. Example 1.1. Consider edge about Bill’s skiing habits: the following set of default rules, which represent some knowl- D= ‘t : vkiing(Bil1) yskiing( Bill) weekend : -snowing skiing( Bill) ’ : -mowing ’ lsnowing ’ 1 intuitively state the following: Bill is usually out for skiing, unless The defaults weekend, Bill snowing. For the certain knowledge W = {weekend} Sunday), skiing( Bill). the default is usually not out for skiing; on the and usually, it is snowing; it is not that it is Saturday or (encoding -snowing and theory T = (W, D) has one extension which contains Suppose now that we observe (which is not consistent with the extension). Abduction means to identify a set of facts, chosen from a set of hypotheses, whose presence for this observation, that is, in the theory that Bill is not out for skiing to find an explanation T. Eiter et al. /Artificial Intelligence 90 (1997) 177-223 179 f C d i-i/ Fig. I. A computer network. e the observation at hand would derive the extension. We find such an explanation if we add snowing a single extension, which contains the observation lskiing(Bill), to W, we obtain for the default lskiing(BilZ), by adopting i.e., cause the hypothesis that +Gng(BiZl) snowing. is in Indeed, theory T’ = ({weekend, snowing}, D) is abduced from or that it is an abductive explanation of lskiing(Bill). lskiing( Bill). We say that snowing Observe default properties that the description of the above situation that cannot be represented properly requires in classical logic. the specification of some logic. The default about Example 1.2. Assume default setting knowledge connections established connections: between by a path following that information about a computer network theory T = (W, D) described next comprises relationships the status of a site (working between sites, and reachability of one site from another direct connections), together with is represented using in a simplified or not), (which can be about information / Vx. works(x) > path( x, x) , Vx, y. 7works( x) 3 7reaches( y, x) , conn(a,b>,conn(a,f), w= < conn(b,c),conn(b,d), conn(c,e>,conn(d,e>,conn(e,f), ‘dx. conn( x, x) , \ Vx, y. conn( x, y) 3 conn(y, x) The first two formulas in W state that if a site works, if a site does not work, then then this site to itself, and from that from any node. The facts conn( s1, ~2) state direct connections venience, the respective Fig. 1.’ and symmetry of the connectivity axioms.3 A graphical representation reflexivity relationship of these connections between there is a trivial path it cannot be reached sites. For con- is taken care of by in is depicted ’ Negated facts omitted. If desired, : lconn(x,y)/~conn(x,y) they can be derived using in D. lconn( ~1, sz), stating that there is no direct connection the closed world assumption, between by sites $1 and ~2, are defaults introducing : worh( x) works(x) 180 T Eiter et al. /Artificial Intelligence 90 (1997) 177-223 The default rules are as follows. puth(x, y) : : -yuth(x, y) ’ reuche.s(x,y) ’ v-euches(x,y) ’ D= puth(x,y) Aconn(y,z) Aworks : . paw% z> The first rule states by adopting that a site works by default; the next two rules relate paths to that x reaches y if a path from x to y provably exists, and does it otherwise. The last rules states that a path can be extended by following for if the site at the other end is working; here, it is assumed reachability, not reach a direct connection, simplicity that the connections are reliable, i.e., no communication failures occur. In this representation, we implicitly adopt . V x = c,, where cl , . . . , c, are all the objects x = Cl v.. the underlying axiom of the unique names assumption /jiCj ci # cj, which expresses mentioned domain, which are those mentioned the common domain closure axiom Vx. of in T (in our case, all sites), and the that all objects (respectively individuals) In this setting, in T are different. the default and each site reaches any other site; notice path x = se, si,. andconn(sj_i,sj) We remark that the knowledge istrueforallj=l,...,n. theory T has a single extension E, in which all sites work iff there is a that reaches (x. y) is derivable . . , s, = y in the network such that worh( si) is true for all i = 0,. . . , n that transitive closure cannot be expressed between reachability sical logic. Indeed, it is well known [ l] ). Explicit (cf. vious disadvantages or its topology changes. However, default transitive closure and reachability. storage of inflexibility represented in T cannot be easily represented in clas- sites refers to the transitive closure of a graph; logic in terms of e.g. ground atoms con&( ~1, $2) has the ob- is extended cost, of logic allows for an elegant and maintenance if the network representation in classical first-order Suppose now we observe that site a works but site e is not reachable works(u) and veuches we look for an explanation we disallow an explanation; then immediately indeed, for assertion of facts puth( X, y) >, we find that-as from the formula Vx, y. -7works(x) 3 veuches(y, -veuches (a, e) , and, by the first default rule in D, works(u) from it, i.e., is not the case in the extension of T) . If in terms of sites that are down (while e) is x) it follows is true. expected-lworks( (a, e) are true (which of these manifestations Other possible explanations exist besides Two&s(e). failure causes a network partition f} of sites whose partitions e.g. Tworks( b), lworks( f) and Two&s(c), planations gives rise to an explanation, by adopting Two&s(s) lworks(d), In fact, any subset S G {b, . . . , so that a and e lie in different for every s E S. Thus, are possible ex- Two&s(f) as well; on the other hand, lworks(c), Tworks( d) is not an explanation. The examples suggest a formalization to the one for abduction from default in a frame- theories theories: Given a theory T, a set (or manifestations) M is to be explained, by adopting a set of formulas (or abducibles) H, so that work similar of observations (an explanation) T U E derives M (where, of course, T U E is consistent). E, which are from a set of hypotheses of abduction from classical T Eiter et al. /Artificial Intelligence 90 (1997) 177-223 181 In Example 1.1, we had M = {lskiing(Bill) } and H = {snowing}, and in Exam- ple 1.2, M = {works(a), vmzches(a,e)} and H = {~works(a), . . .,-works(f)}. In the above examples, the default theory may have multiple is available (or even no) extensions; just assume that either site b or site d is down, which theories have a single default extension. However, in is the and the other the formula Two&s(b) V Two&x(d) lworks(b) one containing to W; then, theory has two extensions, in general, a default Example naturally resulting default containing lworks( d). 1.2 the information represented by adding (deductive) from a default As a consequence of multiple extensions, in different modes; usually, credulous inference, under which a formula 4 comes inferred extension of T, and skeptical inference, under which 4 follows from T (T FS 4) belongs inference of the observations ks, from default theories is to at least one iff 4 the variants of credulous abduction, where is based on kc, and skeptical abduction, which is based on theory T (denoted T I-, I$) iff 4 belongs to all extensions of T. Accordingly, theories arise. from default inference In practice, this, we argue that credulous abduction the user will choose credulous or skeptical abduction on the basis of the particular application domain. Both modes of abduction appear to be useful and relevant. To emphasize is well suited for diagnosis, while skeptical abduction and use of abduction abductive planning from Poole’s work on [ 44-461 and the work of Eshghi and others on abductive cf. [ 24,421. for planning (see Section 3). Notice that the applicability logic-based diagnosis and plan recognition, is well known, starting in these domains is adequate side, we have to ask for the complexity to find suitable algorithms of the main abductive Informally, these tasks amount reasoning of abduction for abduction. Towards tasks, formulated from this, we an- in the context to deciding whether an explanation to some expla- to every explanation belongs (called Consistency), whether a particular hypothesis (Relevance) and whether a particular hypothesis belongs On the computational in order logic, default the complexity alyze of default abduction. exists nation (Necessity). Consistency is self-explanatory; Releuance is important from those which do not, and thus supports to separate hypotheses focusing that the contribute reasoning which consists of the intersection to an explanation process. Necessity is important of all explanations. for computing the core of an explanation, default For classical in the propositional propositional results showed and render problems hierarchy the first level theories, context [ 6,22,56]. the complexity of logic-based abduction has been widely studied from The logic, the complexity of reasoning [ 27,35,58,59]. analyzed and default reasoning are harder than classical Furthermore, thoroughly theories has been in that both abduction that are complete for classes of the second level of the polynomial (in particular, for Zy and II!), while classical logic is complete for classes of (in particular, NP and CO-IV). Clearly, abduction from default theories is intractable occurs as a subtask. However, tion and default the complexity of each default abduction reasoning combine. We answer it is not immediately as well, since default reasoning clear how the complexities of abduc- this question by precisely determining task, and locate it in the appropriate slot of the for the suitable class. The main complexity 182 7: Eiter et al. /Artijicial Intelligence 90 (I 997) 177-223 complete as follows: properly)-is explanations based on minimal task--Relevance (i.e., explanations hierarchy proving completeness is credulous on the other hand, is at least as hard as (deductive) default abduction, which the “hardest” polynomial results can be summarized Default abduction iest” setting respectively; abduction any other explanation the “square” of C!. Other settings yield abduction problems well-known Skeptical default abduction in the polynomial abduction monotonic formalisms, where skeptical to credulous polynomial The Relevance problem has complexity Minimality of explanations problem harder. This contrasts with results [=I. is a source of complexity in between 2; complementary for abduction hierarchy. (typically, reasoning classes for XI, which respectively is precisely one than credulous hierarchy. This contrasts with usual results II! and 2:. level harder default for non- reasoning has complexity II! and CF), and is at the same complementary level in the to the Necessity problem. for Relevance, and makes the theories from classical default is complete reasoning. The “eas- for Z! and II!, in skeptical default that do not contain speaking is loosely for that are complete see Section 5 for details. of abduction the complexity theories tractable fragments is intractable, it is important Since abduction from default under which polynomial and to find problem time algorithms are possible. For default reasoning, intractable restrictions has been sharply marked by the border between [ 581. As default abduction the excellent work of Kautz and Selman tractability of default abduction has to be based on a tractable builds on default reasoning, this approach, we point out two classes of fragment default default theories, where W consists of literals and D contains only so called Horn defaults, and (clauses of size Krom-pf-normal default < 2) and D contains only prerequisite-free a to conclude conjunction theories, where W consists of Krom clauses tasks are tractable. These are literal-Horn from which abduction reasoning. Following [ 3.51 and Stillman normal defaults for default that allow of literals; theories We also discuss this in general the common is undecidable course, adopting obtain from default of the propositional the complexity the abduction problems we consider are provably that abduction theories domain closure axiom and as first-order logic from first-order default theories. Of is undecidable. However, the unique names assumption, we is decidable. Here, the complexity parallels that this means case, increased by an exponential; intractable. The rest of this paper is organized concepts of default states the main abductive logic and complexity the framework reasoning necessary notation. Section 3 presents formally of credulous versus skeptical abduction the results of our analysis of the complexity the subsequent Section 5 addresses context; practice, and focuses on tractable cases. The complexity default outlines theories is addressed issues for further research. theory, and introduces as follows. The following Section 2 recalls the some basic theories and from default for abduction tasks in it. In the course of that, the use is discussed. Section 4 describes and discusses in the propositional of default abduction the issue of tackling default abduction of abduction in from first-order the paper and in Section 6. Finally, Section 7 concludes 7: Eiter et al. /Artificial Intelligence 90 (1997) 177-223 183 In order to improve readability, the proofs of the results, except a few short, transparent proofs, have been moved to Appendices A and B. 2. Preliminaries and notation We assume that the reader knows about the basic concepts of default logic [ 521 (cf. also [ 381 for an extensive study of the subject). Let L be a first-order predicate set W of formulas form from fZ without is a pair T = (W, D) of a language. A default free variables and a set D of default rules d of the theory 4x) :PI(x),...?Pn,tx> , ma1 Y(X) are from C, and where (Y(X) (the prerequisite), conclusion) variables variables occur, the default in D is closed. /?I (x) , . . . , flnt (x) (the jus@cations), the free variables of all these formulas in x = x1, . . . , x,. We omit (Y and any pi if it is a tautology. is closed. A default theory (R D) is closed and y(x) are among (the the If no free if every default The semantics of a closed default theory T = (u! D) is defined in terms of extensions. A set E C L is an extension of T iff E = Us Ei, where E. = W, for i > 0, Y E D, Ei I- (~7 ~pl #  E, . . . , -pm $ E , 4 > inference of a general default where F is classical tensions the closure of T, cl(T), which D, g is a ground substitution A default for x}). theory may have several and Th( .) denotes classical deductive closure. The ex- theory T = (W, D) are by definition of theory cZ( T) = (K {d( x)r 1 d(x) E the extensions is the default that different known El = E2, and that L is an extension of T iff W is not consistent. extensions El and E2 are incomparable, (or even no) extensions It is well in general. i.e., El C E2 implies Each extension of a closed default in terms of its generating defaults. Let for any set S of closed formulas denote by GD( S, T) the E D such that S F (Y and ~/3i $ S, for all i = 1,. . . , m, and set of all defaults F denote by concl( D’) the set of all conclusions theory T = (W, D) can be characterized in the set D’. Then, of defaults Proposition 2.1 (see [52]). (W, D). Then, E = Th(Wuconcl(GD(E,T))). Let E be an extension of the closed default theory T = 4 We use here “ISi I- (Y” instead of “a E Ei” as usual, which gives rise to the same concept. 184 Z Eiter et al. /Art@cial Intelligence 90 (I 997) 177-223 formula On closed A default the other hand, concf( GD( S, T))), prerequisite if a deductively then S is not necessarily free, i.e., the prerequisite of each default rule theories, where each default important moreover, default theory extension Et 2 E [52]. if it is of form y. is normal, fragments of default logic. Normal default they enjoy the property of semi-monotonicity: is called normal in D an extension; however, set S satisfies S = Z%( W u it is true if T is in L) is a tautology. is considered The class of normal default to be one of the most theories always have extensions; If E is an extension of a normal (w D’) has an then (w D) and D’ > D contains only normal defaults, The standard variants of inference (denoted l-,), under which 4 is inferred skeptical inference (F-,), under which 4 follows from a default iff 4 belongs theory T are credulous inference to at least one extension of T, and iff 4 belongs to all extensions of T. For NP-completeness and complexity theory, cf. [ 3 11. The classes Zi and II: of the polynomial hierarchy are defined as follows: Zg = II! = P and CI = NPzi-1, II: = CO-Z! for all k > 1. by a nondeterministic In particular, NP = Zy, co-NP = II:, computability (loosely context of nonmonotonic propositional reasoning, and hence and Ci = NPNP. Intuitively, NP’i-1 models time algorithm which may use an oracle in XI_, . In the for solving a problem an oracle for NP (which allows to decide classical in practice also inference a subprogram without cost) satisfiability polynomial speaking, The class Di is defined as the class of problems from ZL and II L. Notice are widely conjectured imply the collapse of the polynomial for a class C iff A belongs time transformation; t-> is common. that consist of the conjunction that for all k 2 1, clearly to be strict, since equality of hierarchy. Recall in C a problem complete to C and every problem intuitively, (independent) of two problems C; L DE L Xi+,,; both inclusions the left or the right one would that a problem A is complete is reducible for C is the hardest problem to it by a polynomial in C. [9,41]. problems reasoning It appeared reasoning and skeptical and that credulous for I;; and II;, in nonmonotonic hierarchy default that many computational plete for classes at the lower end of the polynomial is well known that deciding whether a propositional X:-complete, are complete if inconsistent are in addition normal identified [ 71 for a comprehensive has been analyzed covering approach). Basically, abduction has the same complexity and bears XT-complete In particular, theory has an extension from default are com- it is theories remains unchanged theories if default and tractable fragments were theories analysis of the set- as default reasoning, [ 27,581. The complexity and, for the latter problems, [ 27,591. Cases of lower complexity in [ 35,581. The complexity reasoning problems. and @-complete from classical of logic-based are excluded respectively extensions abduction reasoning [ 622,561 (cf. in 3. Formalizing default abduction In this section, we describe a basic formal model for abduction default theories and state the main decisional reasoning tasks for abductive from propositional reasoning. 7: Eiter et al. /Artificial Intelligence 90 (1997) 177-223 185 Our formalization of an abduction scenario is as follows. Definition 3.1. A default abduction problem H is a set of ground M is a set of ground theory. default (i.e., variable-free) literals literals (called observations, (DAP) is a quadruple (H, M, u! D) where (called hypotheses, or abducibles), or manifestations), and (W, D) is a We say a DAP P = (H, M, W, D) is normal iff (W, D) is normal. This definition reflects the intention that abduction explains particular observations, facts. Such a setting stated by possibly negated facts, in terms of a collection of elementary hypotheses, which abduction, cf. [ 561. are possibly negated arbitrary closed formulas as hypotheses In fact, it is not a shortcoming (respectively manifestation) or manifestations, new propositional to W, 4 can equivalently since for each nonliteral hypothesis atom a4 might be introduced, 4 a the formula a4 +-+ C$ and after adding over allowing in logic-based is common If all positive (respectively ground literals p(t) be replaced by a+. negative) it is convenient hypotheses, (respectively in Example 1.2, ~works H = {-works(u), -p) . . . , -works(f)}. in H rather than all literals p(t) to say that p (respectively -p) (respectively and the set H is simply H = { ~works} lp( is abducible, t) ) . Accordingly, instead of from a predicate p are is abducible and include p We next formally define explanations, based on credulous respectively skeptical default inference. Definition 3.2. Let P = (H, M, u! D) be a DAP, and let E 2 H. Then, E is a credulous explanation (i) (ii) t, M, and h as a consistent (WU E,D) (WUE,D) for P iff extension. Similarly, E is a skeptical explanation (W U E, D) Fs M, and (WUE,D) h as a consistent (i) (ii) extension. for P iff The existence of a consistent assures consistent) in (W, D). This requirement from classical theories. extension for (W U E, D) (in this case, all extensions are that the explanation E is consistent with the knowledge criterion to the usual consistency is analogous represented in abduction It is common in abductive reasoning to prune the set of all explanations and to focus, guided by some principle of explanation The most important prefer nonredundant properly explanation such principle explanations, (cf. nations. (See [ 7,22,43] is, following Occam’s principle i.e., explanations which do not contain of parsimony, to any other as minimal explu- [ 37,43,56] for other preferences on explanations.) ) . We refer to such explanations preference, on a set of preferred explanations. Example broken-leg(x) broken-leg}, inference, are: 1.1 (continued). Suppose the certain knowledge W is extended by Vx. 13 lskiing( x) the explanations to Wl. Then, for (H, M, WI, D), under credulous for M = {vkiing(BiZl)}, H = {snowing, as well as skeptical 186 i? Eiter et al. /Art@cial Intelligence 90 (1997) 177-223 El = {snowing}, E2 = {broken_leg(Bill)}, E3 = (snowing, broken_leg(BilZ)}. The minimal explanations are El and E2; they are clearly preferred to E3. Example 1.2 (continued). Reconsider H = {-works}. The explanations sites S f {b, . . . , f) whose simultaneous partitions of the network. The minimal explanations sets S, which are: {e}, {b, f}, and {c, d, f}. Intuitively, a rational agent is willing that c, d and f are down. to accept, namely for (H, M, vr! D) correspond to explain M = {works(a), Treuches( a, e) } from to the subsets of failure causes a and e to be in two different such thus correspond l-l they amount to the minimal to the explanations that e is down, that b and f are down, or In the sequel, we will write Exp(P) for the set of explanations for the DAP P, ab- skeptical, minimal credulous, stracting or minimal from the chosen skeptical). type of explanations (credulous, 3.1. Credulous versus skeptical abduction As already mentioned abduction-appear for diagnosis, while skeptical planning next. in Section 1, both modes of abduction-credulous to be useful in practice. For example, credulous abduction is appropriate and skeptical is suitable for planning, which we discuss 3.1.1. Credulous abduction: diagnosis Consider a system represented by a default reflected by adding a set A of facts to W, then each extension of T’ = a theory T = (W D). If the system receives i.e., each extension of the system, represents evolution input, some (W u A, D) is a possible possible Abductive diagnosis reaction of the system consists, state (given by M), a suitable since each extension A, we can assert diagnostic problems inference. to A. loosely speaking, input A which caused in deriving from an observed system [46] ). Now, of (W U A, D) is a possible evolution of the system with input that caused F if (W U A, D) I-, F. Thus, represented by abductive problems with credulous that A is a possible can be naturally this evolution input (cf. In the network example above, finding an explanation and -reaches( a, e) is a diagnostic intuitive diagnoses, i.e., alternative each of the explanations Ei is acceptable under both credulous and skeptical theory (W U Ei, D) has a single extension. since the default problem; minimal collections for the observations works(u) to the explanations of possibly broken machines. However, inference, correspond To show the use of credulous inference the additional also extensions, the formula information is available -works(b) V Two&s(d). Then, one in which b is down for diagnosis, we consider that either b or d is down, theory the scenario where i.e., W contains (W, D) has two (while d is up) and another one in which d is the default 7: Eiter et al. /Art@cial Intelligence 90 (1997) 177-223 187 to find a diagnosis the actual status of b and d is open; diagnosis in terms of hypotheses for the observa- that from to a complete diag- the fact ~works(f) ~work.s(f>}, which might be extendible the status of each site is pinned down. Intuitively, in fact, it allows e)) veaches(a, (while b is up). Suppose now we want (works(a), down tions in which is, we focus on a partial, consistency-based {7works(c),7works(e), in which nosis, is then an acceptable ~works( b) E = {lworks(f)} M = {works(a), ~reuche.s(a,e)} however, which reaches (a, e) is true. that E is not a skeptical explanation, thus all paths is a credulous is true and explanation diagnosis; (in which for a complete diagnosis from a to e are broken). As easily checked, for the DAP P = (H, M, W, Dl) where lworks(e), ~works(f)}. Note, in (W U E, D) has an extension and H = {lworks(c), since tasks scenario; in which credulous default abduction Other diagnostic a slightly modified sites is not complete. Assume to which of them, and a closed world assumption default if we concentrate on (partial) Tworks( b) would be acceptable is a credulous arise in between to either e or b, but not in the in terms of site failures, for the above manifestations M. In fact, {Iworks( b)} explanation P = (Z-l, M, W; D) where H = {Tworks}. if the knowledge that f is connected is appropriate about connections for example, it is known default diagnoses ‘~~~$~*~i is present theory. Then, 3.1.2. Skeptical abduction: planning (planning). the “right” input (i.e., actions) Suppose now that we want that the system evolves into a certain state (described by that enforces a set F of facts), and we have to determine to choose an input A this state of the system rather, we look for an A such that F is true in some possible evolution of the system; as we want be sure that the system reacts such that F is true in all possible evolutions, in that particular way. In other words, we look for A such that (W U A, D) ks F. Hence, planning activities can be represented by abductive problems with skeptical problem in the network example. Suppose In this case it is not sufficient inference. Let us consider a simple planning packet should be sent from site a to e. In particular, from a to b should be generated, might not work. taking into account possible knowledge a route for sending that a the packet that some sites To model this, we augment the default theory as follows. First, a formula is added to W that states a packet can be sent to a single node only, yielding WI = WU{Vx,y,z.send(x,y) Asend(x,z) > y= z}; we augment D to DI =DU : Tsend(x,y) send(x,y) : -conn(x,y) V~euches(x,y) vend( x, y) ’ I send(x,y) : t(x,y) t(x,y) Asend(y,z) : t(x,z) t(x*Y> ’ t(x, z> here, _L is a symbol for contradiction from x to y. The augmented default and r(x, y) states that the packet is transported theory is Tt = (WI, Dl). 188 L Eiter et al. /Art$icial intelligence 90 (1997) 177-223 The planning problem can be solved by finding a (skeptical) {t(a, e)} using H = {send} as hypotheses, original W (which describes then obtain three minimal the network explanations for M = the in Fig. 1, and no site failures are known), we explanation facts send(st, ~2). For i.e., ground for (H, M, K Dl), namely El = {send(a,b),send(b,c),send(c,e)}, E2 = {send(a,b),send(b,d),send(d,e)}, EX = {send(a, f), send(f, e)}; as well as skeptical explanations. Minimality all three are in fact credulous nations means each routing looping particular, se&( b, d)} that amounts is a nonminimal looping could also be explicitly excluded by an axiom receive a packet from only one node. of expla- is minimal, in (e.g. EJ = {send( a, 6) , se&( b, e) , send( c, e) , send( e, d) , in a loop. Clearly, explanation that each node can to a routing in WI stating i.e., contains no superfluous send actions; it avoids Notice yworks( b) V ~works( d) the information explanations, that adding of the three minimal explanation. This matches perfectly our intuitive expectations: which b is down, and therefore all routes are not fully reliable. reliable and have to be dropped. two out namely El and E2; only Es remains as a skeptical in that pass through b to El and E2 are not fully the routes corresponding there is an extension to WI eliminates In particular, for sending the packet Finally, if it is known that besides Two&s(b) V ~works(d) then no longer a skeptical explanation pectation: all paths from a to e go through either b or f, it is impossible the packet from a to e. there is an extension also ~works(f> is true, exists. This perfectly matches our intuitive ex- and since to send in this extension in which b and f are down simultaneously, 3.2. Abductive reasoning tusks The following properties of a hypothesis in a DAP P are important with respect to computing explanations. Definition 3.3. Let P = (H, M, u! D) be a DAP and h E H. Then, h is relevant P E E Exp(P). iff h E E for some E E Exp( P) , and h is necessary for iff h E E for every for P The opposite of necessity is also termed dispensability (cf. [ 321). In Example 1 .l, snowing is both relevant and necessary, as E = {snowing} is the only explanation. The main decisional problems in abductive reasoning amount to the following. Given aDAPP=(H,M,WD), l Consistency: does there exist an explanation a Relevance: is a given ground hypothesis h E H relevant for P, i.e., does h contribute for P? to some explanation of P? l Necessity: is a given ground hypothesis h E H necessary for P, i.e., is h contained in all explanations of P? 7: Eiter et al. /Artijkial Intelligence 90 (1997) 177-223 189 Table 1 Complexity of abduction from propositional default theories (completeness results) PDAP P = (H, M, u: D) Arbitrary explanations Minimal explanations Problem: Consistency Recognition: E E &p(P)? E E &p(P) is minimal? Relevance Necessity Credulous Skeptical Credulous Skeptical 2; 2; “: =I “; “5 DT “! “! “1 2; D! 2; “: “: “9 2: “I In the following section, we address the complexity of these problems in the propo- sitional context. 4. Complexity results: propositional case In this section, we analyze the complexity of the main abductive reasoning tasks in the propositional context. A propositional default abduction problem that H and M are sets of propositional such default PDAP P is finite, theory. For solving the abductive i.e., H, M, W, and D are finite. reasoning (PDAP) is thus a DAP P = (H, M, W, D) formulas, and (W D) tasks, we suppose is a propositional that the input The main results on the complexity of abduction in Table 1. Each entry C represents are summarized theories class C. In our analysis, we pay particular corresponds with underlying default important to the most the exception of recognizing is as hard as abduction theories default theory attention fragment of default credulous a minimal from general propositional completeness default for the to normal PDAPs, since this class in Table 1, if the from normal logic. The results explanation, hold even (U: D) is normal. Thus like deduction, abduction from arbitrary default theories. The results can be commented and explained reasoning tasks have the same complexity namely Z! and II!, respectively, while the “hardest” under minimal The other tasks have intermediate explanations), which complexity. credulous as (deductive) inference as follows. The “easiest” abductive from default theories, task has complexity ZT (Relevance the “square” of Z!. is, loosely speaking As argued in [ 9,201, the level of the polynomial hierarchy at which a problem shows that the problem suffers from (at least) so that, in a sense, and they are intermingled problem of complexity. in Table 1 (Xi-completeness), In fact, they can be identified as follows (cf. Fig. 2): resides that many sources of inherent complexity, For the hardest they act “orthogonally”. sources we thus must have four such orthogonal inference (t), ( 1) classical deductive (2) (3) (4) the number of extensions of (W U E, D), the number of candidates E for a skeptical explanation, the number of possible bers can be exponential smaller explanations in the problem size. and (i.e., minimality); here these num- 190 T Eiter et al. /Artificial Intelligence 90 (1997) 177-223 1E # explanations minimality b\ \ \ \ \ 1/ # extensions classical inference 1 Fig. 2. Orthogonal sources of complexity for Relevance, in skeptical abduction using minimal explanations. If we compare credulous abduction logic, autoepistemic logic, circumscription, tasks, skeptical abduction reasoning abduction. This contrasts with the results for many nonmonotonic (default where skeptical ically, complete this interesting phenomenon explanation one level account). reasoning for II! while credulous in the hierarchy over skeptical explanations property can be nondeterministically is that a credulous explanation has complexity reasoning to skeptical abduction, we find that for the main is always precisely one level harder than credulous reasoning formalisms so far (see [9,41]), reasoning complementary . . .) obtained to credulous is complete (typ- for the generated simultaneously, which saves for a more formal for 2;). The reason and an extension proving (see below Minimality of extensions is a source of complexity increase in complexity add to the complexity by one level in the polynomial of Necessity due to the following for Relevance and causes an it does not hierarchy. However, simple fact. Proposition 4.1. Let P = (H, h4, K D) be a finite PDAP and let h E H. Then, h is necessary for P under minimal credulous (respectively skeptical) explanations iff h is necessary for P under credulous (respectively skeptical) explanations. Therefore, we shall not deal in our analysis explicitly with Necessity in the case of results theories: explanations. minimal The classical This discrepancy classical effects that the explanation can be decided by property does not apply space remains abduction to be checked. theory, By the results of default abduction plexity transformed malisms provers for such formalisms, the reasoning into an equivalent such as default for Relevance contrast with corresponding there, minimality can be explained by the fact that the inference of explanation is monotonic, while kC and space is well structured, at few candidates looking results for abduction is not a source of complexity from [ 221. relation I- underlying t-s are nonmonotonic; monotonicity of an explanation so that minimality This benign for smaller explanations. candidate to t, and t, inference, where still an exponential in Table 1, we are able to draw some conclusions to other forms of nonmonotonic tasks that are complete about the relationship reasoning. First, by virtue of com- for S! or II! can be polynomially logic, autoepistemic reasoning task in any of the classical nonmonotonic for- etc. Thus, theorem e.g., the DeReS system for default logic (cf. [ 13]), can be logic, circumscription, Z Eiter et al./Artijicial Intelligence 90 (1997) 177-223 191 used for performing default abduction from the proofs of the complexity fruitfully tions can be extracted transformations. be found. In fact, we show below how default abduction can be transformed default reasoning In many cases, however, a direct and much simpler as well. Such polynomial by means of a plain For the classes 21 and II!, not many nonmonotonic transformation. transforma- results, by simply composing transformation can to classical It was known [ 191. Moreover, [ 2 1 ] ; it appeared [ 501 is complete been known until recently. plexity complexity faults in Table 1 that have this complexity implementations vice versa; for the hardest Finally, monotonic logic of similar complexity; reasoning problems, reasoning that a family of similar so called ground logics of this complexity have that moderately grounded AEL has this com- logics has the same de- tasks this logics and logic by transepistemic the default abduction translated into III can be efficiently the recent extension of default [ 511. Thus, for ZF respectively lack today, however. task (XI-complete), there is no well-known non- and shows that intuitive it landmarks a region of very hard nonmonotonic tasks can grow quite complex. reasoning algorithm the reasoning the quantitative skept-inf( W, D, 4) the above completeness for solving space improved with concern of solving the straightforward account, tell that a simple ad hoc algorithm candidate searchs an exponential Besides aspect. They exhaustively cannot be substantially For example, consider a procedure (cf. the DeReS system even if skept-inf (ZI-completeness, inference), that avoids an exponential to get away with a single for-loop, e.g. by systematic for extensions.) results have also a qualitative tasks, which for each source of complexity, the problem on all instances. that (W, D) is available is exponential, result for this problem skeptical better algorithm the loops can be optimized, but overall still space might be able search indicates however, the costly for-loops. is any contradiction. This algorithm speaking means Z;-completeness effort is needed. An algorithm is seen as a zero-cost oracle; that there (Of course, is basically no substantially inference of C#J from that uses exponential in Fig. 3. There, the complexity and exhaustive [ 131)) and I it is assumed for skeptical state-space modulo loosely which Since all the results in Table 1 are negative with respect to efficient computation, we in practice. This will be addressed have to ask how to deal with the reasoning problems in Section 5. 4.1. Arbitrary explanations A useful observation is that in general, easily reduced skeptical explanations. to Consistency Indeed, and its complement, the following respectively, is easily verified. the problems Relevance and Necessity can be for both credulous and Proposition 4.2. Let P = (H, M, W D) be a PDAP based on credulous or skeptical explanations, and let h E H. Then, E is an explanation for the PDAP (H\{ h}, M, W U {h},D) ifSEU {h} is an explanation for P. Proof. ( +> All extensions extensions exist. Hence, E U {h} is an explanation for P. of (W U {h} U E, D) are consistent and contain M, and 192 ?: Eiter et al. /Artificial Intelligence 90 (1997) 177-223 Algorithm Min-Skeptical-Relevance( H, M, K D, h) Input: A propositional DAP P = (H, M, K D), h E H. Output: “Yes” if h is relevant for P under minimal skeptical explanations, “No” otherwise. Procedure explanation(E) begin 4 := conjunction : boolean of all literals (* check if E is skeptical explanation *) in M; return skept-inf( W U E, D, 4) and not skept-inf( W U E, D, I); end explanation; begin for each E G H s.t. h E E do begin if explanation(E) begin minexp := true; then (* E is candidate for each E’ c E do if explanation( E’) then minexp := false; for a minimal explanation *) end; if minexp = true then begin output( “Yes”) ; halt end; end; output( “No”) ; end Min-Skeptical-Relevance. Fig. 3. Algorithm for Relevance. (G) E U {h} is an explanation for P means (WUEU{h},D) explanation exists and for (H\(h), M, W U {h}, D). that all (some) 0 that some consistent of contain M. Hence, E is an extension extensions Corollary 4.3. Let P = (H, M, W D) be a PDAP and h E H. Then, (i) h is relevant for P ifs (H\{ h}, M, W U {h}, D) has an explanation and (ii) h is necessary for P ifs (H\(h), M, U: D) has no explanation. Thus, if Consistency lies in complexity class C, then Relevance is also in C and Necessity is in co-C. Our first result shows that abduction planations reduced can be efficiently theories. This is somewhat unexpected abduction cannot be efficiently reduced to deductive and surprising, to deduction. from default theories based on credulous reasoning from propositional since in case of classical ex- default theories, Given a PDAP P = (H, M, W D), we construct a default to the (consistent) theory Tp = (Wp, Dp) such extensions of Tp. that the credulous Indeed, define explanations of P correspond Wp=WU{ah>hIhEH}, Dp=DU 7: Eiter et al./Artijicial Intelligence 90 (1997) 177-223 193 h is adopted. Each credulous where for each h E H, ah is a new propositional that hypothesis consistent consistent y the atom ah means is verified by a extension A of (W U E, D) that contains M. This extension A gives rise to a default extension A’ of Tp which augments A be new formulas. The default the of an extension A which does not contain M, while atom. Informally, explanation E of P prevents an augmentation defaults 2, applied :I1 ~ x7 -h include z serve to choose the explanation E, where 2 (respectively to include h in E (respectively instead of ~, ~ exclude h from E). Note that using does not work; in particular, applying 3 would mean the negation ‘of h in E, which is different from excluding h from E. s) is the defaults to More formally, the construction has the following property: Theorem 4.4. Let P = (H, M, W, D) be a PDAP. Then, (i) (ii) if E is a credulous explanation for P, then there exists a consistent extension A’ of Tp such that E = {h E H 1 a,, E A’}; if A’ is a consistent extension of Tp, then E = {h E H 1 ah E A’} is a credulous explanation for P. (i) Let E be a credulous explanation for P. Hence, (W U E, D) has a consistent Proof. extension A which contains M. Define A’ = Th(A U {ah 1 h E E} U {lab 1 h E H\E}). Clearly, A’ is consistent. Moreover, A’ is an extension each in At from the sequence Ao, Al,. . . for A can also default d E D that can be applied in some A[, be applied in Ai from Ah, A{, . . . . On the other hand, if d E D is applied in some Aj. Since M & A’, no default y then it is also applied can be applied. Thus, A’ = Ui”, A{, and hence A’ is an extension of (Wp, Dp). Obviously, E = {h 1 ah E A’}. This proves of (Wp, Dp). Indeed, extension of (Wp, Dp), and let E = {h ) ah E A’}. Let A of A’ to the language of P. Then, A is an extension of (W U E, D). be the restriction in A( from is applicable Indeed, first notice . . . On the other hand, each d E D A;, A;, . . . is also applicable in Ai+] as well. We conclude which that is applicable A = Ui”, Ai, and hence A is an extension of (W U E, D). We show that M 2 A, by is proven. But this is easy: M C A’, for otherwise a default y would be which (ii) hence, by definition of A, M 2 A. Cl applicable; that E C A. Each default d E D which in Ai from Ao, Al,. in Ai can be clearly applied (i) . (ii) Let A’ be a consistent Using transformed (i) and (ii), to similar deductive the main decisional reasoning abductive tasks in default reasoning logic. tasks can be efficiently Corollary 4.5. Let P be a PDAP based on credulous explanations. Then, (i) Consis- tency, (ii) Relevance, and (iii) Necessity are equivalent to (i*) existence of a consistent extension of Tp, (ii*) membership of ah in some consistent extension of Tp , and (iii* ) membership of ah in ali extensions of Tp, respectively. By the results on the complexity that (i) and (ii) are in ZI and that (iii) reductions from deductive default reasoning. Let T = (Wr D) be a normal default of propositional default it follows logic is in II;. We also obtain matching hardness by theory [ 27,591, 194 T Eiter et al./Artificial Intelligence 90 (1997) 177-223 that W is a consistent such formula. Let h, q be new propositional PDAP set of literals (in fact, W can be even empty), the following atoms. Then, facts are clear: and 4 a the has a credulous explanation iff T I-, 4; h is relevant for the PDAP l(h), {qh Wu (4 2 q)yD) iff T t-‘c 4; and h is necessary for the PDAP l(h), {qh W u (4 v h 3 q)?D) (1) (2) (3) iff T Ifc 4. Since is @-hard (3) [ 271, we obtain the following results. the reasoning problems for T in ( l), (2) are ZF-hard and the one in Theorem 4.6. Let P be a PDAP based on credulous Consistency is IS;-complete, complete, with hardness even for normal P. explanations. The problem (i) (ii) Relevance is Zg-complete and (iii) Necessity is IIF- Remark. The complexity of credulous explanations where the default then Tp has a consistent This would NP = C! would follow, which theory is normal, extension, result for Consistency shows that a polynomial to classical extensions of a default time reduction theory Tp as above, but is not possible if Wp is consistent, and thus the PDAP would also have an explanation. in general. Indeed, imply an NP algorithm deciding existence of a credulous explanation, and is generally believed to be false. It is interesting that verifying one. The former problem can be easily possible credulous a credulous reduced for the PDAP (1). Thus, explanation to note explanation is as hard as finding to the latter; moreover, 8 is the only Theorem 4.7. Let P = (H, h4, W, D) be a PDAP. Deciding if E & H is a credulous explanation for P is X:-complete, with hardness holding even for normal P. Now consider abduction based on skeptical a reduction of abductive efficiently. However, by using skeptical more complex, by one level of the polynomial such an efficient to deductive reasoning reasoning reduction reasoning. It would be useful to have reasoning which can be computed tasks grow the abductive that hierarchy. This strongly reasoning suggests is not possible. the problem of recognizing if a certain default theory has a consistent We first consider to deciding reduces Xi) and logical conjunction Moreover, if each extension includes of a problem it is also hard for this class. all manifestations in Z; and a problem skeptical explanations. Clearly, (which extension (II!). Thus, the problem this is in is a in II;, and hence in the class Dg. 7: Eiter et al. /Artijicial Intelligence 90 (1997) 177-223 195 Theorem 4.8. Let P = (H, M, W, D) be a PDAP. Deciding if E c H is a skeptical explanation for P is D!-complete. 5 Thus, as in the case of credulous explanations, level of the polynomial subtask at the second both a Z!- and a @-hard skeptical explanation resides at the third level. (as opposed recognizing a skeptical explanation hierarchy. However, since this problem to only a Z!-hard one), is involves a finding Theorem 4.9. Let P be a PDAP based on skeptical explanations. The problem Consistency is Z!-complete, complete, with hardness even for normal P. (i) (ii) Relevance is C!-complete and (iii) Necessity is II!- How does this result compare to other nonmonotonic logics, in particular, which non- logic has similar complexity? We know that Konolige’s moderately grounded logics have the thus, we can use a theorem prover for such logics to perform [ 361 and several other ground nonmonotonic modal [ 19,211; logic monotonic autoepistemic same complexity abductive reasoning from default theories based on skeptical explanations. 4.2. Minimal explanations As mentioned tions. The results does not increase However, of an explanation one level of the polynomial first credulous Consider complementary above, one is usually in [22] were that the complexity of abduction if minimal this is not true for abduction for observa- theories instead of arbitrary explanations. logic. Here, checking minimality are used from default in minimal explanations from classical explanations interested is a source of complexity, which causes an increase in complexity by hierarchy. explanations. Checking minimality of an explanation E has complexity of checking the explanation property. Theorem 4.10. Let P = (H, M, W, D) be a PDAP. Deciding if a credulous explanation E for P is minimal is II:-complete, with hardness even for normal P. 6 To see this, notice that E is not minimal hence, it follows that the problem iff for some h E E, the PDAP (E\(h), M, W is in II;. On the other it is the PDAP (3). Clearly, {h} is a credulous explanation; moreover, D) has a credulous explanation; hand, reconsider minimal iff h is necessary for P. Thus, @-hardness follows. Note that recognizing minimal credulous explanations, which consists explanation (Theorem A.l). Thus, explanations property and testing minimality, is in D!; this problem for a certain PDAP and vice versa. can be transformed it is also complete into recognition in checking the for this class of skeptical 5 For normal PDAPs, the problem is “only” fl:-complete, since then deciding whether (W U E, D) has a consistent extension speaking, is in NP. it is “promised” recognizing s Strictly D!-complete, result holds also on deciding given any E, whether no E’ C E is a credulous explanation. instances would be harder explanations recognizing than ffi, unless II! = D!. However, that E is an explanation; in fact, since already correct is the 196 Z Eiter et al./Artifcial Intelligence 90 (1997) 177-223 Due to the complexity of minimality checking, Relevance migrates to the next level of the polynomial hierarchy. Theorem 4.11. Let Q be a PDAP based on minimal credulous explanations. Then, Relevance is XT-complete, and hardness holds even for normal Q. as testing the same complexity is much more involved the explanation property, Now let us consider minimal than of a credulous explanation. While skeptical explanations. Testing minimality of a skeptical the latter has the former is harder by this can be explained as follows. Since size “proof’ which if we ask for a smaller guess E’ and its proof, and check the proof time with the NP oracle. However, verifying a skeptical explanation E is the full explanation roughly one level of the polynomial verifying can be checked with an NP oracle explanation E’ c E, we can simultaneously in polynomial II;-hard, power of a II2p oracle. and hence E does not have such a “proof’. Here, verification needs it has a polynomial time. Thus, explanation E is in Z!, in polynomial a credulous Intuitively, hierarchy. Theorem 4.12. Let Q = (H, M, W; D) be a PDAP. Deciding if a skeptical explanation E for Q is minimal is IIF-complete, with hardness holding even for normal Q. 7 Note that recognizing minimal skeptical explanations is in II& since the complexity of deciding minimality D!), and is also complete for this class (see Theorem A.2). (II!) dominates the complexity of the explanation property (“only” The complexity of deciding relevance of a hypothesis increases by the same amount as testing minimality In fact, the problem if skeptical explanations resides at the fourth are used instead of credulous explanations. level of the polynomial hierarchy. Theorem 4.13. Let Q be a PDAP based on minimal skeptical explanations. Then, problem Relevance is X:-complete, with hardness even for normal Q. There is no well-known logic that has similar complexity, and thus one take advantage of theorem provers for such logics to perform skeptical abduction nonmonotonic cannot from default theories. 5. Tractable cases from default the practical the results of the previous side, theories has even higher complexity From abduction for skeptical explanations. As a consequence, on all inputs with solutions is not possible. But this does not mean that work in practice. Several methods section are discouraging, than deduction, since in particular that works efficiently an implementation that it is impossible to come up to cope with NP-hard problems are 7 Note that here, as opposed to checking minimality of credulous explanations, recognizing correct problem instances (D!) is not harder than deciding the minimality (cf. footnote 6). known problem T Eiier et al. /ArtiJcial Intelligence 90 (1997) 177-223 197 [9,41], among which the following two are most popular: identifying (natural) restrictions that guarantee Concerning approximation, tractability two directions that reduces complexity, and approximation methods. are viable. One is to find a notion of in the spirit of [ 10,551. The other is to that work well in practice; in case of the classical satisfiability the greedy algorithm (GSAT) [ 571 has proven to be a valuable method for instances efficiently. However, GSAT and similar algorithms that are in NP; it is not known how to apply GSAT in order little is known about In general, that are hard for Zg or II! efficiently. in the polynomial of problems hierarchy, as well as PSPACE-complete inference approximate use heuristic algorithms problem, solving moderately are designed to solve problems approximation problems [ 141. sized for problems For fragments of default logic from which the abductive is credulous abduction formulas are from a tractable fragment of the propositional reasoning from default tasks are in NP, theories where all language, e.g. formulas or Krom formulas GSAT is applicable. An example propositional Horn In such a case, classical 2!-complete time transformation apply GSAT Identifying abductive (conjunctions of clauses with at most two literals). inference k vanishes as source of complexity. reasoning of the reasoning tasks fall back to NP. Therefore, task to the classical satisfiability problem, we can In particular, after a polynomial the to solve the reasoning tractable cases in terms of suitable tasks efficiently. default restrictions on the input is the “classi- that all sources of complex- cal” way of tackling a hard problem. This approach requires In particular, ity are dried up; default abduction the underlying in- tasks (which embody ference and the number of extensions) must be tractable. The excellent work of Kautz versus and Selman intractable theories (W, D) are among l Literal-Horn [58] gives a very detailed picture of polynomial two classes of default the many fragments of default [35]: W is a set of literals and each default suffers from up to four such sources. reasoning. The following logic they considered: [35] and Stillman cases of default in D is Horn, the complexity of classical reasoning i.e., of form “A’~~Aat’e, where the ai are atoms and C is a literal. l Krom-pf-normal [58]: W is a set of Krom formulas, and each default in D is of form &L@& where all Ci are literals. P,A...Aek 9 For those classes, tractability of credulous In fact, these classes are the maximal classes inference factual knowledge bases, extended by simple default rules; however, task is tractable, cf. [ 581. Note that literal-Horn (Wr D) I-, !’ for a single literal in the hierarchy of default theories they allow (CWA), or rules so that their application e’ was shown. classes for which this inference include to express e.g. the close world assumption does not lead to inconsistency. Based on generalizations of the quoted since the underlying credulous default abduction. Similar unlikely, cases (for literal-Horn, in Appendix B). The following lemma generalizes skeptical inference cf. [ 35, Theorem 7.31; for Krom-pf-normal, results, we obtain some tractable cases of results for skeptical default abduction are in both see Proposition B.3 (K D) l-s e is co-NP-complete tractability literal e rather than a conjunction el A. . . A &, of literals [ 35, Theorem 6.51, which is formulated for a single (see Appendix B for the proof). 198 7: Eiter et al. /Artificial Intelligence PO (1997) 177-223 . . , &, be literals. Lemma 5.1. Let (W D) be a Literal-Horn default theory, and let [I,. Then, deciding ( W, D) kc et A. . . A k,,, is possible in 0( m . n) time, where n is the length of the input. This result is established by reducing A e, where H is a Horn cases where W or et A . . . A &, is not consistent, e, A-. in Appendix B) ; applying unit resolution is decidable [ 401)) H k CL can be decided in 0( m . n) time. ’ Thus, we obtain standard theory linear time algorithms in linear the lemma. to a classical (W D) t, !I A . . . A C,, apart from the trivial inference problem H t (see the proof (e.g. for Horn satisfiability time constructible that is linear time, and thus H k !l A . . . A e,,, For Krom-pf-normal, an analogous generalization is NP-hard (see Proposition B.l t, e, A... (WD) generalization of literals small iff IL/ < b for some fixed constant b. if the conjunction is possible A !, is not evident; indeed, the problem in Appendix B). However, a is small. In what follows, we call a set L Lemma 5.2. Let (W D) be Krom-pf-normal, and let L = {f?, , . . . , &} be a small set of literals. Then, deciding (W D) I-, Cl A . . . A & is possible in 0( 1 Dlb . n) time, i.e., in polynomial time. For convenience, we introduce some additional notation For any literal 4, we denote by N e the literal opposite Ne=xife=lx. for the rest of this section. to e, i.e., N e = x if C = lx, and 5.1. Credulous abduction from literal-Horn default theories For this class, the main abductive reasoning tasks are tractable. Theorem 5.3. Let P = (H, M, W D) be a PDAP based on credulous explanations, such that (W D) is literal-Horn. Then, Consistency, Relevance, and Necessity can be solved in 0( IMI . n) time, where n is the length of P. Proof. Construct a literal-Horn Tl = (W Dl), where DI = bh : h ---1h~H h : Tb,, : bh ’ Tb/, ’ b/, atom. It is not hard to see that P has an explanation where each bh is a new propositional iff W is consistent constructed 0( IM] .n) time. Hence, Consistency can be decided Relevance and Necessity can be easily reduced its complement. Thus, respectively in O(n) they are also solvable . . , mk). Tl can be in in 0( IMI .n) time. By Corollary 4.3, to Consistency time) 0 in 0( IM] . n) time. (in fact, in linear I-, ml A . . . A mk, where M = {ml,. and Tl time, and by Lemma 5.1, Tl kc ml A . . . A mk can be decided * This is even possible Lemma 5.1); however, time results polynomial is the set of negative where M- in 0( (m- + 1) . n) time, where m- to our knowledge, in Section 5.1 can be sharpened no O(n), literals in M. i.e., linear time algorithm is the number of negative literals 6’; (cf. proof of for the is known. The bounds by replacing “IM(” with “iA4-1 + I”, accordingly, 7: Eiter et al. /Artificial Intelligence 90 (1997) 177-223 199 Algorithm LH-Cred-Explanation( H, M, W, D) ; Input: A propositional Output: A credulous explanation E for P, literal-Horn DAP P = (H, M, W 0). if one exists. begin (* W inconsistent; (* M inconsistent; no explanation no explanation *) *) in M; from P; of all literals for each I E W do if N e E W then stop; for each C E M do if N e E M then stop; 4 := conjunction construct Tl = (W, Dl) construct Horn theory H s.t. H I- #J iff Tl t-, I$; if H Ij qb then stop; M := {x 1 atom x, HI- x}; C:=WuMu{~x~(a:~x/~x)EDl, E := {h E H / h E C, bh E C}; output(E) (* no explanation ; exists *) (* M is the least model of H *) Mkoa, Mpx}; (* E is an explanation *) (* P has an explanation iff Tl t--c # *) (* proof of Lemma 5.1 *) end LH-Cred-Explanation. Fig. 4. Algorithm for finding a credulous explanation (literal-Horn). Notice that a polynomial algorithm given hypothesis), is outlined which can be extracted from in Fig. 4. for j&ding an explanation a the proof of Theorem 5.3 and Lemma 5.1, (even containing Each step of the algorithm can be done in O(n) in 0( [MI .n) time; hence, the total running time, except the test H I- q5, which is possible time is O( IMI .n). The algorithm can also be used to solve Relevance and Necessiry, utilizing Corollary 4.3, in 0( IMI .n) time. time. it is easy to see that an explanation E for a PDAP P = (H, M, W D) is minimal even a minimal credulous can be found in polynomial explanation Moreover, if (E\(h), M, W D) h as no explanation Indeed, if and only explanation E for P as above, one can find a minimal one by trying eliminate following hypotheses result. from E, as done in the algorithm for each h E E. Thus, given an in Fig. 5. Thus, we obtain the to subsequently Theorem 5.4. Let P = (H, M, W D) be a PDAP where (W D) is Literal-Horn. Then, a in 0( I HI . IMI . n) time, where n is minimal credulous explanation the length of P. for P can be found However, Relevance based on minimal credulous explanations Horn default necessity of a hypothesis arbitrary explanations theories can be shown h in minimal to be NP-complete explanations (Proposition 4.1), and thus also Necessity (Proposition B.4). Recall for PDAPs with literal- that coincides with necessity of h in is polynomial. 5.2. Credulous abduction from Krom-pf-normal default theories Tractability of credulous inference of a literal from a Krom-pf-normal theory allows us to obtain another tractable fragment of abduction from default theories. 200 Z Eiter et al. /ArtQicial Intelligence 90 (1997) 177-223 Algorithm LH-Min-Cred-Explanation( Input: A propositional Output: A minimal credulous literal-Horn DAP P = (H, M, W D). explanation E for P, if one exists. H, M, W D) ; begin E := LH-Cred-Explanation( H, M, W 0); if E is undefined while R # 8 do then stop else R := E; (* try to remove each h E R from E *) begin select h E R; (* try to remove h from E *) E 1 := LH-Cred-Explanation( E\{ h}, M, W D) ; if El else begin E := El; R := E; end; then R := R\(h) is undefined (* h is in all explanations E’ G E *) (* take the smaller explanation El *) end; output ( E) ; end LH-Min-Cred-Explanation. Fig. 5. Algorithm for finding a minimal credulous explanation (literal-Horn) The following lemma on inference of a literal from a Krom literals default is important theory. for credulous inference of a set of literals theory augmented from a Krom-pf-normal by Lemma 5.5. Let S be a (propositional) Krom theory and I? a literal, and let L = . . , &} be a set of literals such that (i) S U L is consistent, (ii) S U L t I and (4,. S I+ C. Then, S u {&} t- f? for some et E L. From the lemma, we obtain the following criterion for credulous inference of a literal. For convenience, let for each default d = $$$j denote lit(d) = {e,, . . . , lk}, and let for each set D of such defaults denote lit(D) = UdED lit(d). Proposition 5.6. Let T = (W D) be a Krom-pf-normal default theory and let L = . . , &,} be a set of literals. Let Ll = {ei E L 1 W y t$}. Then, T t, C1 A . . . A &, iff (4,. is empty, or (a) Ll (b) there exists a subset Dl 2 D such that (1) ID11 6 ILlI, (2) W U lit( Dl) (3) WUlit(D1) is consistent, and k&foreach eG Ll. Based on this proposition, the algorithm in Fig. 6 decides whether a conjunction of theory. The analysis of literals its running is a credulous consequence of a Krom-pf-normal default time yields the following result. Theorem 5.7. Let T = (W D) be a Krom-pf-normal default theory, and let L = f?, A . f . A &,, can be decided using (4,. Krom-PFN-Cred-Inf in 0( 1 D I”’ . m . n) time, where n is the length of the input. . . , &,} be a set of literals. Then, T 1, T Eiter et al. /Artijicial Intelligence 90 (1997) 177-223 201 Algorithm Krom-PFN-Cred-Inf( W; D, 4) ; Input: A propositional Krom-pf-normal default theory (K D), a conjunction of literals C#J = gi A + . . A l,. Output: “Yes” if (W D) I-, 4, “No” otherwise. begin Ll := {& 1 W y f$, 1 < i < m}; if Ll = 0 then output( “Yes”) else for each Dl &D s.t. ID11 6 ILlI do (* W t- 4; thus 4 is in any extension *) begin S := W U lit(D1); (* lit(D1) = all literals in Dl; S is Krom *) ifSy_LandSt-&forall&ELl then begin output ( “Yes”) ; stop; end; (*m+l X lineartime*) end; output ( “No”) ; end Krom-PFN-Cred-Inf. Fig. 6. Algorithm for credulous inference of a conjunction of literals (Krom-pf-normal) Thus, in particular, if L = {[I,. . . , &} is small, we obtain a polynomial bound 0( 1 Dlk. of of this section. Recall that tractability n); this proves Lemma 5.2 at the beginning credulous literal of literals, since By a reduction inference can most likely not be generalized is NP-complete this problem (Proposition B.1). from a Krom-pf-normal to credulous default reasoning, one can show that credulous abduction is small. if the set of manifestations theory is polynomial default to an arbitrary conjunction Theorem 5.8. Let P = (H, M, W D) be a PDAP based on credulous explanations Then, Consistency, such thatM={e,,...,&} Relevance, and Necessity can be solved in 0( lDlb. n) time, where n is the length of P. is small and (W D) is Krom-pf-normal. Unfortunately, Theorem 5.8 cannot be generalized of (K D) k--c et A . . . A C,, for Krom-pf-normal to an arbitrary set M of literals. In (K D), the fact, due to the NP-hardness is clearly NP-hard. problem in the case of literal-Horn Like finding a credulous are efficient and simple algorithms such a PDAP. Thus, we do not further elaborate on this point. for finding all minimal explanation default can be extracted theories, a polynomial for from the proof. As shown below, there of a credulous explanations time algorithm Interestingly, the number of hypotheses by the number of manifestations. festation can always be explained by a single hypothesis. Intuitively, in a minimal credulous explanation is bounded this is explained by the fact that a mani- Proposition 5.9. Let E be any minimal (H, M, W D) where (W D) is K rom-pf-normal credulous explanation for a PDAP P = and M is jnite. Then, IEl < [MI. In particular, of single hypotheses, of this characterization for a single manifestation if hypotheses (M = {a}), consist are needed at all for an explanation. A consequence the minimal explanations is that all minimal credulous explanations can be computed by 202 7: Eiter et al. /Artificial Intelligence 90 (1997) 177-223 Algorithm All-KPFN-Min-Cred-Exp( H, M, W 0) ; Input: A propositional Krom-pf-normal DAP P = (H, M, W; D). Output: All minimal explanations E for P. credulous begin 4 := conjunction if W k I or 4 k I for i := 0 to IMI do of all literals then stop; in M; Min_Expl := 0; (* 2 X linear time; no explanation exists *) for each E C H st. /El = i do if W U E y J- and E’ $ Min_Expl, for every E’ c E then if Krom-PFN-Cred-Inf( W U E, D, 4) = “Yes” then begin output(E) ; Min_Expl := Min.Expl U {E}; end; end All-KPFN-Min-Cred-Exp. Fig. 7. Algorithm for finding all minimal credulous explanations (Krom-pf-normal). testing all subsets E & H with IE( 6 IMI time, which is done by the algorithm The correctness follows Krom-PFN-C&-Inf. in polynomial If the set of manifestations M is small, is captured by the next theorem. 5.9 and the correctness then the algorithm of the algorithm from Proposition in Fig. 7. of runs time, which Theorem 5.10. Given a PDAP P = (H, M, W D) where (W D) is Krom-pf-normal and M is small, all minimal credulous explanations for P can be computed in time 0( lHlb. lDlb. n), where n is the length of P. (Standard also Relevance and Necessity for minimal explanations search data structures are used to represent MinXxpl.) As a consequence, if M is small. are polynomial 6. Complexity of the first-order case In the previous propositional DAPs. However, allowing for predicates above. sections, we considered the computational from a language representation is more relevant and realistic, as in the examples we considered cost of abduction in practice, for knowledge Since default logic first-order credulous consequences from default logic subsumes is undecidable first-order in general; logic, default reasoning based on unrestricted in fact, as shown already by Reiter, the are even not recursively enumerable [ 521. Hence, also abduction However, default logic is highly undecidable is decidable logic in general. in the common (Vx. x = ci V . . . V x = c,) and the language for first-order default is function the unique names assumption free. In the following, we implicitly setting of the domain closure ( AiCj ci # this assume for the examples we logic; notice that this was intuitive axiom cj), where setting considered. 7: Eiter et al. /Artificial Intelligence 90 (1997) 177-223 203 In this setting, an existential quantifier 3x. 4(x) is equivalent to r$( ct ) V. . . V &c,), to a quantifier-free to $( cl > A . . . A fi ( c, ) . Therefore, every first-order is in general larger. Each default rule d with free variables x = xt , . . . , xm gives rise to a first-order default theory T” = (W”, D*) (n”) of ground defaults. As a consequence, to an equivalent propositional formula, which, however, default that the complexity of first-order default reasoning of propositional than the complexity default class for such complexity is the exponential i.e. nondeterministic (O(d( n) > > with an oracle of T to T*, after which the algorithms reasoning analogue of Z! = tip, is (at most) (C!) . The which (0( 2~“~“)) > rather in by comes for propositional DAPs can be exponentiaE for NP (“exponential” time number and a universal quantifier Vx. $(x) formula can be rewritten exponentially an exponential theory T = (w D) reduces that can be exponentially this means higher Intuitively, exponentially appropriate is the class ZF = NEXPNP than polynomial the reduction applied). larger. time In fact, it is shown in [29] for ZF; as a simple consequence, in [29] establishes proof quantifiers occur in D. Moreover, the default [ 291 and results The polynomial theory that credulous skeptical first-order default is complete reasoning that these results hold even if W is a universal reasoning is complete for IIF = CO-Z:. The theory and no case, they hold if in addition from (this is immediate like in the propositional is normal and W is a consistent in [ 81). set of literals time transformations tasks in (l)-(3) established of default reasoning to the main credulous de- the hardness parts of Theorem 4.6. Clearly, from the complexity theories. Therefore, for first-order default also work for first-order reasoning, and Necessity is @-hard fault abduction these transformations results x:-hard On the other hand, can be reduced quence, Zt and II!, it is clear in exponential the main credulous it follows that Consistency for credulous default abduction and Relevance are in the first-order case. from that any first-order DAP P time to an equivalent propositional DAP P*; as a conse- to the classes first-order default abduction problems belong the above discussion respectively. Thus, we arrive at the following result. Theorem 6.1. Let P be a$rst-order DAP under the domain closure axiom and unique names assumption, is I$:- complete, based on credulous is X:-complete, explanations. and (iii) Necessity (i) Consistency is @-complete. (ii) Relevance Then follow for recognizing Thus, in higher explanation. the first-order intractability, the class of all problems a credulous explanation the complexity and checking min- is than context. Note if P = NP would be true. Indeed, EX- is case even that can be decided the propositional in exponential of credulous abduction time, in and so all EXPTIME-complete running time, which implies problems. Those problems that every problem that is Analogous results imality of a credulous exponentially that this definitely proves PTIME, included have provably complete time. i.e., in CF and II:, exponential for ZF or IIF has provably an exponential lower bound on its running For skeptical first-order abduction and minimal explanations, increase in complexity (from ZJ: to ZF, II: to II:, etc.) strongly suggests an analogous exponential itself. From 204 7: Eiter et al. /Artificial Intelligence 90 (1997) 177-223 above, it is clear the discussion upper complexity results on evaluating end of Appendix A for more details). second-order bound. Matching hardness that for each problem, the exponential results can be obtained by applying analogue predicate formulas over finite structures is an the in [ 291 (see literal-Horn default (i.e., datalog programs) theories We close (respectively of propositional first-order default abduction. time results in Section 5 scale up from and this section with some remarks on tractable results, also the polynomial Like the intractability case. A-quite moderate-extension the propositional Krom-pf-normal default quantified Krom clauses (respectively besides ground propositional DAP P*, on which be applied, does not give a polynomial However, no substantially setting, abduction To substantiate (R D) to the first-order case is to allow also universally clauses (ground) fJ( X) in defaults to the equivalent in Section 5 can is exponential. better algorithms are available, since even under this restrictive literals) besides propositional literals a first-order DAP P time algorithms since is intractable. this claim, we first consider reducing the polynomial algorithm, to allow also nonground the class of first-order literals. Unfortunately, the reduction in W, and literal-Horn literals) It is easy to see that logic programs without negations as well as skeptical deductive represented credulous is EXPTIME-hard, theories. are a fragment of this class. Indeed, each program Ai are atoms, can be equivalently consequence, of this form known folklore now). Based on this, it is easily established tasks from a first-order Again, problems this definitely proves to be EXPTIME-hard are possible. intractability, literal-Horn is implicit default since (this . . , A,,, where rule A0 +- Al,. the by the Horn default A+;;A,,:Ao. As a theory is in the work of [ 11,611 and part of the from a default inference inference of a fact from a datalog program that the main credulous abduction theory are EXPTIME -complete problems. for such time algorithms since no polynomial Similarly, also abduction from Krom-pf-normal in the literal from theory is NP-hard, even for instances of simple form (see Proposition B.5 co-NP- first-order case. In fact, one can show that credulous such a default in Appendix B) . Therefore, hard), even if only a single manifestation inference of a single has to be explained. also credulous is intractable (respectively is NP-hard abduction theories default Tractability by imposing a first-order DAP P reduces nomial algorithm. algorithms as in the propositional case can be gained, however, a constant upper bound on the arity of predicates; to P* in polynomial time. Thus, by applying this guarantees from Section 5 on P* afterwards, we have a polynomial for both classes that the poly- overall 7. Conclusion and further research We have investigated abduction amples, we looked how abduction model of abduction from default default skeptical abduction; reasoning, credulous both are useful theories. Starting from default can be reasonably performed; theories. The two inference modalities and skeptical inference, in practice. Credulous give rise abduction from motivating ex- this led us to a basic of classical and to be to two credulous appears T Eifer et al. /ArtQicial Intelligence 90 (1997) 177-223 205 useful e.g. for diagnosis, while skeptical abduction responds and plan recognition to previous applications of abduction [ 24,421) (cf. . is appealing for planning. This cor- in diagnosis (cf. [ 44,461) and planning from the practical point, since they show that the main reasoning complexity case. The main theories are summarized of the abduction model, the in Table 1. results on Moreover, we have analyzed the computational as well as in the predicate default the complexity from propositional intractable, ranges in the propositional of abduction and hence polynomial the second from is the level of deductive default both complexity They are discouraging tasks are highly fact, II;), which theories, up to fourth Interestingly, level than abductive default planning. A somewhat positive variant, credulous default abduction, reasoning, theorem provers thus used to perform abduction. However, explanations, which are more complex. can be shortly like this property credulous in the polynomial (XI), abduction hierarchy; level and the “square” of the complexity of default is less complex thus, abductive default diagnosis level of the polynomial reasoning In and abduction than skeptical time algorithms are unrealistic. (2;, hierarchy from classical reasoning. by one is less complex is that the least complex into classical default [ 131 can be efficiently is lost as soon as one uses minimal finding transformed abduction, the DeReS system In the first-order case, under some common abduction problems are trivially undecidable) factor, and is provably intractable. restrictions the complexity (in full first-order scales up by an exponential logic, all known classes of propositional is tractable. Unfortunately, frontier, we have also shown that credulous abduction from default these results do not carry over to the first- and Krom-pf-normal literal-Horn for future work. One is to find more applications for abduction theories, and to see how credulous and skeptical abduction apply therefore. to see whether other modes of abduction, besides credulous are relevant. Further logic for the underlying side are other concepts of abductive explana- theory. In the present that have been explanations in the literature. A number of different notions of acceptable issues more on the foundational tion, as well variants of classical default paper, we focused on the most simple concepts of abduction explanation considered exist, cf. [ 7,22,43,48], ever, all single out minimal minimal probability abduction problems archy of default abduction. size (cf. [ 431) and explanations ). Results theories using explanations for classes AL and AL[O(logn)] [47,48] from default complete these concepts are not strong enough which are based on a preference between explanations; explanations. Most well known are explanations that of smallest size or smallest cost yield hier- to lower the complexity of the (refined) polynomial that have minimal cost (or weight respectively theories how- that have [ 3 I 1. In particular, from classical [ 221 suggest for abduction On the other hand, introduced, motivated several variants by some weaknesses been 5,26,39,491. formalisms. It would be interesting In particular, stationary and extensions of Reiter’s default logic have [4, e.g., to investigate how abduction behaves on these since [4,49] would be interesting, of the original approach, logic default [35,58] the tractability Exploring the previously theories order case. Several from default It would also be interesting and skeptical abduction, issues remain 206 7: Eiter et al. /Artificial Intelligence 90 (1997) 177-223 there the complexity as a consequence, of skeptical reasoning is lower than in classical default logic [ 281; also skeptical abduction has lower complexity. Also on the algorithmic side, interesting issues remain for further work. One important logic on which abduction is tractable. In language would be interesting. that allow more efficient abductive default rea- are needed. Note that quite a bit is known about approximation tractability make clear [ 17,541 as well as # P-complete problems is known about approximation hierarchy above NP and for PSPACE-complete or on a computational that good approxi- of [60] (see complete problems, of problems fragments [ 571. Anyway, the results about to find other fragments of default that are not within a propositional inference problems [ 311). However, not much is, of course, particular, Apart from that, approximation methods soning are needed, either on a semantical basis, cf. [ 10,54,55] approach mation algorithms probabilistic also for classes of the polynomial cf. [14]. Finally, in knowledge of logic programming, [ 331. Complexity those for abduction between autoepistemic to thoroughly different the study and use of abduction results from default these formalisms. Similar it would be worthwhile logic are plausible. logic programming for other closely theories support for abductive representation formalisms results investigate from default abduction logic. from In established, theories the context cf. to that are similar is meanwhile [23] the view of the intimate relationship related formalisms such as Acknowledgements The authors would like to thank a referee for his helpful comments on this paper. In particular, inference and #P problems. they appreciate his pointers to papers on approximation of probabilistic Appendix A. Proofs of general case complexity The classes of the polynomial hierarchy have problems complete under polynomial transformations time formulas refer to in many proofs. A QBF is an expression of the form quantified Boolean involving (QBFs), which we will QIXIQZXZ.. .Q/&.E, k b 1, (A.1) (propositional) (3, V}, for all expression whose sets of variables XI,. where E is a Boolean disjoint nonempty from otherwise to variable-free Boolean expressions. We denote by QBFk,g (respectively, QBFk,v) set of all valid k-existential are from pairwise quantifiers is k-existential, in the obvious way by recursion the i = 1,. . . , k. If Qt = 3 then we say the QBF it is k-universal. Validity of QBFs is defined . . , Xk, and the Qi are alternating k-universal) QBFs. (respectively, variables Deciding, given a k-existential QBF @ (respectively p E QBFk,v), is a classical ZF-complete the conjunction (@ E QBFk,g ) A (p E QBFk,v) a k-universal QBF W) , whether III- is complete (respectively (respectively @ E QBFk,g complete) problem; deciding for Di. Z Eirer et al. /Artificial Intelligence 90 (I 997) 177-223 207 the set {la We introduce by -A for a Boolean obtained occurrence some additional notation. For a set A of propositional atoms, we denote ( a E A} and by A’ the set of atoms {a’ 1 a E A}. Moreover, the formula from F by replacing each occurrence of an atom x E X1 in F by true and each by false; as X will be understood, we write simply formula F and a set Xl 2 X of atoms, we denote by F:, of an ato& x E X\Xl Theorem 4.8. Let P = (H, M, W, D) be a explanation for P is Dz-complete. PDAP. Deciding if E C H is a skeptical is in D;. To show hardness, we reduce deciding theories Tl = (Wl, Dl) and T2 = (W2, D2), it default the problem two propositional Proof. As already argued, whether, given holds that Tl has a consistent are xi-hard loss of generality, Tl and T2 have different propositional Tl, and W2 = 0 (thus T2 has only consistent (8, {x}, Wl U W2, D 1 U 02). extension Tl has a consistent [ 271, respectively, and @-hard since the problems this will clearly prove Di-hardness. Without in [27]. Define P = of P iff atoms, x does not occur extensions), cf. It is easily seen that 8 is a skeptical explanation and T2 1, nc; this proves the result. q extension and T2 t--s x to the problem; Theorem 4.9. Let P be a PDAP based on skeptical explanations. The problem (ii) Relevance Consistency complete, with hardness even for normal P. and (iii) Necessity is Z!-complete is Z!-complete, (i) is IIF- Proof. Membership. A guess E for a skeptical explanation two calls to 2; oracle, by checking whether whether is easy to see that (i), (W U E, D) t--s 4, where 4 is the conjunction (ii), and the complement (i) We describe here a transformation of (iii) are in XT. of deciding (W U E, D) has a consistent for P can be verified by extension and it in M. Hence, of all formulas if a QBF @ = 3XVY3Z. F Hardness. is valid. Define W={f ++F}, D= C where f is a new atom, and P = (X U TX, {f}, W, D). Note that P is a normal PDAP. We claim (+) Assume E is a skeptical explanation that P has a skeptical explanation iff @ is valid. for P. Let Xl = E f’ X, and let Yl s Y be arbitrary. Then, clearly A=Th(WuEuXlu~(X\Xl)uYlU~(Y\Yl)) theories is an extension of the default default A C B. Clearly, B must be consistent. Moreover, since E is a skeptical explanation P, f E B, and hence F E B. Consequently, it follows of normal theory (W U E, D\{ $}). By semi-monotonicity ( [ 521; see Section 2)) (W U E, D) must have an extension B such that for is satisfiable. Since Yl is arbitrary, that VYGIZ. Fxl is valid. Hence, @ is valid. Fxluvl (-&) Let Xl C X such that VY3Z. FXI is valid. Define E = Xl U 7(X\Xl). W U E is consistent. Hence, every extension A of (E, D) is consistent; Clearly, an extension 208 T Eiter et al. /Art$cial Intelligence 90 (1997) 177-223 exists, since Yl z Y. From hypothesis $ E GD(A, arbitrary, also concludes To show (E, D) is normal. Moreover, each such A contains Yl U -( Y\Yl) the characterization of A in terms of its generating defaults and for some the that VY32. Fxi is valid, it follows that F is consistent with A. Consequently, (E,D)), and hence F E A; it follows f E A. Since the extension A was for P. This proves the claim, which it follows that E is a skeptical explanation the proof of (i) . (ii), add h to the hypotheses for (iii), add h to the hypotheses, to {q} and ask if h is necessary. relevant; the manifestations skeptical explanation. 0 in an instance of P f V h > q to the third component, Indeed, h is necessary in (i), and ask if h is change iff P has no Theorem A.l. credulous explanation E for P is DT-complete, with hardness even for normal P. Let P = (H, M, W, D) be a PDAP. Deciding if E C H is a minimal Proof. It remains to show hardness. For that, consider PDAPs Pl = (0, {ql}, Wl, Dl) as in (1) and P2 = ({h}, {qz}, W2,02) as in (3) preceding Theorem 4.6, and assume of P3 = that they are on distinct atoms. Then, {h} ({h},{q~,q~},WlUW2,DlUD2) for P2. Since the latter problems are C!-hard and @-hard, normal, Dg-hardness of the problem iffP1 hasacredulousexplanationand respectively, and P3 is clearly credulous explanation is a minimal hisnecessary follows. 0 Theorem 4.11. Let P be a PDAP based on minimal credulous explanations. Relevance and hardness holds even for normal P. is Zy-complete, Then, Proof. Membership. A guess E for a minimal for P such that h E E can be verified by two calls to an II! oracle (cf. Theorems 4.6 and 4.10). Hence, the problem explanation is in CT. credulous Hardness. We outline a reduction Let s and q be new atoms, and define from deciding validity of a QBF @ = 3XVY3Z. F. w=0, D= z-s -3-7 sAY:q TsATF:q Let P = (X U TX U Y U {s} ,X’ U {q} , K D); note that P is normal. Claim. s is relevant for a minimal credulous explanation iff Q, is valid. The following facts, which are straightforward, are useful for a proof of this claim: Fact 1. If E is a credulous explanation x E X; (ii) of (WuE,D). ifs E E, then Y C E; and (iii) for P, then (i) x E E or TX E E, for each to each extension ifs q! E, then 7s belongs Z Eiter et al. /Artificial Intelligence 90 (1997) 177-223 209 Fact 2. For each Xl C X, the set Exl = Xl U T( X\Xl explanation the set Th( W U Exl U X’ U {q}) (Indeed, for P. ) U Y U {s} is a credulous is an extension of (W U EXl,D).) is a minimal Proof of the claim. (+) Relafunce of s implies by Facts 1 and 2 that for some Xl C X, Exl for each Yl C Y, the set Exl,yl = Xl U -I( X\Xl) U Yl it follows by semi-monotonicity consistent credulous is not a credulous that (W U EXI,YI, D) has a extension A that contains explanation. Thus, of normal default Since W U Ex1.c is consistent, explanation. theories B = (1s) u Xl u $X\Xl) u Yl u +Y\Yl); however, q $ A (otherwise, Exl,yl would be an explanation). ization of A by its generating defaults, Consequently, the formula Fxluri is satisfiable. It follows it follows that B y -F, Thus, from the character- i.e., B U F is consistent. that 3XVY3Z. F is valid. Let X1 2 X such that VY3Z. Fxl for P. To show this, assume (e) explanation E c Exl exists. Then, from Fact 1 we have s $ E. The default have an extension that contains q; by the properties of default is provable VY3ZFxl is not valid. Contradiction. This proves the claim. from Xl U -( X\Xl to the contrary Cl ) U Yl U -( Y\Y 1)) where Yl = Y rl E. It follows theory (W U E, D) must that 1F logic, it follows that is valid. Then, EXI is a minimal credulous that some smaller explanation As P can be constructed in polynomial time, XT-hardness of the problem follows. q Theorem 4.12. Let P = (H, M, W, D) be a PDAP. Deciding E for P is minimal is rI!-complete, with hardness holding even for normal P. if a skeptical explanation Proof. Membership. A guess for a smaller skeptical explanation E’ c E can be verified with two calls to a 2; oracle, and hence deciding the existence of such an E’ is in CF. Consequently, is in II;. the problem Hardness. We describe here a reduction from deciding whether a QBF @ = VX3YVZ. F is valid. Let s and q be new atoms, and define sAX:q Ts:TFr\q 4 ’ TFAq Let P = (X U {s}, {q}, 0, D). Check that E = X U { } s is a skeptical explanation for P. Claim. E is a minimal skeptical explanation for P iff @ is valid. In the proof of this claim, we use the following facts, which are easily established. Fact 3. E is the only skeptical explanation for P that contains s. Fact 4. For each Xl C_ X, (i) extension containing Xl U l( X\Xl (ii) each extension of (Xl, D) contains 1s. the default ) U Y 1 U l( Y\Y 1) cfollows from semi-monotonicity) (Xl, D) has for each Yl 2 Y an ; theory 210 7: Eiter et al. /Artificial Intelligence 90 (1997) 177-223 (+) Let Xl s X. Then, by hypothesis, Xl Proof of the claim. explanation. Hence, implies by (ii) of Fact 4 that 1F A q $ A. From of its generating Yl = Y fl A. Thus, 3Y’v’Z. Fxl valid. is not a skeptical there exists some extension A of (Xl, D) such that q $! A, which of A in terms k F, where that Q, is is valid. Since Xl the characterization that Xl U l(X\Xl) U Yl U 7(Y\Yl) is arbitrary, it follows it follows defaults, (+) Assume that E is not minimal. Then, by Fact 3, some Xl 2 X exists which is that for each Yl C Y, it is consistent with 1F. Hence, VY3Z. ~Fxl validity of @ implies a skeptical explanation. By (i) and (ii) of Fact 4, we conclude holds that Xl U l(X\Xl) is valid. This implies that E is minimal. This proves that @ is not valid. Thus, by contraposition, U Yl U l(Y\Yl) the claim. 0 The result follows. 0 Theorem A.2. Given a PDAP P = (H, M, w D) and a subset E C H, deciding whether E is a minimal skeptical explanation for P is @-complete, with hardness holding even for normal P. skeptical explanation, If E is not a minimal Proof. Membership. then either E is not a skeptical explanation, which can be checked with two calls to a Xi oracle, or there skeptical explanation, which can be exists a guess E’ c E such checked by another that deciding whether E is not a minimal skeptical explanation Hardness. Follows skeptical explanation is in II!. immediately is in C,, ‘- hence, deciding whether E is a minimal in the hardness part of the proof two calls to a Z; oracle. Hence, that E’ is a smaller from the reduction it follows of Theorem 4.12: take E = X U {s}. q Theorem problem Relevance is Zi-complete, with hardness even for normal P. 4.13. Let P be a PDAP based on minimal skeptical explanations. Then, Proof. Membership. A guess h E E can be verified with one call to a CF oracle for a minimal skeptical explanation E for P such that (cf. Theorem A.2). from deciding validity of a QBF p = 3RVX3WZ. F, in the proof of Theorem 4.12. Let as there be s Hardness. We outline a reduction is an extension which and q new atoms, and define to the reduction Dl=Du r’ : r A r” -4 : yr A r” r A r” ’ yr A r/I { JrGR , 1 where D is the same set of defaults as in the proof of Theorem 4.12. Define P = if W would Note that P is normal; (H,R”U{q},@,Dl), be empty, to the PDAP in the proof of Theorem 4.12. We observe where H= R’UTR’UXU{S}. then P would be identical the following facts on P: Fact 5. Let E be any skeptical explanation for P. Then, either r’ E E or Tr’ E E, but not both simultaneously, for each r E R. 7: Eiter et al. /Art$cial Intelligence 90 (I 997) 177-223 211 Proof. Note that the manifestation Y” can be only explained by either r’ or -v’, which cannot be derived by applying defaults. Clearly, that Y and 1~ are both in E. it is not possible 0 Claim. Let El & H and Rl 2 R such that El n (R’ u -RI) = Rl’ u l( R\Rl)‘. Then, El is a skeptical explanation for P iff E = El \( R’UTR’) is a skeptical explanation for the PDAP Pa = (Ha, MG, We, D Q, ) constructed for @ = VX3YVZ. FR, in the proof of Theorem 4.12. Proof. Let 02 be the set of defaults obtained from Dl by replacing -F A q with +RI Aq. (+) Each extension would not be explained.) extensions it is clear X U Y U Z U {s, q} are precisely for PG. a skeptical explanation as (El, D 1). Moreover, the extensions that (El, Dl) must contain Rl U -(R\Rl). of From this, it is not difficult from the occurrences (Otherwise, R” to see that (El, 02) has the same of r, r’ and r” in (El, 02)) to the language over the atoms that E is it follows the extensions of (E, Da). Hence, of (El, D2) restricted (+) Assume that E is a skeptical explanation of (El, D 1). Clearly, B is consistent. To show that El it suffices to prove that R” U {q} C B. We consider two cases. (i) s E El. Then, s E E; since E is a skeptical explanation of PQ. Let B be an arbitrary extension for P, is a skeptical explanation for PO, we conclude that X & E, and hence X C El. Consequently, q E B by the default y; moreover, R” C B since for each r E R, one of the defaults w and s is applicable. (Note that the default 7zFrtiq is not applicable.) (ii) s $ El. Then, 1s E B. Let Yl = B fl Y. Since E is a skeptical explanation for Pa, we conclude that the set E u {lF@ A q} u 7(X\E) U Yl U y(Y\Yl) u (7s) is consistent. This can be easily established logic: start to build an extension of (E, Da) by applying 2 3 ?” ‘1 for each y E Y, after that all defaults 2, by semi-monotonicity the appropriate default of normal default from for x E X\E, and then 5; the default 7s’7F’Aq must be applicable +4q thereafter, as this is the only possibility to join q to the extension. Consequently, also the set C=ElU{rAr”~rER1}U{~rAr”~rER\R1}U{~FAq) U l(X\E) U Yl U +Y\Yl) U (1s) must be consistent. Thus, by the characterization ating defaults, we conclude that B = Th(C). Hence, of an extension it follows in terms of its gener- that R” U {q} 2 B. It follows that El is a skeptical explanation for P. This proves the claim. 0 212 7: Eiter et al. /Artijicial Intelligence 90 (1997) 177-223 From Fact 5 and the claim, it follows that s is relevant for some minimal explanation is valid. As P is efficiently follows. 0 for P iff for some RI C R, the formula VX3YVZ. FRI is valid, from p, this proves 81-hardness. constructible skeptical i.e., ly The result We close this part of the appendix with a remark on the complexity of first-order (cf. time that are hard for under domain closure and unique names assumption from above are proved by polynomial results problems since second-order default abduction Section 6). Most of the hardness transformations C! respectively formulas, evaluating (i.e., a first-order constants) the exponential Utilizing corresponding of QBFs by corresponding on the example of the transformation @ = 3XVY3Z. F, we have a second-order hardness proofs these results, has precisely exponentially second-order particular quantified Boolean of evaluating II!. Note that such formulas can be seen as second-order propositional the quantifiers are on propositional formulas atoms. formulas of predicate structure with finite domain It is shown in logic over a fixed finite relational for a language without [29] that structure and and yields problems hard for functions higher complexity, analogues Zg and IIF of 2: and III, respectively. the hardness proofs from above can be easily generalized to for the first-order case. In fact, a suitable replacement predicate is feasible. We show this in the proof of Theorem 4.9. Instead of the QBF formulas predicate formula p = 3Pl.l . . ~~Pl,“,VP2,, ‘. .vp2,n*3pj,, . * .3p3,n,. C#J where the pi,j are predicate variables and 4 is a closed first-order function and constant symbols occur). formula (in which no Evaluating p on a fixed finite relational structure A is x:-hard [29]. A can be represented in default logic by the fixed first-order theory WA = {r(t) 1 A k r(t), r(t) is a ground atom} U {-r(t) ) A F r(t), r(t) is a ground atom} the closed world assumption applied to the relations in A). Define now (i.e., WA yields defaults D= (here thex=xi,..., x, is assumed to match the arity of pi,j) and a first-order DAP P = ({Pl,jf ‘Pl,j / j = 1,. . .Y ~l),{f),WdU{f*~},D)> f is a new propositional atom. It holds where A /= P. This proves CF-hardness of Consistency case. that P has a skeptical explanation for skeptical abduction iff in the first-order Similar generalizations are straightforward in the other proofs. 7: Eiter et al./Arti$cial Intelligence 90 (1997) 177-223 213 Appendix B. Proofs for tractable cases Lemma 5.1. Let (w D) be a Literal-Horn default theory, and let el, . . . , & be literals. Then, deciding (K D) I--C el A. . . A&, is possible in 0( m . n) time, where n is the length of the input. (which holds Proof. If W is not consistent iff it contains then (W D) I-, el A. . . A em; if Ii A . . . A e, is not satisfiable, iff W is not consistent. Both consistency time; checked et A . . . A till is satisfiable, Define in what follows, we thus assume i.e., Cit.. in linear of W and satisfiability literals) a pair of opposite then (W, D) l-C .C, A . . . A e,,, of lt A . . . A e,, can be and that literals. that W is consistent . ,&, does not contain a pair of opposite ff:e cu>eleeDand H=Wu { --[#Wand [eE {el,...,e,) or (eispositiveande@{Nb,,...,N&})] . 1 the important the head, Note literal in empty ) . fact that H does not contain i.e., clauses p 1 e and y >N e (where p and/or clauses with opposite y may be simultaneously Claim. (W D) has an extension containing Cl,. . . , C,,, iff H I- el A . . . A &. Note that for n = 1, i.e., a single which states the claimed property in linear theory T and a literal in the length of T, e.g. by positive unit resolution, H can be constructed that for a Horn literal et, H is the Horn theory of [ 35, Lemma 6.41, for a single time from (W, D); notice that H is Horn. It is well in f?, the test T k C can be decided cf. [ 401. Consequently, literal. linear known time deciding H k e, A ... A en, is possible in time O(m . n). and hence e (i.e., and of negative claim. the bound could be sharpened e,.) Therefore, least model) literals thus the can be computed in time (In fact, the set of all positive in the length of H times m, literals e such that T I- linear in time linear to 0( (m- + 1)n) where m- is an immediate in the length of T [40], is the number of this consequence the lemma Prior to the proof of the claim, define subsets HO, HI,. . . , Hi,. . . of H as follows: Ho = W, HI =Hou{cr>eEH\HoI Hobaa), Hi+ I = Hi U {a > e E H\Hi 1 Hi k cr}, 214 I: Eiter et al. /Art@cial Intelligence 90 (1997) 177-223 Note that the sequence (Hi), i 3 0, converges to Ui”, Hi; this set relates to H as follows. Since H is a Horn theory, it has a least model M; the following characterization of M is not difficult to establish: (B.1) i.e., the least model of H is given by the atoms x in the heads of the clauses with positive let N = {x 1 cr > x E Uibo Hi}. in HO, HI . . . . Indeed, head (respectively Then, one can check that N is a model of H; moreover, by induction on i, one can show in HO U.. . U Hi, and hence N is that M must contain all positive heads of the clauses contained positive in M. facts) Proof of the claim. (+) Assume that H k .f, A . . . A &. Define the set E by E=Th(W”MU(-xl=+, M+a, Mkx}). i = 1, . . . , n. If & is a positive that E is consistent. We claim of E, clearly & E E; otherwise, Notice for every i = 1, . . . , n, which proves that !i E E, for every by definition H t- &, there must exist a clause model of H in which x is true exists). Thus, 5 by definition, It remains that E is an extension, those in the definition of extension. We obtain lx E E. to show that E is an extension of (K 0) such that Ci E E, the if-direction. To prove this claim, we first verify then & E M and hence, then, since a E D, M k a and M p x all hold; (Y > 1.x in H such that M k a (for otherwise, if !i is a negative literal, literal lx, i.e., E = IJS Ei, where the sets Ei are El=Th(Ea)u a:e tl,~D, Eota, d$E = Th(Eo) u TX 1 ?.-!-?! E D, EC, k a, x $ E u {x 1 (Y > x E H,} , C TX Ei+l = Th(Ei) u TX I 7 ED, Eika, x$E U{XIa>XEHi+l}, on i, it is straightforward that the set of positive literals in Ei, Pi, Indeed, by induction is {x I a > x E Hi}. For i = 0, this is obvious. Consider i’ = i + 1, and first LY > x E Hi+l. If thus (Y > x E Hi, then by the induction hypothesis x E Ei, and hence x E &+I; otherwise, a default 7 E D exists, by the induction hypothesis Ei t- a, and since x E M, -LX @ E; consequently, x E Ei+l. It follows that: 216 7: Eiter et ul. /Artificial Intelligence 90 (1997) 177-223 !I, . . . ,e, (take any extension of (E\{Yc} U {x},D)). contains ordering on the defaults D, one can single out a particular rise to a monotonic operator, which positive atoms; This justifies our assumption. the least fixpoint of this operator Using e.g. a (well) such extension. This gives takes E to an extension E’ with a larger part of that satisfies (B.6). is an extension Let MO be the set of positive literals in E. We claim that MO is the least model of H (i.e.,Mo=M={xIcu>xEU~Hi}>. We proof this claim showing by induction on i 2 0 that i.e., the positive literals in EL are the positive heads of clauses in Hi. Since M = IJ~{x cy 3 x E Hi}, the claim is an immediate consequence thereof. (Basis) For i = 0, we have EO = W and HO = W. Thus, (Induction) For i’ = i + 1, we have the statement is clearly true = {X ( (Y 3 x E Hi} U x 1 y E D, Ei 1 CY, _,$E}. The induction hypothesis is applied to obtain the left expression on the second line. Consider x E B. Then, TX 6 W and either x E {ei , . . . , en,,} or x $! {- Ci , . . . , N l?,} the .$ E E, x E E, and E must be consistent). Since z?Zi t- (Y, it follows from that Hi I- cy. Therefore, LY > x E Hi+], which implies: (as induction hypothesis X E {Y I cX 3 Y E Hi+l} . (B.7) On the other hand, consider any (Y > y E Hi+i. If y E {x 1 p > x E Hi}, the equation from H; t- cx, which by the induction above that y E Ma n Th( Ei+l). Otherwise, hypothesis implies &}. ,e,,) or 03) Y $ {- . A em; thus y E B. In case (b) we obtain Y E {b,... A- Eke, that my +! E\W; moreover, by the definition of H, -my $ W. Therefore, it follows implies y E B. Since y E B holds in both cases (a) and (b), from the assumption -y that el,...,N if LY > x E Hi+,, that Ei I- a. Moreover, either it is clear then (a) In case (a), y E E and ly # E, as (B.6) on E I$ E, which Y E MonTh(Ei+l). Now (B.7) and (B.8) imply MofITh(Ei+l) ={X ICY >X E Hi+,}; (J3.8) this proves the induction Eventually, we verify step and the claim Mu = M. that H 1 ei for every & E Mu = M; therefore, H t- ei. Otherwise, ei E H and therefore H I- ei; if ei $ W, then some y ei is a negative i = 1,. . . , n. If ei is positive, then If !i E W, then E D exists such that E t- a. literal lx. 7: Eiter et al. /Artificial Intelligence 90 (1997) 177-223 217 Since ei E E, we have N Ci $ W; hence, a conjunction of positive H k cr. Since LY > !i E H, it follows H t- 4. it follows Q > .!?i E H. Moreover, since (Y is literals, E I- a and Me = M implies M k a; consequently, This concludes the proof of the only-if-direction and the proof of the lemma. 0 Proposition B.l. Given a Krom-pf-normal deciding whether (W D) ‘rC e, A . . . A e,, is NP-complete. default theory (W D) and literals el, . . . , &, , a consistent in polynomial extension E such that !I,. time. Indeed, since (W, D) is prerequisite Proof. Concerning membership, be guessed and verified normal, a guess D’ c D for GD( E, 7’) is proper if C = W U concl( 0’) C t- Ci, for all i = 1,. . . , m, and no $ E D\D’ exists such that C U {p} Since W is Krom and all formulas time. in polynomial This proves membership time [3,25].) is consistent, is consistent. in defaults are Krom, each of these tests can be done in linear . . ,!,, E E can free and theory can be decided of a Krom satisfiability (Indeed, in NP. To show hardness, we reduce the classical satisfiability problem (SAT) to this problem as follows. For a set of propositional define clauses C = {Cl, . . . , Cm} where Ci = li, V. . . Ve,,, , - : e, A Ci e, A Ci 1 i= 1,. D= ..,m, j= l,..., ni :.X -,: x TX IxoccursinC where the ci, i = 1,. . . , m, are new atoms. It is easy to see that (8, D) kC CI A . . . A c,, 0 iff C is satisfiable. Since D is efficiently obtained from C, this proves NP-hardness. From the proof of this proposition, the following result can be easily established. Corollary B.2. Deciding is NP-hard, atoms. if a given PDAP P = (H, M, W D) has a credulous explanation even if all defaults are prerequisite free, W = H = 0, and M is a set of Proposition B.3. Given a Krom-pf-normal ciding whether (W D) kS C is co-NP-complete. default theory (W D) and a literal C, de- in co-NP follows from the fact that a guess for an extension E such Proof. Membership that e $ E can be verified To show co-NP-hardness, in polynomial we reduce time. the unsatisfiability problem: Decide whether a given set of propositional ei, V . . V Ci,,, , is not satisfiable. Define a set of defaults D by problem to this clauses C = {Ct , . . . , C,,}, Ci = (UNSAT) D= : CA - ei, A . . . A - e,, CA N ei, A . . . A - e,,, :X,$]noccursinC X , > where c is a new atom. It holds that (8, D) t--s c iff C is unsatisfiable. constructed this proves the result. efficiently, 0 Since D can be 218 T Eiter et al. /Art@cial Intelligence 90 (1997) 177-223 Proposition B.4. Relevance based on minimal credulous explanations (H, M, W D) where (W D) is literal-Horn is NP-complete. for PDAPs P = Proof. Membership. A guess for a minimal can be verified that (E\{h’}, M, W D) has no credulous polynomial, in polynomial as follows time, by testing from Lemma 5.1 and Theorem 5.3. credulous that E is a credulous explanation E such that h E E and for every h’ E E; both tests are extension explanation, (cf. theories h is relevant in a minimal is classical consequence Hardness. The hardness part is a simple reduction of abductive reasoning [ 221 ) : given a definite Horn PAP (V H, M, T), decide from clas- if a certain sical hypothesis explanation. Here T is a set of definite Horn clauses al A . . . A a, > ao on a set of variables V, H g V, A4 C V, and the underly- ing inference is Pr = (H, M, W D), where W = {u E V 1 a E T} and D = {a’A’.~Aak’b 1 al A . .. A ak > b E T}. Ob- serve the skeptical ones, since the credulous for every E G H. It is easy to see that the credulous (W U E, D) has a unique extension in explanations for a minimal P. Since deciding is also NP-hard. for P’ iff h is relevant [ 221, Relevance for P’ coincide with the explanations for P. Therefore, h is relevant I-. The constructed PDAP for P’ coincide with for literal-Horn PDAPs the latter is NP-hard in a minimal explanations explanation explanation credulous that 0 Lemma 5.5. Let S be a (propositional) (4 I . . . , &} be a set of literuls such that (i) S U L is consistent, S lj C Then, S u {e,} k e for some ei E L. theory and e a literal, and let L = (ii) S U L I- e and Krom that e $ L. Consider any resolution In the last step, we have that from S U L. proof proof from a consistent thus is obvious if e E L. Assume theory T iff it has a resolution for e from S U L. (Such a proof must exist.) to see that a clause C of size 2 has a resolution Proof. This proof {e} is the resolvent of clauses Ct and Cz that have a resolution It is easy Krom T of size 2. Hence, we conclude eo} and C2 = {lo} c, = {e,- Krom, Ci has a resolution on the length to E L. Indeed, resolution the induction proof where e’ E L; hence, S U {e’} k e, which concludes lemma. q r of a shortest if r = 0, then than e, it follows from S, and proof that without proof proof from from in i.e., ( f or otherwise, S 1 & would hold). Since S U L is loss of generality C2 is a literal, the set T’ G T of all clauses therefore S U {too) I- C. By induction for e from S U L, we conclude resolution that .eO E L; if r > 0, then la $ L; since es has a shorter hypothesis the induction that S U {e’} and proves t- to the Proposition 5.6. Let T = (W, D) be a Krom-pf-normal let L = {e,, . . . , t,,} be u set of literals. Let Ll = (4 E L 1 W If &}. Then, T t, e, A . . . A e,, i# theory and default is empty, or (a) Ll (b) there exists a subset Dl & D such that ID11 G ILlI, (1) (2) W U lit( D 1) is consistent, and (3) WUlit(D1) Fe,foreucheE Ll. Z Eiter et al. /Artijicial Intelligence 90 (1997) 177-223 219 If T I-, e, then Proof. (+) the characterization Th( W U lit( GD( E, T) ) ) . Consider two cases. there exists an extension E of T such of E in terms of its generating defaults that L C E. By (see Section 2), E = (i) E is not consistent. Then, by the well-known the definition, we have Ll = 0; hence, properties of default extensions (a) [52], W is not consistent. Thus, holds. from (ii) E is consistent. Then W U lit(GD( E,T)) is consistent. From Lemma 5.5, we infer that for each C E Ll Consequently, ID11 < ILlI, WUlit(D1) (b) holds. This proves is consistent the only-$-direction. such that W U {p} there exists a subset Dl C GD( E, T), and hence D 1 5 D, such there exists some p E lit( GD( E,T)) t 4. that for each e E Ll. Hence, and WUlit(D1) be, (KG) Assume that (a) holds, i.e., Ll = 8. This means W t t? for each f? E L. Since that L C E for W C E for every extension E of T and E is deductively closed, every extension of T. As T is normal, an extension exists, and hence T kc Cl A. . . A &. it follows Assume now that (b) does hold, i.e. for some D 1 & D we have 1 D 11 < 1 Ll 1, and W U lit( D 1) k !? for every e E Ll. Since T is prerequisite W U lit( D 1) is consistent, free and normal, such that W U lit( D 1) & E. Since E is deductively 0 This proves from semi-monotonicity the result. it follows extension E that T has a consistent closed, L C E; it follows T t-C !. Theorem 5.7. Let T = (W D) be a Krom-pf-normal {e,, . . . , &,} be a set of Krom-PFN-Cred-Inf let L = literals. Then, T I-.c el A . A &, can be decided using in 0( ) D 1”’ . m e n) time, where n is the length of the input. theory, and default satisfiability of a Krom theory can be decided Proof. Correctness of the algorithm plexity, quently, also inference of a literal from a Krom Therefore, Ll can be computed I DI”’ sets Dl; St which is 0( IDI”’ . ma n). for each D 1, computing S is possible the overall running follows from Proposition 5.6. Concerning the com- [3,25]. Conse- in linear time. theory can be decided in 0( m . n) time. The for-loop checks at most I DI IL1 1 < time, and the tests S y I, in O(n) time is O(m~n+lDI”‘(n+m.n)), ei take O(m.n) time. Hence, in linear time 17 Theorem 5.8. Let P = (H, M, W, D) be a PDAP based on credulous explanations such that M = {eI , . . . ,!k} Then, Consistency, Relevance, and Necessity can be solved in 0( ) D I b . n) time, where n is the length of P. is small and (W D) is Krom-pf-normal. Proof. Construct a Krom-pf-normal default theory T2 = (W2, D2), given by where each ch is a new propositional iff W2 is consistent O(n) T2 k-c e, A *. . A & can be decided of T2 (which time. Consistency of W2 can be checked is O(n)). Hence, Consistency in in linear time [ 3,251 and by Lemma 5.2, time, where n’ is the length time. By in 0( I Dlb . n) can be decided in 0( I D2jb . n’) and T2 kc Ii A. . .A&. Clearly, W2, 02, and T2 can be constructed atom. It is not hard to see that P has an explanation 220 T Eiter et al. /ArtQicial Intelligence 90 (1997) 177-223 Corollary 4.3, Relevance and Necessity can be easily reduced its complement time. these problems time; hence, in O(n) I7 to Consistency respectively are also solvable in 0( lDlb . n) Proposition (H, M, W D) where (W D) is K ram-pf-normal and M is Jinite. Then, [El 6 1 MI. 5.9. Let E be any minimal credulous explanation for a PDAP P = the default theory Tl = (W U E, D) of extensions, we explanation. Then, extension A such that M c E. By the characterization Proof. Let E be any credulous has a consistent haveA=Th(WUEUL),whereL=lit(GD(A,Tl)).Hence, W U E U L t- C, for each ! E M. From Lemma 5.5, it follows that for each ! E M such that W y e, there exists a p.e E EU L such that WU {pe} b l. Fix any such pe for each e, and let EO & E be the set EO = {,!.Q 1 t E M} n E, notice that jEO/ < [MI. Then, EO is a the default theory T2 = (WUEO, D) has a consistent credulous explanation for P. Indeed, and the set W U EO U lit(GD( A, Tl)) extension which contains M: since all defaults extension E3 free and normal, T2 has a consistent containing W U EO U lit( GD( A, Tl ) ) . Moreover, since W U EO U lit( GD( A, Tl ) ) t- ! for each C E M, we have M C E3. Thus, EO is a credulous explanation of P. in D are prerequisite WUEULisconsistentand is consistent Since E was arbitrary, it follows that for each explanation E for P, there exists an explanation EO c E such that lEOI < 1 MI. In particular, then E = EO, and hence IEl < [MI. This proves the result. 0 if E is a minimal explanation, Theorem 5.10. Given a PDAP P = (H, M, W D) where (W D) is Krom-pf-normal and M is small, all minimal credulous explanations for P can be computed in time O(IHlb.lDlb.n), isthelengthofp. wheren In total, at most is stored algorithm All-KPFN-Min-Cred-Exp. Proof. Consider E C H are considered. For each set E, the test W U E y I is Krom) ; the tests E’ $ Min_Expl can be done in a standard MinExpl EO $ Min-Expl Inf(WUE,D,q5) to O( lHjb. (2’1og lHlb + lDlb. n)) for Min_Expl takes in total O(IHlb.loglHlb) it follows time of the algorithm search data structure that total running takesO(IDlb+n). is checked test Krom-PFN-Cred- S ince IMin_Expll is bounded by I Hlb, this amounts the data structure time. Building is O(n), bloglH[ is 0( I Hlb . I Dlb . n). q and maintaining loglHlb= time. Since IHlb subsets time ( W U E if on which for every subset EO c E. The in 0( 2’ . log IMinXxpll ) time, (e.g., an AVL-tree) takes O(n) Proposition B.S. Given a first-order Krom-pf-normal default theory T = (W D) and a ground literal C, deciding whether T l--c C is NP-hard, even if all formulas in W are (universally quanti$ed) atoms and D contains a single default. . . , Cm} be a propositional the classical satisfiability problem into this problem as follows. Proof. Transform clause set on atoms al, . . . , a,,, where without Let C = {Cl,. loss of generality in the same clause, and neither all clauses are positive or negative. For each clause Ci in C, put the formula & = Vxt . . .Vx,.p(tl, no atom occurs positively . . . , t,,) in W, where and negatively (SAT) 1: Eiter et al. /Artijicial Intelligence 90 (1997) 177-223 221 0, 1, if Uj E Cj; if ‘Uj E Cj; tj= Xj9 otherwise. i In D, put the single default d = ‘$:~,‘,‘,‘;;;~;~~~, where s is a propositional atom. Intu- to the propositional itively, each ground atom p( tt , . . . , t,,), where ti E (0, l}, corresponds assignment if ti = 0. Each formula +i describes all truth assignments the default d is applicable precisely each clause Ci, i.e., if it satisfies C. Therefore, C is satisfiable This proves NP-hardness. to a truth value atoms al, . . . , a, such that ai is true if ti = 1 and ai = 0 that do not satisfy clause Ci; that is compatible with if and only if (K D) t--c s. if there is a truth assignment 0 References [ 11 A. Aho and J. Ullman, Universality of data retrieval languages, in: Proceedings Sixth ACM Symposium on Principles of Programming Languages, San Antonio, TX ( 1979) 110-I 17. 121 L. Aiello and D. Nardi, Perspectives in knowledge representation, Appl. Artif: In?ell. 5 (1991) 29-44. [3] B. Aspvall, M. Plass and R. Tatjan, A linear time algorithm for testing the truth of certain quantified boolean formulas, Inform. Process. Let?. 8 (1979) 121-123. [4] C. Baral and V. Subrahmanian, Dualities between alternative semantics for logic programming and nonmonotonic reasoning, J. Autom. Reasoning 10 ( 199 1) 299-340. [ 51 G. Brewka, Nonmonotonic Reasoning: Logical Foundations of Commonsense, Cambridge Tracts in Theoretical Computer Science 12 (Cambridge University Press, Cambridge, 199 1) [6] T. Bylander, The monotonic abduction problem: a functional characterization on the edge of tractability, in: Proceedings KR-91, Cambridge, MA (1991) 70-77. 171 T. Bylander, D. Allemang, M. Tanner and J. Josephson, The computational complexity of abduction, Arfij Intell. 49 ( 1991) 25-60. [8] M. Cadoli, T. Eiter and G. Gotdob, Default logic as a query language, in: Proceedings KR-94, Bonn ( 1994) 99-108; also full paper in: IEEE Trans. Knowledge Data Eng. (to appear). [ 91 M. Cadoli and M. Schaerf, A survey of complexity results for non-monotonic logics, L Logic Program. 17 (1993) 127-160. 1 IO] M. Cadoli and M. Schaerf, Tractable reasoning via approximation, Artif Infell. 74 ( 1995) 249-3 10. [ 111 A. Chandra and D. Harel, Structure and complexity of relational queries, J. Comput. Sys?. Sci. 25 ( 1982) 99-128. [ 121 E. Chamiak and P McDermott, Introduction to Artificial Intelligence (Addison-Wesley, Menlo Park, CA, 1985). [ 131 P Cholewinski, W. Marek, A. Mikitiuk and M. Truszczyhski, Experimenting with nonmonotonic reasoning, in: Proceedings ICZP-95, Shonan Village Center ( 1995). [ 141 A. Condon, Approximate solutions to problems in PSPACE, SIGACT News 26 (2) ( 1995) 4-13. [ 151 L. Console, D. Theseider Dupm and P Torasso, A theory of diagnosis for incomplete causal models, in: Proceedings IJCAI-89, Detroit, MI (1989) 131 l-1317. [ 161 L. Console, D. Theseider Dupr6 and P Torasso, On the relationship between abduction and deduction, J. Logic Compuf. 1 (1991) 661-690. [ 17 1 I? Dagum and M. Luby, Approximating probabilistic inference in Bayesian belief networks is NP-hard, Artif Intell. 60 (1993) 141-1.53. [ 181 F. Donini, D. Nardi, E Pirri and M. Schaerf, Nonmonotonic reasoning, Artif: fnrell. Rev. 4 ( 1991) 163-210. 222 it91 1201 [211 1221 1231 1241 1251 1261 1271 I281 1291 1301 [311 [321 I331 1341 7: Eiter et al./Artificial Intelligence 90 (1997) 177-223 of propositional E Donini, D. Nardi and R. Rosati, Ground nonmonotonic modal in: Proceedings World Congress for AI ( WOCFAI-95) ( 1995). T. Eiter and G. Gottlob, On the complexity counterfactuals, Arti’ Intell. 57 ( 1992) 227-270. T. Eiter and G. Gottlob, Reasoning with parsimonious Inform. 17 (1992) 31-53. T. Eiter and G. Gottlob, The complexity of logic-based T. Eiter, G. Gottlob and N. Leone, Complexity A. Nerode and M. Truszczytiski, 982 (Springer, New York, 1995) K. Eshghi, Abductive planning with event calculus, abduction, J. ACM 42 ( 1995) 3-42. results for abductive in: W. Marek, eds., in: Proceedings LPNMR ‘95, Lecture Notes in Computer Science l-14. logic programming, in: Proceedings 5th International Conference and logics for knowledge representation, knowledge base revision, updates, and grounded expansions, Fund. and moderately flow problems, in: Proceedings results for nonmonotonic of timetable and multicommodity default reasoning under the stationary logics, J. Logic Comput. 2 ( 1992) 397-425. Symposium on Logic Programming ( 1988) 562-579. S. Even, A. Itai and A. Shamir, On the complexity SIAM J. Comput. 5 (1976) 691-703. M. Gelfond, H. Przymusinska, V. Lifschitz and M. Truszczynski, Disjunctive defaults, KR-91, Cambridge, MA (1991) 230-237. G. Gottlob, Complexity G. Gottlob, The complexity of propositional Inform. Compuf. 121 (1995) 81-92. G. Gottlob, N. Leone and H. Veith, Second-order in: Proceedings of the Conference on Mathematical Foundations of Computer Science (MFCS-95), Lecture Notes in Computer Science 969 (Springer, New York, 1995) 66-81; also full paper available as: CD/TR 95/80, CD-Lab JR. Hobbs, M.E. Stickel, P Martin and D. Edwards, Annual Meeting of the Association for Computational Linguistics, Buffalo, NY ( 1988) 95-103. D.S. Johnson, A catalog of complexity Computer Science Vol. A (North-Holland, Amsterdam, I. Josephson, B. Chandrasekaran, explanatory A. Kakas, R. Kowalski and E Toni, Abductive A. Kakas and P Mancarella, Database updates J. Logic Comput. ( 1993). in: Proceedings VWB-90 IEEE Trans. Syst Man Cybern. 17 ( 1987) 445-454. J.J.W. Smith and M. Tanner, A mechanism ed., Handbook of Theoretical for Expert Systems, TU Wien. for forming composite the weak exponential in: Proceedings 26th fixed point semantics, in: J. van Leeuwen, logic programming, through abduction, 1990) Chapter 2. as abduction, Interpretation hypotheses, hierarchies, logic and ( 1990) classes, 650-66 1. [35] H. Kautz and B. Selman, Hard problems [ 361 K. Konolige, On the relationship 343-382; see also: Errata, Arttf Intell. 41 (1989190) 115. for simple default logics, Artif: Intell. 49 ( 1991) 243-279. between default and autoepistemic logic, Artif Intell. 35 ( 1988) [37] K. Konolige, Abduction versus closure [38] W. Marek and M. Truszczytiski, Nonmonotonic Logics (Springer, Berlin, 1993). [39] A. Mikitiuk and M. Truszczynski, Rational default logic and disjunctive in causal theories, Art$ Intell. 53 (1992) 255-272. logic programming, in: L.-M. Pereira and A. Nerode, eds., Proceedings LPNMR’93 (1993) 115-131. a simplified linear time unit resolution for Horn formulae and computer Inform. Process. Left 29 ( 1988) l-12. intelligence: a computational perspective, in: G. Brewka, ed., Logic and Computation [40] M. Minoux, LTUR: implementation, [41] B. Nebel, Artificial in AI (to appear). [42] H.T. Ng and R.J. Mooney, An efficient first-order Horn clause abduction system based on the ATMS, in: Proceedings AAAI-91, Anaheim, CA ( 1991) 494-499. (43 1 Y. Peng and J. Reggia, Abductive Inference Models for Diagnostic Problem Solving (Springer, Berlin, 1990). [44] D. Poole, A logical [45] D. Poole, Explanation 5 (1989) 97-l 10. [46 I D. Poole, Normality framework for default reasoning, Artif Intell. 36 ( 1988) 27-47. and prediction: an architecture for default and abductive reasoning, Comput. Intell. and faults in logic based diagnosis, in: Proceedings IJCAI-89, Detroit, MI ( 1989) 1304-1310. [47] D. Poole, Logic 377-400. programming, abduction and probability, New Generation Comput. 11 (1993) Z Eiter et al. /Artijicial Intelligence 90 (1997) 177-223 223 1481 D. Poole, Probabilistic Horn abduction and Bayesian networks, Art6 [49] H. Przymusinska ]SO] A. Rajasekar, Theories of tram-epistemic and T. Przymusinski, Stationary default extensions, Fund. Inform. 21 ( 1994) 67-87. defaults, Tech. Rept., University of Kentucky, Lexington, KY Intell. 64 ( 1993) 81-130. (1994). [ 5 11 A. Rajasekar [ 521 R. Reiter, A logic for default 153 1 R. Reiter, Nonmonotonic [ 541 D. Roth, On the hardness of approximate [ 55 I B. Selman and H. Kautz, Knowledge Anaheim, CA ( 1991) 904-909. and M. Truszczynski, Complexity of trans-epistemic defaults, Manuscript ( 1995). reasoning, Artif Intell. 13 (1980) 81-132. reasoning, Ann. Rev. Comput. Sci. 2 ( 1987) 147-186. reasoning, Art$ Intell. 82 (1996) 273-302. compilation using Horn approximations, in: Proceedings AAAI-91, I.561 B. Selman and H.J. Levesque, Abductive and default reasoning: a computational core, in: Proceedings AAAI-90, Boston, MA (1990) 343-348. [ 57 I B. Selman, H. Levesque and D. Mitchell, A new method Proceedings AAAI-92, San Jose, CA ( 1992) 440-446. for solving hard satisfiability problems, in: It’s not my default: the complexity in: Proceedings AAAI-90, Boston, MA (1990) 571-579. of membership problems in restricted propositional of propositional default logic, in: Proceedings AAAI-92, San Jose, CA 1 SS] J. Stillman, default logic, [ 591 J. Stillman, The complexity (1992) 794-799. [ 60 I L. Stockmeyer, On approximation 16 I 1 M. Vardi, Complexity algorithms for # P, SIAM 1. Comput. 14 (1985) 849-861. of relational query languages, in: Proceedings 14th Annual ACM Symposium on Theory of Computing, San Francisco, CA (1982) 137-146. 