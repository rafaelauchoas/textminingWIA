Artificial Intelligence 170 (2006) 1–18www.elsevier.com/locate/artintRCC8 binary constraint network can be consistentlyextended ✩Sanjiang Li a,∗, Huaiqing Wang ba State Key Laboratory of Intelligent Technology and Systems,Department of Computer Science and Technology, Tsinghua University, Beijing 100084, Chinab Department of Information Systems, City University of Hong Kong, Hong Kong, ChinaReceived 31 May 2004; received in revised form 17 August 2005; accepted 24 August 2005Available online 29 September 2005AbstractThe RCC8 constraint language developed by Randell et al. has been popularly adopted by theQualitative Spatial Reasoning and GIS communities. The recent observation that RCC8 composi-tion table describes only weak composition instead of composition raises questions about Renz andNebel’s maximality results about the computational complexity of reasoning with RCC8.This paper shows that any consistent RCC8 binary constraint network (RCC8 network for short)can be consistently extended. Given Θ, an RCC8 network, and z, a fresh variable, suppose xTy ∈ Θand T is contained in the weak composition of R and S. This means that we can add two newconstraints xRz and zSy to Θ without changing the consistency of the network. The result guaranteesthe applicability to RCC8 of one key technique, (Theorem 5) of [J. Renz, B. Nebel, On the complexityof qualitative spatial reasoning: A maximal tractable fragment of the Region Connection Calculus.Artificial Intelligence 108 (1999) 69–123], which allows the transfer of tractability of a set of RCC8relations to its closure under composition, intersection, and converse. 2005 Elsevier B.V. All rights reserved.Keywords: Qualitative spatial reasoning; Computational complexity; Region connection calculus; Binaryconstraint network; Extensionality; Path-consistency✩ This work was partly supported the National Foundation of Natural Science of China (60305005, 60321002,60496321) and by a Hong Kong CERG Grant No. CityU 1234/03E.* Corresponding author.E-mail addresses: lisanjiang@tsinghua.edu.cn (S. Li), iswang@cityu.edu.hk (H. Wang).0004-3702/$ – see front matter  2005 Elsevier B.V. All rights reserved.doi:10.1016/j.artint.2005.08.0032S. Li, H. Wang / Artificial Intelligence 170 (2006) 1–181. IntroductionConstraint Satisfaction Problems (CSPs) have played a significant role in many areas ofArtificial Intelligence such as vision, resource allocation in scheduling, and temporal andspatial reasoning [5,24]. Ladkin and Maddux formulate binary CSP concepts and methodsusing relation algebra, and this “clarifies the mathematics of binary constraint satisfactionmethods, and allows problems with finite or potentially infinite domains to be handled in auniform way”. [10]When formulating a problem as a binary CSP, we usually (implicitly) assume that theunderlying relation algebra is a proper relation algebra [10] for the universe of the problem.For example, the well-known interval algebra [1] and point algebra [25] used in temporalreasoning are both proper relation algebras for the corresponding universe. This meansthat operations in these algebras, e.g., converse, intersection, composition, coincide withthe usual set-theoretical operations.The situation, however, is different in qualitative spatial reasoning (QSR), where a com-position table usually describes only weak composition. Given a universe U , supposeA = {R1, R2, . . . , Rn} is a collection of jointly exhaustive and pairwise disjoint (JEPD)relations on U . For two relations Ri, Rj , the weak composition [6] of Ri and Rj is a subsetof A, written as Ri; Rj , such that for any 1 (cid:1) k (cid:1) n, Rk ∈ Ri; Rj iff there exist a, b, c ∈ Usuch that aRib, bRj c and aRkc hold. Summarizing all weak compositions in an n × ntable, we obtain the weak composition table of A. If Rk ∈ Ri; Rj , we call (cid:3)Ri, Rk, Rj (cid:4)a composition triad, and a composition triad (cid:3)Ri, Rk, Rj (cid:4) is said to be extensional on Uif Rk ⊆ Ri ◦ Rj , that is, for any two a, c ∈ U with aRkc we have a region b in U suchthat aRib and bRj c hold, where ◦ is the set-theoretical relational composition on U . If allcomposition triads are extensional on U , then the weak composition table describes indeedcomposition, and we say it is extensional.This paper is mainly concerned with the RCC8 constraint language, which was devel-oped by Randell, Cohn, and Cui [4,17,18], and has now been popularly adopted by theQSR and GIS communities (see [21] for more information). Intuitively, spatial regions inRCC8 can be interpreted as nonempty regular closed subsets of some topological space.The composition table of RCC8 base relations has been independently established by Cui,Cohn, Randell [4] and Egenhofer [8]. This composition table, known as RCC8 compositiontable, however, is only a weak one. This is because spatial regions in RCC need not be one-piece and without holes [12,13]. For instance, given three disconnected regions o, p, q, leta be the union of o and p, and c the union of o and q. Then a partially overlaps c. Ac-cording to the RCC8 composition table, PO (partially overlap) is in the cell specified byEC (externally connected) and NTPP (non-tangential proper part). But it is easy to seethat there is no region b such that EC(a, b) and NTPP(b, c) hold at the same time. Thissuggests that PO (cid:7)⊆ EC ◦ NTPP. As a matter of fact, Li and Ying [13] identify altogether35 such non-extensional composition triads.The above observation raises questions about Renz and Nebel’s maximality resultsabout the computational complexity of reasoning with RCC8 [20,22]. Indeed, if U , theuniverse of an RCC8 binary constraint network (RCC8 network or simply network forshort), is the collection of nonempty regular closed subsets of some topological space (ornon-zero elements in a GRCC model [14]), consistent base networks are even not nec-S. Li, H. Wang / Artificial Intelligence 170 (2006) 1–183essarily path-consistent! For example, the RCC8 network Θ = {xECy, yNTPPz, xPOy}clearly has a solution in U , but it is not path-consistent since PO (cid:7)⊆ EC ◦ NTPP. Düntschexpresses the following concern:In the light of this it seems that some of the results in [76-78] [here [20,22]] are validonly in extensional interpretations of the weak RCC8 table such as the closed circles orareas bounded by closed Jordan curves, and not for RCC models. [5, footnote 1]More important, the applicability of one key technique used in [20,22] to RCC8 be-comes questionable now. To show that reasoning with RCC8 relations is in general NP-complete and to identify the boundary between tractability and NP-hardness, Renz andNebel [20,22] use the following theorem to transfer tractability of a set of RCC8 relationsS to its closure, (cid:1)S, under composition, intersection, and converse, where RSAT(S) is theproblem of deciding consistency of networks over S.Theorem 5 [22]. Let C be a set of binary relations that is closed under composition, inter-section, and converse. Then for any subset S ⊆ C that contains the universal relation andthe identity relation,1 the problem RSAT( (cid:1)S) can be polynomially reduced to RSAT(S).This theorem suggests that, if S is a subset of C that contains the universal relation andthe identity relation, then for any T ⊆ C with S ⊆ T ⊆ (cid:1)S, RSAT(S) is tractable if and onlyif RSAT(T ) is. Renz and Nebel establish this reduction by constructing for each networkΘ over (cid:1)S a network Θ (cid:8) over S, such that Θ (cid:8) is consistent iff Θ is. This approach doesnot work for some calculi that use weak compositions (see Example 7.1 of this paper).Now since RCC8 uses weak composition instead of composition, its applicability to RCC8becomes questionable.This paper intends to remove all these doubts. To begin with, we address the ambiguityof the concept “path-consistency”. This concept is usually defined as follows [22, p. 73, lastparagraph]: A binary constraint network is path-consistent if and only if for any consistentinstantiation of any two variables, there exists an instantiation of any third variable suchthat the three values taken together are consistent.Note that this definition closely depends on the choice of universe. There is, however,another definition of path-consistency that is independent of the choice of universe. Thisdefinition is given by Ladkin and Maddux [10] in a more general manner using relationalgebras. By this definition, a binary constraint network Θ = {xiRij xj : Rij ∈ A, 1 (cid:1) i, j (cid:1)n} over an atomic relation algebra A is path-consistent if and only if for any 1 (cid:1) i, j, k (cid:1) n,Rii (cid:1) 1(cid:8), Rij = R∼j i and Rij (cid:1) Rik; Rkj , where 1(cid:8), ∼ and ; are, respectively, the identity, theconverse, and the composition of A. Under this interpretation, a consistent RCC8 networknecessarily contains a path-consistent refinement (see Lemma 4.1 of this paper).To show that Theorem 5 in [22] really holds for RCC8 relations, we show that each con-sistent RCC8 network can be further extended at least one-shot. Suppose Θ is a consistent1 The reason that S should contain the identity relation is because we require any two spatial variables to beconstrained by one and only one relation in a binary CSP (see [16]).4S. Li, H. Wang / Artificial Intelligence 170 (2006) 1–18RCC8 network. This means, for any three RCC8 relations R, S, T with T = R; S and anyconstraint xiTxj ∈ Θ, the RCC8 network Θ (cid:8) = Θ ∪ {xiRz, zSxj } is also consistent, wherez is a fresh variable. This result guarantees the validity of the reduction method given inthe proof of [22, Theorem 5] for RCC8.Our proof of this statement is by construction. In an earlier paper, Li [11] gives anO(n3) algorithm to generate a realization in certain topological space for every path-consistent RCC8 base network. This construction can be further simplified and adaptedfor the present purpose. Indeed, we shall construct a canonical RCC8 model and show thatevery path-consistent RCC8 network has a one-shot extensible realization in this model(see Definition 5.2 and Proposition 5.1).The rest of this paper proceeds as follows. In Section 2 we recall basic concepts ofthe RCC8 constraint language. Section 3 introduces a canonical RCC8 model. Section 4describes our One-shot Extensible Realization Algorithm. We also show in this section thatthe model introduced in Section 3 is indeed a canonical model. Then, in Section 5 weshow that this algorithm also generates a one-shot extensible realization. As a byproduct,Section 6 gives an affirmative answer to a conjecture made by Balbiani et al. [2] that everyinfinite path-consistent RCC8 base network is satisfiable. Further discussions and openquestions are given in Section 7.2. The RCC8 relation algebraIn this section we recall some basic concepts of the RCC8 constraint language.2.1. RCC models and RCC8 relationsThere are several equivalent formulations of the RCC theory. We here adopt the oneusing Boolean connection algebras given by Stell [23].Definition 2.1 [23]. An RCC model is a Boolean algebra A containing more than two ele-ments, together with a binary connection relation C on A − {⊥} that satisfies the followingconditions:A1. C is reflexive and symmetric;A2. (∀x ∈ A − {⊥, (cid:13)})C(x, x(cid:8));A3. (∀xyz ∈ A − {⊥})C(x, y ∨ z) ↔ C(x, y) or C(x, z);A4. (∀x ∈ A − {⊥, (cid:13)})(∃z ∈ A − {⊥, (cid:13)})¬C(x, z),where ⊥ and (cid:13) are, respectively, the bottom and the top element of A, x(cid:8) is the complementof x in A, x ∨ z is the least upper bound (lub) of x, and z in A.In what follows, we also call any 2-tuple (cid:3)A, C(cid:4) a connection structure provided that Ais a Boolean algebra and C is a binary relation on A − {⊥} that satisfies conditions A1 andA3 in Definition 2.1. A connection structure (cid:3)A, C(cid:4) is called a GRCC model if it furthersatisfies condition A2 [14].S. Li, H. Wang / Artificial Intelligence 170 (2006) 1–185Table 1RCC8 base relations and their topological interpretationRelationEQ(A,B)DC(A,B)EC(A,B)PO(A,B)TPP(A,B)TPPi(A,B)NTPP(A,B)NTPPi(A,B)InterpretationA is identical with BA is disconnected from BA is externally connected to BA partially overlaps BA is a tangential proper part of BB is a tangential proper part of AA is a non-tangential proper part of BB is a non-tangential proper part of ATopologicalinterpretationA = BA ∩ B = ∅A◦ ∩ B◦ = ∅A ∩ B (cid:7)= ∅A◦ ∩ B◦ (cid:7)= ∅A (cid:1) B, A (cid:2) BA ⊂ B, A (cid:1) B◦B ⊂ A, B (cid:1) A◦A ⊂ B◦B ⊂ A◦Given a topological space X, we denote by RC(X) the complete Boolean algebra ofregular closed subsets of X. We say two regions A and B in RC(X), that is, two nonemptyregular closed sets of X, are connected if they have nonempty intersection. Denote thisconnectedness relation by CX. It is easy to verify that (cid:3)RC(X), CX(cid:4) is a connection struc-ture. If X happens to be a connected (connected regular, resp.) topological space, then thisconnection structure is also a GRCC (RCC, resp.) model [9,14,23].Among others, there are eight JEPD relations that can be defined in the (G)RCC the-ory. These relations are known as RCC8 base relations, which we denote by B. Table 1gives topological interpretations of RCC8 base relations. To represent indefinite topologi-cal information, we often use disjunctions of RCC8 base relations. This results in 28 = 256different RCC8 relations altogether (including the empty relation and the universal rela-tion). In what follows, we write R8 for the set of RCC8 relations. In general, an RCC8relation is described by a set of RCC8 base relations. For example, the overlap relationO is just the set {PO, EQ, TPP, NTPP, TPPi, NTPPi}. If an RCC8 relation contains onlyone base relation, say R, we write it simply R rather than {R}. We also write “=” for EQ.2.2. RCC8 composition tableThe set of RCC8 relations R8 can be interpreted over the collection of closed disks inthe Euclidean plane (see [5]). Under this interpretation, R8 forms a binary relation algebra,and we call this RCC8 algebra. In particular, R8 is closed under composition. Since thisalgebra is finite and contains 8 base relations, we can represent its composition by a 8 × 8table, which specifies the composition of any two base RCC8 relations. Note that EQ isthe identity relation; we often omit the row and column involving EQ. Table 2 gives thecomposition table of this algebra.In [12], Li and Ying show that the collection of simple regions in the Euclidean plane isalso a representation of RCC8 algebra. Moreover, they also show this representation is ina sense a maximal one.The situation is rather different if the RCC8 relations are interpreted in an RCC model(a GRCC model, or a topological space). We first fix some notations.6S. Li, H. Wang / Artificial Intelligence 170 (2006) 1–18Fig. 1. A component of the canonical RCC8 model.Given three RCC8 base relations R, S, T, recall that (cid:3)R, T, S(cid:4) is called a compositiontriad if T is in the cell specified by the ordered pair (R, S) in Table 2. It has been provedin [13] that for any RCC model R and any composition triad (cid:3)R, T, S(cid:4), T ∩ R ◦ S (cid:7)= ∅ and{T(cid:8): T(cid:8) ∈ R; S}, where ‘◦’ is the usual set-theoretical composition over R andR ◦ S ⊆‘;’ is the composition operation in RCC8 algebra specified by Table 2.(cid:2)Recall that a composition triad (cid:3)R, T, S(cid:4) is said to be extensional if T ⊆ R ◦ S [13].A simple examination of RCC8 composition table then shows that not all compositiontriads are extensional. This was first observed by Bennett [3] for regions involving theuniverse. More instances were then found in [6]. Later, Li and Ying [13] performed anexhaustive examination of the extensionality of RCC8 composition table and identified 35triads that cannot be explained extensionally. This also explains why Düntsch et al. [5,6]call this a weak table. Table 2 summarizes the result, where we add a superscript × to eachcell entry that cannot be interpreted extensionally in the standard RCC model RC(R2).3. A canonical RCC8 modelOur canonical RCC8 model2 is a topological space that contains countably many home-omorphic disjoint components. We begin by introducing the basic component of the space.Let P = {f, t 1, t 2, m1, m2} be a partially ordered set with f < t 1, t 2 and all other pairsare not comparable (see Fig. 1). We refer to these points in order: the false point (f ), theleft true point (t 1), the right true point (t 2), the left middle point (m1), and the right middlepoint (m2) of P .Consider the lower topology T of (P , (cid:1)). It has a (minimal) base containing five opensets, viz. ↑f = {f, t 1, t 2}, ↑t 1 = {t 1}, ↑t 2 = {t 2}, ↑m1 = {m1}, and ↑m2 = {m2}. Clearly,RC(P ), the regular closed algebra of P , contains 16 elements, namely• ∅, {m1}, {m2}, {m1, m2};• {f, t 1}, {f, t 1, m1}, {f, t 1, m2}, {f, t 1, m1, m2};• {f, t 2}, {f, t 2, m1}, {f, t 2, m2}, {f, t 2, m1, m2};• {f, t 1, t 2}, {f, t 1, t 2, m1}, {f, t 1, t 2, m2}, and P = {f, t 1, t 2, m1, m2}.2 A canonical RCC8 model is a model that supports the definition of RCC8 relations and any consistent RCC8network has a realization in it (see also [19]).S. Li, H. Wang / Artificial Intelligence 170 (2006) 1–187Table 2Extensional composition table for RCC8 relationsDCEC;DCECPODC EC PO TPPNTPP =TPPiNTPPi×DC EC×POTPPiNTPPi×DCECPOTPPiNTPPiTPPDCNTPPDC××DCECTPPiNTPPiPO×TPPiNTPPiDCECPOTPPiNTPPi××POTPPiNTPPi××DCECPOTPPNTPP××=DC EC×POTPPTPPiDC ECPOTPPiNTPPiDCECDC×ECPOTPPiNTPPi×PODCECPOTPPNTPPDC ECPOTPPNTPPDC ECPO TPPTPPi =NTPPNTPPiDCECPOTPPNTPPDCECPOTPPNTPPPOTPPiNTPPiPOTPPiNTPPiTPP××DCECPOTPPNTPP×TPPiNTPPiDCDCNTPPDCECPOTPPNTPP×ECPOTPPNTPP×××POTPPNTPPPOTPPNTPPPOTPPNTPPTPPNTPPNTPPNTPPNTPP×POTPPTPPi=××POTPPiNTPPi××POTPPNTPPPO =TPPNTPPTPPiNTPPiDCECDCECPOTPPiNTPPiDC =×EC×POTPPTPPi××DCECPOTPPNTPP×DCDCECPOTPPiNTPPi××DCECPOTPPiNTPPi×DC ECPO TPPTPPi =NTPPNTPPiTPPiNTPPiNTPPiNTPPiNTPPiFor convenience, we setP 1 = {f, t 1, m1},Q = {f, t 1, t 2},P 2 = {f, t 2, m2},Q1 = {f, t 1},Q2 = {f, t 2}.We call P 1 and P 2 respectively the left and the right branch of P . Note that by definitionwe have P 1ECP 2, P lNTPPP and {ml}NTPPP l (l = 1, 2) in the connection structure(cid:3)RC(P ), CP (cid:4).Now we define our canonical model. Suppose that, for each ordered pair (i, j ) of pos-itive integers, Pij is a homeomorphic copy of P and Pij ∩ Pmk (cid:7)= ∅ if and only if i = m{Pij : i, j ∈ N+}, where N+ is the set of positive integers. A setand j = k. Set P =(cid:2)8S. Li, H. Wang / Artificial Intelligence 170 (2006) 1–18A ⊆ P is open iff A ∩ Pij is open for each (i, j ). Clearly, the collection of open sets formsa topology on P. Our canonical model is then the connection structure associated with P,i.e., (cid:3)RC(P), CP(cid:4). For simplicity, we write P for this model. It is clear that the RCC8relations can be defined in this model. Note also that a region contains a false point if andonly if it contains at least one true point in the same component.Notice that for each (i, j ), Pij , P 1(i, j )-component of P, and call P 1the (i, j )-component of P.ij (P 2ij and P 2ij are all regions in this model. We call Pij theij , resp.) accordingly the right (left, resp.) branch ofOur construction of a realization of a consistent RCC8 base network only involves spe-cial regions in P.Definition 3.1. A region A in P is said to be normal ifmlij∈ A ⇔ t lij∈ A (1 (cid:1) i, j (cid:1) n, l = 1, 2).For a normal region A, set (cid:1)A ={Pij : fij ∈ A}. It is easy to see ANTPP (cid:1)A if A ⊂ (cid:1)A.The following proposition summarizes some basic properties about normal regions in thismodel.(cid:2)Proposition 3.1. Given two normal regions A, B in P,(1) ADCB iff A ∩ B = ∅. Particularly, Pij DCPmk iff (i, j ) (cid:7)= (m, k).(2) AECB iff ∅ (cid:7)= A ∩ B ⊆ {fij : i, j ∈ N+}.(3) APOB iff A (cid:7)⊆ B, B (cid:7)⊆ A and A ∩ B is normal.(4) ATPPB iff A ⊂ B and (cid:1)A =(5) ANTPPB iff A ⊂ B and (cid:1)A ={Pij : fij ∈ A} (cid:7)⊆ B.(cid:2){Pij : fij ∈ A} ⊆ B.(cid:2)(cid:2)In the next section we shall show that the model P is indeed a canonical RCC8 model,i.e., any consistent RCC8 network has a realization in P. In fact, if we restrict the model{Qij : i, j ∈ N+}, then the sub-model Q already has this property. But to showon Q =that each consistent RCC8 network has a one-shot extensible realization, we require eachPij to contain m1ij . This requirement particularly entails each normal region has anon-tangential proper part. (See the fifth line and the last two lines of Table 4.)ij and m24. P is a canonical RCC8 modelRecall that an RCC8 network is said to be consistent if it has a realization in sometopological space. Recently, Düntsch and Winter [7] have shown that each RCC model canbe isomorphically embedded into certain canonical model over a topological space. Thisshows that, if an RCC8 network has a realization in an RCC model, then it has a realizationin a topological space, i.e., it is consistent. But does each consistent RCC8 network have arealization in an RCC model? This is answered affirmatively in Li [11]. Suppose R is anarbitrary RCC model. He also shows that an RCC8 network is consistent if and only if ithas a realization in R [11].S. Li, H. Wang / Artificial Intelligence 170 (2006) 1–189Note also that an RCC8 network is consistent if and only if it has a consistent refinementof all relations to the base relations. As a consequence, to show P is a canonical RCC8model, we need only to consider networks of RCC8 base relations.To begin with, we first show that each consistent RCC8 base network is necessarilypath-consistent in the sense of [10].Lemma 4.1. Suppose Θ = {xiRij xj : 1 (cid:1) i, j (cid:1) n} is a consistent RCC8 base network.Then Θ is path-consistent, i.e., for any 1 (cid:1) i, j, k (cid:1) n, Rii = EQ, Rij = R∼j i , and Rik ⊆Rij ; Rj k, where ‘;’ is the composition in RCC8 algebra.Proof. Recall that Θ is consistent if and only if it has a realization in any RCC model [11].The path-consistency of Θ then follows directly from the fact that Rij ◦ Rj k ⊆Rij ; Rj kholds in any RCC model R [13]. (cid:1)(cid:2)Next we give an algorithm that generates a one-shot extensible realization for any path-consistent RCC8 base network.i Rij X∗Given Θ = {xiRij xj : 1 (cid:1) i, j (cid:1) n} a path-consistent RCC8 base network with n dif-ferent spatial variables, without loss of generality, we assume Rij (cid:7)= EQ for any i (cid:7)= j .Now we show that Θ has a realization in RC(P), that is, there exist regions X∗∈ RC(P)i(1 (cid:1) i (cid:1) n) such that X∗j holds for any 1 (cid:1) i, j (cid:1) n.Table 3 describes our algorithm for constructing these X∗ij , m2ijij , t 2ij ,} is a homeomorphic copy of P , and for (i, j ) (cid:7)= (m, k), Pij and Pmk are disjoint.= {fij , t 2i . Recall that Pij = {fij , t 1m1Recall also that P 1ijij , m1ijIn what follows, we give a simple description of the algorithm.∪To begin with, we set Xi = P 1ii{Pik: 1 (cid:1) k (cid:1) n, k (cid:7)= i} in step 1. Clearly all Xi are} and P 2ij(cid:2)= {fij , t 1ij , m2ij}.pairwise disjoint. Our strategy is then to modify the spatial scenario step by step.∩ X∗We consider in step 2 how to realize the EC or PO constraints in this spatial scenario.Intuitively, if Rij is EC, X∗j should contain and only contain some false points. Toithis ends, we cut the right branch of Pij from Xi and add it to Xj ; dually, we also cut theright branch of Pj i from Xj and add it to Xi . Note then that the revised Xi and Xj willmeet at two points fij and fj i . Indeed, we have X(cid:8)i is externallyiconnected to X(cid:8)j .= {fij , fj i}, and X(cid:8)∩ X(cid:8)jIf Rij is PO, X∗ithe right branch of Pij and add to Xi the right branch of Pj i . Note then that X(cid:8)iP 2iji partially overlaps X(cid:8)j .j i . Therefore X(cid:8)j should contain some interior points. This time we add to Xj=∩ X(cid:8)j∪ P 2∩ X∗(cid:2)Table 3One-shot extensible realization algorithmStep 1. Set Xi = P 1{Pik: 1 (cid:1) k (cid:1) n, k (cid:7)= i}.∪ii(cid:8)= (Xi − {t 2ik, m2{P 2ik: Rik = EC}) ∪Step 2. Set X(cid:2)i(cid:8)(cid:8)(cid:8)(cid:8){X∪= Xk: Rki ∈ {TPP, NTPP}}.Step 3. Set X(cid:2)ii(cid:8)(cid:8)(cid:8)(cid:8)(cid:8)∪= X{Pmk: fmk ∈ XStep 4. Set Xii= X(cid:8)(cid:8)(cid:8)Step 5. Set X∗ik, m2− {t 2iiik: Rik = TPP}.(cid:2)(cid:8)(cid:8)j , Rj i = NTPP}.ki : Rki ∈ {EC, PO}}.10S. Li, H. Wang / Artificial Intelligence 170 (2006) 1–18To sum up, after step 2, for any two different spatial variables xi, xj , we have (i) Rij =j i ; (iii) Rij /∈ {EC, PO}= {fij , fj i}; (ii) Rij = PO iff X(cid:8)i= P 2ij∩ X(cid:8)j∪ P 2EC iff X(cid:8)i∩ X(cid:8)iff X(cid:8)ji∩ X(cid:8)j= ∅; and (iv) fii ∈ X(cid:8)j iff i = j .Next, in step 3, we consider how to realize the proper part constraints in the spatialscenario. Our intuition is simple: when Rj i is either TPP or NTPP, we should merge X(cid:8)jin X(cid:8)i . This results in the following equation:(cid:8)k: Rki ∈ {TPP, NTPP}= X(cid:3)(cid:4)XX(cid:8)(cid:8)i∪(cid:8)i(cid:5).After step 3 we have, for i (cid:7)= j , X(cid:8)(cid:8)i∩ X(cid:8)(cid:8)jj if and only if Rij is either TPP or NTPP; andX(cid:8)(cid:8)= ∅ if and only if Rij is DC. What’s even better, if Rij is either EC or PO, theirelation between X(cid:8)(cid:8)i Rij X(cid:8)(cid:8)jstill holds. We give proofs to these claims to illustrate where the path-consistency conditionis used.j is the same as that between X(cid:8)j , namely that X(cid:8)(cid:8)i and X(cid:8)(cid:8)i and X(cid:8)⊂ X(cid:8)(cid:8)i∪{X(cid:8)⊆ X(cid:8)(cid:8)= X(cid:8)iProof. (1) If Rij = TPP or Rij = NTPP, then for any k with Rki ∈ {TPP, NTPP}, wehave Rkj ∈ {TPP, NTPP} since Rkj ⊆ Rki; Rij and Rkj is a base relation. This shows(cid:2)j . As a result, we have X(cid:8)(cid:8)X(cid:8)k: Rkj ∈k{TPP, NTPP}} ⊂ X(cid:8)(cid:8)j .k: Rki ∈ {TPP, NTPP}} ⊆(2) If Rij = DC, then for any m, k with Rmi, Rkj ∈ {TPP, NTPP} or m = i or k = j ,= ∅ for any two such m, k.we have Rmk = DC by path-consistency. This shows X(cid:8)m∩ X(cid:8)(cid:8)As a result, we have X(cid:8)(cid:8)jii DCX(cid:8)(cid:8)j .(3) If Rij = EC, then for any m, k with Rmi, Rkj ∈ {TPP, NTPP} or m = i or k = j ,∩ X(cid:8)k contains at most some∩ X(cid:8)(cid:8)(cid:7)= ∅, we know X(cid:8)(cid:8)(cid:7)= ∅. As a result,jiwe have Rmk ∈ {DC, EC} by path-consistency. This shows X(cid:8)mfalse points for any two such m, k. Since X(cid:8)iwe have X(cid:8)(cid:8)= ∅, i.e., X(cid:8)(cid:8)∩ X(cid:8)k∩ X(cid:8)j{X(cid:8)(cid:2)i ECX(cid:8)(cid:8)j .(4) If Rij = PO, then X(cid:8)(cid:8)∪ P 2ifor any k with Rkj ∈ {TPP, NTPP}. We have fii /∈ X(cid:8)(cid:8)we can show X(cid:8)(cid:8)ji . This suggests X(cid:8)(cid:8)i POX(cid:8)(cid:8)j . (cid:1)∩ X(cid:8)(cid:8)j⊇ X(cid:8)i= P 2ij∩ X(cid:8)j(cid:7)⊆ X(cid:8)(cid:8)j i . Note that Rik ∈ {PO, EC, DC}j . This shows X(cid:8)(cid:8)j . Similarly,i(cid:7)⊆ X(cid:8)(cid:8)ji TPPX(cid:8)(cid:8)i , Pii ∩ X(cid:8)(cid:8)Furthermore, we can show that X(cid:8)(cid:8)NTPP. Note that in this case, we have P 1iisuggests P 2j holds, provided that Rij is either TPP or⊂ X(cid:8)(cid:8)ii . Thisi TPPX(cid:8)(cid:8)i and X(cid:8)j .So in the next step we should differentiate NTPP from TPP. Note that for any i, m, k= ∅. When onlyi or P 2mki contains only the left (right, resp.) branch= P 1j . Hence, by definition, X(cid:8)(cid:8)⊂ X(cid:8)(cid:8)ii is externally connected to both X(cid:8)(cid:8)(1 (cid:1) i, m, k (cid:1) n), we have either P 1mk⊂ X(cid:8)(cid:8)P 1mkof the (m, k)-component Pmk of P.i , resp.) holds, we say X(cid:8)(cid:8)i or Pmk ∩ X(cid:8)(cid:8)Suppose Rj i = NTPP. To make X(cid:8)(cid:8)i , for any com-ponent Pmk, if X(cid:8)(cid:8)i contains (at least) one branch of Pmk, we should include the wholecomponent in the revised ith region, i.e.(cid:3)j a non-tangential proper part of X(cid:8)(cid:8)ii and P 1iiECP 2i (P 2mk⊂ X(cid:8)(cid:8)⊂ X(cid:8)(cid:8)i(cid:8)(cid:8)i(cid:8)(cid:8)(cid:8)i∪X= XWe can show that X(cid:8)(cid:8)(cid:8)already a realization of Θ.{Pmk: fmk ∈ Xi Rij X(cid:8)(cid:8)(cid:8)(cid:8)(cid:8)j , Rj i = NTPP}.j holds for any pair (i, j ). In other words, {X(cid:8)(cid:8)(cid:8)i : 1 (cid:1) i (cid:1) n} isS. Li, H. Wang / Artificial Intelligence 170 (2006) 1–1811The last step is a technical modification. This procedure will guarantee that any consis-tent RCC8 base network can be consistently extended at least one-shot.Consider the composition triad (cid:3)EC, TPP, TPP(cid:4). Suppose Θ is an RCC8 base networkthat contains two variables, x1, x2, and R12 = TPP. Clearly Θ is consistent. Note that byour construction {X(cid:8)(cid:8)(cid:8)= X(cid:8)(cid:8)(cid:8)∪ P12, X(cid:8)(cid:8)(cid:8)} is a realization of Θ in the121model P. But for a region Z in P, Z is externally connected to X(cid:8)(cid:8)(cid:8)∈ Z. This1 only if t 2111 ECZTPPX(cid:8)(cid:8)(cid:8)shows that there cannot exist a region Z such that X(cid:8)(cid:8)(cid:8)2 .∪ P21 ∪ P 122= P 111To obtain a one-shot extensible realization, we in step 5 cut the right branch of Pik fromif Rik = TPP, i.e., the final form of ith region isX(cid:8)(cid:8)(cid:8)iX∗i= X(cid:8)(cid:8)(cid:8)i−(cid:4)ik, m2t 2(cid:5)ik: Rik = TPP.The reader may rightly conclude that such a modification doesn’t change the RCC8 re-lation between two regions. Furthermore, if Rij = TPP, taking Z = P 2jj , theniji ECZTPPX∗X∗j holds.∪ P 15. One-shot extensibilityGiven a universe U , suppose A = {R1, R2, . . . , Rn} is a collection of JEPD relationson U . For R, S, T ∈ A, recall we say (cid:3)R, T, S(cid:4) is a composition triad if T is contained inR; S, the weak composition of R and S (see p. 2).Definition 5.1 (one-shot extensibility). Suppose A = {R1, R2, . . . , Rn} is a collection ofJEPD relations on a universe U . A composition triad (cid:3)R, T, S(cid:4) is said to have one-shotextensibility if for any consistent network Θ over A, and any constraint xTy in Θ, the newnetwork Θ ∪ {xRz, zSy} is also consistent.This concept is closely related to the following one:Definition 5.2 (one-shot extensible realization). Given A, U as above, suppose Θ is aconsistent network over A, a realization {a1, a2, . . . , an} of Θ in U is called a one-shotextensible realization if the following condition is satisfied:For any composition triad (cid:3)R, T, S(cid:4), if aiTaj for some 1 (cid:1) i, j (cid:1) n, then there existsb ∈ U such that aiRb and bSaj hold.It is now easy to see that if each consistent network over A has a one-shot extensiblerealization in U , then all composition triads have one-shot extensibility.In the rest of this section we show that all RCC8 composition triads have one-shotextensibility. We prove this by showing that each consistent RCC8 base network has aone-shot extensible realization.For a consistent RCC8 base network Θ, applying the One-shot Extensible Realizationi : 1 (cid:1) i (cid:1) n} of Θ in the canonical model P. WeAlgorithm, we obtain a realization {X∗now show that {X∗i : 1 (cid:1) i (cid:1) n} is a one-shot extensible realization of Θ.12S. Li, H. Wang / Artificial Intelligence 170 (2006) 1–18To this ends, we construct for each composition triad (cid:3)R, T, S(cid:4) and each pair (i, j )i RZ and ZSX∗with Rij = T a region Z such that X∗j . Note that if we have showed thata triad (cid:3)R, T, S(cid:4) satisfies this condition, then so does its inverse triad (cid:3)S∼, T∼, R∼(cid:4). Fur-thermore, if either R or S is EQ, then the triad (cid:3)R, T, S(cid:4) clearly satisfies this condition.So we need only check 101 triads (see also [13, p. 139]). Table 4 (for extensional triads)and Table 5 (for non-extensional triads) summarize the construction results, recall where(cid:1)X ={Pmk: fmk ∈ X} and B is the set of RCC8 base relations.(cid:2)We give two examples for illustration. Note first that, by our construction, t 1mk∈ X∗i ifand only if either m = i or Rmi ∈ {TPP, NTPP}.Example 5.1. (1) (Line 5 of Table 4.) Suppose X∗Z = {m1j ii DCZ and ZNTPPX∗j .i TPPX∗(2) (Line 8 of Table 5.) Suppose X∗}. Then X∗ZTPPX∗j .i TX∗j with T /∈ {EQ, TPPi, NTPPi}. Setj . Set Z = P 2ij∪ P 1jj . Then X∗i ECZ andProof. (1) Note that X∗i(cid:7)⊆ X∗equivalently, P 1j i}NTPPP 1Z = {m1j i and P 1j ij ij since T /∈ {EQ, TPPi, NTPPi}. This suggests t 1{DC, EC}P 1i is a normal region, we have X∗j , we have X∗(cid:7)⊆ X∗(cid:7)⊇ X∗i . Since X∗⊂ X∗i DCZ and ZNTPPX∗j .i and Pjj ∩ X∗j , we have P 2ijij . That Z ⊂ X∗j is also clear. Now, by P 2j . (cid:1)i TPPX∗ij ECP 2j , we have ZTPPX∗ii= ∅. This shows X∗i ECZjj externally connectedj i /∈ X∗i , orj i .3 Now by(2) Note that by X∗⊂ X∗i and P 1since P 1ijto both Z and X∗We summarize the above result as a proposition.Proposition 5.1. Each consistent RCC8 base network has a one-shot extensible realizationin P.This proposition leads to the following theorem.Theorem 5.1. All RCC8 composition triads have one-shot extensibility.We now arrive at the main result of this paper.Theorem 5.2. Given a consistent RCC8 network Θ = {xiRij xj : 1 (cid:1) i, j (cid:1) n}, suppose Mand N are two RCC8 relations, and suppose Rmk ⊆ M; N for some 1 (cid:1) m, k (cid:1) n. Then theRCC8 network Θ (cid:8) = Θ ∪ {xmMz, zNxk} is also consistent, where z is a fresh variable.Proof. Since Θ is consistent, it can be consistently refined to an RCC8 base networkΘ ∗ = {xiR∗∈ Rmk ⊆ M; N, thereexist two RCC8 base relations R, S such that R ∈ M, S ∈ N and (cid:3)R, T, S(cid:4) is a compositionij xj : 1 (cid:1) i, j (cid:1) n}. Suppose R∗= T ∈ B. Then by R∗mkmk3 Note that if T = EC or T = TPP, we have P 2j i⊂ X∗i . In these two cases we have P 1j i ECX∗i .S. Li, H. Wang / Artificial Intelligence 170 (2006) 1–1813Table 4Case I: Triads without superscript×Triad(cid:3)DC, T, DC(cid:4)(cid:3)DC, T, EC(cid:4)(cid:3)DC, T, PO(cid:4)(cid:3)DC, T, TPP(cid:4)(cid:3)DC, T, NTPP(cid:4)(cid:3)DC, DC, TPPi(cid:4)(cid:3)DC, DC, NTPPi(cid:4)(cid:3)EC, T, EC(cid:4)(cid:3)EC, T, PO(cid:4)(cid:3)EC, EC, TPP(cid:4)(cid:3)EC, NTPP, TPP(cid:4)(cid:3)EC, NTPP, NTPP(cid:4)(cid:3)EC, T, TPPi(cid:4)(cid:3)EC, DC, NTPPi(cid:4)(cid:3)PO, T, PO(cid:4)(cid:3)PO, T, TPP(cid:4)(cid:3)PO, TPP, TPP(cid:4)(cid:3)PO, PO, NTPP(cid:4)(cid:3)PO, T, NTPP(cid:4)(cid:3)PO, T, TPPi(cid:4)(cid:3)PO, T, NTPPi(cid:4)(cid:3)TPP, T, TPP(cid:4)(cid:3)TPP, NTPP, NTPP(cid:4)(cid:3)TPP, T, TPPi(cid:4)(cid:3)TPP, DC, NTPPi(cid:4)(cid:3)TPP, NTPPi, NTPPi(cid:4)(cid:3)NTPP, NTPP, TPP(cid:4)(cid:3)NTPP, NTPP, NTPP(cid:4)(cid:3)NTPP, T, NTPPi(cid:4)(cid:3)TPPi, TPP, TPP(cid:4)(cid:3)TPPi, NTPP, NTPP(cid:4)(cid:3)NTPPi, PO, NTPP(cid:4)(cid:3)NTPPi, T, NTPP(cid:4)X∗j∗i TXT ∈ BT ∈ {DC, NTPP}T /∈ {EQ, TPPi, NTPPi}T ∈ {DC, NTPP}T /∈ {EQ, TPPi, NTPPi}T = DCT = DCT ∈ {DC, TPP, TPPi}T /∈ {EQ, TPPi, NTPPi}T = ECT = NTPPT = NTPPT ∈ {DC, EC}T = DCT ∈ BT ∈ {PO, NTPP}T = TPPT = POT ∈ {TPP, NTPP}T /∈ {EQ, TPP, NTPP}T /∈ {EQ, TPP, NTPP}T ∈ {TPP, NTPP}T = NTPPT ∈ {DC, TPP, TPPi}T = DCT = NTPPiT = NTPPT = NTPPT ∈ BT = TPPT = NTPPT = POT ∈ {TPP, NTPP}∪ P(n+1)(n+1)∪ P(n+1)(n+1)∪ P(n+1)(n+1)∪ P(n+1)(n+1)Z∪ P 1jj∪ P 2jj∪ P 1j i∗∪ Xj∪ (cid:6)∗Xj∪ P 1jj∪ P 1jj∪ P 1jjP(n+1)(n+1)P 2jjPjjP 1jj{m1}j i∗∪ P(n+1)(n+1)Xj(cid:6)∗XjP 2iiP 2iiP 2ijP 2iiP 2iiP 2iiP 2iiP 1iiP 2ijP 1iiPj iPij ∪ Pj i∗P 1∪ Xjii∪ (cid:6)∗P 1Xiij∗∪ P 1Xijj∗∪ Pj ii∗∗∪ Xji∪ (cid:6)∗∗Xji∗∪ P(n+1)(n+1)Xi(cid:6)∗∪ P 1Xijj(cid:6)∗Xi(cid:6)∗XiP 1iiP 1ii{m2ij{m1ii∪ (cid:6)∗XjXXX}}∪ P(n+1)(n+1)triad, i.e., T ∈ R; S. By Theorem 5.1, (cid:3)R, T, S(cid:4) has one-shot extensibility, so Θ (cid:8)∗ = Θ ∗ ∪{xmRz, zSxk} is by definition consistent. Clearly Θ (cid:8) is also consistent because Θ (cid:8)∗is arefinement of Θ (cid:8). (cid:1)14S. Li, H. Wang / Artificial Intelligence 170 (2006) 1–18Table 5Case II: Triads with superscript×Triad(cid:3)DC, T, EC(cid:4)(cid:3)DC, T, TPP(cid:4)(cid:3)DC, TPP, EC(cid:4)(cid:3)DC, TPP, TPP(cid:4)(cid:3)EC, T, EC(cid:4)(cid:3)EC, PO, TPP(cid:4)(cid:3)EC, PO, NTPP(cid:4)(cid:3)EC, TPP, TPP(cid:4)(cid:3)EC, TPP, NTPP(cid:4)(cid:3)TPP, T, TPPi(cid:4)(cid:3)TPP, T, NTPPi(cid:4)(cid:3)TPP, TPPi, NTPPi(cid:4)(cid:3)TPPi, PO, TPP(cid:4)(cid:3)TPPi, PO, NTPP(cid:4)(cid:3)TPPi, TPP, NTPP(cid:4)X∗i TX∗jT ∈ {EC, PO}T ∈ {EC, PO}T = TPPT = TPPT ∈ {EC, PO}T = POT = POT = TPPT = TPPT ∈ {EC, PO}T ∈ {EC, PO}T = TPPiT = POT = POT = TPPZP 2jjP 1jjP 2jjP 1jjP 2iiP 1jjP 1j iP 2ijP 2ij∗Xi∗i∗XiP 2ijP 2j iP 1ijX∪ P 2jj∪ P 1j i∪ P 1jj∗∪ Xj∪ (cid:6)∗Xj∪ (cid:6)∗Xj∪ P 2j iBy this theorem, we haveTheorem 5.3. Let S be any subset of RCC8 relations that contains the universal relation.Given S, T ∈ S with R = S; T /∈ S, suppose Θ is a consistent network such that for anyconstraint xMy ∈ Θ, M ∈ S or M = R. Define Θ (cid:8) to be the following constraint network:If xMy ∈ Θ and M ∈ S, then xMy ∈ Θ (cid:8); otherwise, add xSz and zTy to Θ (cid:8), where z is afresh variable. Then Θ (cid:8) is also consistent.This theorem justifies the applicability of Theorem 5 in [22] to RCC8 algebra. Recallthat Renz and Nebel [22] termed RSAT the problem of deciding consistency of RCC8networks.Theorem 5.4. For any subset S of RCC8 relations that contains the universal relation andthe identity relation, the problem RSAT( (cid:1)S) can be polynomially reduced to RSAT(S),where (cid:1)S is the closure of S under composition, intersection, and converse.Proof. Same as that given by Renz and Nebel in the proof of [22, Theorem 5]. The idea isto construct for each network over (cid:1)S a new network over S such that the two networks areequivalent, i.e., one is consistent iff the other is. Notice that by Theorem 5.3 of this paperthe new constraint network Θ (cid:8) constructed in Renz and Nebel’s proof is consistent if andonly if Θ is. (cid:1)S. Li, H. Wang / Artificial Intelligence 170 (2006) 1–1815As a corollary, we have the following important result, which provides a key techniquefor identifying the boundary of tractability when reasoning with RCC8 algebra [20,22].Corollary 5.1. RSAT(S) is in P (NP-hard, resp.) if and only if RSAT( (cid:1)S) is.6. Realization of infinite path-consistent RCC8 base networkNebel [15] has shown that any finite RCC8 path-consistent base network is consistent.This result cannot be directly extended to the situation when the network involves infinitelymany spatial variables. As a matter of fact, no proof is known for the infinite situation. Ina recent paper, Balbiani et al. [2] phrased it formally as a conjecture:Conjecture. Let Θ be an infinite path-consistent RCC8 base network. Then Θ is satisfi-able.We now give an affirmative answer to this conjecture. The One-shot Extensible Real-ization Algorithm described in Table 3 can be applied to generalize a realization of anyinfinite path-consistent RCC8 base network Θ. Indeed, if our aim is simply to generalizesuch a realization, the algorithm as well as the canonical space can be simplified.This time we choose our basic component as Q = {f, t 1, t 2} and our canonical space{Qij : i, j ∈ N+}. The algorithm is given in Table 6. Justification of thenow is Q =correctness of this algorithm is similar to the one for finite networks.(cid:2)7. Further discussions and open problemsIn [20], Renz gave a complete analysis for maximal tractable fragments of RCC8. UsingTheorem 5 of [22], he first found more intractable subsets of RCC8 and then, based on thesehardness results, he identified three candidates of maximal tractable subsets. To prove thetractability of these candidates, he also proposed a general approach for proving tractabilityof RSAT problems. This reduction-by-refinement approach was then used in (re-)provingtractability of the three candidates.Since this new approach is sufficient for deciding tractability of the three candidates,it seems that the applicability of [22, Theorem 5] to RCC8 is irrelevant to the complexityresults obtained in [20,22]. This is, however, not true. One key point is that the aim hereis to identify the boundary between tractability and intractability. Renz’s new approachTable 6General realization algorithmStep 1. Set Xi = Q1{Qik: k (cid:7)= i}.∪ii= (Xi − {t 2ik: Rik = EC}) ∪Step 2. Set X(cid:2)(cid:8){X∪= XStep 3. Set X(cid:2)i(cid:8)(cid:8)(cid:8)(cid:8)j , Rj i = NTPP}.{Qmk: fmk ∈ X∪= XStep 4. Set Xi(cid:8)k: Rki ∈ {TPP, NTPP}}.(cid:8)i(cid:8)(cid:8)i∗i{Q2(cid:2)(cid:2)ki : Rki ∈ {EC, PO}}.16S. Li, H. Wang / Artificial Intelligence 170 (2006) 1–18Table 7The definition of relations in A (left) and its weak composition (right)a eq b ⇔ a = b;a e b ⇔ a − b = 1;a w b ⇔ b − a = 1;a d b ⇔ |a − b| > 1.;ewdeqedeqw,deweqde,dwdw,de,de,w,d,eqdeqewdeqcannot guarantee the “maximality” of these candidates; that is, suppose S is one of thesecandidates and T is any new RCC8 relation, this approach cannot tell us whether or notthe new subset S ∪ {T} is intractable. More than 3 × 76 = 228 cases4 should be checked,but only a few are known to be intractable [20,22]. Without proving that the rest are allintractable, we cannot be sure that these candidates are indeed maximal. This will be ofcourse a tedious and difficult work. It would be more elegant, as suggested in [20], if wecould prove the applicability of Theorem 5 of [22] to RCC8 and use this result to transferintractability.In this paper, the applicability of Theorem 5 of [22] to RCC8 was proved by showingthat any consistent RCC8 network can be consistently extended at least one-shot (Theo-rem 5.2). Suppose T ⊆ R; S, xTy is in the network Θ, and z is a fresh variable. This meansthat we can add two new constraints xRz and zSy to Θ without changing the consistencyof the network. One may wonder whether this result holds in general. From the proof forTheorem 5.2, one can conclude that, for a set of JEPD relation A, Theorem 5.2 holds ifand only if Theorem 5.1 holds. Now our question can be phrased as follows.Question 1. Suppose U is a nonempty set, A is a set of JEPD relations on U that is closedunder converse and contains the identity relation. Suppose (cid:3)R, T, S(cid:4) is a composition triadof A, does it have one-shot extensibility? That is, for any consistent network Θ over Awhich includes a constraint xTy, is Θ ∪ {xRz, zSy} consistent? where z is a fresh variable.Note that if a composition triad (cid:3)R, T, S(cid:4) is extensional on U (see p. 2), i.e., T ⊆ R ◦ S,then it has one-shot extensibility. As for RCC8 algebra, by Theorem 5.1, we know that ifU is the canonical RCC8 model P and A is the RCC8 base relations, then Question 1 hasan affirmative answer for all composition triads.5 The following example, however, showsthat this is not true in general.Example 7.1. Set the universe to be the set of integer numbers Z. Consider the follow-ing set of JEPD relations A = {e, w, d, eq} on Z (see Table 7). Note that d = e; e, hence(cid:3)e, d, e(cid:4) is a composition triad. Consider the following consistent networkΘ = {x1ex2, x2ex3, x3ex4, x1dx4}.4 There are 76 RCC8 relations that are not in either of these candidates.5 The same conclusion then can be applied to any RCC model R. This is because an RCC8 network is consistentif and only if it has a realization in R [11].S. Li, H. Wang / Artificial Intelligence 170 (2006) 1–1817Notice that x1dx4 is in Θ. We now have the following extension of Θ:Θ(cid:8) = {x1ex2, x2ex3, x3ex4, x1dx4, x1ez, zex4}.Θ (cid:8) is, however, inconsistent. In fact, Θ (cid:8) is even not path-consistent. This suggests that(cid:3)e, d, e(cid:4) has no one-shot extensibility, hence the answer to Question 1 is in general negative.This example also suggests that the reduction method proposed in the proof of The-orem 5 of [22] cannot work for all calculi using weak compositions. For example, setS = {e, eq, ∗}, then d ∈ (cid:1)S, where ∗ is the universal relation over A. The above network Θis a consistent network over (cid:1)S, but the corresponding extension, namely Θ (cid:8), is inconsistent.It will be an interesting problem to identify sufficient conditions under which everyconstraint triads have one-shot extensibility. There is another related and more difficultproblem.Question 2. Suppose U is a nonempty set, A is a set of JEPD relations on U that is closedunder converse and contains the identity relation. Given a subset S ⊆ 2A that contains theuniversal relation and the identity relation, whether and when can the problem RSAT( (cid:1)S)be polynomially reduced to RSAT(S)?It is clear that an affirmative answer to Question 1 will lead to an affirmative answerto Question 2. But it is still not clear whether there exists a polynomial reduction fromRSAT( (cid:1)S) to RSAT(S) in general.AcknowledgementsWe thank Ivo Düntsch for drawing our attention to the possible weakness of the com-plexity results in [22]. He also pointed out one error, viz. the definition of normal region,appeared in an earlier version of this paper. We also thank Prof. C.R. Perrault and the twoanonymous referees for their helpful suggestions.References[1] J.F. Allen, Maintaining knowledge about temporal intervals, Comm. ACM 26 (1983) 832–843.[2] P. Balbiani, K. Challita, J.-F. Condotta, Spatial regions changing over time, in: R. Berghammer, B. Möller(Eds.), 7th Seminar RelMiCS—2nd Workshop Kleene Algebra, Christian-Albrechts-Universität zu Kiel,2003, pp. 74–81.[3] B. Bennett, A. Isli, A.G. Cohn, When does a composition table provide a complete and tractable proofprocedure for a relational constraint language? in: Proceedings of the IJCAI-97 Workshop on Spatial andTemporal Reasoning, Nagoya, Japan, 1997.[4] Z. Cui, A.G. Cohn, D.A. Randell, Qualitative and topological relationships in spatial databases, in: D. Abel,B.C. Doi (Eds.), Advances in Spatial Databases, in: Lecture Notes in Computer Sciences, vol. 692, Springer,Berlin, 1993, pp. 293–315.[5] I. Düntsch, Relation algebras and their application in qualitative spatial reasoning, Preprint, 2003.[6] I. Düntsch, H. Wang, S. McCloskey, A relation-algebraic approach to the Region Connection Calculus,Theoret. Comput. Sci. 255 (2001) 63–83.18S. Li, H. Wang / Artificial Intelligence 170 (2006) 1–18[7] I. Düntsch, M. Winter, A representation theorem for Boolean contact algebras, Theoret. Comput. Sci. (B)(2005), in press.[8] M.J. Egenhofer, Reasoning about binary topological relations, in: O. Günther, H.J. Schek (Eds.), Advancesin Spatial Databases, Springer, New York, 1991, pp. 143–160.[9] N.M. Gotts, An axiomatic approach to spatial information systems, Research Report 96.25, School of Com-puter Studies, University of Leeds, 1996.[10] P. Ladkin, R. Maddux, On binary constraint problems, J. ACM 41 (3) (1994) 435–469.[11] S. Li, On topological consistency and realization, Constraints, submitted for publication.[12] S. Li, M. Ying, Extensionality of the RCC8 composition table, Fundamenta Informaticae 55 (3–4) (2003)363–385.[13] S. Li, M. Ying, Region Connection Calculus: Its models and composition table, Artificial Intelli-gence 145 (1–2) (2003) 121–146.[14] S. Li, M. Ying, Generalized Region Connection Calculus, Artificial Intelligence 160 (1–2) (2004) 1–34.[15] B. Nebel, Computational properties of qualitative spatial reasoning: First results, in: KI-95: Advances in Ar-tificial Intelligence, Proceedings of the 19th Annual German Conference on Artificial Intelligence, Springer,Berlin, 1995, pp. 233–244.[16] B. Nebel, H.-J. Bürckert, Reasoning about temporal relations: a maximal tractable subset of Allen’s intervalalgebra, J. ACM 42 (1) (1995) 43–66.[17] D.A. Randell, A.G. Cohn, Modelling topological and metrical properties of physical processes, in: R.J.Brachman, H.J. Levesque, R. Reiter (Eds.), First International Conference on the Principles of KnowledgeRepresentation and Reasoning, Morgan Kaufmann, Los Altos, CA, 1989, pp. 55–66.[18] D.A. Randell, Z. Cui, A.G. Cohn, A spatial logic based on regions and connection, in: B. Nebel, W. Swartout,C. Rich (Eds.), Proceedings of the 3rd International Conference on Knowledge Representation and Reason-ing, Morgan Kaufmann, Los Altos, CA, 1992, pp. 165–176.[19] J. Renz, A canonical model of the Region Connection Calculus, in: Proceedings of the 6th InternationalConference on Knowledge Representation and Reasoning, Morgan Kaufmann, San Mateo, CA, 1998,pp. 330–341.[20] J. Renz, Maximal tractable fragments of the Region Connection Calculus: A complete analysis, in: Pro-ceedings of the 16th International Joint Conference on Artificial Intelligence, Stockholm, Sweden, 1999, pp.448–454.[21] J. Renz, Qualitative Spatial Reasoning with Topological Information, Lecture Notes in Artificial Intelligence,vol. 2293, Springer, Berlin, 2002.[22] J. Renz, B. Nebel, On the complexity of qualitative spatial reasoning: A maximal tractable fragment of theRegion Connection Calculus, Artificial Intelligence 108 (1999) 69–123.[23] J.G. Stell, Boolean connection algebras: A new approach to the Region-Connection Calculus, ArtificialIntelligence 122 (2000) 111–136.[24] E. Tsang, Foundations of Constraint Satisfaction, Academic Press, New York, 1993.[25] M. Vilain, H. Kautz, Constraint propagation algorithms for temporal reasoning, in: Proceedings AAAI-86,Philadelphia, PA, 1986.