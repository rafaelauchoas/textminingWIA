ELSEVIER. Artificial Intelligence 83 ( 1996) 267-295 Artificial intelligence Relation algebras of intervals Robin Hirsch ’ Department of Computer Science, University College, London WCIE 6BX UK Received February 1994; revised March 1995 Abstract If the representation happens to be complete, homogeneous Given a representation of a relation algebra we construct relation algebras of pairs and of then intervals. the pair and interval algebras can be constructed direct from the relation algebra. If, further, the original relation algebra is w-categorical we show that the interval algebra is too. The complexity of relation algebras is studied and it is shown that every pair algebra with infinite representations is intractable. Applications include constructing an interval algebra that combines metric and interval expressivity. and fully universal 1. Introduction interest systems to describe in reasoning for temporal that can handle There has been considerable reasoning. For many applications intervals, it turns out that formalisms particularly lack the expressive power required the situation adequately. based on points instead of points as the basic entities significantly increases the expressive Using intervals power but., in general, involves a loss of tractability. Interval reasoning is important in all those applications that involve interfering processors, multi-agents or interactions with the environment. The application might require us to say that “one process takes place while another property holds” or “two actions have disjoint duration”. One of the most powerful algebraic tools for temporal reasoning is relation algebra. This has given some very general results about the decidability and completeness of systems of binary relations (for a good survey see [ 251, see also ) and might also be useful for considering questions of complexity. A background knowledge in relation algebra is certainly an advantage when reading this paper, though terms are defined as [ 3,4,10,19,20,24] ’ Supported by SERC grant reference: GR/H46343. Many thanks to Ian Hodkinson and Mark Reynolds for their contribution to this work. E-mail: R.Hirsch@cs.ucl.ac.uk. 0004-3702/96/$15.00 SSDIOOO4-3702(95)00042-9 @ 1996 Elsevier Science B.V. All rights reserved 268 R. Hir.wh/Art@cial Intelligence 83 (1996) 267-295 they are introduced. Background others, study of relation algebras may be found the previously reading in [ 221. cited works and [ 5,9,11,12,15,21,26]. in relation algebra includes, amongst many A good history of the The idea in this paper is to see how relation algebras can be used to handle interval reasoning. Section 2 gives the basic definitions for relation algebras and their representations to consist of binary together with some properties of representations. relation algebra-intended interval algebras from w-categorical pair algebras are intractable. A number of concepts construction, Although like homogeneity it has a somewhat if the original point algebra it. In Section 5 it is shown theoretical relations on points-and In Section 4 we show how to take a build pair and is all theory are used in this that a pair or interval algebra is. In Section 6 we show that virtually from model flavour, this work is very applicable. A number of attempts have been made reasoning with quantitative metric expressivity. Section 7 starts from a point-based metric system and gives a con- struction of an interval algebra which achieves and has some advantage over its competitors. to combine qualitative that combination interval and universality, but they are defined in the text. 2. Basics Definitions the boolean operations, l A proper relation algebra is a set of binary relations over some domain D, closed the identity (the top element of the boolean the whole square D x D, though is under relation. Let 1 denote algebra). Note it turns out that 1 is always an equivalence always relative relation over D. Complementation that 1 does not have converse, composition the biggest binary and containing to equal relation (A, V, -, l,O, l’,” , ; ) which obeys the Tarski to the top element. l A relation algebra A is a tuple [ 1 I]. That is axioms (1) (1 is the universal element), (A, V, -,O, 1) is a Boolean algebra ; is an associative binary operator on A, (a”)” = a, (2) (3) (4) 1’; a = a; 1’ = a, (5) a; (b v c) = a; b V a; c, (6) (7) (8) (9) (avb)“=a-vb-, (a-6)“=a--b-, (u;b)- (a; b) A c- = 0 H (b; c) A a” = 0 [triangle axiom]. = b-;a-, l A relation algebra is equivalent algebra can be decomposed to saying is called simple if it has no nontrivial congruence relations. This that for all 0 # a E A we have 1; a; 1 = 1. Any relation as a subalgebra of a direct product of simple ones. l An integral relation algebra satisfies 1; a = a; 1 = 1 for all non-zero a E A. l A representation X of A is an isomorphism from A to a proper relation algebra. is the {(d, d): d E D} (D The element 1’ must be mapped to the identity R. Hirsch/Artificial Intelligence 83 (1996) 267-295 269 thus x E X means that A is simple by noting in the domain of the representation. and the domain of the representation, - and ; are interpreted as converse and composition the unit 1 always gets represented as a sum of disjoint, there is no confusion we use the same letter X to stand for the that x is a domain of the representation), respectively. When isomorphism point For a simple relation algebra complete graphs each of which on its own. In this paper we is a representation only consider simple relation algebras and assume that a representation consists of a single component, i.e., for any pair of points the unit is called square. We justify them. Such a representation relation holds between the assumption is relation representable are representable. if all its simple components Let a E A and x, y E X. The notation X, (x, y) k a is used as an alternative (x, y) C: X(a). Where no confusion An atomic representation has the further property the domain of the representation them. It can be proved complete-i.e., finite relation algebras every representation An atomic d-network N is a finite directed graph with each edge (m, n) labelled by an atom N( m, n) of A, and transitively closed: for any three nodes 1, m, n of N we have that for any two points x1, x:! in there is a unique atom from A that holds between if it is is atomic [ 81. For arbitrary unions are preserved, wherever is a complete arises we may simply write (x, y) b a. they are defined representation. that a square representation in the representation that an arbitrary if and only if and only algebra to N(Z,m); N(m,n) 2 N(Z,n). A general d-network edge is labelled with a single atomic relation.2 is defined similarly, but it is no longer assumed that each Fact. Not every relation algebra has a representation set of axioms which characterises the representable [ 191 and indeed there is no finite relation algebras [ 241. all the relations, .?, J in the representation, isomorphism h of a representation An automorphism 0 of the representation X is a permuation of the representation preserving i.e., Vx, y E X,Va E A (x, y) b a H (x0, ~0) C_ a. A local tuples pair of points. A reprlzsentation a full automorphism A representation X is called universal if it has the following property: networks N if N embeds embed atomic d-networks is a finite map h : R -+ J for some that hold between each of A then it embeds it is called fully universal. is said to be homogeneous if every local isomorphism in any representation in the representation preserving all the relations for all atomic in N. If all of the representation. extends to 2 It is possible A and a first-order to a certain sentence is consistent with Th( A). to constmct a first-order language L(A) with one binary relation symbol for each element of theory Th(d) whose models are exactly the representations of A. A network first-order existential sentence and a network embeds in some representation is equivalent if the if and only 270 R. Hirsch/Artijcial Intelligence 83 (1996) 267-295 Definition. A representation homogeneous. if and only amalgamation if its atomic networks is not needed here. it is shown In [7] is normal if it is square, complete, fully universal and that a relation algebra has a normal representation form an amalgamation class but the concept of Examples l Let P be the “point algebra” consisting of three atoms l’, < and > with <“= > and representation composition table that any representation So any countable ordering. This representation be any local isomorphism, Use a back and forth construction fully universal follows finite linear order and therefore embeds defined by <; < = < and <; > = 1. It follows from this composition of P must be a dense linear order without endpoints. their usual let p partial map from Q to Q. to extend p to a full automorphism. That Q is a turns out to be normal. To show homogeneity, from the fact that any atomic P-network i.e., a finite order-preserving to the rationals with is isomorphic is effectively in Q. l The Allen interval algebra Z has thirteen atoms I’, <, meets, overlaps, starts, during, table can be found in [ 11. namely ordered pairs turns out to be also ends plus the converses of the last six. The composition We will see later that it has only one countable of rationals (p.q) with p less normal. representation than q. This representation is R([O,O]), complement is W[p,ql) where i is a real interval with rational endpoints identity l The metric point system M of [ 61 consists of finite unions of basic relations R(i) (open, closed or semi-open). The V - = R( [ -4, -p] ) and composition R( [p, q] ); on if i. The representation based on the reals is not atomic as the pair (0, r) are not related by any atom, but the of M can be constructed (a, b) E R(i) the real numbers or the rationals by letting = R( [p + r, q + s] ). A representation R((q,co)), mverse W[rtJl) either b - a belongs (equivalently representation to the interval not complete) based on the rationals is a complete representation. is given by3 = R((-oo,p)) if and only -R([p,ql) 3. Intervals 3.1. The idea There seem to be two views [27] of intervals: they may be considered as co~tvex sets of points or simply as ordered pairs of points (the endpoints of the interval). Here we take the latter approach. First we take a representation X of a relation algebra A and build a representation of pairs X2 whose domain includes all pairs, i.e., 4 Xx X. If the relation representation X then we give a simple construction algebra happens to have a normal from d-independent for an algebra of pairs A2 directly of its representations. 3 With similar definitions 4 Recall for open and semi-open that we use the same letter X to denote the representation intervals. and the domain of the representation. R. Hirsch/ArtQicial Intelligence 83 (1996) 267-295 271 r and define an r-interval Next, we fix one atomic relation to be a pair related by r. The exemplary is a pair (x, y) with x < y. The representation (x, y) where an interval a representation of intervals XF whose domain contains to a certain element of A*. Again, AZ is calculated direct from A and is built out of twoby-two matrices of atoms of A. In this way we can build the Allen certain interval from the point algebra P. algebra interval) (or simply is < in the point algebra P of pairs X2 contains is the set of all r-intervals. Also A2 a substructure A: called an interval algebra which is formed by relativising case 3.2. Representations representation. For any pair of points x,y E X let N_otation. Let X be a complete that holds between x and y in X. If X is a tuple of the unique atom X(x, y) denote points the at_omic network with f as its set of nodes and each edge (xi, x,j 18 labelled by the atom X (xi, x,-i). These two uses of the symbol X can be distinguished in X, let X(X) by context. denote to define some binary We want are naturally fine a quadr,angle of atomic four-network N (N has four nodes), we can define a binary relations relations on pairs from X. Which binary from X? Well,_two pairs d = (at, a~) and p = (PI, &4 de- closed atomic relation RN on pairs relations X (E, p) . So, for each transitively definable by RN(&,,~) if and only if X(C,p> Z N. Taking all such N it is possible pairs from X by closing under unions, complement But note th,at if X is not fully universal zero relation. Also, if X is not homogeneous atomic as illustrated by the following example. to form a proper relation algebra of binary relations on relative to X2 x X2 and composition. then for some networks N, RN may be the relations RN may not be then the non-zero Example. Let A be the relation algebra with atoms composition defined by l’, e and d, all self-converse, and 1’ 1’ e d e e 1’Ve d d d d 1 In any representation X of A the relation 1’ V e is an equivalence relation and partitions X into at le,ast three clusters each of size at least three. Two distinct elements are related of A by e if they are in the same cluster and by d otherwise. A normal consists of infinitely many infinite clusters. But if all the clusters have size three then the following network N defines the zero relation. representation 272 R. Hirsch/Artificial Inrelligence g3 (1996) 267-295 e e e El e e e Now consider a representation X where all the clusters have size four or six. This is not homogeneous as mapping the four elements of a four-cluster into a six-cluster is a local isomorphism that cannot extend to an automorphism. Consider the relation RN n (RN; RN), where N is the network in the diagram above. This can only hold on a distinct pair of pairs taken from a cluster of size six. Therefore RN is not an atom. Later, we will consider normal representations so these problems will not arise. But for an arbitrary representation X what would be a natural choice for the atoms of a proper relation algebra of binary relations on pairs from X? Dejnitions In these definitions only we use one symbol (X) for a square representation of A and a different symbol (D) (1) for the domain of the representation. The representation of pairs X2 is a proper relation algebra with domain D x D. The atoms of X2 are the orbits of pairs from D2 under the automorphism group on X. So two pairs (d,E) = ((dl,&),(el,ez)) are related by the same atomic relation as two pairs ( f, 2) if and only if there is an automorphism of X sending d, E to f, g respectively. (In the previous example the element RN splits into two atoms: those where the two distinct pairs lie in a cluster of size four and those which lie in a cluster of size six.) It is simple to check that the converse of an atom is an atom; that the identity is a union of atoms and the composition of two atoms is a union of atoms. This follows from the equations (d,d>-(Z,f>=5E=J, [dfl C [d,el; [d,fl, (2) where ii N L3 denotes the existence of an automorphism sending ii to D and [E] is the ~-class of ii. The proper relation algebra X2 may then be defined as all unions of these atoms. The unit of X2 is D2 x D2. X2 forms a proper relation algebra whose structure derives naturally from X. The representation of intervals XF is a proper relation algebra with domain X(r) , i.e., all pairs (d, e) E D x D related by the atom r. The atoms of Xj? are the atoms of X2 restricted to r-intervals, so a pair of intervals (i, j) are related by the same atom as two intervals (k, 1) if and only if there is an automorphism of X sending i, j to k, I respectively. The unit of Xz is X(r) x X(r) . R. Hirsch/Artijcial Intelligence 83 (1996) 267-295 273 4. Pair and1 interval algebras If the representation X in the previous construction is not homogeneous then X2, X; can both be considerably bigger than X. More importantly, they depend heavily on the representation X. In this section we assume that X is a normal representation of A. This will yield a simpler construction of a pair algebra dz and an interval algebra d; which can be constructed direct from the relation algebra, independent of its representations. 4.1. Pairs Definitions l Let 2 :L (XI, x2), y = (~1, ~2) be any two pairs. Since X is homogeneous the atomic relation in X2 that holds on a pair of pairs is determined by the isomorphism type of the atomic networkdefined by the four points. So for any pair of pairs (i& fi) such that X(&ii) S X(X,7) we have (z&3) N (X,g). l The atomic pair relations of d2 are the set of all isomorphism classes of atomic networks of size four. Because X is fully universal all the atomic pair relations embed in X2 and homogeneity guarantees that the occurrences of an atomic pair relation in X2 form an atom of X2. l It is convenient to denote the isomorphism type of the atomic network a2 P2 s ff2 r a21 al2 EZI QI all Pl as This atomic pair relation relates and the endpoints are related by X(ai,pj) = C&j (i,j = 1,2). an r-interval & = (at, a~) to an s-interval j9 all, al2, a21 and a22 as in the diagram. Thus l We can use this notation with non-atomic entries. Thus [: E]R,szf{ atomic pair relations [: jr,,: a < A, b < B, . . . , s < S . 274 R. Hir.sch/Art@ial Intelligence 83 (1996) 267-295 l We can now define the structure d2. It consists of sets of the atomic pair relations ’ are defined and the identity, converse and composition (of atomic pair relations) by The composition x respectively plus a test for matching subscripts. is ordinary matrix multiplication with A and ; in place of + and Theorem 1. Let X be a normal representation 6 of A. Then A2 forms a relation algebra and X2 is a normal representation of it. Proof. There is a potential problem because (a; (b A c) = a; b A a; c is not generally matrix multiplication may not be associative. But the theorem can be proved using fact that X2 is a proper relation algebra, by showing E from A2 to X2. true in relation algebras) there is no distribution that there is a natural and consequently law for intersection isomorphism the the For each atomic pair relation M,,Y let 8( M,,Y) be the set of pairs of pairs formed by the four points to non-atomic s_uch that the atomic network X (5, p) 2 M,,. P can be extended every atomic network of size four embeds E _ is injective and it is easy to see that it is surjective identity and converse are preserved. The crucial argument composition. in X so 3(&f,,) is isomorphic (6, p) to M,,Y that is relations. Since X is fully universal, = 0 cannot happen. Thus too. It is not hard to check that is to show that Z preserves Lemma 2. Let X be a normal representation of A, let M,, and N,, be atomic pair relations and let & = ( LYI, 3) and p = (PI, &) be any pairs in X. Then (~2, ,8> k M,,; N,,, (the product defined above) i# there is some pair 7 such that (G, 7) k IV,,~ and (P,P) != NtU. ’ Although it is true that converses can be calculated by (i g),‘, = (i ., E:_),, you have to be careful about composition. The composition of two non-atomic matrices cannot be calculated’by matrix multiplication, but is defined as the set of all the products of atomic pair relations contained within the two matrices. h We will see, in the proof, that it is sufficient for A* to be a relation algebra, that X is universal over the class of all atomic networks of size six and that local isomorphisms of size four extend to full automorphisms-full universality for this part of the theorem. are not strictly necessary and homogeneity R. Hirsch/Art@cial Intelligence 83 (1996) 267-295 215 Proof. There are two cases to check: s + and p, t and s = t. First let s # t. For all pairs & 3: (E,9) + M,, A (%p) k N,, @ p is an s-interval and 7 is a t-interval %A_ * (5, p) k M,,; N,, = 0. Now let s =: t. The proof from right to left comes first, i.e., (&p) k M,,;N,, * 37 with (G,P) k M,,A (7,p) + N,,. This implication r-interval always holds in any representation. and 7 is an s-interval and that (ai,rj) in the two-by-two matrix M. Similarly p is a u-interval the triangle (ai, rj, &) entry (j, k = 1,2:1. Considering below), it must be the case that (ai,Pk) b M(ij); N(jk) (i, j,k = 1,2). + M(ij) (5, 7) k M,, means that d is an (i, j)th and (rj, &) k N( jk) in the representation X (see diagram (i, j = 1,2)-the M(ij) /‘\ ai MW) Therefore (Ui,Pk) b M(i1); N( Ik) A M(i2); N(2k) which is the entry calculated by the matrix product. Hence (5, p) b M,,; N,,. Now to prove the implication from left to right: suppose ii and p be T,, (T,, E M,,; N,,). Since M,, (&, p) + M,,; N,y,. Let the is a pair atomic pair relation between the atomic network relation, r M(11) R. Hirsch/Artijcial Intelligence 83 (1996) 267-295 in X. By considering each triangle, the following atomic network is transitively 276 embeds closed. r 7’(22) T(11) Universality ity ensures guarantees that the local isomorphism from this occurrence to that this network embeds in the representation X and homogene- extends (6,y) to a full automorphism there is an s-interval 7 such that + M,, and (7, p> b Npu as required. of X. Therefore El to X2 if X is Proof of Theorem 1 (continued). We have shown that A2 is isomorphic normal. Therefore d2 is a relation algebra and X2 is a representation to show that X2 is itself normal. Clearly X2 is atomic as any pair of pairs in X2 is related of X. It is easy to show by an atomic pair relation-this that it is fully universal by follows from the completeness of it. It remains ( I ) taking any atomic pair network (2) converting putting the appropriate to an atomic network of points by splitting each node into two and (the nodes of the network represent pairs), (3) using (4) converting back to X2 thus showing the universality in X, and that the original network embeds in X2. atoms on the edges, of X to find the network Homogeneity is handled in much the same way. 0, R. Hirsch/Art$cial Intelligence 83 (1996) 267-295 271 4.2. Intervals Let r be any atom, X a representation of A. We have defined the interval algebra X,’ to be the proper relation algebra formed by restricting the proper relation algebra X2 to a domain consisting only of r-intervals. So X; consists of binary relations on r-intervals. If A has a normal representation then the pair algebra d2 can be constructed. Now we will show that d2 contains a substructure d: and that XF is a normal representation of it. Definition. An equivalence element e E A satisfies e = e; e = e’. An equivalence element e defines a relativised algebra A, contained in A consisting of all elements a < e. Union, converse and composition are unchanged but the identity is lb A e, the unit is e and complement is relative to e. Now d2 contains an equivalence element 1 1 1 1 11. r,r dz is defined to be the relativised algebra contained in this equivalence element and consists of all elements of d* indexed by r, r. Under the representation X2 of d2 any element of d: is represented as a binary relation on r-intervals. Since the indices are now fixed we do not need to write them down explicitly any more. So the atomic interval relations are all the two-by-two matrices a b [ 1 c d such that a;~” 2 r, b; d” 2 r, a”;b> r, c”;d 2 r. In other words the network below must be transitively closed. C h r 1-::: d a . r As with pair algebras we can use the same matrix notation with non-atomic entries to denote the set of all the atomic interval relations contained in it. 278 R. Hirsch/Art@cial Intelligence 83 (1996) 267-295 Theorem 3. Let A be a simple relation algebra with a normal representation X. ( I ) AZ forms a relation algebra. The identity relation is and the converse The composition of any two atomic interval relations is calculated thus: = (all;h1) A (aah) (m;hl) A (aah) (all;hd A (aah) (m;hd A (m;bd * 1 In other words, ordinary matrix multiplication with A and ; in place of + and x is defined respectively. Composition of two sets S, T of atomic interval relations by s;T=U{s;t: SES, tET}. (2) XF forms a universal, homogeneous representation of A,'. Proof. d: is a substructure x,“. 0 of A2 and the restriction of the representation X2 to d: is Note. If the representation X fails to be normal of A;. If A does not possess any normal the matrix product Even if it does form a relation algebra it. that is associative. Thus d; may or may not form a relation algebra. of then there is no guarantee that X,” is a representation it does not follow representation then XF may not be a representation The following corollary was shown first in [ 161. Corollary 4. ( 1) The Allen interval algebra can be constructed from a normal representation relation algebra with atomic relations as ordered pairs of rationals. the set of two-by-two matrices the point algebra P and has to the It is isomorphic a b [ 1 d c R. Hirsch/Arti$cial Intelligence 83 (1996) 267-295 219 with elements <, > and = such that a; cy > ‘<‘, b;d” 2 ‘<‘, etc. The atomic interval relations and their corresponding matrices are ‘equals’ ‘before’ ‘c -=c . 1 1 < < ’ ‘meets’ ‘overlaps’ ’ < > ‘starts’ = < . 1 1 ‘during’ > < I; > < ‘ends’ > < 1 1 = > 1 (2) plus the converses of the last six. It is possible to take the interval algebra,& any one atomic relation say ‘over- laps and then define a relation algebra of “intervals of intervals”. Here an interval will be any pair of intervals i, j such that i overlaps j. The construction of an interval algebra from a suitable be done this way, but there is one case that we consider r E A is called non-singular if r; r- = r”; r = lh. relation algebra can always to be degenerate. An element Theorem let r be a <non-singular atom of A. Then the interval algebra d; is isomorphic to d. !j. Let A be any integral relation algebra with a normal representation and Proof. An atomic interval relation a b [ 1 c d must satisfy b < a; r, c < r”; a and d < r”; a; r for atoms a, b, c and d. But since r is non-singular from the triangle axiom, see Section 2 (9) ) . Therefore, interval relations are of the form a; r is an atom and so are r’; a and r’; a; r (follows the only atomic 280 R. Hirsch/Artificial Intelligence 83 (1996) 267-295 The mapping which takes this matrix and sends it to the atom a is the required isomor- phism. 0 Theorem 6. Let A be simple with a normal representation. (1) The interval algebra d: is integral. (2) If IAl > 1 then the pair algebra A2 is not integral. Proof. ( I ) It can be shown that a relation algebra is integral if and only if the identity is an atom (see [ 121). Let St(r) = 1’ A r; rW and end(r) = 1’ A r”; r. Since r is an atom, both st(r) and end(r) are atoms too (follows from the “triangle axiom”). Now it is not hard to show that the identity of dz, namely contains exactly one atomic pair relation r r 1’ 1’ ._, [ 1 [‘:(r) em-I(r)] which is an atom of d; and so the interval algebra is integral. (2) The identity of A2 is not atomic since for each atom r E A it contains the element [ 7) en;(r)] r,r’ 5. Points from intervals So far we have shown how to build a pair algebra and interval algebras from a point algebra. It will be useful if we can work backwards too: given a representation of a pair or interval algebra we would like to retrieve the points from the representation. For a representation of a pair algebra this can be done by identifying pairs of the form (x, X) with the point X. However, this won’t work with intervals because an interval is always related by the atom r whereas (x, X) is related by the identity. So instead we recover the points in a different way. Theorem 7. Let A be a simple relation algebra with a normal representation. ( 1) Let Y be a representation of the pair algebra d2. There is a representation X of A with Y % X2. Such an X is unique up to isomolphism. (2) Let Y be a representation of the interval algebra A:. There is a representation X of A with Y Z XF. Such an X is unique up to isomorphism. Proof. ( 1) Let Y be a representation of the pair algebra A*. Define a domain D to consist of all the elements x E Y such that R. Hirsch/Arti&ial Intelligence 83 (1996) 267-295 283 We have shown that the interval representation Y is isomorphic to XF where X is the of A constructed representation suppose T : Z,’ g Y where Z is a representation above. To show that X is unique up to isomorphism, of A. For all z E Z map z to {iEY: :3wEZ[( z,w> E Z,2/V(Z,W) =i]}. Check that z maps to an element of X and that the map is an isomorphism. 0 Corollary 8. If A is categorical in some infinite cardinal@ K then d2 and d: are K-categorical too. Proof. Follows from Theorem 7. 0 Note. The converse does not always hold: the interval algebra d: can be K-categorical but the point. algebra A may not be. It is true that A can have only one representa- of d; but it may have other tion X of cardinality representations K such that Xz is a representation too (either not fully universal, or not complete). inhomogeneous The next c.orollary was proved first in [ 151 (see also [ 171) but follows here from a more general result. Corollary 9. The Allen interval algebra d is o-categorical. Proof. We have already seen that P is o-categorical. So Corollary 8 gives the result. 0 to recover A from d2 directly, without considering Is it possible Of course we have defined d2 using a special notation-two-by-two its Problem 1. We have shown how to recover a representation of A2 (or A;). representations? matrices with really want to do this algebraically. Formally, V c I3 such that V is definable from 13 and D % A? so d is isomorphic to the elements indices, l’, 1’-but we indexed by if B E d2 then is there a relation algebra of A from a representation 6. Complexity of interval algebras for relation algebra The Really Big Complexity Problem is to clearly map (RBCP) out which relation algebras are tractable and which are intractable. Let us make this more precise. When we talk about 2 over a class of for each 4 E 2 is 4 satisfied L-structures K we are thinking of the following question: in terms of the length of 4. If in some structure then we have to be careful 2 contains a countably about the length of the representation languages most complexity infinite number of different symbols of each symbol, but for countable from K? The complexity of a set of L-formulas classes are indifferent8 to these distinctions. the complexity is measured ’ A word of (caution: the complexity can be reduced if the representation of symbols is very long. Testing I (n Is) but the whether a number, n, is prime can be done in polynomial time if n is represented as III . complexity is worse in the usual decimal notation, assuming P # NP. 284 R. Hirsch/Art$cial Intelligence 83 (1996) 267-295 Considering now the complexity of a relation algebra A we want to know whether of A. The formulas we consider are sentence. So we want in the size to a first-order existential in time polynomial that decides, in some representation of A. in a representation formulas are satisfiable network N is equivalent certain networks-a to know for which A is there an algorithm the network embeds of a network, whether there are few known results: time algorithms In this direction [28,29]. have cubic intractability in temporal The reasoning 2, Examples) Z is NP-complete problematic It might be hoped that there are other interval algebras expressive hope and show that all pair algebras are intractable that all non-degenerate but leave open the conjecture and in applications relation algebras. than point-based the point algebras P and M for satisfiability but the Allen of the Allen (see Section interval algebra interval algebra has been [ 21. to databases and planning that are tractable and yet more to that In this section we give no succour if they have infinite interval algebras are intractable representations, too. Problem 2 (Decidability). the problem of testing open problem satisfiable d-networks problem implies general network consistent the satisfiability of even atomic d-networks It is not clear, and seems rather unlikely, that for each A is decidable. So an is to find one fixed relation algebra A such that the class of all atomic, the decidability of the atomic network a is of the general network atomic problem-for if one of them the decidability simply is undecidable. Of course, refinements satisfaction and try all possible’ then so is the original network. We now move on to the question of complexity with a basic lemma: Lemma 10. Let A C t3 be relation algebras such that every representation of A embeds to in some representation the network satisfaction problem for l3. of t3. Then the network satisfaction problem for A reduces the case that for any representation X of B the reduct of X to A is of A embeds of A. Since we are also assuming that any representation It is always Proof. a representation in some representation of A if and only consider N as a B-network B and this will tell you whether N is satisfiable in a representation of t? it follows if it embeds that an d-network N embeds in a representation then decide whether N is satisfiable of B. So, given an d-network N first of in a representation in a representation of A. 0 We want to prove that virtually all the pair algebras are intractable and we do this by first constructing and then applying the simplest possible pair algebra C*, showing that this is NP-complete the lemma. Let C be the finite relation algebra with just two atoms 1’ and If where #; # = 1. The class so we can build of this has domain S x S where S is any atomic networks of this relation algebra a pair algebra C*. A normal infinite set, i.e., the domain consists of pairs from S. form an amalgamation representation ‘) When considering infinite, atomic relation algebras we should assume that there is only a finite disjunction of atoms on each edge of a network. It is necessary that the relations on an edge are at least recursive for there to be a meaningful definition of complexity. R. Hirsch/Artificial Intelligence 83 (1996) 267-295 281 (x is intended to be a pair of equal points). Define a representation X of A with domain D by mapping the atom r E A to Y” (i r r 1 ) 1’,1’ . This will be a binary relation on the domain D and is clearly a representation since it is a restriction of Y. For the isomorphism Y g X2 let y E Y be arbitrary. A . ..’ Y ,.........,......: J& .** *f ..** . ..’ ..*- *..’ : 1 i f .i f-x , / There are unique points XI, x2 as in the diagram satisfying and (~~~21 k 1,l’ ;, ;I [ 1 1.1’ . This follows from the fact that Y is a representation of d2. The required isomorphism maps y to thle pair (XI, x2). For uniquieness, let Z be any representation of A such that there is an isomorphism B from Y 1.0 Z2. Let x E X C Y. Applying E to x can only give a pair of the form (z, z) E Z2-this is an follows from the definition of X and the fact that 3 isomorphism. The mapping which sends x to z is an isomorphism from X to Z. (2) The relation same-start = lb r- [ r r’;r I defines an equivalence relation on Y. Let the set of equivalence classes be D, these will form the points for the representation (X, D) of A. Next we represent the atoms of A. If a is an atom and p, q E D, let It is a routine exercise to check that this defines a representation, (X, D), 7 of A. To get the isomorphism take any interval i E Y. Let 5’ map i to the pair (p, q) E XF where p is ’ Recall that we can drop the D and simply call the representation X. 282 R. Hirsch/Art@cial Intelligence 83 (1996) 267-295 the equivalence and ‘meets’ is the interval class of intervals relation to which i belongs and q is the set {j E Y: i meets j} r lk [ r; r r I. that q is a point Check pair (p, q) belongs to X(r), hard to show that 2 respects all the operations. in X (i.e., an equivalence in other words that (p, q) is an interval class under ‘same-start’) and that the in X,‘, It is not B is injective, for if Z(i) = B(j) = (p,q) then i, j E p so i and j are related by lh ._ r i r r”;r 1 the definition of q we see that for all intervals k, i meets k if and only By considering if j meets k. Hence i and j are also related by Intersecting the two relations between i and j we deduce that i relates to j via which is the identity To show that 3 is surjective, Let i and j be any representative relation on intervals. Hence i = j. let (p, q) be any pair of points elements of p and q (respectively). from X related by r. i relates to j by but since [r:;r /;&I = [:: r:;r]+; r;r] there must be an interval k such that the i and k are related by and k and j are related by lb r- [ r r”;r r r; r 12 [ r 1 I. This interval k satisfies B(k) = (p,q). R. Hirsch/Artificial Intelligence 83 (1996) 267-295 285 The atomic interval relations are meets = # # [ 1 fl e,j ’ I’ swap = # 1’ # # [ 1 [ I, tl.tl ’ met-by = # 1’ 1 1 same-start = 1’ I 1 1 fl # tl,ll’ disjoint = # n,n ’ tt iltf, tt # # ” plus three relations with subscript 1’, #, three with #, 1’ and two with subscript l’, l’, atomic pair relations -fifteen above forrn algebra can be calculated and ‘meets’; ‘swap’ = ‘same-end’. in all. The identity the atoms of the interval algebra Ct. The composition “by hand” e.g. ‘same-start’; l& = er V e2. The first seven listed table for this pair ‘same-start’ = ‘same-start’ V el Theorem 11. The network consistency problems for the relation algebras C2 and Ci are NP-complete. Proof. Any transitively consistency edge and s,ee if the network the Hamiltonian circuit problem problem must be in NP-non-deterministically closed atomic network so the network choose an atom from each is transitively closed. We show it is HP-complete by reducing in C2 or Ci is consistent Let G be any undirected i.e., a finite set of nodes and edges. Let the number of nodes of G be n. We will build a Ci-network N in such a way that N is consistent of N will a Hamiltonian be done in time polynomial circuit. The construction if G contains if and only in n. to it. finite graph, ( I) Turn G into a directed graph by arbitrarily choosing a direction for each edge. Call it G’. that actually holds (2) Make a C2-network M with one node for each edge of G’ and setting M(e, f) the two edges e and f. For in G’ let M(e, f) = ‘disjoint’. Note that (a) M of C2), (b) for distinct edges e and include 1’ or ‘swap’ and (c) all the relations to the relation example, is consistent f the relation between used are from Cf so G’ is a $-network. if e and f are disjoint in a representation in G’ between them cannot (it embeds 286 R. Hirsch/Art@cial Intelligence 83 (1996) 267-295 (3) Extend M to M+ by adding n new nodes XI , . . . ,x,, in such a way that each xi to be equal or the ‘swap’ of one of the original nodes of M and for xi to be equal or the ‘swap’ of any of the nodes is constrained so that it is still consistent of M. This construction is given later. (4) The statement “i shares exactly one endpoint with j” is defined to mean that (i, j) b meets V met-by V same-start V same-end. Add to the network the assertions xi shares exactly one endpoint with xi+, fori=l...n- 1, x,, shares exactly one endpoint with XI and for all the other pairs xi, xi, xi disj x,i . Call this network N. circuit circuit and N is therefore consistent. Conversely, then the xi can be chosen If G does contain a Hamiltonian Hamiltonian any model a graph isomorphic the construction to G. enforces that the intervals Xi form a Hamiltonian if N is consistent to be the edges of a then in circuit on It remains the construction to show how to perform in (3). Let N be any consistent such that for distinct nodes a and b the relation N(a, b) does not include a node x so that coincide with any though possibly in the Cf-network equality or ‘swap’. We show how to add extra nodes x must coincide with one of the nodes of N and x can consistently node of N. a coincides with b means in the opposite order. The size of the extension will be bounded by a polynomial size of N. that they have the same endpoints, to N including First group the nodes of N in pairs (possibly with an odd one left). For each pair u and b we add the nodes u’, b’, w and &b and set a’{ 1’ V swap}a, b’(l’ V swap}b, u’{disj V starts}b’. This constrains possibly below. a’ and b’ to lie on the same edges as a and b (respectively) though and a’ and b’ look like one of the two diagrams in the opposite directions, R. Hirsch/Artificial Intelligence 83 (19%) 267-295 287 This is where we need the assumption that they don’t share two endpoints. Now let w{meets or met-by}a’ w{meets or met-by}b’. So w must join the two “top ends” of a’ and b’. Finally let x,h{meets or ends}w, x,h{ 1’ V ‘disj’ or ‘starts’}a’, x,,b{ 1’ V ‘disj’ or ‘starts’}b’. x,b finishes at one or the other endpoint of w (so it can’t be disjoint b’) and the second constraint consistent. forces Xob to be equal to either u’ or 6’. Either choice from both a’ and is We now have a set of new nodes of the form Xab, about half as many as we started with and distinct nodes X& and x,d still share at most one endpoint. Therefore we can repeat the whole procedure and construct new nodes xabcd that must coincide with one of x,,/, or x,d, i.e., they coincide with one of a, b, c or d. This process is repeated about log(n) to be any one of the original nodes of the graph. This is done for each of the nodes Xi. is a single node x constrained times until there If the original graph G has n nodes then M has no more the total number of nodes added each edge of G). One iteration of the construction nodes and 2n2 Cy$“’ (4)’ < 4n2 (this nodes are paired off). Thus M+ has about n2 + n x 4n2 M 4n3 nodes-certainly by a polynomial is only approximate because of rounding in the construction in n. 0 than n2 nodes for of Mf adds on about fn2 x 4 extra of each Xi is about the errors when (one bounded Corollary 12. The complexity of the network satisfaction problem for any pair algebra A2 with injinite representations is NP-hard. Proof. The proof than two, A2 must have a subalgebra the element this subalgebra includes is based on Lemma 10. Since A has representations isomorphic of size bigger to C2 (in Theorem 11). For example, -1’ 1’ -1’ [ -1’ I. _,’ -1’ - I ’ is the complement of the identity relation of A) which corresponds (where the atom C*. It remains A2. Since ‘meets’ of C2. A2 has similar elements corresponding that any representation of C2 embeds representations, to show .A2 has infinite by the Liiwenheim-Skolem to to the other atoms of in a representation of lo it has theorem, I” For any relation algebra A it is possible to make a first-order language L = t(A) with one binary relation symbol for each element of A and then define an L-theory Z whose models are exactly the representations of A. 288 R. Hirsch/Art@cial Intelligence R3 (1996) 267-295 arbitrarily big. So for any representation X of C2 take a representation representations Y of A2 at least as big as X. Use Theorem 7 to find representations A such that X Z x2 and Y 2 y2. y is still as big as x, so x can be embedded any way you like provided distinct points an embedding of X into Y. Now use Lemma 10. 0 remain distinct. This embedding determines x of C and y of in y that if A2 does not have infinite representations finite bound n say. An d2-network its representations have sizes with a uniform Problem 3. Note, by compactness, then N without equality on any edge is certainly If it has n or less nodes then its consistency one atom from each edge and seeing are at most 2” possible choices and non-isomorphic then, that the network satisfaction problem to prove the tractability of the satisfiability problem relation if it embeds in each case representations is allowed. (and each representation in any of the representations. inconsistent can be tested in constant if it has more than n nodes. time by picking There there are only a finite number of to check. It seems, is tractable. However, we have not been able for pair networks where the equality is finite) Problem 4. The situation with interval algebras r E A the interval algebra d: Z A and this is considered the following problem hard. for any non-degenerate interval algebra with is less clear. For non-singular atoms to be a degenerate case. But the complexity of the network satisfaction is NP- remains unproved: representations conjecture infinite 7. Intervals with metrics The metric point construction is a rather uninteresting fixed atomic over-restricted with the first one consider non-atomic representation, system M has a normal namely Q and so the of Theorem 3 produces a relation algebra of intervals with metrics. But this algebra of intervals as an interval here is defined by a single, to be of the same size, an as any pair of points to it is necessary is more usually considered that all intervals have definition. An interval relation. That means to deal with these the second. less than In order networks. 7.1. Definition of M2 ( 1) An interval is a pair of rationals (2) An elementary metric interval relation A is a two-by-two matrix (p, q) such that p < q. A11 A12 ~421 A22 [ 1 where A1 1, A12, A21 and A22 are intervals with rationals endpoints that the interval A11 has endpoints A,, A:,, etc.) such that the M-network (let us say R. Hirsch/Artijicial Intelligence 83 (1996) 267-295 289 (O,cQ) Pi EC P- A22 4+ . (OPcQ) A21 A12 All 4- satisfies the transitive closure conditions A[ > A,, At, < A$, A;* < AT., etc. (p-,p+),(q-,q+) E Air, q+ - p- E A12, q- - p+ E A21, q+ - p+ E A22. Such relations are composed according to the rule + A asserts that p+ > p-9 q+ > q-1 q- -P- (3) (4) = (41 +&I) n (42 +&I) (A21 + Bll) n (A22 + B21) (AH + B12) n (Al2 + Bz2) (A22 + B22) 1 ’ (A21 + B12) n (5) (6) in other words ordinary matrix multiplication with addition of intervals and intersection instead of multiplication and addition respectively. Converse is calculated by and there are similar definitions for open and semi- where [p, q] - = [ -4, -p] open intervals. More general metric interval relations can be formed as disjuncts of elementary ones. The complement of an elementary relation will typically be a disjunct. Non-elementary matrices can be introduced e.g. R V S. The product tRVS).(TVU) =RTVRUvSTvSil Thus the disjunct i{<, >}j can be expressed as (Ii, j) k (-CcbO) (-co,o> v (--m,O) (-o&O) [ 1 [ (0700) (0900) (O,m) (O,m) 1 ’ Note that this could not be expressed as a network in the point algebras P or M. (7) The identity is [O,Ol (--wo> [ (O,m> to,01 1 (note: that this is not atomic) and the complement of a relation 290 R. Hirsch/Artificial Intelligence 83 (1996) 267-295 is Here, the complement a “lower” preceding The efficiency will be enhanced interval, item to interpret (8) of an interval i.e., - [p, q] = ( -00, p) V (q, co). Use the convention is taken to mean to union of an “upper” and in the the complement matrix. if a disjunction is reduced by the rule: M V N + if M & N (where M C N if each of the four entries of M is a subset of entry of N). Also for matrices with three of the four entries N the corresponding equal provided D V D’ is an interval. to check it is necessary As before, is associative is isomorphic to composition that composition that matrix product to show that there exists a third and this is done of relations. The critical by showing section of the proof takes two intervals 5 and p related by the matrix product R; S. It interval 7 such that d and 7 are related is required from the fact that a simple M- by R and p and fi are related by S. But this follows interval on each edge) network N (a transitively has the extension property-for that any L of N it can be shown embedding to an embedding of N to Q (see [ 71 for the details). of L into Q can be extended closed M-network any subnetwork with only one 7.2. Expressive power This system is capable of expressing all of Allen’s interval relations e.g. ‘overlaps’ is written as (0, CQ) (-oo,O) i (60;)) . (O,oo) 1 A constraint on the duration of i can be expressed using this format as (i,i) /= [O~OI L-e, -dl IkeI [0, 01 1 where d and e are respectively qualitative expressive power of Allen’s system of the metric system M of Dechter, Meiri and Pearl [6]. lower and upper bounds on the duration of i. Thus, the is combined with the quantitative power R. Hirsch/Artijicial Intelligence 83 (1996) 267-295 291 7.3. Complexity of M2 It is possible to use any of the algorithms from the literature this language, but for the present suppose we use the fixpoint algorithm calculate the transitive closure of a network: in conjunction with [ 171 to from Repeat N := N= A N Until N G N2 where N2(i,j) =AN(i,k);N(k,j). k This is equivalent to the Allen propagation algorithm. is a highly expressive language the of a network will be at least as bad as its two sublanguages M and A, i.e., in so Turing machine could solve the problem time (below) case can be solved and the worst-case complexity of checking in cubic In fact, a non-deterministic time since the non-disjunctive checking But if we Irestrict to certain for M2 is NP-complete. fragments of the full language we obtain the following M2 consistency it is NP-hard. polynomial consistency results. in cubic an SIP), with only one time. This follows can be done in cubic from the proof in [6] closure of an M-network In turn this result follows from the extension property mentioned can be checked the transitive their terminology network. l A network with only elementary metric interval relations on the arcs (no disjuncts) that computing interval on each arc (in the minimal earlier. l If all the relations on the arcs of the network are pure Allen relations, i.e., equivalent the matrix the same result as i.e., algorithm provides to a union of some of the thirteen primitive is calculated product the Allen consistency a useful approximation the same complexity but the Allen propagation table. Therefore is NP-complete, transitivity checking time) will produce time, and computes results will hold, in constant relations, interval (which then l For general metric terminate the problem Ithen without the problem of whether loss it may be assumed at all. If the metric values are commensurate In this case the fixpoint algorithm will certainly Dechter, Meiri and Pearl left open must tional) integer bounds. then the algorithm the number of integers will terminate the same when analysing M2 except the bound must apply to the number of atomic matrices with integer entries, in within the following in any constraint has a fixed bound that all the metric constraints in cubic time. The argument is NP-complete. the fixpoint algorithm (the ratios are ra- have and if the constraint. We answer question affirmatively the general termination is exactly terminate section. lying in cubic time. constraints with disjunctions, The remaining problem is that calculating the fixpoint a complete deductive mechanism. It is easy to devise (transitive inconsistent closure) but transitively is not 292 R. Hirsch/Arti@cial Infelligence 83 (1996) 267-295 closed networks in M and hence also in M*. However, computing the transitive closure may give a useful first approximation for a consistency checker which then proceeds by brute force to test each choice of disjunctions for consistency. (The constraint technology will clearly be useful here.) 7.4. Proof that the @point algorithm terminates on temporal constraint problems ( TCPs) A TCP is defined in [6] as an M/-network where the metric constraint on an edge is a finite union of intervals, possibly with irrational endpoints, e.g. h 11.21 v lm,51 i-t, 11 V le.71 A a lI,Jzl C Let us gloss over the problem that algorithms do not handle real numbers as these are not all finitely representable and answer an open problem raised in [6]. Theorem 13. The &point algorithm (see Section 7.3) always terminates jinitely. Proof. One iteration of the algorithm takes some triangle (a, b, c) from the network N and replaces N(a, c) by N(a, c) fl (N(a, b); N(b, c)). This composition is calculated by addition of intervals. Let S(N) be the (finite) set of all endpoints of intervals then label each instance mentioned in N. If a number occurs more than once in S(N) separately in order to distinguish them. Claim. At each stage the relation between nodes n and m is either 8 (inconsistent) or equal to a finite union of intervals and each endpoint is a sum of distinct” elements from S(N). This claim can be proved by induction on the number of iterations of the algorithm. Now there are only a finite number of possible sums that can be produced this way and therefore only a finite number of possible intervals that can occur on an edge at any stage of the algorithm. The relations on each edge are never increasing so each edge can be placed in the queue a finite number of times and therefore the algorithm must terminate. Cl ” Why must the elements in the sum be distinct? Because if the same element occurred twice it would correspond to a constraint on the edge (a, c) created by a looping path. However, either a loop produces an inconsistency (so the algorithm terminates) or an equally tight constraint is produced from the path with the loop deleted. R. Hirsch/Art@ial Intelligence 83 (1996) 267-295 293 and j{overlaps}k we should deduce that i{<, meets, overlaps, 7.5. Examples (1) From i{during}j starts, during}k. (030;)) (0900) I (ivk) [ and (-0090) (j-k) k ((0,~) (O,oo) (-cG0) (-OGO) (--OGO) (O,f=) 1 (0900) I[ (09 00) (O,m) ; ((0,x)) != (-cm,O) (600) 1 (-m,O) n(o,d 1 00,00) n(-co,co) (- (-00,00) n (-00,00) (+,00) (-03,~) n (0,00) /= ’ (Lk) gives or i.e., (kk) + (-cQ,oo) (_ ~,~) (0900) (O,ocJ) 1 (2) which says that both endpoints of i must lie before the end of k, as required. Let j start at least 5 seconds after i finishes and let j finish less than 10 seconds after i starts. It should be possible to deduce that the duration of i is less than 5 seconds. Well, < 10 (i,j) + [ so (0900) (OvlO> (5900) (59 00) I and (j,i) + [ (-oo,O) (-lo,o) (-m--5) (_oo,_5) I (i i) + , (-10910) (-5,(x) [ (-0095) (-009~) 1 . Intersecting this with the initial constraint on i gives [O,Ol (-5,O) (i*i) t= [ (0,5) (0,O) 1 as required. 7.6. Comparisons A numb’er of other attempts have been made to combine qualitative and quantitative The language M* of this paper has two main advantages. reasoning [ 13,14,18,23]. Note would be necessary expressive power checking competing More systems). tentatively, case, the simple algorithm very straightforward meets in Allen’s language 294 R. Hirsch/Artificial Intelligence 83 (1996) 267-295 it uses the same uniform Firstly, refer to a special metrics. All constraints matrix multiplication. By contrast, handle metric and interval are represented table when dealing with an interval constraint and a separate representation for all relations. There to table for are calculated by [ 13, 14,231 are all essentially hybrid systems which as matrices and compositions is no need information separately and translate from one to the other, The other advantage of M2 is its expressive power. When disjunctive are to express constraints which are neither point-based metric nor i either starts more than j ends or ends more than 10 seconds before j ends, we use the to assert that interval relations relations. For example it is possible interval allowed qualitative 5 seconds after interval disjunction t-co,51 (-c0,5) [ ” t--00,5) (-(X,5) 1 [ t--o;),m) 10) (-co, (10,~) (-oo,lO) ’ 1 that this could not be represented directly to construct additional is achieved without additional in any of the competing It intervals and put constraints on these. This of cost of M* is the same as that in (the complexity complexity systems. the consistency of a network in a sublanguage there is one further advantage. When dealing with the disjunctive for combining matching disjuncts the efficiency considerably. Disjuncts (see Section 7.1, (8) ) is like before, and will improve to translate (O,co) to, 00) [ ” t&co) to, ml 1 (O,oo) (O,oo) (O,oo> 1 [ [O,Ol which gets rewritten as (0, ml [O, 03) to, 00) (O,m> 1 thus eliminating average case performance judged, eventually, by empirical are hard to provide results. a disjunct which could improve the efficiency. Theoretical in this area so this is most likely results about to be 8. Conclusion An interval relation algebra can be constructed it has a normal representation. This allows us to construct a metric interval algebra from the like metric system M. This representation that allow quantitative, metric ;{ <, >}j. It is thus more expressive information. As with these systems algorithm will be complete and of cubic complexity permits than other systems if there are no disjuncts but its performance from a point relation algebra provided the expressing of Allen type disjuncts [ 61 the propagation is intractable. in general R. Hirsch/Art&in1 Intelligence 83 (1996) 267-295 295 We have shown that a large class of relation algebras, representations, algebras have a tractable network satisfaction problem are all intractable. The general problem of deciding which remains to be solved. the pair algebras with infinite relation References 1 I 1 J.F. Allen, Maintaining knowledge about temporal 12 1 J.F. Allen and J. Koomen, Planning using a temporal world model, Inf. J. Compuf. Artij Infell. 8 ( 1983) intervals, Commun. ACM 26 (1983) 832-843. 71 l-714. the representation problem of distributive semigroups, Preprint, Institute, Hungarian Academy of Science, Budapest I 4 1 H. Andnika, D. Monk and I. Ntmeti, Algebraic Logic (North-Holland, Amsterdam, 15 1 L. Chin and A. Tarski, Distributive in the arithmetic and modular laws 1991). of relation algebras, Univ. [ 3 1 H. Andrika, On Mathematics semilattice-ordered ( 1989). Cu@rn,;a Publ. Math. N.S. 1 (1951) 341-384. 16 1 R. Dechl:er, 1. Meiri and J. Pearl, Temporal constraint networks, Ar?$ InfeK 49 (1991) 61-95. [ 7 1 R. Hirsch, Relation algebras of intervals, Ph.D. Thesis, Imperial College, London [ 8 I R. Hirsch and 1. Hodkinson, Step by step-building representations in algebraic ( 1994). logic, J. Symbolic Logic (to appear). 19 I B. Jonsson, Varieties of relation algebras, Algebra Universalis 15 ( 1982) 273-298. I 101 B. Jonsr,on, The theory of binary relations, Logic (North-Holland, Amsterdam, I I I 1 B. Jonsson and A. Tarski, Representation problems I 12 I B. J6nsson and A. Tarski, Boolean algebras with operators, Am. .I. Math. 73 (1951) 891-939. I I3 1 H. Kautz and l? Ladkin, Integrating metric and qualitative I99 1) 245-292. reasoning, temporal in: H. Andreka, D. Monk and 1. Nemeti, eds., Algebraic for relation algebras, Bull. Am. Math. Sot. 54 ( 1948). in: Proceedings AAAI-91, Anaheim, CA (1991) 241-246. I 141 P. Ladkin, Metric constraint satisfaction with intervals, Tech. Rept. TR-89-083, ICSI, Berkeley, CA (1989). I I5 1 F? Ladkin and R. Maddux, The algebra of convex time intervals, Tech. Rept., The Kestrel Institute, Palo Alto, CA ( 1987). I 16 I F’. Ladkin and R. Maddux, On binary constraint networks, Tech. Rept. KF?i.U.88.8, The Kestrel Institute, Palo Allo, CA (1988) 76. I I7 1 P. LadkIn and R. Maddux, On binary constraint problems, J. ACM 4 ( 1994) 435-469. I I8 1 G. Ligozat, Weak representation of interval algebras, in: Proceedings AAAI-90, Boston, MA ( 1990) 7 15-720. I I9 1 R. Lynclon, The representation [ 20 I R. Lynclon, The representation ( 2 I 1 R.D. Maddux, Non-finite axiomatizability of relational algebras, Ann. Math. 51 (1950) 707-729. of relation algebras, II, Ann. Math. 63 ( 1956) 294-307. results for cylindric and relation algebras, J. Symbolic Logic 54 (1989) 951-974. I22 I R. Maddux, The origin of relation algebras relations, Studia Logicu 3/4 ( 199 I ). in the development and axiomatization of the calculus of I23 I I. Mein,, Combining qualitative and quantitative constraints in temporal reasoning, Tech. Rept. R-160, UCLA, Los Angeles, CA ( I99 1) I241 D. Monk, On representable 125 1 I. Ntmeti, Algebraisations 570. relation algebras, Michigan Math. J. 11 (1964) 207-210. of quantifier logics, an introductory overview, Stud. Logica 50 ( 1991) 485- I26 I A. Tarrki, Contributions on the theory of models, Proc. Koninkl. Nederl. Akad. Wetensch. Ser. A 57 ( 1954) 572-588; 58 ( 1955) 56-64. I27 ( J. van 13enthem. The Logic of Time (Reidel, Dordrccht, Netherlands, I28 I M. Villain and H. Kautz, Constraint Represenfafion ( 1986) 377-382. propagation algorithms 1983). for temporal reasoning, in: Knowledge I29 I M. Villain, H. Kautz and P van Beek, Constraint propagation algorithms for temporal reasoning-a revised report, Altos, (CA, 1989) 373-381. in: Readings in Qualitative Reasoning about Physical Systems (Morgan Kaufmann, Los 