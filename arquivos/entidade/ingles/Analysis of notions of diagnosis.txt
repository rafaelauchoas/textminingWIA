ELSEVIER Artificial Intelligence 105 (1998) 295-343 Artificial Intelligence Analysis of notions of diagnosis Peter J.F. Lucas * Department qf Computer Science, Utrecht Universiry, PO. Box 80.089, 3508 TB Utwcht, The Netherlands Received 27 November 1997 Abstract Various formal theories have been proposed in the literature to capture the notions of diagnosis framework for the analysis of diagnosis underlying diagnostic programs. Examples of such notions are: heuristic classification, which is used in systems incorporating empirical knowledge, and model-based diagnosis, which is used in diagnostic systems based on detailed domain models. Typically, such domain models include interactions among modelled objects. In this paper, knowledge of causal, structural, and functional a new set-theoretical the framework is presented. Basically, the net impact of knowledge bases distinguishes between functions are to for purposes of diagnosis, and ‘notions of diagnosis’, which define how evidence be used to map findings observed framework offers a simple, yet powerful as well as for proposing new notions of diagnosis. A theory of flexible notions of diagnosis, called refinement diagnosis, is proposed and defined in terms of this framework. Relationships with notions of diagnosis known from the literature are investigated. 0 1998 Elsevier Science B.V. All rights reserved. ‘evidence functions’, which characterize for a problem case to diagnostic existing notions of diagnosis, solutions. This set-theoretical tool for comparing Keywords: Diagnostic systems; Semantics of diagnosis; Formal theory of diagnosis 1. Introduction Diagnostic Intelligence. In the burgeoning computer programs were among in the field in the 1970s dealt differed In a sense, this was a consequence of the additional goal of the development and problem-solving of applied Artificial and 198Os, diagnostic with similar, or related, problem domains, considerably. of many of these, now classic, programs: methods. Only after researchers experienced the first systems developed field of expert systems these systems that developing reliable diagnostic systems to explore representation abound. Although their underlying applications frequently principles often * Email: lucas@cs.uu.nl. COO43702/98/$ - see front matter 0 1998 Elsevier Science B.V. All rights reserved. PII: SOOO4-3702(9X)0008 1-2 296 l?J.F: Lucas /Artificial Intelligence IO5 (1998) 295-343 was much more difficult underlying diagnosis were actually poorly understood. than previously thought, it was recognized that the principles formal aspects of diagnosis was undertaken, with into the nature of diagnostic problem solving. For example, Chandrasekaran Starting about halfway through the 1980s a significant amount of research on conceptual the aim of acquiring more and in terms of a small number behaviour of the diagnostic process conceptually tasks’ [6]. Instead of studying systems, other researchers have focussed on representation issues in diagnostic the problem-solving and insight colleagues have analysed ‘generic problem-solving diagnostic systems. Where in many early diagnostic captured approaches became (cf. [2,14]), and nonindustrial approach advocates of a problem domain. For example, interactions elements systems INTER [17], SOPHIE among components in a domain. Model-based in the form of empirical increasingly the construction of knowledge-based systems diagnostic knowledge from experts was classification popular for building diagnostic systems areas, such as medicine rules [4], in later systems model-based in both industrial (cf. [19,40]). The model-based systems based on explicit models the structural and functional among interactions in the early system, or the causal such models describe of a physical diagnosis was, in fact, already explored [43], and ABEL [27]. Although the introduction [3], CASNET of the model-based impact on the field of diagnosis, into the process of diagnosis. Real fundamental tions had a significant insight diagnostic process was yielded by subsequent diagnosis. approach to building diagnostic applica- it did not immediately provide deep of the nature of the the formal aspects of understanding research concerning An early formal theory of diagnosis was proposed by Reggia and colleagues causal knowledge of abnormality covering causal theory of diagnosis, theory, or parsimonious of set theory, called set-covering in the set-covering by means of a binary essentially by determining whether actually observed causal relation. Subsequent work has yielded several algorithms in practical applications diagnoses efficiently reasoning to be NP-hard is known theory and its variants have been performed by several researchers [29,38,44], although [5]. Experimental relation, which is employed in general to compute set-covering this type of diagnostic studies of set-covering [21,34,41]. findings can be predicted using the in terms theory [35]. Basically, is represented diagnoses, for computing The formal aspects of diagnosis employing using logic as the primary is formalized diagnosis represented as logical implications tool [ 11,13,30,32]. as reasoning of the form causal knowledge have also been studied, In the logical theory of abductive diagnosis, to causes, with causal knowledge from effects causes + effects abnormalities type of reasoning of the form above and under certain conditions, or faults, but where causes are usually situations. This abductive implications effects are conjunctions effects. Because for certain observed diagnosis as well. The logical covering in set-covering findings, theory, because they may also literals, would amount is contrasted with deduction, which include normal for like that given causes and to to find causes this theory may be viewed as a specific theory of abductive theory of abductive diagnosis than set- to explicitly is more expressive represent various types of interaction, theory causal relations are also exploited from causes to reasoning it is possible of positive I?J.E Lucas /Artificial Intelligence IO5 (1998) 295-343 297 set-covering theory. For example, in the original set-covering in the original leads which is not possible to express or more causes proposed several different versions of abductive diagnosis an implementation investigated reasoning it is not possible occurrence of two findings. Console and colleagues have [9,11], and have also developed of the theory as the CHECK system [40]. Poole and colleagues have abductive diagnosis using Theorist, to the masking of certain a theory and system that the simultaneous for hypothetical [30-321. theory logic-based Approximately at the same time, Reiter proposed yet another aiming at formally capturing diagnosis of abnormal behaviour diagnosis, system, using a model of normal structure and behaviour which was later extended by de Kleer and colleagues normal and abnormal behaviour based diagnosis. Basically, consistency-based components for a discrepancy device, possibly supplemented with predictions of abnormal behaviour, both according a domain model, and actually observed behaviour. The discrepancy a diagnosis inconsistency; and others to be normally theory of in a device or [36]. Nowadays, Reiter’s theory, to deal with knowledge of both to as the theory of consistency- to finding faulty device diagnosis amounts between predicted normal behaviour of a to is formalized as logical to be faulty is established when assuming particular components functioning restores consistency. [ 181, is usually that account referred The abductive and consistency-based theories of diagnosis implications, diagnosis based on empirical associations. When empirical associations then viewed as a classification logical be accomplished by logical deduction, computing The more procedurally refer to this type of diagnostic term heuristic clusszjkation reasoning oriented relation, establishing [8]. the closure of this classification are often contrasted with are represented as a diagnosis can relation. to employed is frequently It has been shown that abductive and consistency-based diagnosis can be mapped that diagnostic each other [36]. Furthermore, both types of diagnosis can be defined, ways, in terms of the logical entailment thought checking, abductive types of reasoning, than that [26]. it appears that characterizing reasoning, deductive diagnostic systems relation [ 12,331. Hence, although systems could be classified as being either based on consistency reasoning, or on a combination of these three is more complicated to in slightly different it was once The conclusion that there is not a unique way to characterize underlying the assumptions a particular abductive diagnosis, type of the diagnosis is logical concerning implication and heuristic raises questions classification. Does in abductive diagnosis, In this paper, it is argued that the formalization diagnosis logical notion of consistency-based consistency provide an appropriate basis for formalizing various notions of diagnosis, and relationships between causes the proper way to formalize similarly, and effects in heuristic and to formalize of diagnosis will benefit from classification? the modelling of interactions between to observable in the context of such a mapping. A set-theoretical aspects of diagnosis using known are taken as example domains. (1) the modelling of interactions from defects findings to express these in detail in Section 4 from the literature. Medicine and simple logic circuits at two levels of specification: the presence or absence of defects or faults, expressed by a mapping and (2) the modelling of an interpretation in Sections 2 and 3, and examined theories of diagnosis of observed is proposed associations framework empirical semantic findings, 298 RJ.E Lucas /Artificial Intelligence 105 (1998) 295-343 As in many other theories of diagnosis, diagnostic problem solving is viewed as a problem, reasoning instance of hypothetical In solving a diagnostic special diagnoses. a hypothesis absence of faults or abnormal processes, such as disorders and next tested with respect diagnoses is a mathematical theoretical This point is illustrated by the development called rejinement diagnosis, which is defined with notions of diagnosis known from the literature are investigated. framework, no particular problem-solving knowledge sense. However, is expressive enough in a particular that are best to diagnostic framework since [3 I], possibly producing multiple, competing concerning in medicine, the presence or is first generated findings, yielding the result of this paper order is enforced. The set- to go beyond common notions of diagnosis. of a theory of flexible diagnosis in Section 5, in terms of this framework. Relationships and observed 2. Interactions among defects and observables between for building the suitability for the construction of medical diagnostic There exists a strong relationship a diagnostic of disease processes can be used, but in other medical domains, of a particular system and the nature of the underlying type of problem knowledge systems, knowledge of domain. For example, the pathophysiology like neurology, diagnostic problem solving mainly relies on the description of normal function, in combination with knowledge Similarly, knowledge of how particular components can be used for the purpose of diagnosis base of a diagnostic system incorporates defects (faults or disorders) and observable examples of diagnostic knowledge bases to illustrate are expected to behave normally or abnormally, any knowledge [15]. Despite such differences, among findings. We shall examine a number of typical [24]. in technical domains, knowledge of the structure of a device, supplemented with structure of the human body of the anatomical representations of meaningful these points. interactions 2.1. Motivating examples employed Frequently types of knowledge systems are causal knowledge, knowledge of structure and functional behaviour, and empirical associations. A small, but is presented of each of these below. types of knowledge in diagnostic example encoded typical, interactions. tree (tracheobronchitis), the following piece of medical knowledge: “influenza which if the patient suffers from asthma, shortness of breath (dyspnoea) of the causal knowledge is depicted, where an arc denotes a cause-effect in the causal graph is indicated the figure may be assumed Causal Consider causes fever and infection of the trachea and bronchial causes a sore throat; will occur as well”. In Fig. 1 (a), the directed-graph embodied in this medical description relationship. The medical meaning ascribed to the elements language, in Fig. correspond of disorders, @ = { ft , f2, f3] denotes a set of observable rules in propositional to to a causal specijcation C = (A, @, R), where A = (dl, d2, d3) denotes a set findings, and ‘R is a collection of logic as our representation representation l(b). Using logic: f! J. E Lucas /Artijcial Intelligence 105 (I 998) 295-343 299 Meaning dl: influenza dz: tracheobronchitis d3: asthma - _ jr: fever f2: sore throat fa: dyspnoea (b) Fig. 1. Causal net (shortness of breath) dl + & 4 + fi dz + A &A&+f3. related to each other; causal implication. A causal specification is typically used in abductive diagnosis based on logic [9,32]. Such a causal specification interaction Note that the disorders dl and d2 are causally can be used for predicting is expressed by logical the presence of certain disorders, (dl), e.g., influenza observable findings. Assuming R U {dl ) b (fl , fz) expresses and that a patient with influenza will have symptoms signs of fever (fl) and sore throat (f2) via a causal mechanism, where b denotes standard logical entailment. Here, the interaction between disorders, and between disorders and observable logical findings will be predicted. entailment: Below, we shall consider various desirable the interactions, qualitative between a cause and its associated effects. by assuming more disorders, more observable nonmonotonic due to the monotonic nature of ordinary is monotonic, representation relationships of uncertain and also findings, between functional behaviour can be Knowledge of normal and abnormal Functional behavioux in effective for diagnosing device problems, where the behaviour of the device is described are obtained terms of relationships and of the way in which from knowledge of the behaviour of the device’s components these components i.e., the structure of the device. Consider a logic circuit consisting of an XOR (exclusive OR) gate X and an AND gate A, as shown in Fig. 2. to the circuit are indicated by 11, I2 and 13; Or and 02 denote the The three input signals two output’signals. input and output signals. These relationships are interconnected, Following the approach described by the following in [18], the normal behaviour of the two components two logical implications: can be VX( (XORG(x) A -Abnormal(x)) + out(x) =xor(inl(x), in2(x))) Vx((ANDG(x) A -Abnormal(x)) + out(x) = and(inl(x), in2(x))) supplemented with the atoms XORG(X) X and the AND gate A, respectively and ANDG(A), which represent the XOR gate like X and A indicate constant (uppercase symbols 300 fV.E Lucas /Artijicial Intelligence 105 (1998) 295-343 Fig. 2. Logic circuit symbols). different behaviour If we assume that a defective gate always produces an output signal that is from the correct output signal, the following logical specification of abnormal is obtained: Vx ((XORG(x) A Abnormal(x)) + out(x) # xor(inl(x), in2(x))) Vx ((ANDG(x) A Abnormal(x)) + out(x) # and(inl(x), i?z2(x))). The structure of the circuit can be described by a collection of equalities, which also indicates how components influence each other, as follows: out(X) = in1 (A) in2(A) = 13 inl(X) = I1 out(X) = Or in2(X) = 12 out(A) = 02. Now, a system S is defined as a pair S = (SD, COMPS), consisting of a system description of the structure and behaviour of the circuit given SD, such as the logical specification above, with a set of components COMPS, with COMPS = (X, A) in the present case. Such a specification is typically used in consistency-based diagnosis. Suppose that the input standard logical entailment, is functioning correctly: to the circuit the following output can be predicted, assuming is as follows: Zr = l,Z2 = 0 and 13 = 1. Using that the circuit SD U {II = l,Z2 = O,Z3 = 1, -Abnormal(X), -Abnormal(A)} b { 01= 1,02 = 1). Similarly, partially abnormal behaviour, assuming part of the components or completely abnormal behaviour can be predicted. to be abnormal, Empirical associations Empirical associations. rience, and usually have the intended meaning of classification denote an associational speci$cation picted in Fig. 1; the corresponding represent knowledge derived-from expe- rules. Let Z? = (A, @, 72’) to the causal medical knowledge de- logical rules R’ is defined as follows: corresponding set of associational fi +4 fi + 4 fi A A -+ 4 19J.E Lucas /Ar@cial Intelligence 105 (1998) 295-343 301 Fig. 3. Associations which can also be depicted as a directed graph, as shown in Fig. 3. Here, logical implication is interpreted as a classification dyspnoea are classified as being due to the presence of tracheobronchitis asthma. Logical classification relation; e.g., R’ U (f2, A} b (d2, d3). i.e., sore throat and together with relations are typically used in heuristic classification. Above, both the terms ‘disorder’ and ‘fault’ were used to refer to malfunction. Since is not used in technical domains, and the term ‘fault’ is not used in the in the term ‘defect’ will be used henceforth to denote both disorders the term ‘disorder’ biomedical domain, medicine and faults in technical devices. 2.2, The interpretation of knowledge as evidence As has been above, diagnostic systems may incorporate a wide variety of to the types of knowledge explored in the examples above, that are useful in a diagnostic setting can be distinguished. the type of knowledge illustrated In fact, in addition knowledge. many other types of knowledge When building a particular diagnostic system, decisions concerning to be included are clearly features appears and observable mappings, interpretation of diagnosis, and will be introduced below. systems also have a number of It systems. among defects findings, which can be captured by means of particular mappings. These to offer a precise to a system for the purpose in this paper, will be shown available in common: that all diagnostic incorporate knowledge of interactions of the significance of the knowledge important. However, diagnostic these features are particularly relevant when comparing functions’ ‘evidence systems called for the representation Let A denote a countable findings, as sometimes necessary set of assumptions concerning defects and possibly also con- of functional set of findings. To be able to make a distinction between function T is introduced. cerning observable behaviour. Let @ be a countable present and absent defects and findings, Positive defects d (findings fects (findings) and absent defects (findings), double negation holds, i.e., ‘(lx) not included defects (findings), and let L\N (@,v) denote a set of negative defects (findings), Ap (@p> and AN (@N) are disjoint. It is assumed Often a set of assumptions A and a set of findings @ will be disjoint, f) and negative defects -d (findings 7 f) denote present de- that the law of = X, for a defect or finding x. If a defect OT finding is to be unknown. Let Ap (@p) denote a set of positive such that that A = AN U Ap and @ = @p U 4’~. in which case A respectively, a negation in a set, it is assumed It is assumed respectively. 302 l?J.E Lucas /Artificial Intelligence 105 (1998) 295-343 merely consists of defects. To ease the exposition, in the following, unless stated otherwise. The power set of a set S is denoted by 8 (S). As a matter of conve- nience, members of AN are frequently denoted by -d, where -(-d) = d E Ap. Similarly, members of the set @N are denoted by 1 f, where again -(-f) this will be assumed = f E @p. The intended diagnostic meaning of a knowledge base of a diagnostic is called a diagnostic specification. It is formally system in terms introduced of defects and findings below. Definition 1 (Diagnostic (A, @, e), where e is a function speci’cation). A diagnostic specijcation C is a triple .E = called an evidence function, such that: (1) for each f E Sp there exists a set D C A with f E e(D) or -f E e(D) (and possibly both); (2) for each D C A: if d, -d E D then e(D) = I; (3) for each D, D’ c A: if e(D) # J_ and D’ C D then e(D’) # 1. If e(D) # I, it is said that e(D) is the set of observabZe_findings for D, and D is consistent; otherwise, it is said that D is inconsistent. The set e(D) stands for the set of observable findings for a set D of simultaneously (present or absent) defects. In terms of diagnostic problem solving, the set e(D) occurring consists of findings for the occurrence of the set of defects D, depending on the findings actually observed. How an evidence function may be used for diagnosing in Section 3; in this section, to investigating we confine ourselves a problem is discussed the meaning of evidence functions. in some way as ‘evidence’ that may be interpreted According to the definition it might hold that if e((d)) = e({d’}), that these findings may alternatively in the set D, i.e., both f and -f which simply means occurrence of the defects some domains d and d’ are taken as synonyms in medicine, disorders would normally be taken as different names for the same disorder. This situation common in medicine. have several findings disjoint. above, we may have that both f E e(D) and -f E e(D), the combined occur given are associated with D. In it follows that d = d’, i.e., the defects if the defects stand for then two different names d and d’ for which the equality holds, is quite findings associated with defects may thus, the sets e(D) and e(D’), D # D’, need not be In general, sets of observable in common; for the same defect. For example, As indicated it is also possible is a form of inconsistency in Definition 1, a set of defects may be inconsistent that is evident for other than syntactic that d, -d E D. This However, example, because D contains defects d and d’ that are incompatible. inconsistency several definitions, for syntactic is a consequence of a semantic it will be convenient reasons; hence, the following definition: just because for syntactic it holds reasons. for reasons, the In this situation, the defects d and d’. In to consider only sets of defects that are consistent that D is inconsistent relationship between ME Lucas /Art$cial Intelligence 105 (1998) 295-343 303 Definition 2 (Syntactic consistency). Let E = (A, @, e) be a diagnostic specification, the set of defects D C A is called syntactically consistent D; otherwise, D is called syntactically then if for each defect d E D: -d $ inconsistent. Next, the notion of maximal syntactic consistency is introduced; it is employed in the following to define particular evidence functions. Definition 3 (Maximal syntactic consistency). Let Z = (A, @, e) be a diagnostic then the set of defects D C A is called maximally syntactically consistent cation, syntactically consistent. consistent and there exists no d E A, d $! D, such that D U {d} is syntactically specifi- if D is Sometimes, a knowledge base is only examined with respect to a hypothesis H, a subset of the entire set of defects A. For this purpose, the following definition is introduced, Definition 4 (Restricted evidencefunction). tion. A restricted evidencefunction function Let C = (A, @, e) be a diagnostic specifica- of e with respect to a set H s A, denoted by elH, is a q~:@W)-=@(@)UI~J such that for each D C H: elH(D) = e(D). From a general point of view, the expressive power of evidence functions is as large logic; the function e may be viewed as similar as infinite propositional normal form of propositional the evidence-function yield, among other function values, e((dl, d2, -fl}) = (f2). {dl, d2, -fl) function theories of diagnosis, as introduced to the conjunctive formulae with defects and findings as literals. For example, (dl A dz) -+ (fl v A) would that the argument is allowed, because A and @ need not be disjoint.) Hence, an evidence in the logic to capture the sort of knowledge as represented in Section 2.1. Consider the following example: is expressive enough of an implication representation (Note Example 5. Reconsider Fig. 1 and the associated edge in Section 2.1. The following diagnostic (dl, d2, Q) and Cpp = {fl, f2, f3), corresponds meaning of this causal specification with respect to diagnosis can be captured by means of an evidence logical specification of causal knowl- specification C = (A, 0, e), where Ap = to this causal specification. The intended function e for which, among others, the following holds: e(M)) c(Vz)) =IfItA) = Cf2) e(W3)) =0 e((d2, &I) = u2> f3) e(M, d21) = e(Ml) e(M,d2,d31) =e(M,d31) =ifl,f2,f31 e((dt, -d2, d31) = 1. The property between dl and d2 is monotonic; e((di)) C e({dl, dz}), i = 1,2, the evidence formally function expresses e is monotonically that the interaction increasing. 304 PJ.E Lucas /Artijcial Intelligence 105 (1998) 295-343 The value e({&, -d2, d3)) = I then d2 cannot be absent (though, semantical reasons. The evidence Section 2.1, by assuming defects. indicates an impossible situation, because it may be unknown); function e actually extends that the specification is also intended {dl, -d2, d3} is inconsistent if dl is present, for in to deal with negative the logic specification The reader has probably noticed that the evidence in Section 2.4 techniques for the partial specification of evidence function above can be specified more functions will be tersely; discussed in detail. For a diagnostic system incorporating knowledge of structure and of normal or abnormal behaviour, the following diagnostic specification is obtained. . A similar convention in Section 2.1. Suppose the logic circuit depicted Example 6. Reconsider provided of a defect in X is denoted by -x. A similar notation A. If Zj = 1, this will be denoted by ij ; an input equal ‘ij circuit are il, +2 and is. Now, the output signals are represented and a component account by assuming evidence the description above: in Fig. 2, with the associated system S that presence of a defect in X is denoted by x; absence to gate to Zj = 0 will be denoted by to the findings, is taken into is either defective or nondefective. The following sets of defects are provided) corresponds that the component (only values for consistent for which the presence or absence of a defect is unknown, is adopted for the output signals ok. Fixed input signals is employed with respect as observable function to e’({x, aI) = I-o1,~21 e’({-x, u}) = (01, -021 e’({x, -aI) = I-01, ~2) e’({-x, -aI) = {01,02) e’(b)) = {-oi,oz, -021 e’(l-xl) = {01,02,7021 e’((al) = Iol, -01,02, -021 = e’({-a)) = e’(0). indicates that when the XOR gate X is defective, For example, e’({x}) = (701,02,~02) and it is unknown whether or not the AND gate A is defective, then the first output signal 01 = 0 and the second output signal 02 may be either 0 or 1, depending on whether the AND gate is defective or not. Hence, e’({x}) is defined with respect to the output of the output produced by the output channel directly the entire circuit in Fig. 2, not merely connected findings include or, 701, or both, and 02, -02, or both. In contrast with the for e’(D) always assumptions function given in Example 5, the behaviour of the system is described with respect to all elements of the entire system, and not in terms of isolated (defective) components. to the XOR gate, i.e., 01. For this circuit the observable the evidence in general, underlying t?J.R Lucas /Artificial Intelligence 105 (1998) 295-343 305 The two examples above were meant to convey some intuition concerning power of evidence functions the purpose of diagnosis. One of the attractive provide an easy means for describing properties of diagnostic bases in a precise, formal way. the semantical for capturing features of evidence significance of knowledge functions interpretations the expressive for is that they of knowledge 2.3. Properties of evidence&nctions As has been argued above, an evidence determined by the (diagnostic) knowledge is based. In this section, an overview will be useful for characterizing required function incorporated e may possess certain properties, in the knowledge base on which it that diagnostic knowledge. Some of these properties will be is provided of properties of evidence functions in the analysis of the various formal theories of diagnosis in Section 4. The various properties can be distinguished into global properties, hold for the entire evidence for some sets of defects D. 2.3.1. Global properties function e, and local properties, i.e., properties i.e., properties that that hold only findings, are employed of many problem domains, only positive findings, or positive findings In descriptions sets of defects. This situation and a few negative function has already been encountered (cf. Definition 1). any finding in the set of findings @ must appear either positively, negatively, or both, in some function value e(D), D 5 A. This explains why from Definition 1 it follows that in Example 5. By the definition of an evidence that is included to characterize U consistent DCA,D e(D) = @ for some finding sometimes every positive and negative need not hold, because D C A. Nevertheless, the evidence dependent on the notion of diagnosis employed, capable of producing a diagnosis set of findings observed f E @, we may have that 1 f 6 e(D), for each in @ is covered by finding is, in principle, for any is that such an evidence function function e. The consequence Monotonicity (cf. Section 3). of an evidence function in the analysis of theories of diagnosis is a property that will be encountered in Section 4. It is defined as follows: several times Definition 7 (Monotonicity). Let _JC = (A, @, e) be a diagnostic evidence function e is called monotonically increasing if specification. The VD, D’ 5 A: D C D’ =+ e(D) E e(D’) and e is called monotonically decreasing if VD, D’ s A: D E D’ =+ e(D) 2 e(D’) with D and D’ consistent. monotonic; otherwise, e is called nonmonotonic. If e is either monotonically increasing or decreasing, it is called 306 f5I.E Lucas /Art$cial Zntelligence 105 (1998) 295-343 increasing, this means If an evidence function the more is monotonically (new) that the more defects into account. The evidence into function information representation, was monotonically this means decreasing, findings must be taken in Example 5, which was the result of the translation of causal knowledge are considered, function increasing. evidence-function that if more defects are considered, is monotonically findings of sets of defects will be more specific. We have concerning encountered the normal and abnormal behaviour of a circuit was encoded. Note that what is often referred of to as the ‘nonmonotonicity observed findings from the one considered in the process of diagnosis. This is an aspect completely different in this section, but will be considered the observable an example of such a function in Example 6, where knowledge concerning (cf. [36]) actually concerns the interpretation If an evidence in Section 3. of diagnosis’ Of special interest defects and findings findings exist (except inconsistency function conforms in the previous section was the representation in terms of an evidence function. If no interactions of interactions among among defects and inconsistent defects), the evidence among syntactically to the following definition: Definition 8 (Interaction (A, @, e) is called interaction free with respect to e if freeness). A set of defects A of a diagnostic specification C = e(D) = U e(M) for each syntactically is nonempty, and for each d, d’ E A, d # d’, it holds that consistent set of defects D C A. If in addition for each d E A: e({d}) e(H) n e(td’l) = 0 the set A is called strongly interaction free; otherwise, A is called weakly interaction,free. We will sometimes simply say that the evidence function e is interaction free. Interaction findings associated with a collection of defects D are freeness means that the observable findings associated with each individual defect d E D. the same as the collected observable findings for individual defects, the observable findings Thus, by combining the observable interaction is presented here for combinations as a global property, we shall occasionally the phrase in a Zocal sense, to express that two or more defects do not interact with each other, e.g., e((d, d’]) = e({d}) U e({d’}). It is easy to show that an evidence increasing. of defects are obtained. Although employ free is also monotonically that is interaction freeness function Proposition 9. If Z: = (A, @, e) is a diagnostic speciJcation, free, then e is monotonically increasing. such that A is interaction Proof. Simply note that if D C D’, with consistent sets D, D’ C A, then e(D’) = e(D U 0’) = U e({d]) = u e(fd}) U /J e({d]) = e(D) UefD’). dcDUD’ dcD deD’ From this, it follows that e(D) s e(D’). 0 PJ.F: Lucas /Artificial Intelligence IO5 (1998) 295-343 301 As a matter of convenience, that defines A function values e({d}) of an evidence function free, are sometimes simply denoted by e(d). If a set of defects is strongly imply that the meaning to be interaction interaction that the defects do not influence each other in one way or the other; it only means these influences have not been captured attached to e does make these influences in the function e explicitly, because irrelevant with respect to diagnosis. function e, this does not necessarily free with respect to some evidence In some domains in unique described is not contained function the difference between restricted in which defects are interaction terms, i.e., for each defect d E A, the set of observable free, it holds that each defect is findings e(d) in D. It is shown that the evidence (the notation V\ W stands for in the set e(D), to consistent if d is not included sets of defects is injective the two sets V and W). Proposition 10. Let 22 = (A, @, e) be a diagnostic speci$cation such that A is interaction free with respect to e. Then, iffor each d E A, and each consistent set D g A\{d}, it holds that e((d}) g e(D), e to consistent subsets of A is injective. then the restriction of the evidencefunctions It has to be proven that If D # D’, then there exists a defect d E D (or d E D’ if D c D’, but that for consistent D, D’ E A, with D # D’, it holds Proof. e(D) # e(D’). reversing D and D’ does not matter), such that d 4 D’. Hence, according freeness of the proposition: it follows, also from interaction immediately. e(d) sf e(D’). Since it holds by interaction to the assumption that e(d) 2 e(D), that e(D) g e(D’). From this, the result follows freeness, u Given this proposition, the following corollary holds: Corollary 11. If C = (A, @, e) is a diagnostic interaction free, then the restriction of the evidence function e to syntactically sets of defects is injective. specification such that A is strongly consistent Proof. Simply note that if A is strongly foreachDcA. q interaction free, it holds that e({d}) 9 e(D\(d}) Proposition 10 is also satisfied includes a unique observable (called a pathognomonic finding uniquely due to the injective nature of e (but the set of defects may also be undefined). This yields a very simple form of diagnosis. identify a set of defects D by its associated set of observable to findings F = e(D), in medicine). Note that it is now possible if for each d E A, e(d) finding 2.3.2. Local properties There are a number of local properties of evidence functions that are the result of among defects to relationships among sets of observable relationship mapping a semantic findings. A typical example of such a relationship is known that the set of observable i.e.. findings ford contains all observable to cause the defect d’, it is, in terms of the associated evidence is causality. For example, if the defect d function, known findings associated with d’, 308 P.J.F: Lucas /Artijicial Intelligence 105 (1998) 295-343 e(W) c @I). In a monotonic theory of causality (cf. [9,10]), the following would hold as well: e(M) = e(Id, d’]) (1) (2) expressing of observable (1) and (2) it follows that that as d causes d’, when d and d’ are present together, precisely the same set findings would be obtained as if only d was present and d’ is unknown. From e({d, d’l) = e(H) U e(Id’l). Hence, d and d’ are assumed are only weakly interaction abductive diagnosis, because to be interaction free. This is not a global property of causality as employed free in the local sense; note that d and d’ in freeness will not hold in general (cf. Example 5). interaction Note that a causal specification C with a set of logical rules equal to is not distinguishable in terms of evidence functions from R’ = {dl f, d2, d2 f, f] in both cases an interaction-free evidence that ‘R and R’ are similar with respect function e with e((di}) = {f}, i = to their diagnostic results. This means because 1,2, interpretation. Starting with causality functions will be examined. in a more general sense, a number of local properties of evidence (a) Influence interactions: the occurrence of some defects influences findings. The following the occurrence of two types of other defects, as reflected by the observable local interaction l CuusaZity: if the combination are distinguished: the set of findings F, then of defects D causes F = e(D). The diagnostic view of knowledge of the sort ‘the set of defects D causes the set of defects D” as, for example, used in abductive diagnosis can be made precise in terms of an evidence function as follows: e(D’) E e(D) for some consistent D, D’ s A, i.e., any finding of defects D’ may also be observed for the set of defects D. Furthermore, case it holds that that may be observed for the set in this e(D) = e(D U D’). In Example 5 above, simple causal relationships between were examined. Various other types of causal relations can be expressed function functions. For example, the values of the evidence three individual defects in terms of evidence e(Ml) = e({-41) = 63 P1J.E Lucas /Art$cial Intelligence 105 (1998) 295-343 309 Fig. 4. Nondeterministic causality. fori=1,...,3,and express nandeterministic causality between and d3, on the other hand, as depicted in Fig. 4. the defect dl on the one hand, and d2 w Correlation: if the defects d and d’, d # d’, are correlated, then if d has occurred if d is absent (-d), d’ is also then d’ occurs as well, and vice versa, whereas absent c-d’), and vice versa. Correlation of defects can be described by means of an evidence function as follows: e(H) e(I-dJ) = @‘I) = e({d, d’j) = e((-d’]) = e({-d, -d’)) e({d, -d’]) = e({-d, d’}) = 1. The conditions can be described by means of the conditions above are satisfied for positive correlation; negative correlation e(H) = e((-d’)) = e((d, -d’}) e({-d}) = e((d’}) = e((-d, d’}) e([d, d’}) = 1. (b) Synonyms: if the defects d E A and d’ E A are synonymous, is commonly This applied d, d’ E A, d # d’, it holds that e({d}) # e({d’)), is said that A (also e) is synonym free. (c) Synergic interactions: these are interactions in medicine, then e((d}) = e({d’}). as has been discussed above. If for each there are no synonymous defects. It that augment, cancel, preclude, exclude, types of interaction local interactions among defects. The following or complement are distinguished: l Augmentation (also referred to as potentiation): the combined occurrence of two to or more defects in the set D gives rise to new observable those associated with the individual elements, or proper subsets of D, i.e., in addition findings e(D) 2 U e(D’) D'cD (3) 310 l?J.E Lucas /Artificial Intelligence 105 (1998) 295-343 for some consistent D L A. It is interesting monotonically increasing evidence functions, using the weaker condition: to note that (3) is yielded for e(D) S? U e(o’). D'cD l Cancellation (also referred to asfault masking [ 151 or antagonism): the combined finding to the findings associated with the individual elements, or proper occurrence of two or more defects in the set D yields fewer observable when compared subsets of D, i.e., e(D) c U e(D’) D'cD for some consistent D G A. l Augmented cancellation: cancellation mentioned holds: this notion combines and above, after weakening both conditions. The following the notions of augmentation D'cD D'cD f4); hence, the findings for some consistent D G A. For example, e({dl}) = (fl), e({dz}) = {f2, f3}, but e({dl, d2)) = {f3, and a new finding (f4) is observable. Note that e({dl, d2)) o e(di), i = 1,2, fails to hold for o E {c, 2). This is a consequence of the dependence between augmentation and to fail, and vice cancellation. The cancellation versa. Hence, in the notion of augmented cancellation. l Preclusion: the weakening of the two conditions the presence of one or more defects of findings causes augmentation fl and f2 are cancelled, in a combination that implies to be absent. This each element can be expressed by: in some other combination of defects is assumed e(M , . . . , d,)) 2 e({-d;, . . . , -dk}). This means of absent defects. Note that if A is interaction that a set of present defects contains information free, it follows that pertaining to a set e(M, . . ,&I) 1 e({-dij) for each i, 1 < i 6 m, m 3 1. This yields a preclusion that a combination to grasp, namely of defects D precludes some defect d: relation that is more easy e(D) 1 e(-d). l Exclusion: some combination of defects D cannot occur: e(D) = 1. l Complementation: the observable are the complements findings associated with of those associated with the absent defects the presence of e({dl, . . .,d,,)) = {fl,. .., fm) thene((-dl,. . .,-d,}) = {-fl,. .., . . . , -d,,, -dl, those,i.e.,if -fInI. F?J.E Lucas /Artijicial Intelligence 105 (1998) 295-343 311 (d) Empirical associations: when the defects in the set D are simultaneously present, in the set F may be observed, given F = e(D). Knowledge based defects and associations (categories) of defects; a defect d can be called more specific than a defect if this relation holds for more than one defect d, then defect the findings on empirical families d’ if e({d}) c e((d’}); d’ may be taken as a category (it includes a number of different defects). is often structured to individual according of causal knowledge The evidence-function representations in common, but there are a few differences. Firstly, associations ations have much e(d) = e(d’) fails to hold for empirical Secondly, a defect d for which e(d) > e(d’), for more than one defect d’ E A, will be a category function e stands for empirical associations, but, d will not be a category if e represents causal knowledge. if the evidence in general and of empirical associ- the condition if d and d’ are not synonymous. This concludes our list of various interactions among defects, and their expression in terms of evidence functions. 2.4. Partial speci@ation to explicitly When a domain it may be sufficient specify, or compute, satisfies certain properties, function e; it suffices to provide only part of them explicitly. Any algorithm in the previous section, In [5], in which the complexity of to provide a partial specification of an evidence function. Partial specification has the virtue that it is not always necessary the exponential number of function values of an evidence for diagnosis using an evidence without simplifying algorithms theory of a domain A partial specijkation which is defined on a nonempty rules expressing how function values e(D) must be determined. defined by means of a partial specification, of the sets A and CD. of an evidence function e consists of a restriction of e, denoted by e”, is analysed, in the sum of the cardinalities subset V E Q (A), together with a number of computation for abductive diagnosis is polynomial it is therefore assumed that the specification assumptions, will be intractable. function of the form discussed it is called partially specified. If an evidence function is fulfilled, be it for pragmatic In biomedical In domains for which not all function values e(D) can be provided explicitly, the condition that the specification of an evidence function is polynomial such as insufficient in medicine, in size is usually is usually defects, because features of specific disorder combinations. unfavourable, in the sense available. the medical knowledge available literature provides reasons. to explicitly capture all interactions little information about applications there among the observable the situation is less of the domain are that often precise In technical applications, technical descriptions In several diagnostic theories, for example, the set-covering theory of diagnosis function includes a restriction of an evidence partial specification suffices to define an evidence the domain. nonsingleton with their elements, by some formal theories of diagnosis; problem domain, as we have seen in the previous section. If the associated computation sets of defects can be taken as the union of the observable is interaction the evidence function function in terms of the individual defects distinguished findings that the observable rule expresses to singleton [29], sets, i.e., it in for findings associated is enforced it may not be sanctioned by the characteristics of a free. This limitation 312 ME Lucas/Artificial Intelligence 105 (1998) 295-343 Although of a partial specification properties, to an evidence function is thus the extension dependent on known evidence-function there are two extremes rules, an evidence specifying concerning knowledge implicitly sufficient partial specification expressed by means of computation that deserve attention. The first useful way of partially that when no explicit associated with a set of defects D is available, the largest proper subsets D’ of D for which Z(D’) is given, are taken to yield among the elements of D. This form of information is called bottom-up partial specification. function the findings the assumption the interactions is based on concerning Definition 12 (Bottom-up partiuE specijcation). Let E = (A, @, e) be a diagnostic specification, function and let V 5 go (A)\{0} b e a set, such that for each d E A: {d] E V. Then, a e : v -+ @(CD) u (I] is called a bottom-up partial speci$cation of e if: (1) for each D E V: e(D) = Z(D); (2) for each D E p (A)\V: e(D) = U D’cD, D’EV VD”cV, D”cD: D”dD’ e(D’). include to generate all nodes below Hence, by a bottom-up computation (2) is illustrated e with appropriate idea of condition partial specification Z we mean a restriction of an evidence rules e from t?. The the function in Fig. 5, where a node in the graph represents function principal the node labelled D a set and an edge represents proper set inclusion; in the graph are proper subsets of D. Note that a restriction 2 need not be unique; one subsets D of A in the domain of the restriction Z for which e(D) can freely idea could also be determined using condition among is that information of a bottom-up partial specification defects is derived from the largest (with respect to c) proper subsets D’ of a set of defects D, for which function values e”(D’) have explicitly been given; the function value e(D), when not explicitly given by 2, is obtained as the union of all such Z( D’). In the examples function below sets will be left out from the definition of bottom-up values for syntactically this choice will be further clarified. For convenience, above. The intuitive the interaction (2) in the definition in the following, inconsistent concerning 0 not included in V used for e(D) l included in V l included in V not used for e(D) Fig. 5. Part of a lattice used for bottom-up specification of an evidence function. I? J. E Lucas / Art$cial Intelligence 105 (1998) 295-343 313 2. From the definition of a bottom-up partial specification partial specifications that e(0) = 0, i.e., there are no observable defects. If the problem domain concerns partial specification Hence, a bottom-up partial specification as in the abductive theory of diagnosis, theory can be described as a bottom-up partial specification. it follows concerning if there is no knowledge the (faulty) behaviour of a device, a bottom-up the isolated behaviours of parts of the device. is in line with a specification of causal knowledge i.e., any diagnostic specification obtained from this to specifying amounts findings Often, the causal relation, such as represented by standard to be monotonic. Bottom-up partial specifications, nonmonotonic able findings, e.g., f and -f, can be used for diagnosis. and complementary thus extending interactions logical entailment, however, also allow for representing alternative observ- that representing is taken the repertoire of the types of knowledge findings and iron-deficiency anaemia. We shall not enumerate tumour producing hyperfunctioning disease caused by a brain infection Example 13. Consider a medical diagnostic problem, where a patient may have Gushing’s of the adrenal disease-a glands-pulmonary all it suffices to note signs and symptoms causally associated with these medical problems; (shortness that moon face is a sign associated with Cushing’s disease, fever and dyspnoea of breath) are associated with pulmonary iron are characteristic disease and pulmonary there exists an interaction between infection, findings problem as a directed graph; the meaning of the nodes in the graph is indicated i.e., the co-occurrence of the two disorders produces fewer findings. Fig. 6(a) depicts this simple in Fig. 6(b). partially and low levels of serum in a patient the two disorders, Cushing’s disease and pulmonary in whom Cushing’s that indicates anaemia. However, coexist for iron-deficiency infection than the union of their associated observable Z: = (A, @, e), where e is bottom-up specification specified by means of the function 2, which is defined as follows: that is nonmonotonic, is no fever. This there usually a diagnostic infection, Consider t:;“’ ifD=IdlJ, if D = {dz), Z(D)= $,.fi) ifD=I&), k.62, f31 0 1 if D = Idly d2), ifD=(-di),i=l,..., 3. From this specification, difference between Fig. 6, which is a representation monotonicity, it follows that e((dl)) 9 e((dr, d2)); e is nonmonotonic. Note the of the function 2, and does not assume interpretation of Fig. 1. Here, it does not hold that and the evidence-function c(I4, d2)> = kfl, f2, f3). As a prerequisite for bottom-up individual partial specification, (i.e., singleton it is assumed sets of defects) concerning knowledge in a given diagnostic domain. This problem domains knowledge concerning an individual defect is the kind of knowledge most readily available. is not an unrealistic defects the possible abnormal behaviour assumption, that at least is available in many from resulting because Example 14. Consider again the evidence function From this partial specification from the example above (Example 13). it follows that, for example, e(Ap) = Z({dl, 4,)) UZ((d3)) = 314 Intelligence 105 (1998) 295-343 *ND 4 .fl flJ.E Lucas /Artificial .fz a d2 f4: d3 f3 f4 infection Meaning dl: pulmonary &: Cushing’s disease &,: iron-deficiency fi: fever f2: dyspnoea f3: moon face low serum iron anaemia (b) (shortness of breath) Fig. 6. Partial evidence function Z. e(Ap), because there is information .Z((dl}) nor Z({&)) play a role in (f2, f3, j”), where Ap = {dl, d2, d3). Note that neither determining available about the interaction between the defects dl and 4 by the function value e”({dl, d2)). This function value provides in Ap; more precise partial is unavailable; information hence, {dl , &} and {d3} are assumed not. the members of Ap to be free of interaction, but the defects dl and d2 are about the possible about the mutual the defects information interactions influences between among It follows that a bottom-up partial specification may provide interaction between defects. In the extreme situation exists, it suffices to define a partial specification the information that no interaction between defects about in terms of individual defects only. Proposition 15. If Z = (A, @,, e) is a diagnostic spec$cation, free, then there exists a bottom-up partial specijication e” of e with domain such that A is interaction V = {{d} ( d E A}. Proof. Note that if the domain of 2, V, is defined as above, conditions Definition 12 simplify to the definition of interaction can be defined as follows (1) and (2) in freeness; hence, the evidence function e(D) = U g(W) for each syntactically consistent set D C A. q The second typical form of a partial specification of an evidence at least explicit by providing D c A, and describing other combinations findings of defects d 4 D into account. specification from [18]. syntactically of defects D’ by taking associated observable this particular partial is introduced, using a diagnostic description of a logic circuit taken function values for maximally In the following example, is obtained sets consistent technique function Example 16. Consider gates (or inverters) the logic circuit depicted in series. In [18], the problem of diagnosing in Fig. 7, which consists of two NOT faulty behaviour of the Mi? Lucas /Artificial Intelligence 105 (1998) 295-343 315 Fig. 7. Two NOT gates in series. is described logic circuit for an input signal fixed to I = 0, denoted here by -i, given with resulting output signals equal o, respectively. Again, output signals correspond behavioural its output will be either 0, or the input to the gate is shorted (unmodified) that the NOT gate Ni is not defective. Given this information, lni designates restriction Z of e of a diagnostic disregarded to 0 = 0, denoted by -0, or 0 = 1, denoted by findings. The following to observable are made in [18]. If a NOT gate Ni is defective, denoted by ni, to its output; the following (we have .X = (A, @, e) can be defined the input, because to be fixed to 0): it is assumed specification assumptions qhJ2))= I-01 e({-nl,n2J)={-o,oJ qh-n21)=@) e({-nyn2))= (-0). The complementary different, nondeterministic specification to generate e by assuming unknown whether or not N2 is defective, defective, pair l-0, o) is the result of the assumption above that there are two types of abnormal behaviour. The function 2 is taken as a partial that e([n 1)) = {-a, o), etc., meaning that if it is the possible output of the circuit, given Nt to be is { -0, 0). Thus, similar to Example 6, we have that this partial specification that if the observed output signal is equal Interestingly, to o, either {-nt, n2) or (nt ,722) may be the case, which are precisely the diagnostic alternatives provided by de Kleer et al. However, it is not at all obvious from their example that for an output equal to -0, as well. This information (-nt, ~22) is a possibility from the evidence the set of defects is immediately function e. available indicates to describe defects with associated observable function. A top-down partial specification function will be called top-down partial is appropriate when from i.e., knowledge of the associated findings of the other is a is needed the defects. If the domain to describe in isolation findings including specifying an evidence This way of partially specification of an evidence it is not possible other defects and associated findings, defects, their interaction, device, this assumption means that it is not possible behaviour of a component supported by top-down specification by bottom-up is defined below. as a ‘reductionistic specification in isolation to describe the (normal or abnormal) from its environment. One could view the approach as a ‘holistic approach’, and the approach supported approach’. Top-down partial specification 316 ME Lucas / Art$cial Intelligence 105 (1998) 295-343 0 0 0 not included in V included in V used for e(D) included in V not used for e(D) Fig. 8. Part of a lattice used for top-down specification of an evidence function. Definition 17 (Top-down specification, consistent set D E A: D E V. Then, the function and let V C 8 (A)\{0} partial specification). be a set, such that for each maximally Let C = (A, @, e) be a diagnostic syntactically e: V--+&?(@)U{I) is called a top-down partial specijkation (1) for each D E V: e(D) = Z(D); (2) for each D E &YI (A)\V: of e if: e(D) = U D’>D, D’consistenf D’EV VD”EV, D”>D: D”cD’ e(D’). Note that e(D) is obtained by taking D’ E V is a minimal proper superset of D, and no set D” E V is smaller principal idea is depicted circuits was studied using evidence down partial specification 2, with the union of all function values e( D’), where than D’. The in Fig. 8. In Examples 6 and 16, the behaviour of two logic that could have been generated by a top- functions V = {Ia, xl, I-a, xl, {a, -xl, {-a, -xl} for Example 6 and consistent underlying to describe a domain combinations for Example 16. The assumption that it is sufficient all maximally domain isolated behaviour of individual of defects is described shall say that it is externally described. an evidence in terms of the observable of defects in this way is findings associated with that if the that may be defective, about the If a set components of the system has not been supplied. in terms of this special case of a top-down partial specification, we in the domain. This means information is a device consisting of components function defined Definition 18 (Externally described). Let X = (A, @, e) be a diagnostic The set of defects A is called externally described with respect to e if there exists a top- down partial specification syntactically e” for e with domain V, where for each D E V: D is maximally specification. consistent. ME Lucas /Artijicial Intelligence 105 (1998) 295-343 317 Note that if A is externally described with respect to e, the definition of the evidence function can be simplified as follows. For each consistent D C A: e(D) = u Z(D'). D’DD, D’EV Dhkstent It is easily shown that an evidence is monotonically decreasing. function for a set of defects that is externally described Proposition 19. If .E = (A, @, e) is a diagnostic specfication, such that A is externally described, then e is monotonically decreasing. Proof. If D G D’, with consistent D, D’ L A, then e(D’) = e(D U D’) = U e(D”) G U e(D’) = e(D). D”X(DUi?), D”EV DNconsistent D’XD, D’EV D’consistent From this, it follows that e is monotonically decreasing. q Observe that top-down partial specification does not result in a significant the number of values to be specified for an evidence function, because 2” function values have to be specified. reduction in if 1 A p 1 = n , at least Above, we have introduced appeared two opposite ways to define evidence to be particularly partial specification for defects among which a limited amount of interaction partial specification is most suitable are strongly somewhere between knowledge. functions interrelated. As one would expect, there are also evidence these two extremes, for representing for generating suitable for generating evidence exists. By contrast, evidence suitable functions. Bottom-up functions top-down for defects which that lie functions particular real-world 3. Notions of diagnosis As has been discussed, an evidence function can be viewed as a semantic interpretation for example, causal or functional knowledge, of a knowledge base, containing, expected evidence an evidence the actually observed findings. The interpretation findings diagnostic problem at hand. in terms of for the combined occurrence of (present or absent) defects. To employ to it must be interpreted with respect of an evidence function and the observed the that is adopted, can be viewed as a notion of diagnosis applied for solving for the purpose of diagnosis, function More formally, let ‘P = (E, E) be a diagnostic problem, where E s @ is a set of observed findings; it is assumed observed findings are not allowed. The set of observed findings E denotes findings that are present or findings F = e(D), absent at a given time. In contrast, that if f E E then 1 f # E, i.e., contradictory in the set of observable the findings 318 I? J. E Lucas / Art$cial Intelligence IO5 (1998) 295-343 D 5 A, need not all be observed at the same time. Let Rx denote a notion of diagnosis R defined for suitable diagnostic and here applied to Z, then a mapping specifications, &z,e,H : PC@) -+ B (A) u (~1 for a diagnostic that no solution exists, denoted by u (undefined). Recall that H called a diagnostic function, will either provide a diagnostic problem P, or indicate denotes a hypothesis, which is taken to be a set of defects (more generally, assumptions H E A), and elH denotes usually a partial function; requirements. function of e. A notion of diagnosis R is satisfying certain the restricted evidence it is only defined for diagnostic specifications solution Next, a diagnosis is defined as the result of applying a diagnostic function to a set of observed findings. Definition 20 (Diagnostic solution). Let P = (Z, E) be a diagnostic problem, with E E findings. Let R be a notion of diagnosis. An R-diagnostic solution, or 0 a set of observed R-diagnosis for short, with respect to the set of defects H c A is defined as follows: solution In Fig. 9, the idea underlying to a diagnostic problem above the definition of a notion of diagnosis R and diagnostic is illustrated is very unrestrictive; schematically. one reasonable restriction on the notion of The definition is obtained by assuming diagnosis that for each nonempty E L @, and each nonempty, consistent set H 5 A, forwhich RE,~,* (E) = H’, with H’ # u, it holds that elH(H’)n E # for by the 0 if elH(H’) the set of findings accounted diagnosis Hf. The set of findings elH (H’) for by H’. The condition for simply means function has at least some relevance that the result H’ obtained by applying a diagnostic that at least one finding must be accounted f; 0, i.e., at least one observed in E must be accounted fl E is called finding hypothesis H knowledge base e Fig. 9. Schema of notion of diagnosis, diagnostic problem and solution PJ.E Lucas /Artificial Intelligence 105 (1998) 295-343 319 with respect to the findings observed. This is a rather weak condition. Other, more precise constraints will be encountered below for specific notions of diagnosis. If application of the diagnostic function RE,~,~ yields as a result H’ = Rx,,,, (E), it is said that: (1) the hypothesis H is accepted (2) the hypothesis H is rejected if H’ = u; (3) otherwise, if H’ = H; the hypothesis H is said to be adjusted. of a hypothesis Adjustment the hypothesis was tested against E, i.e., the result H’ is taken as the adjusted version of the original hypothesis H. Note that it is possible in H have passed when that not all defects indicates that Rc.,,H (E) = Rz,elH, (E) for H # H’. how the definitions above can be employed, consists of a set of defects which, on the one hand, can account Example 21. To demonstrate a notion of diagnosis U, such that UC,~,~ (E) = H’ if it holds that H’ is the largest subset that a of H with elH(H’) c E; otherwise, H’ = u. This notion of diagnosis expresses diagnosis for at least findings, and, on the other hand, every finding associated with the set part of all observed there is only one of defects that is taken as a diagnosis has been observed. Furthermore, such maximal subset of the given hypothesis H. Now, reconsider the medical domain from Example 13 (Fig. 6) with H = {dl , d2) (pulmonary infection and Cushing’s disease). Some interesting diagnostic conclusions consider are: i.e., a patient with only fever and dyspnoea has pulmonary i.e., there exists no diagnosis accounting for only fever as sign, and finally, infection, UC,~,~ ({ft}) = U, In the first case, the hypotheses has been adjusted, rejected, and in the last case, the hypothesis H has been accepted. in the second case, the hypothesis H is This example demonstrates As remarked above, Definition the flexibility of the approach. 20 imposes very few constraints with respect to the properties property evidence that must be satisfied by a reasonable notion of diagnosis. One conceivable that, however, usually function e. fails to hold, is that a notion of diagnosis respects the Definition 22 (R respects e). Let R be a notion of diagnosis defined for the diagnostic specification Z = (A, @, e). It is said that R respects e if: (1) for each set of observed findings E C Cp, there exists a set H C A such that e(RzelH (E)) = E, and (2) for each consistent D E A, there exists a set H C A, such that Rz,~,~ (e(D)) = D and for each H’ 2 H: RX-~,“, (e(D)) = u. 320 F!J.E Lucas /Artificial Intelligence 10.5 (1998) 295-343 This means that a function that is taken as the inverse of the evidence which must be bijective complementary findings), need not be fixed. Of course, function Rc,~,” with fixed H that can be taken as the inverse. e, (excluding sets of defects and sets E 2 @ with is composed of function values Rz,~,~ (E), where the set H E A above will also hold if there exists a the two conditions inconsistent function If a notion of diagnosis is interaction function free, the following proposition holds: respects an evidence function, and, in addition, an evidence Proposition 23. Zf R is a notion of diagnosis defined for the diagnostic specification .X = (A, @, e), where e is interactionfree, and R respects e, then Rz,e,H (E) = Rz,e,H (E’) U Rz,e,H (E”) for each set of observed$ndings E, E’ and E”, with E, E’, E” c @ and E = E’ U E”, and H c A. if restricted Proof. Since e is bijective sets of defects D, we know that there to consistent exist sets D, D’ and D” such that E = e(D), E’ = e(D’) and E” = e(D”), with E = E’U E”. Then, using the fact that e is interaction free: e(D) = e(D’)Ue(D”) = e(D’U D”). Therefore, D = D’ U D”, because e is injective. From the fact that R respects e it follows that RX+,, (E’) U RX,+,,, (E”) = RqH, (4D’l) U R+,,, (4D”l) = D’ U D” = QelH (e(D’ U D”)) = Rx,elH (E) for some consistent H, H’, H” 5 A. Furthermore, it follows that e]H (D) = E (D 2 H holds by definition). Similarly, D’ we have hence elH(D’) = E’. Therefore, Rc,~,,,, (E’) = Rc,~,” (E’). Analogously, Rz+,, f?lHl(D’) = E’. Moreover, because D’ c D it follows since R respects e and Rx,~,~ (E) = D (E’) = that D’ E H, (E”) = from Rx+,, Rz,e,H (E”). 0 Hence, it turns out that if a notion of diagnosis R respects an interaction-free evidence such that each subset can be for separately by the same function RE,~,“. Note that if we have an evidence respect e, due to is to be function e, the set of observed accounted e for which f, 1 f E e(D), function the fact that E cannot contain complementary interpreted as a diagnosis. for some D C A, then R cannot findings can be partitioned, at least, if Rz+, findings, (E) A notion of diagnosis R provides among defects findings at the level of diagnosis, which we call dependencies. We may that can be examined yielding a form of compositionality. More formally, we have the following and observed also have that a hypothesis can be split up into two subhypotheses, independently, definition: to express interactions the possibility Definition 24 (Independence assumption). Let R be a notion of diagnosis. specification R fulfills the independence assumption if for each diagnostic It is said that .Z for which l?J.E Lucas /Artificial Intelligence 105 (1998) 295-343 321 Rc observed is defined, and for each pair of consistent findings E 2 @ it holds that sets of defects H, H’ C A and each set of RqH”H’ (E) = b,e,H C-Q U RE+,, (El with RE,~,~~~, W) # u. This means that the diagnostic solution with respect to the hypothesis H U H’ is obtained for the two separately examined hypotheses H and H’. As for fails as the union of the solutions we shall see, for many notions of diagnosis described abductive diagnosis and consistency-based to hold. in the literature, the independence in particular assumption diagnosis, Example 25. The following notion of diagnosis S is defined for diagnostic C = (A, @, e), where the evidence observed function e is interaction-free. findings, then specifications Let E 2 @ be a set of Xx,e,ry (E) = u H’ H’ G H, ep,(H’) E E in a hypothesis H that have all their associated idea underlying for each consistent H C A. The intuitive that only defects observed subhypotheses satisfied for S, because any interaction-free therefore, is taken as the most if e(D) 2 E, then e(D’) 2 E, D’ C D. findings are admitted as part of a diagnosis; this notion of diagnosis included is as findings the least upper bound of accepted is assumption evidence function is monotonically increasing, likely diagnosis. The independence Next, diagnostic monotonicity is defined for a notion of R-diagnosis; it is a property in line with the independence assumption. if for each diagnostic Definition 26 (Diagnostic monotonicity). A notion of diagnosis R is called diagnostically specification 22 for which Rz. is defined, each consistent monotonic set of defects H C H’, with H, H’ C A, and each set of observed findings E E @, it holds that if Rz,~,~ (0 # u, then R_Q,” (E) E Rc+,~, (E); otherwise, R is called diagnostically nonmonotonic. Diagnostic monotonicity investigated, it follows increasing. the hypothesis monotonicity, monotonically of a notion of diagnosis means: the larger the diagnostic the larger (with respect to G) solution. Note that from diagnostic that if H G H’, then e(Rc,e,,(E)) E e(Rc,e,,,(E)) if e is The following proposition states that any notion of diagnosis satisfying the independence assumption is diagnostically monotonic. Proposition 27. A notion of diagnosis R is diagnostically monotonic assumption is satisfied. if the independence 322 I?J.E Lucas /ArtiJicial Intelligence 105 (1998) 295-343 Proof. Let R be a notion of diagnosis, H G H’, with consistent H, H’ C A, and Rc,~,~ (E) # u, then Rc,~,~ (E) E Rx+,,(E), because Rc,~,~, (E) = RC,elH then for every diagnostic specification (E) U Rc.~,~,,~ (E). 0 .E: if Independence and diagnostic monotonicity were introduced as properties of abductive diagnosis for the first time in [5]. In the next two sections, various notions of diagnosis are compared, and their diagnostic frequently are explored. The two orderings defined below, will be employed characteristics in such comparisons. Definition 28 (Restriction). Let R and R’ be two notions of diagnosis. Then, R is called a restriction of RI, denoted by if for each Z:, and for each H C A, and set of observed RE,~,~(E) = H’, H’#u, then R;,,,“(E) = H’. findings E E 0 it holds that: if Thus, if the restriction relation between from the notion of diagnosis R are a subset of those resulting two notions of diagnosis R and R’ holds, then from the diagnoses R’ (for any legal diagnostic resulting The notion of subdiagnostic admitting defects to a diagnostic specification E). relation is useful for characterizing the relative strictness in solution from notions of diagnosis. Definition notion of diagnosis R is called subdiagnostic 29 (Subdiagnostic to R’, denoted by relation). Let R and R’ be two notions of diagnosis. The if Rx,~,“(E) & R&,,,,(E) giventhat Rz,=,~(E), R&,,,,(E) #u,foreachE, andforeach H C A and set of observed findings E G @. We shall occasionally employ the same symbol i to denote that the diagnostic solutions of some diagnostic the same diagnostic function are a subset of those of another diagnostic specification, i.e., function applied to RC,elH i R!E,~,H, (E) E R&,e,H, (E), for each set of observed iff QeiH are defined. findings E, given that the diagnoses 4. Analysis of notions of diagnosis from the literature Because the diagnostic formalism introduced various notions of diagnosis known from the literature should be expressible section, the expressive power of the framework above is meant to act as a framework, in it. In this is examined with respect to abductive and F!J.E Lucas /Artificial Intelligence 105 (1998) 295-343 323 consistency-based be examined stated without proof (cf. [25] for complete proofs). to heuristic classification will in the next section. Some obvious properties of notions of diagnosis shall be diagnosis. Notions of diagnosis related 4. I. Abductive diagnosis referred is modelled and colleagues [9,12]. In their The formalization is the work by Console the abnormal or normal behaviour of a system of diagnosis using causal domain models, usually to as [9,12,22,30-321. A typical theory of abductive in terms of causal in this paper) and predicted in that when a collection of findings must be present as well. This notion of abductive diagnosis, has been studied by several researchers example diagnosis, knowledge with abnormal or normal states (called defects findings as basic ingredients. Two different this theory. In the first type of causal knowledge, defects is present, all causally associated causality will be called strong causality. In the second type of causal knowledge, causally related findings may be present, but need not be, when the associated defects are present. This less strict notion of causality will be called weak causality; it represents an imprecise relationship between cause and effect. We start by analysing diagnostic problem uncertain solving based on strongly causal knowledge, and next consider the usage of weakly causal knowledge and the consequences relationships causal of combining both types of knowledge. among defects, and between defects and observable types of causal knowledge are distinguished it is assumed Strongly in the theory of abductive diagnosis by logical implications of the findings, are denoted form dl A... r\d,,+d and dl r\...r\d,, + f findings to occur; respectively, that the combined occurrence of defects dl , . . . , dn causes defect d and finding literals informally logic. A causal speciJcation C = (A, 0, ‘R), which was already f and defects d are represented expressing f, in predicate introduced a collection of logical above. The logical they usually represent causal knowledge of abnormality only. literals @, and literals of the form to as abnormality axioms, since in Section 2.1, is defined as a set of defect literals A, finding implications R concerning in R are often referred defect and finding implications as ground Now, let A = (C, E) be an abductive diagnostic problem, with C a causal specification, and let E be a set of observed findings. Then, a set of defects H c A is called a diagnosis ofdiff[9]: (I ) Vf E E: 72 U H b f (covering condition), and (2) Vf E EC: R U H F -f (consistency condition) where EC, the set of observable follows: findings assumed to be absent, is defined in terms of E as E’ = {-f E @ 1 f 6 E, f is a positive literal]. 324 ME Lucas /Artijicial Intelligence 105 (1998) 295-343 This means findings assumed to be absent. that a diagnosis H must predict all findings observed, but may not predict in Fig. 1. Suppose Example 30. Reconsider depicted of observed H = {dl, dz} is a diagnosis satisfied. findings, that E = { fl , f2) then we have that EC = (7f3} the causal specification C = (A, @, R) from Section 2.1, as is a given set is absent), and, thus, are (fever and sore throat) (dyspnoea the covering and consistency for A, because conditions can be translated This form of abductive diagnosis the diagnostic problem corresponding in a straight- forward fashion. Let P represent to the abductive problem, such that P = t(d), where t maps an abductive diagnostic problem A to a di- agnostic problem P in our framework. To distinguish between elements of an abductive diagnostic problem A and a diagnostic problem P, subscripts A and P will be attached to elements. The meaning of a causal specification C of an abductive diagnostic problem A is captured by an evidence function e with domain 83 (Ap) as follows. For each DA E AA: into our framework (1) if R U DA is satisfiable, (2) otherwise, e(Dp) = I, then e(Dp) = (t(f) 1 R U DA i= f, f E @A}; where Dp = I. observable findings. Condition (1) interprets causal knowledge in terms of predicting For ease of exposition, will not explicitly be distinguished; t(f) E @p and finding literals f E @A. in the following, defects t(d) E Ap and defect literals d E AA findings similarly, no difference is made between Example 31. For the axioms R in the example above, corresponding specification diagnostic .Z = (A, @, e) is given in Example 5. the evidence function e of the Abductive diagnosis as defined above in terms of the covering and consistency conditions diagnosis can now be defined as a notion of diagnosis. The corresponding notion of is called the notion of strong-causality diagnosis (SC). It is defined as follows: SC.+,(E) = H u if elH(H) = E, otherwise, i.e., it is necessary and vice versa (covering condition), expressed by means of equality that all observable in our framework. findings e(H) are observed condition), to accept an hypothesis H as a diagnosis. This is just (consistency Example 32. For the diagnostic problem P = (Z, E), with diagnostic in Example 31 and set of observed has influenza and tracheobronchitis: findings E = (fl, f2], it is concluded specification Z: as that the patient the same result as obtained by abductive diagnosis which is exactly that for E’ = { fl} no abductive diagnosis exists. Similarly, for E’ = [ fl } and every consistent H c A. in Example 30. Note it holds that SCE,~,~ (E’) = u I1J.E Lucas /Artificial Intelligence 105 (1998) 295-343 325 The notion of strong-causality is not diagnostically monotonic, because it may hold that SCZ,~,~ (E) = H, but SCC,,,~, (E) = U, for H c H’ (which is easily shown by means of a counterexample). also fails to hold for strong- causality diagnosis (just take H’ C H, with H = {dl , dz} in the example above). The independence assumption diagnosis A notion of weak causality individual abnormality is uncertain. Hence, the abnormality two forms: of one of the following axioms. These literals are employed [9] is arrived at by the addition of assumption literals a! to the to express that a causal relation axioms R of an abductive diagnostic problem A are dl A’.. r\d,r\af+ f expressing finding f, respectively, in order to deal with the assumption possibilities. First, the abnormality where the assumption that the combined occurrence of defects dl, . . . , d,, may cause defect d and t introduced above must be extended literals expressing weak causality. There are two to an evidence function e, literals in a solution H are taken as defects, i.e., if for f E E axioms ‘R could be translated to occur. The transformation interpretation of the resulting evidence literals CX, i.e., d = t’(a), with transformation then f E e(H), where H is a set of defects, possibly including and R U H is satisfiable, assumption t’ extending T. and d a defect. Next, the notion of diagnosis SC introduced above for strong causality could be employed as diagnostic function e. Obviously, weak causality is then expressed at the level of the knowledge base, i.e., at the object-level. The second a notion of possibility the notion of weak causality as that interprets a knowledge base containing diagnosis causal knowledge literals in Ad. Then, R’ being weakly causal in nature. Let A denote the set of assumption is a set of abnormality literal cz E A from the axioms in 77,. The transformation t” is then defined in the same way as t, except that R’ replaces 72. axioms obtained by removing each assumption amounts is designed to the meta-level: to lifting The theory of abductive diagnosis adopts the first approach, because conditions and consistency as for strongly causal knowledge. Here, the second approach may also be adopted, uncertainty is lifted to the level of diagnostic in causal knowledge to define diagnosis are employed interpretation. the same covering for weakly causal knowledge i.e., To study the difference in diagnostic interpretation of evidence is made between an abductive solution-a conditions for which the covering and consistency the set of all defects included functions with respect set are in an abductive to weak and strong causality, a distinction of defects and assumption satisfied-and solution. an (abductive) diagnosis, literals The notion of diagnosis to abductive diagnosis, with weakly causal relations as introduced above, is called the notion of weak-causality diagnosis, denoted by WC. It is defined as follows: that corresponds WC&,, (E) = I H u diagnosis if elH(H) 2 E, otherwise. A weak-causality (predicted) observable accounts finding need be observed. for all observed findings, although not every 326 P.J.R Lucas /Artijcial Intelligence 105 (1998) 295-343 Note that for the notions of diagnosis SC and WC, it holds that if Rz,~,~ (E) # u, where R E [SC, WC}, i.e., all findings must have been predicted as being observable consequence satisfied. of the fact that for any abductive diagnosis that have actually been observed for the associated set of defects. This is a the covering condition must be We examine the correspondence causality diagnosis by an example. between abductive diagnosis and the notion of weak- Example 33. Reconsider specification C from Section 2.1, and E = { fl , f2). Assumption individual to: the abductive diagnostic problem A = (C, E) with the causal literals are added to the the causal specification C’ = (A’, @, R’), with 77,’ equal in R, yielding axioms dl A cq + d2 dl A a2 + fi d2 A ~3 + f2 d2r\d3r\a4-+ f3. The resulting evidence function is again equal to e as defined in Example 5. Now, the set H = (dl , (~1, a~, ~3) is an abductive solution to A’ = (C’, E), because covering and consistency also have that WCE,~,,~~) (E) = {dl}. conditions are satisfied; the associated diagnosis the is D = (dl}. We If we restrict the notion of weak-causality is similar diagnosis to monotonically logic functions, which evidence abductive diagnosis, be shown by noting to restricting in the theory of the notion of diagnosis WC is diagnostically monotonic. This can = H’, that if WCE,~,~(E) function e = H and H’ > H then WCc,,+,,(E) to standard if elH(H) 2 E then elH/ (H') 2 E, due to the fact that the evidence increasing because is monotonically for by a subset of a set of defects H, where H accounts independence assumption, however, fails to hold. increasing. Since only part of all observed findings may be accounted the for all observed findings, Weak-causality diagnosis as defined the two notions coincide. diagnosis can be viewed as a much generalized version of set-covering to be interaction-free, in [29]; when an evidence is assumed function Until now, weakly and strongly causal knowledge and their use in abductive diagnosis have been studied separately. Weak and strong causality diagnosis, however, can also be combined of causal knowledge. Firstly, up into two evidence to obtain a notion of diagnosis function e in a diagnostic these two different that combines interpretations the evidence specification functions: is split u:@(A)+ba(@)U]~l called the strong evidence function, and ~:P(A)--+P(@)UI~] I?J.E Lucas /Artificial Intelligence 105 (1998) 295-343 327 called the weak evidencefinction, and the functions v and a! are defined such that if v(D), a(D) # I, otherwise, for each D C A. The set of abnormality is interpreted abnormality function. by a weak evidence axioms without assumption axioms with incompleteness again by discarding function, literals are interpreted assumption literals literals; by a strong evidence assumption To capture the joint effect of strong and weak causality on diagnostic problem solving, the results of two separate diagnostic functions must be combined. However, diagnostic functions capturing abductive diagnosis using strongly causal knowledge or weakly causal knowledge specification. To describe a diagnostic specification modularization each operate on parts of a diagnostic appears to be convenient. of a collection specifications, of diagnostic as consisting the notion of Definition 34 (Modularization). _E = (A, 0, e) is a finite set of diagnostic Ci=(A,@,ei),l<i<n,n>l,suchthatforeachDcA: A modularization ME specification of a diagnostic specifications Mx = {.X1, . . . , .&I, where e(D) = yy& ei(D> ifei(D) otherwise. #I, 1 6 i <n, Modularization of two diagnostic of a diagnostic functions. specification is now employed to define the composition Definition 35 (Composition of diagnosticfunctions). diagnosis, and let ME = {C’, Z”} be a modularization Then, function PE,~,~ is called the diagnostic Let P, Q and R be three notions of specification Z. of the diagnostic the composition of Qz,,+ and Rzrr.e~H, denoted by if it holds that for each set of observed findings E s @, and each decomposition E = E’ U Et’ for which Q,,,,;, (E”) # U; otherwise Px,,,, (E’), Rx,,,+ (E) = U. Observe that the sets E’ and E” resulting findings E are neither necessarily is the same for all diagnostic possible dependencies among adequately. from a decomposition of the set of observed disjoint nor unique. Note also that the hypothesis H that e’ and e” are dealt with in a composition. This prerequisite functions the respective evidence functions ensures Using the translation notion of diagnosis of diagnosis fully captures is called weak-and-strong scheme and the composition of diagnostic the following the theory of abductive diagnosis. The resulting notion to WSC. Let causality diagnosis, abbreviated functions, 328 I? .I. E Lucas /Artificial Intelligence 105 (1998) 295-343 Fig. 10. Causal net corresponding to C. Mz: = {Xv, Z,) be a modularization specification Z = (A, @, e), where of a diagnostic .E, = (A, @, u) and & = (A, @, a). The notion of weak-and-strong causality diagnosis, denoted by WSC, is defined as follows: WS&?l, = SG”,“,H IIWC&,,,H where SC is the notion of strong-causality causality diagnosis. diagnosis, and WC is the notion of weak- Example 36. Consider causal specification C = (A, @, R), where R is equal to: the following abductive diagnostic problem A = (C, E), with dl A o1 + fi d2nd3Aw+f2 d2 -+ fi 4 -+ f2 Ap = {dl, d2, d3, d4), and @p = E = (fl, f2). The causal specification C = (A, @, ‘I?!) is in Fig. 10. The following modularization ML: = (&, &) can be graphically depicted constructed: C, = (A, 0, u), where the bottom-up partial specification V of u is defined as follows: V(D) = M 1 {f~) 0 1 if D = I&), if D = (dd), ifD=(di), i=1,3,orD=(-di), i=l,..., 4. Furthermore, follows: 27, = (A, @, cr), where the bottom-up partial specification a! is defined as s(D) = Ifi) 1.M 0 I ifD = M), if D = I&, ds), ifD=(di), i=2,3,4,orD=(-di), i=l,..., 4. Since every observable An example of a diagnostic diagnosis WSC is finding in e(D) is positive, only positive findings will be dealt with. causality the notion of weak-and-strong function comprising P J. E Lucas / Art@al Intelligence 105 (1998) 295-343 329 Note that, for example, WSCZ,~,,~,,~~~ (0) = u, because SC_z,,v,,,,,,, WC~~,.,,,~,~~~ (0) = {dt, &). Observe decomposed among diagnostic that a set of observed also functions of WC and SC in several ways. For example, (0) = u, although findings E may be 4.2. Consistency-based diagnosis In consistency-based in diagnosis, Section 2.1, knowledge concerning as a pair S = (SD, COMPS), called a system; when observed findings OBS are included, we arrive at what is called an observed system OS = (S, OBS), where introduced as proposed structure and behaviour of a device is represented [36] and [18] and in l SD denotes a finite set of formulae in first-order predicate called a system description, or sometimes logic, specifying normal also normality structure and behaviour, axioms; l COMPS denotes a finite set of constants in first-order logic, denoting the components (elements) of the system; l OBS denotes observations, a finite i.e., observed set of formulae findings. in first-order predicate logic, denoting It is, in principle, possible (faulty) behaviour within to specify normal as well as abnormal a system description SD. Adding knowledge of abnormal behaviour can be an effective means to reduce the number of alternative diagnoses produced is defined as an assignment A consistency-based diagnosis literal [ 181. of either a positive i.e., Abnormal(c) or a negative literal -Abnormal(c) to each c E COMPS, D = {Abnormal(c) ( c E C} U {-Abnormal(c) 1 c E COMPS\C} where C C COMPS, such that SDUOBSUDFL is called -Abnormal(c) this condition E D indicates component by de Kleer et al., each literal Abnormal(c) the consistency condition. E D is interpreted that C is minimal with respect c E C, it holds that Abnormal(c) In the as being [ 181. theory by Reiter, the set C above is taken as a diagnosis, with the extra [36], but note that for each to set inclusion to the is true, i.e., c is defective. According taking C = COMPS leads to the trivial diagnosis the set of all (SD U OBS U D is satisfiable); formalization defective; a literals In the original requirement component definition of consistency-based that all components components). This explains why Reiter incorporated that the set C must be a minimal set with respect to set inclusion, condition. However, is merely a measure of plausibility, which may not be appropriate when knowledge of theory the requirement the consistency to set inclusion (or the defective components fulfilling according later it was recognized c to be nondefective that minimality in the original are defective are among diagnosis, 330 I1J.F: Lucas /Art$cial Intelligence 105 (1998) 295-343 abnormal behaviour criterion was left out of the basic definition. is also included in the system description SD, and the minimality Example 37. Consider OBS={Zt=l,Z2=O,Z3=1,0t=l,O~=O},then the system S = (SD, COMPS) from Section 2.1 (Fig. 2). Now, let D = (-Abnormal(X), Abnormal(A)} is a diagnosis, because SDUOBSUDYL, i.e., consistency assuming both X and A to be normally has been regained by assuming functioning, i.e., the AND gate A to be faulty, whereas D’ = {-Abnormal(X), -Abnormal(A)} yields an inconsistency (SD U OBS U D’ I= -L), indicating that D’ is no diagnosis. In [18] the notion of partial diagnosis is introduced, which -Abnormal(c) and of Abnormal(c) of the remaining abnormality condition consistency is a partial diagnosis denoting a common diagnostic pattern. is fulfilled that is minimal with respect for every satisfiable assignments components is thus assumed is a satisfiable to part of all the components to be unknown), set D (the such that the superset of D. A kernel diagnosis and can be viewed as to set inclusion, This notion of diagnosis can be defined in terms of our framework. The resulting notion of consistency-based diagnosis, denoted by CB, is defined as follows: CBc,e,j, (E) = 1 H u if Vf E E: f E e/H(H) V-f otherwise. $! e/H(H), A hypothesis H may also include observable H is a set of assumptions concerning findings and defects. findings as inputs to a system, in which case Example 38. For the logic circuit in Fig. 2 we have that that the XOR gate X is normal and a means where 1.x means abnormal or faulty (cf. Example 6 for the evidence to the diagnosis consistency-based in Example 37, obtained by the corresponding diagnosis. that the AND gate A is function e’). This result is analogous logical definition of is neither diagnostically monotonic nor is the independence Without further restrictions with regard to the evidence functions e, the notion of CB di- satisfied. to diagnos- is restricted in Section 2, evidence If the decreasing. fails to agnosis However, the independence tic specifications functions notion of diagnosis CB is defined for such functions, is satisfied if CB diagnosis increasing. As discussed are typically monotonically the independence assumption that are monotonically system descriptions representing assumption assumption l?J.E Lucas /Ar@cial Intelligence 105 (1998) 295-343 331 hold, as can be shown by a simple counterexample. The following useful proposition holds in case the evidence is monotonically decreasing. function Proposition 39. Let P = (C, E), C = (A, @, e), be a diagnostic problem with monoton- ically decreasing CBE,~,,,(E) = D, then CBX,~,,,(E) = D’ with D’ c D. let H 2 H’, with H, H’ C A, evidence function e, and then if Proof. condition from condition If CBZ,~,,(E) = D then for each f E E: (1) f E elH(H) or (2) -f (1) holds then f E elH’(H’), because e/H(H) C elH’(H’); $ elH(H). If for the same reason (2) it follows that -f $ etH/(H’). q In terms of the approach by de Kleer et al. [ 181, from this proposition the existence of a partial diagnosis can be derived. Corollary 40. Let P = (22, E) be a diagnostic problem, with monotonically evidencejimction then also CBx,,,, e, then if CBC,~,~~~~) (E) = H U Id] and CBC,~,~+~, (E) = H. decreasing (E) = H U ]-dl, In [ 181, the notion of partial diagnosis from the notion of diagnosis, as done above. is provided as a basic definition; it is not derived 4.3. Comparison It is informative terms of the restriction proposition holds. to relate the notions of diagnosis above to each other in relation & (cf. Definition 28). It is easily seen that the following introduced Proposition 41. Let SC, WC and CB be the notions of strong-causality, weak-causality and consistency-based diagnosis, respectively, then SCc:WC&CB. then elH(H) = E, Proof. Let P = (C, E) be a diagnostic problem. Simply observe elH(H) 2 E, and WCZ,,,~(E) H, if WCx,,,,(E) f E E: CBc,e,H (E) = H holds. then elH(H) 2 E, so for each therefore, = H, (cid:144)I that if WCz,,,, (E) = = H. Furthermore, f E elH(H). Hence, reveals that consistency-based diagnosis producing many alternative diagnoses, This potentially community. is a very weak a well known form of diagnosis, fact in the diagnosis 5. Refinement diagnosis Although the diagnostic theories mentioned problem solving can be viewed in all of them as a special instance of hypothetical above differ in several respects, diagnostic reasoning 332 FYI? Lucas /Artificial Intelligence 105 (1998) 295-343 [31]. In solving a diagnostic problem, a hypothesis respect to diagnostic knowledge and observed findings. and called a diagnosis; when it fails to pass the tests, it is rejected. is first generated and next tested with If it passes the tests, it is accepted This view of diagnosis is quite general, but it is still unnecessarily that does not comply with all requirements, Instead of simply rejecting a hypothesis it seems more natural to adjust or refine it, when possible. Then, a diagnosis obtained after refinement of a hypothesis may be viewed as the best possible solution in a particular sense, given the findings and the hypothesis at hand. It therefore domain knowledge, seems attractive of diagnosis, yielding notions of rejinement diagnosis. The study of these notions of diagnosis demonstrates the flexibility of the framework of diagnosis defined in Sections 2 and 3. the basic definition the set of observed to incorporate of refinement a principle restrictive. into diagnostic problem solving knowledge There are various reasons why refinement diagnosis may be a more appropriate basis for than the more rigorous notions of diagnosis mentioned above: i.e., the bases are, almost without exception, modelled problem domain has not been fully described. For example, knowledge of certain interactions among defects may be missing. l Real-world incomplete, l Real-world knowledge bases are not completely accurate, e.g., the meaning of the domain knowledge may not have been captured precisely. l The findings that may be observed, and interpreted by a diagnostic part of what might have been collected without limitations, money. such as available system, are only time and l Part of the observed findings may be unreliable, due to impediments to the observation process, such as limited available time. in particular medicine, for all observed In many domains, does not account observed, underaccounts or overaccounts than to establish no diagnosis at all. It is sometimes for the set of observed findings. findings, or that suggests it is usually better to arrive at a diagnosis findings that that have not been said that such a diagnosis certain principles of refinement? Obviously, The following question now arises: what can be taken as a basis for notions of diagnosis there exists a wide range which incorporate of possibilities. Which of the possible choices yields to a large extent, on the nature of the problem domain, which is partially expressed by the characteristics between a notion of diagnosis functions of the set of observed findings given a specific R, on the one hand, i.e., the interpretation knowledge base, and properties of a given evidence function e, on the other hand, are of importance the most natural result depends, e. Dependencies of the evidence in this respect. called most general diagnosis, (with respect the class of notions of refinement Two classes of refinement diagnosis will be studied here. Firstly, the class of notions of is examined, where the least upper is taken as a diagnostic called most specijc is studied. every accepted the is considered most refinement diagnosis, bound of accepted hypotheses solution. Secondly, diagnosis, based on taking In most general diagnosis, subhypothesis largest set of defects that is included plausible. lower bound of accepted hypotheses set of defects in contrast, in every accepted subhypothesis is considered most plausible; in most specific diagnosis, to set inclusion) the smallest the greatest diagnosis, includes that I?J.E Lucas/Artijicial Intelligence IO5 (1998) 295-343 333 5. I. Most general diagnosis Notions of most general diagnosis capture the idea that if a specific diagnostic hypothesis should be taken instead. The least upper is an example of is not accepted, bound with respect to set inclusion of the set of accepted subhypotheses such a ‘nearest’ subhypothesis. then the ‘nearest’ subhypothesis The notion of most general subset diagnosis, denoted by GS, is defined as follows: U H’ if H is consistent, and 3H’ C H: ep(H’) s E, GSze,, (E) = $$& I lu otherwise. a most general subset diagnosis of a given hypothesis, where an accepted subhypothesis is the smallest set of defects that includes all concerns that all have been observed. the causal specification C in Fig. 1 and the corresponding e in Example ,d2) (E) = {dl, dz}, which 5, with E = {fl, f2) (fever and sore is also an abduct&e diagnosis, throat), we because that GSC++, (E) = I&, 41. However, have SC ~~~~~~~~~~~ SC z,ell+ causing neglecting a particular defect may be dangerous. = u. H ence, e({dl, d2)) predicts a finding ,+, (Vi}> the defect dl to be ignored. This may be a suitable approach it holds that GS_X,~,(~~,~~) Kf2H = Id21, where that cannot be accounted to domains for, in which Intuitively, accepted subhypotheses observable findings Example 42. Reconsider evidence function In Fig. 11, the relationship between diagnostic hypothesis H, the set of observed findings depicting as the < total order to a monotonically E and the resulting diagnosis GSZ,,,~ (E) these sets as if they were real numbers and by taking set inclusion on the real numbers. is applied decreasing is either undefined by schematically subset diagnosis If most general is summarized the resulting or equal to diagnosis evidence function, GSc,,,,(E) = H GS c,e,,,(W = H” GS C,e,*, (E’) = H’ -CA H GSX~~($= GS L$,,(E’) = H’ GS C,elH’ (E) = ‘J, (4 (b) Fig Il. Monotonically increasing (a) and decreasing (b) evidence functions. 334 II J.E Lucas / Artijicial Intelligence 105 (1998) 295-343 the given hypothesis H. This contrasts with GS applied evidence such an evidence of most general diagnosis may be taken as the formalization function, which may also yield subsets of the hypothesis If the notion of heuristic classification. that e(H”) may even be a superset between E and as before, but again, certain interactions between defects may be then the relationships (E) = H ” in Fig. 1 l(a) is intended function e is nonmonotonic, to a monotonically as a diagnosis. to represent associations, is assumed to illustrate increasing empirical function GSE+,, of E. If the evidence elH (H’) are investigated ignored. The independence specifications with a monotonically by a bottom-up partial specification. assumption is satisfied increasing for GS if GS is restricted evidence to diagnostic function, which can be defined Proposition 43. The independence assumption holds for the notion of diagnosis GS, when evidence functions, applied speci@ations with monotonically to diagnostic increasing described by a bottom-up partial speci$cation. e. Let V C H be a subset of the hypothesis H E A. The powerset p(H) Proof. Let P = (27, E) be a diagnostic problem with monotonically function partitioned the set of sets P’ for which it holds that for each U E P’: U g V. Then, according set theory, it holds that: increasing evidence is into the set of sets P for which it holds that for each U E P: U C V, and to basic GSc,+, (E) = u H’U u H’. H’EP qvW’)c~ H’EP’ ~H(H’)G of this union first component The monotonically e(H’) C E, then e(H”) s E, and because H’ fl V & V, the set H’ fl V is considered diagnosis GSC,~,, (E). Hence, as GSE,~,” (E). Since e is if to H” = H’\V, because in the the sets H’ E P’ may be changed can also be written increasing, GSZ,,,, (E) = GSz.e,v (E) U GS~,qqy (5). Since tion. the set V has been selected arbitrarily, GS satisfies 0 the independence assump- However, if the evidence function e is not monotonically dence assumption is not satisfied. Hence, general for most general subset diagnosis, ever, most general subset diagnosis proposition. increasing, then the indepen- the independence fails to hold in assumption as can be shown the a counterexample. How- as proven in the following is diagnostically monotonic, Proposition 44. The notion of most general monotonic. subset diagnosis GS is diagnostically Proof. If H E H’, then GSZ,=,~(E) C GSX,~,,,(E) # u, because E E, H” C H, then elH,(H”) E E. if eiH(H”) 0 given that GSE,~,,(E), GSx+,, (E) P.J.F: Lucas/Arti$cial Intelligence 105 (1998) 295-343 335 GOx,e,,(E) = H ~,e,~, (E’) = u GO GO c,e,,,(E) = H’ ‘X&(E’) GO GO = H ~,e,,,.@‘) = H” ~,e,#) = H” (4 (b) Fig. 12. Monotonically increasing (a) and decreasing (b) evidence functions. Where most general subset diagnosis can be viewed as a more flexible version of diagnosis SC, which for certain evidence strong-causality as consistency-based weak-causality diagnosis by the superset relation, yielding GO (the letter ‘0’ stands for ‘cOntams’). diagnosis. This suggests replacing functions is as little restrictive for in most general subset the notion of most general superset diagnosis the subset relation diagnosis, a similar, flexible notion of diagnosis can be designed The notion of rrwst general superset diagnosis, denoted by GO, is defined as follows: GO+,(E) = I U H’CH qH(*QE lu H’ if H is consistent, and 3H’ C H: elH(H’) 2 E, otherwise. functions that are monotonically decreasing, or nonmonotonic, Most general superset diagnosis has much in common with weak-causality defined in the previous section. If the notion of most general superset diagnosis evidence diagnosis GOC,~,~ (E) = H’ it may even hold that e(H’) c E, although diagnostic hypotheses H” E H that contribute Hence, the situation as might be expected from their respective definitions. are schematically most general but most general monotonic. Both results follow from straightforward modification of Proposition 44. for the resulting for each of the it holds that e/H (H”) 3 E. to the diagnosis is the reverse of that for most general subset diagnosis discussed above, In Fig. 12, the various possibilities satisfied is diagnostically diagnosis WC is applied to depicted. The independence superset diagnosis, superset diagnosis is not generally assumption for functions As is true for weak-causality diagnosis WC, most general superset diagnosis to is very unrestrictive, which is revealed by the monotonically increasing evidence fact that GOE,~,” (!J) = H if e( H) # I, meaning the hypothesis may have occurred, even if no findings have been observed. Note that the same diagnosis diagnosis WC in this case. By adopting some would have been produced by weak-causality criterion of parsimony according then be produced. to only select plausible diagnoses (cf. [41]), such as minimality that all defects constituting the empty diagnosis the unrestrictiveness to set inclusion, is alleviated; restricted t?J would 336 RJ.E Lucas /Artificial Intelligence 105 (1998) 295-343 An alternative to the definition of subset diagnosis is to consider all sets of defects D that have at least one finding f in common with the findings E observed. This leads to the following definition of the notion of most general intersection diagnosis, denoted by GI: U H’ Gke,, (E) = ,,=,v$$,=p~ v elHW)nW) if H is consistent, and (E = 0 or 3H’ G H: e/H(H’) = 0 or elH(H’) O E # 0), otherwise. findings are nonempty, If the sets of observed and observable intersection diagnosis with respect to H stands for the least upper bound of subsets of defects of H C A, where for each subset of defects H’ admitted to the most general (E), the associated in common with the set of observed assumption findings elH(H’) findings E. is not satisfied for most general intersection diagnosis GIz,,,, is empty or has at least one finding The independence set of observable intersection diagnosis, is diagnostically monotonic. intersection which is even true if GI is restricted functions. The reason is to interaction-free that if elH(H’) rl E # 0, then it need not be true that for all d E H’: el(dl(d) fl E # 0. Only if e(D) = e(D’), for each consistent D, D’ g A (every set of defects has the same set of associated free, the notion of most general evidence assumption hold. However, if e is interaction to such interaction-free diagnosis findings) would the independence intersection restricted functions evidence The advantage of most general is that only defects that have at least one associated observable superset diagnosis that has actually been observed, are included assumption observed and not all observed findings need be accounted may be required the defects. in a domain where not all findings associated with a set of defects need be it that are in some way ‘typical’ for to restrict to those observable diagnosis over most general subset and finding in a diagnosis. This will be an acceptable for. In representing a domain, findings Most general intersection diagnosis can be viewed as a refinement version of a mixture of the notions of weak-causality and strong-causality diagnosis. 5.2. Comparison Most general subset, superset and intersection diagnosis are three refinement approaches these notions of diagnosis are shown in all findings associated with a set of defects if the set of defects is to be included as part of a diagnosis. Most general intersection focusses on common to diagnosis. The restriction Fig. 13. For most general subset diagnosis, must be observed superset diagnosis findings of defects. For most general relationships between SC GS C - L WC Go C - Fig. 13. Restriction taxonomy of notions of diagnosis. l?J.E Lucas /Art$cial Intelligence 105 (1998) 295-343 337 diagnosis, at least one finding associated with a defect must be observed be included as part of a diagnosis. Notions of diagnosis can also be classified the subdiagnostic i above stand in a subdiagnostic to each other: relation relation (cf. Definition 29). The three notions of diagnosis discussed if the defect is to in terms of GSaGI GO I! GI. findings from the fact that if a set of observed in the set of This follows findings associated with a set of defects, or vice versa, the intersection of the observable is nonempty, given that neither the set of set of observed is empty. For the empty observed to the largest result with intersection cases, the most general respect to set inclusion of GO and GS. Hence, a most general intersection diagnosis will always contain at least as many elements as the corresponding most general subset and superset diagnosis. findings and observable findings E, nor the set of observable diagnosis findings elH(H’), is always equal is included findings 5.3. Most speci$c diagnosis Rather than taking the least upper bound of a set of accepted subhypotheses of a taking the greatest lower bound provides another approach to refinement given hypothesis, diagnosis. We shall refer to notions of diagnosis based on taking the greatest lower bound as notions of most specific diagnosis. Where the concept of most general diagnosis notions of diagnosis specific diagnosis every accepted subhypothesis. S that if SE,=,~ (E) = 0 and SE_+,, (E) = H”, Hence, notions of most specific diagnosis are very restrictive, and neither the independence holds. assumption nor diagnostic monotonicity formalizes that include every accepted subhypothesis, most that are common to it holds for a notion of most specific diagnosis then, by definition, SZ,~,~,_, (E) = 0. formalizes notions of diagnosis that yield diagnoses that yield diagnoses In general are admitted subhypotheses As with the notion of most general subset diagnosis, to a diagnosis in the notion of most specific subset sets of findings if their associated findings of a diagnostic problem. However, of these have in common constitute a the notion of most specific subset diagnosis, denoted by SS, is defined only the defects the subhypotheses in the set of observed diagnosis, are included accepted subhypotheses, diagnosis. Hence, as follows: I n H’ if H is consistent, and 3H’ 2 H: elH(H’) C E, lu This notion of diagnosis is interaction exception when only one subhypothesis is extremely otherwise. function restrictive. For example, free, then the most specific subset diagnosis will almost always (with the if an evidence is accepted) be equal to the empty set. If the evidence function is monotonically to construct tries form of kernel, consistency-based the smallest diagnosis diagnosis decreasing, possible. then most specific subset diagnosis as a flexible It may be viewed for the in the sense of [ 181. The reason 338 l?J.F: Lucas /Artificial Intelligence 105 (1998) 295-343 Fig. 14. Multiplier-adder circuit. similarity subset diagnosis between kernel diagnosis and most specific is that any hypothesis H’ for which e]H (H’) C E is also consistent with E. is and most specific subset diagnosis between kernel diagnosis in consistency-based diagnosis The correspondence illustrated by an example taken from [ 181. it produces as output to as Ml, M2 and M3, and two adders, denoted by Al and AZ. When a Example 45. Consider Fig. 14, which depicts an electronic circuit with three multipliers, referred multiplier Mi is behaving normally, the product of its two inputs; similarly, a normally behaving adder Aj produces as output the sum of its two inputs. Let the circuit. The fact that some Z = (A, 0, e) be a diagnostic multiplier Mi is defective, A similar notational convention to assume in Fig. 14. The normal output of the circuit, 01 = 12 and 02 = 12, is denoted by 01 and 02; j = 1,2. The set of observed findings E is in equal to abnormal output is denoted by -oj, e = {-01,02}, this is indicated by lmi. is adopted with regard to the two adders. It is convenient is denoted by rni ; if it is nondefective, i.e., 01 = 10 # 12 and 02 = 12. [15,1 S]), as indicated is fixed (as assumed that the input to the circuit specification representing in The following values of the evidence function e are among those that correspond to the circuit’s normal behaviour: e(]-ml, -m2, -m3, -@I, -a21) = @1,021 e((-ml, -m2, -m3, al, -a21) = (021 e(I-ml, -m2, -m3, ~1, ~21) = fl e({-ml, -m2, -m3, ~11) = (021 e(blI) = I021 e({-ml, -m2, -m31) = (01,mI e(0) = {01,021. (e(0) denotes subset diagnosis with respect to the hypothesis H = {al ) is equal to that it is unknown whether defects are present or absent.) The most specific SSE,e,(o,) (ml ,021) = {a11 F!J.E Lucas /Art$cial Intelligence 10.5 (1998) 295-343 339 which sistency-based is indeed a kernel diagnosis diagnosis. Note that SSZ,e,fj ({‘013 021) = Iall for the diagnostic problem P = (22, E) using con- if at E H, when for the other kernel diagnoses example, it holds {ml}, (yn2, mg], (m2, ~2) g H, for H = {-ml, -m2, -mJ,al, 7~2). As discussed above, most general too many defect elements, that contains increasing. Most specific monotonically possibly more suitable, notion of diagnosis superset diagnosis will often yield a diagnosis in particular when an evidence superset diagnosis than most general superset diagnosis. is a more restrictive, function is and The notion of most specfic superset diagnosis, denoted by SO, is defined as follows: SOc.e,H (E) = n H’ H’CH e,,dH’)IE u if H is consistent, and 3H’ E H: el,y(H’) 2 E, otherwise. function If the evidence monotonically increasing, specific superset diagnosis subhypotheses is attractive. The basic idea of most to the accepted that are common are due to the common defects of accepted subhypotheses. the result may be intuitively is that the observed superset diagnosis to which most is applied, findings specific Example 46. Reconsider Fig. 1. For E = (f2, f3) (i.e., the patient has sore throat and dyspnoea), the most specific superset diagnosis is equal to it holds that ejH({dl,d3}) 2 E, el,y((d2,d3]) 1 E and ei,y((dl,dz,d3)) because, 2 E, where H = {dl, d2, d3). All other subsets of H have associated sets of findings that are no supersets of E. The defect d3 stands for asthma. While both d I and d2 participate in all accepted for E, only in subhypotheses subhypotheses, right to accept d3 as the most plausible diagnosis. the defect d3 occurs intuitively i.e., it turns out to be essential. that also account It seems therefore As the example above indicates, a most specific superset diagnosis need not account for function. function If an evidence is likely to produce a singleton set sets of observed if the associated findings on the basis of the given evidence free, then most specific superset diagnosis that is very plausible all observed is interaction diagnosis findings e({d}) are mutually disjoint. for a given hypothesis As discussed above, the notion of most general tive. All defects that, either individually in common with the set of observed intersection diagnosis is very unrestric- or in combination with other defects, have findings in a diagnosis. The notion of findings, are included 340 l?J.E Lucas /Artificial Intelligence 105 (1998) 295-343 most specijic general intersection diagnosis; it is defined as follows: intersection diagnosis, denoted by SI, is much more restrictive than most Size,, (E) = f-l H’CH (E=OvqH(H’)=O v elFf(fm~#0) H’ if H is consistent, and (E = 0 or 3H’ C H: q,y(H’) = 0 or qH(H’) n E # fl), otherwise. to the empty set if the function values e({d)) have many observable the resulting diagnosis will be in findings function e is monotonically increasing, If the evidence equal common. 5.4. Comparison Although a simple restriction relation the notions of most specific diagnosis are very restrictive, they do not stand in to the other notions of diagnosis. However, it is easy to see that SSz,,,, (E) g GSz,e,H (E) holds for each consistent H C A. Similar set inclusion of diagnosis. We state without proof that: relations hold for the other notions SSgGS SOiGO SI a GI. 6. Discussion In this paper, a theory of diagnosis has been developed which considers a diagnosis interpreted yielded by a diagnostic problem solver as an established to express static domain knowledge and a hypothesis. The resulting aspects of diagnosis, strategies into account. It is inspired by the work on abductive diagnosis by Reggia et al. [29] and Bylander to that work. In fact, as has been shown et al. [5], but offers a significant above, in our theory amount of diagnosis. extension these theories of abductive diagnosis relationship between is suitable i.e., diagnosis without taking problem-solving to particular choices framework appealing interpretation The framework of diagnosis proposed function, a notion of diagnosis can be designed, or selected, in this paper supports two different views. On the expressed by an of knowledge, one hand, given some intuitively evidence that adheres to that meaning as closely as possible. On the other hand, applying a particular notion of diagnosis is given to the to solve a diagnostic problem that a particular from the function. associated evidence and that it is suitable as a tool for literature are expressible several new notions the analysis and comparison findings of diagnosis have been proposed implies It was shown that well known notions of diagnosis of notions of diagnosis. Furthermore, in terms of the framework, in dealing with observed that are less rigorous (diagnostic) meaning ME Lucas /ArtQicial Intelligence 105 (1998) 295-343 341 and diagnostic knowledge e.g., when a single element among However, these are certainly not the only notions of diagnosis domains. than common notions of diagnosis, which give up too soon, for. that may be useful in certain findings cannot be accounted the set of observed In a The literature on diagnosis contains a number of other approaches to diagnosis. language to be more general link between a specific logic has been a popular logical notions of diagnosis, several researchers have demonstrated for the analysis of diagnosis, yielding like abductive and consistency-based particular, number of different [ 12,18,32,36,42]. These logical notions of diagnosis have usually been designed diagnosis in close connection with specific domain models, such as causal models or models of in a natural way to deal with specific structure and behaviour, and, hence, can be applied diagnostic problems only. Although their theory of diagnosis there remains a close there is no intimate connection models of diagnosis. In fact, the meaning of a knowledge base, described by means of an evidence function e, is completely separated from its diagnostic use. Of course, it is usually the meaning of a knowledge desirable base. Furthermore, where in other frameworks, modelled behaviour has to satisfy certain constraints, logical entailment, like monotonicity there are no such prerequisites be expressed. due to the monotonic nature of standard in our framework, and many types of subtle interaction can in our framework, the theory and any of the existing conceptual than orginally theory and problem to define notions of diagnosis that closely mirror type. In contrast, [12,18,32,36], between thought problem problem proposed for diagnostic for diagnostic the framework We have focussed on qualitative methods solving, but in a considerable number of papers, diagnostic problem solving is essentially viewed as a form of reasoning with uncertainty, using specific quantitative measures of uncertainty. A typical networks, also called Bayesian belief example of such work is the usage of probabilistic [ 1,20,28,39]. However, by a straightforward solving networks, this paper can also cover such probabilistic extension, in [7], and Santos and Santos [37,38], have shown diagnostic systems: Charniak and Shimony direction, by the concept of cost- that set-covering based abduction. This amounts to associating a prior cost function with sets of defects and findings, and updating cost information during abductive reasoning. Then, to any diagnosis produced, a cost will be attached. The cost of a diagnosis may be anything, varying from feeling of importance expressed by numbers. However, financial costs to some subjective for the negative Chamiak and Shimony choose as a semantics of cost function logarithm of probabilities. Under this interpretation, is identical to a most probable diagnosis using probabilistic networks theory can be moved in a probabilistic a minimal-cost [7]. information diagnosis A limitation the framework is rather extensional of the framework presented here is that, as a tool for the semantical in nature. This is in contrast for the analysis of diagnosis, as and abductive diagnosis, which allow for the separate of a analysis of diagnosis, with the more intensional nature of logic-based commonly used in consistency-based specification knowledge base, just by putting parts together. Despite this limitation, nature of the formalism and findings, and much insight can be gained in this way. of knowledge of structure and function, and for the easy composition that forces one to think explicitly about interactions it is the extensional among defects techniques 342 PJ.E Lucas /Artificial Intelligence 10.5 (1998) 295-343 Acknowledgements I would like to thank Ameen Abu-Hanna, Frank van Harmelen, Treur for their many helpful comments on earlier drafts of this paper. John Josephson and Jan References [l] S. Andreassen, M. Woldbye, B. Falck, S.K. Andersen, MUNIN-a interpretation Artificial of electromyographic findings, in: Proceedings 10th International Intelligence (IJCAI-87), Milan, Italy, 1987, pp. 366-372. causal probabilistic network Joint Conference for on [2] A. Beschta, 0. Dressler, H. Freitag, M. Montag, P. Struss, DPNet-a in: Proceedings transmission (Tooldiag-93), Toulouse, France, 1993, pp. 1019-1027. for localizing Diagnosis networks, in power faults second generation expert system International Conference on Fault [3] J.S. Brown, D. Burton, J. de Kleer, Pedagogical, in SOPHIE natural I, II and III, in: D. Sleeman, J.S. Brown (Eds.), Intelligent Tutoring Systems, Academic Press, New York, 1982, pp. 227-282. language and engineering techniques [4] B.G. Buchanan, E.H. Shortliffe, Rule-based Expert Systems: the MYCIN Experiments of the Stanford Heuristic Programming Project, Addison-Wesley, Reading, MA, 1984. [5] T. Bylander. D. Allemang, M.C. Tanner, J.R. Josephson, The computational complexity of abduction, in: R.J. Brachman, H.J. Levesque, R. Reiter (Eds.), Knowledge Representation, The MIT Press, Cambridge, MA, 1992, pp. 25-60. [6] B. Chandrasekaran, Generic tasks as building blocks for knowledge-based design examples, The Knowledge Engineering Review 3 (3) 183-210. systems: the diagnosis and routine [7] E. Chamiak, S.E. Shimony, Cost-based abduction and MAP explanation, Artificial Intelligence 66 (1994) 345-374. [8] W.J. Clancey, Heuristic classification, Artificial [9] L. Console, D. Theseider Dupre’, P. Torasso, A theory of diagnosis Intelligence 27 (1985) 289-350. Proceedings 1317. 1 lth International Joint Conference on Artificial for incomplete in: Intelligence, Detroit, MI, 1989, pp. 131 l- causal models, [IO] L. Console, P. Torasso, Integrating models of correct behaviour into abductive diagnosis, in: Proceedings ECAI-90, Stockholm, Sweden, 1990, pp. 160-166. 11 l] L. Console, D. Theseider DuprC, P. Torasso, On the relationship between abduction and deduction, J. Logic Comput. 1 (5) (1991) 661-690. [12] L. Console, P. Torasso, A spectrum of logical definitions of model-based diagnosis, Computational Intelligence 7 (3) (1991) 133-141. [ 131 P.T. Cox, T. Pietrzykowski, General diagnosis by abductive inference, in: Proceedings IEEE Symposium on Logic Programming, 1987, pp. 183-189. [ 141 P. Dague, Model-based diagnosis of analog electronic circuits, Ann. Math. Artificial Intelligence 11 (1994) in: H.E. Shrobe (Ed.), Exploring Artificial Intelligence. Morgan Kaufmann, San 430-492. [ 151 R. Davis, W. Hamscher, Model-based reasoning: troubleshooting, Intelligence: Survey Talks from the National Conference on Artificial Mateo, CA, 1988, pp. 297-346. [ 161 R. Davis, H. Shrobe, Representing structure and behaviour of digital hardware, IEEE Computer 16 (10) (1983) 75-82. [17] J. de Kleer, Local methods for localizing faults in electronic circuits, MIT AI Memo 394, Massachusetts Institute of Technology, Cambridge, MA, 1976. [18] J. de Kleer, A.K. Mackworth, R. Reiter, Characterizing diagnoses and systems, Artificial Intelligence 52 (1992) 197-222. [ 191 K.L. Downing, Physiological applications of consistency-based diagnosis, Artificial Intelligence in Medi- cine 5 (1993) 9-30. [20] D.E. Heckerman, B.N. Nathwani, Towards normative expert systems: Part II-Probability-based represen- in Medicine 31 (1992) tations for efficient knowledge 106-I 16. acquisition and inference, Methods of Information P.J.E Lucas /Artificial Intelligence 105 (1998) 295-343 343 [21] J.R. Josephson, S.G. Josephson, Abductive Inference: Computation, Philosophy. Technology, Cambridge University Press, Cambridge, 1994. [22] K. Konolige, Using default and causal reasoning in diagnosis, Ann. Math. Artificial Intelligence I1 (1994) 97-135. [23] P.J.F. Lucas, The representation of medical reasoning models in resolution-based theorem provers, Artificial Intelligence in Medicine 5 (5) (1993) 395-414. [24] P.J.F. Lucas, Logic engineering [2.5] P.J.F. Lucas, Structures in medicine, The Knowledge Engineering Review IO (2) (1995) 153-179. in diagnosis: from theory to medical application, Ph.D. Thesis, Free University of Amsterdam, Amsterdam, 1996. [26] P.J.F. Lucas, Symbolic diagnosis and its formahsation, The Knowledge Engineeting Review 12 (2) (1997) 109-146. [27] R.S. Patil, P. Szolovits, W.B. Schwartz, Modeling knowledge of the patient in acid-base and electrolyte disorders, in: P. Szolovits (Ed.), Artificial Intelligence in Medicine, Westview Press, Boulder, CO, 1982. [28] J. Pearl, Probabilistic Reasoning [29] Y. Peng, J.A. Reggia, Abductive in Intelligent Systems, Morgan Kaufmann, San Mateo, CA, 1988. Inference Models for Diagnostic Problem Solving, Springer, New York. 1990. [30] D. Poole, R. Goebel, R. Aleliunas, Theorist: a logical reasoning system for defaults and diagnosis, in: N. Cercone, G. McCalla (Eds.), The Knowledge Frontier, Springer, Berlin, 1987. [3 l] D. Poole, A methodology 5 (5) (1990) 521-548. for using a default and abductive reasoning system, lntemat. J. Intelligent Systems [32] D. Poole, Representing diagnosis knowledge, Ann. Math. Artificial Intelligence 1 I (1994) 33-50. [33] C. Preist, K. Eshghi, B. Bertolino, Consistency-based Intelligence 11 (1994) 5 l-74. and abductive diagnosis as generalized Ann. Math. Artificial stable models, [34] W.F. Punch III, M.C. Tanner, J.R. Josephson, J.W. Smith, PEIRCE: a tool for experimenting with abduction, IEEE Expert 5 (5) (1990) 34-44. [35] J.A. Reggia, D.S. Nau, Y. Wang, Diagnostic expert systems based on a set-covering model, lntemat. J. Man- Machine Studies I9 ( 1983) 437460. [36] R. Reiter, A theory of diagnosis [37] E. Santos Jr., A linear constraint (1994) l-27. from first principles, Artificial Intelligence 32 (1987) 57-95. to cost-based abduction, Artificial satisfaction approach Intelligence 65 [38] E. Santos Jr., ES. Santos, Polynomial solvability of cost-based abduction, Artificial Intelligence 86 (1996) 157- 170. 1391 S.L. Lauritzen, D.J. Spiegelhaher, Local computations with probabilities on graphical structures and their application to expert systems, J. Roy. Statist. Sot. Ser. B 50 (2) (1987) 157-224. [40] P. Torasso, L. Console, Diagnostic Problem Solving, North Oxford, London, 1989. [41] S. Tuhrim, J. Reggia, S. Goodall, An experimental study of criteria for hypothesis plausibility, J. Experiment. Theoret. Artificial Intelligence 3 ( 199 1) 129-l 44. 1421 A. ten Teije, F. van Harmelen, An extended spectrum of logical definitions for diagnostic systems, in: G.M. Provan (Ed.), DX-94,5th International Workshop on Principles of Diagnosis, 1994, pp. 334-342. [43] S.M. Weiss, C.A. Kulikowski, S. Amarel, A. Safir, A model-based method for computer-aided medical decision making, Artificial Intelligence 11 (1978) 145-172. [44] T.D. Wu, A problem decomposition method for efficient diagnosis and interpretation of multiple disorders, in Biomedicine 35 (1991) 239-250. Computer Methods and Programs 