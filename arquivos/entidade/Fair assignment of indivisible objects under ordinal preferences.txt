Artificial Intelligence 227 (2015) 71–92Contents lists available at ScienceDirectArtificial Intelligencewww.elsevier.com/locate/artintFair assignment of indivisible objects under ordinal preferencesHaris Aziz∗, Serge Gaspers, Simon Mackenzie, Toby WalshNICTA and University of New South Wales, Sydney 2052, Australiaa r t i c l e i n f oa b s t r a c tArticle history:Received 28 June 2014Received in revised form 7 June 2015Accepted 14 June 2015Available online 18 June 2015Keywords:Fair divisionResource allocationEnvy-freenessProportionalityWe consider the discrete assignment problem in which agents express ordinal preferences over objects and these objects are allocated to the agents in a fair manner. We use the stochastic dominance relation between fractional or randomized allocations to systematically define varying notions of proportionality and envy-freeness for discrete assignments. The computational complexity of checking whether a fair assignment exists is studied for these fairness notions. We also characterize the conditions under which a fair assignment is guaranteed to exist. For a number of fairness concepts, polynomial-time algorithms are presented to check whether a fair assignment exists. Our algorithmic results also extend to the case of unequal entitlements of agents. Our NP-hardness result, which holds for several variants of envy-freeness, answers an open question posed by Bouveret, Endriss, and Lang (ECAI 2010). We also propose fairness concepts that always suggest a non-empty set of assignments with meaningful fairness properties. Among these concepts, optimal proportionality and optimal weak proportionality appear to be desirable fairness concepts.© 2015 Elsevier B.V. All rights reserved.1. IntroductionA basic yet widely applicable problem in computer science and economics is to allocate discrete objects to agents given the preferences of the agents over the objects. The setting is referred to as the assignment problem or the house allocation problem (see, e.g., [1,8,28,32,40,50,51]). In this setting, there is a set of agents N = {1, . . . , n}, a set of objects O = {o1, . . . , om}with each agent i ∈ N expressing ordinal preferences (cid:2)i over O . The goal is to allocate the objects among the agents in a fair or optimal manner without allowing transfer of money. The assignment problem is a fundamental setting within the wider domain of fair division or multiagent resource allocation [23]. The model is applicable to many resource allocation or fair division settings where the objects may be public houses, school seats, course enrollments, kidneys for transplant, car park spaces, chores, joint assets of a divorcing couple, or time slots in schedules. Fair division has become a major area in AI research in the last decade, and especially the last few years (see, e.g., [3,12–15,18,23,25,29,37,44]).In this paper, we consider the fair assignment of indivisible objects. Two of the most fundamental concepts of fairness are envy-freeness and proportionality. Envy-freeness requires that no agent considers that another agent’s allocation would give him more utility than his own. Proportionality requires that each agent should get an allocation that gives him at least 1/n of the utility that he would get if he was allocated all the objects. When agents’ ordinal preferences are known but * Corresponding author.E-mail addresses: haris.aziz@nicta.com.au (H. Aziz), sergeg@cse.unsw.edu.au (S. Gaspers), simon.mackenzie@nicta.com.au (S. Mackenzie), toby.walsh@nicta.com.au (T. Walsh).http://dx.doi.org/10.1016/j.artint.2015.06.0020004-3702/© 2015 Elsevier B.V. All rights reserved.72H. Aziz et al. / Artificial Intelligence 227 (2015) 71–92Fig. 1. Inclusion relationships between fairness concepts. Envy-freeness is abbreviated as EF and Proportionality is abbreviated as Prop. Possible completion is abbreviated as PC. Necessary completion is abbreviated as NC. An arrow represents inclusion. For example, every SD envy-free outcome is also SD proportional. Double lines represent equivalence. For example, SD EF and Necessary EF are equivalent.utility functions are not given, then ordinal notions of envy-freeness and proportionality need to be formulated. We consider a number of ordinal fairness concepts. Most of these concepts are based on the stochastic dominance (SD) relation which is a standard way of comparing fractional/randomized allocations. An agent prefers one allocation over another with respect to the SD relation if he gets at least as much utility from the former allocation as the latter for all cardinal utilities consistent with the ordinal preferences. Although this paper is restricted to discrete assignments, using stochastic dominance to define fairness concepts for discrete assignments turns out to be fruitful. The fairness concepts we study include SD envy-freeness, weak SD envy-freeness, possible envy-freeness, SD proportionality, and weak SD proportionality. We consider the problems of computing a discrete assignment that satisfies some ordinal notion of fairness if one exists, and the problems of verifying whether a given assignment satisfies the fairness notions.Contributions We present a systematic way of formulating fairness properties in the context of the assignment problem. The logical relationships between the properties are proved. Interestingly, our framework leads to new solution concepts such as weak SD proportionality that have not been studied before. The motivation to study a range of fairness properties is that, depending on the situation, only some of them are achievable. In addition, only some of them can be computed efficiently. In order to find fairest achievable assignment, one can start by checking whether there exists a fair assignment for the strongest notion of fairness. If not, one can try the next fairness concept that is weaker than the one already checked (Fig. 1).We present a comprehensive study of the computational complexity of computing fair assignments under ordinal prefer-ences. In particular, we present a polynomial-time algorithm to check whether an SD proportional exists even when agents may express indifferences. The algorithm generalizes the main result of [46] (Theorem 1) who focused on strict preferences. For the case of two agents, we obtain a polynomial-time algorithm to check whether an SD envy-free assignment exist. The result generalizes Proposition 2 in [12] in which preferences over objects were assumed to be strict. For a constant number of agents, we propose a polynomial-time algorithm to check whether a weak SD proportional assignment exists. As a corol-lary, for two agents, we obtain a polynomial-time algorithm to check whether a weak SD envy-free or a possible envy-free assignment exists. Even for an unbounded number of agents, if the preferences are strict, we characterize the conditions under which a weak SD proportional assignment exists. We show that the problems of checking whether possible envy-free, SD envy-free, or weak SD envy-free assignments exist are NP-complete. The result for possible envy-freeness answers an open problem posed in [12]. Our computational results are summarized in Table 1.We show that our two main algorithms can be extended to the case where agents have different entitlements over the objects or if we additionally require the assignment to be Pareto optimal. Our study highlights the impacts of the following settings: i) randomized/fractional versus discrete assignments, ii) strict versus non-strict preferences, and iii) multiple objects per agent versus a single object per agent.Since the fairness concepts we introduce may not be guaranteed to exist, we suggest possible ways to extend the fair-ness concepts. Firstly, we consider the problem of maximizing the number of agents for whom the corresponding fairness constraint is satisfied. A criticism of this approach is that there can still be agents who are completely dissatisfied. We then consider an alternative approach in which the proportionality constraints is weakened in a natural and gradual manner. We refer to the concepts as optimal proportionality and optimal weak proportionality. The fairness concepts are not only at-tractive but we show that an optimal proportional assignment can be computed in polynomial time and an optimal weak proportional assignment can be computed in polynomial time for a constant number of agents.2. Related workProportionality and envy-freeness are two of the most established fairness concepts. Proportionality dates back to at least the work of Steinhaus [48] in the context of cake-cutting. It is also referred to as fair share guarantee in the literature [41]. A formal study of envy-freeness in microeconomics can be traced back to the work of Foley [31].H. Aziz et al. / Artificial Intelligence 227 (2015) 71–9273Table 1Complexity of checking the existence of a fair assignment of indivisible goods for n agents and m objects. The results in bold are from this paper.Weak SD proportionalin P for strict preferences (Theorem 7)in P for constant n (Theorem 8)SD proportionalin P (Theorem 6)Weak SD envy-freePossible envy-freeNP-complete (Theorem 11)in P for strict preferences [12]in P for n = 2 (Corollary 2)NP-complete (Theorem 11)in P for strict preferencesin P for n = 2 (Corollary 2)SD envy-freeNP-complete even for strict preferences [12]in P for n = 2 (Corollary 1)The computation of fair discrete assignments has been intensely studied in the last decade within computer science. In many of the papers considered, agents express cardinal utilities for the objects and the goal is to compute fair assignments (see, e.g., [9,13,15,28,35,39,42,45]). A prominent paper is that of Lipton et al. [39] in which algorithms for approximately envy-free assignments are discussed. It follows from [39] that even when two agents express cardinal utilities, checking whether there exists a proportional or envy-free assignment is NP-complete. A closely related problem is the Santa Claus problem in which the agents again express cardinal utilities for objects and the goal is to compute an assignment which maximizes the utility of the agent that gets the least utility (see e.g., [2,9,30,42]). Just as in [12,46], we consider the setting in which agents only express ordinal preferences over objects. There are some merits of considering this setting. Firstly, ordinal preferences require elicitation of less information from the agents. Secondly, some of the weaker ordinal fairness concepts we consider may lead to positive existence or computational results. Thirdly, some of the stronger ordinal fairness concepts we consider are more robust than the standard fairness concepts. Fourthly, when the exchange of money is not possible, mechanisms that elicit cardinal preferences may be more susceptible to manipulation because of the larger strategy space. Finally, it may be the case that cardinal preferences are simply not available.There are other papers in fair division in which agents explicitly express ordinal preferences over sets of objects rather than simply expressing preferences over objects. For these more expressive models, the computational complexity of com-puting fair assignments is either even higher [23,27] or representing preferences require exponential space [3,20]. In this paper, we restrict agents to simply express ordinal preferences over objects. Some papers assume ordinal preferences but superimpose a cardinal utilities via some scoring function (see e.g., [16]). However, this approach does not allow for indif-ferences in a canonical way and has led to negative complexity results [8,26,33]. Garg et al. [33] assumed that agents have lexicographic preferences and tried to maximize the lexicographic signature of the worst off agents. However the problem is NP-hard if there are more than two equivalence classes.The ordinal fairness concepts we consider are SD envy-freeness; weak SD envy-freeness; possible envy-freeness; SD proportionality; and weak SD proportionality. Not all of these concepts are new but they have not been examined system-atically for discrete assignments. SD envy-freeness and weak SD envy-freeness have been considered in the randomized assignment domain [11] but not the discrete domain. Bogomolnaia and Moulin [11] referred to SD envy-freeness and weak SD envy-freeness as envy-freeness and weak envy-freeness. SD envy-freeness and weak SD envy-freeness have been consid-ered implicitly for discrete assignments but the treatment was axiomatic [16,17]. Mathematically equivalent versions of SD envy-freeness and weak SD envy-freeness have been considered by Bouveret et al. [12] but only for strict preferences. They referred to them as necessary (completion) envy-freeness and possible (completion) envy-freeness. A concept equivalent to SD proportionality was examined by Pruhs and Woeginger [46] but again only for strict preferences. Pruhs and Woegin-ger [46] referred to weak SD proportionality simply as ordinal fairness. Interestingly, weak SD or possible proportionality has not been studied in randomized or discrete settings (to the best of our knowledge).Envy-freeness is well-established in fair division, especially cake-cutting. Fair division of goods has been extensively studied within economics but in most of the papers, either the goods are divisible or agents are allowed to use money to compensate each other (see e.g., [49]). In the model we consider, we do not allow money transfers.3. PreliminariesAn assignment problem is a triple (N, O , (cid:2)) such that N = {1, . . . , n} is a set of agents, O = {o1, . . . , om} is a set of objects, and the preference profile (cid:2)= ((cid:2)1, . . . , (cid:2)n) specifies for each agent i his complete and transitive preference (cid:2)iover O . Agents may be indifferent among objects. We denote (cid:2)i : E 1for each agent i with equivalence classes in decreasing order of preferences. Thus, each set Eis a maximal equivalence class of objects among which agent i is indifferent, and ki is the number of equivalence classes of agent i. If an equivalence class is a singleton {o}, we list the object o in the list without the curly brackets. In case each equivalence class is a singleton, the preferences are said to be strict. For (cid:4)}.any set of objects Ofor each o(cid:4)) = {o ∈ O(cid:4)) = {o ∈ O(cid:4) (cid:2)i o for each oi , . . . , Eki(cid:4) : o (cid:2)i o(cid:4) ∈ O(cid:4) ∈ O(cid:4) : o(O(Oji(cid:4)i(cid:4) ⊆ O , max(cid:2)i(cid:4)} and min(cid:2)i74H. Aziz et al. / Artificial Intelligence 227 (2015) 71–92(cid:2)A fractional assignment p is an (n × m) matrix [p(i)(o j)] such that p(i)(o j) ∈ [0, 1] for all i ∈ N, and o j ∈ O , and i∈N p(i)(o j) = 1 for all j ∈ {1, . . . , m}. The value p(i)(o j) represents the probability of object o j being allocated to agent i. Each row p(i) = (p(i)(o1), . . . , p(i)(om)) represents the allocation of agent i. The set of columns correspond to the objects o1, . . . , om. A fractional assignment is discrete if p(i)(o) ∈ {0, 1} for all i ∈ N and o ∈ O .Example 1. Consider an assignment problem (N, O , (cid:2)) where |N| = 2, O = o1, o2, o3, o4 and the preferences of the agents are as follows1 :2 :o1, o2, o3, o4o2, o3, o1, o4Then,(cid:3)(cid:4)p =1 0 0 10 1 1 0is a discrete assignment in which agent 1 gets o1 and o4 and agent 2 gets o2 and o3.A uniform assignment is a fractional assignment in which each agent gets 1/n-th of each object. Although we will deal with discrete assignments, the fractional uniform assignment is useful in defining some fairness concepts. Similarly, we will use the SD relation to define relations between assignments. Our algorithmic focus will be on computing discrete assignments only even though concepts are defined using the framework of fractional assignments.Informally, an agent ‘SD prefers’ one allocation over another if for each object o, the former allocation gives the agent at least as many objects that are at least as preferred as o as the latter allocation. More formally, given two fractional assignments p and q, p(i) (cid:2)SDi q(i), i.e., agent i SD prefers allocation p(i) to allocation q(i) if(cid:5)(cid:5)p(i)(o j) ≥q(i)(o j) for all o ∈ O .o j ∈{ok:ok(cid:2)i o}o j ∈{ok:ok(cid:2)i o}i p(i)]. Although each agent i expresses ordinal preferences He strictly SD prefers p(i) to q(i) if p(i) (cid:2)SDover objects, he could have a private cardinal utility ui consistent with (cid:2)i : ui(o) ≥ ui(o. The set of all utility functions consistent with (cid:2)i is denoted by U ((cid:2)i). When we consider agents’ valuations according to their cardinal utilities, then we will assume additivity, that is ui (Oi q(i) and ¬[q(i) (cid:2)SD(cid:4)) if and only if o (cid:2)i oo∈O (cid:4) ui(o) for each i ∈ N and OAn assignment p is envy-free if the total utility each agent i gets for his allocation is at least the utility he would get if (cid:4) ⊆ O .(cid:4)) =(cid:2)(cid:4)he had any another agent’s allocation:ui(p(i)) ≥ ui(p( j)) for all j ∈ N.Note that we sometimes interpret a discrete allocation p(i) as a set, namely the set of objects allocated to agent i. An assignment is proportional if each agent gets at least 1/n-th of the utility he would get if he got all the objects:ui(p(i)) ≥ ui(O )/n.Note that we require that the assignment is complete, that is, each object is allocated. In the context of fractional assignments, an assignment is complete if no fraction of an object is unallocated. In the absence of this requirement a null assignment is obviously envy-free. On the other hand a null assignment is not proportional.When allocations are discrete and when agents may get more than one object, we will also consider preference relations over sets of objects. One way of extending preferences over objects to preferences over sets of objects is via the responsive set extension [7]. In the responsive set extension, preferences over objects are extended to preferences over sets of objects in such a way that a set in which an object is replaced by a more preferred object is more preferred. Formally, for each agent i ∈ N, his preferences (cid:2)i over O are extended to his preferences (cid:2)RSi over 2O via the responsive set extension as follows. For all S ⊂ O , for all o ∈ S, for all o(cid:4) ∈ O \ S,(S \ {o}) ∪ {o(cid:4)}if o(cid:4) (cid:2)i o, andS (cid:2)RSiS (cid:9)RSi S \ {o}.Equivalent, we say that p(i) (cid:2)RSf (o) (cid:2)i o.i q(i) if and only if there is an injection ffrom q(i) to p(i) such that for each o ∈ q(i), Theorem 1. For discrete assignments p and q, the following are equivalent.(i) p(i) (cid:2)SDi q(i).H. Aziz et al. / Artificial Intelligence 227 (2015) 71–9275Table 2Equivalence between different fairness concepts introduced in the literature. All concepts in the same row are equivalent. For example, weak SD proportional is equivalent to possible propor-tional.SD envy-freeSD proportionalWeak SD envy-freeWeak SD proportionalNecessary envy-freeNecessary proportionalPossible envy-freePossible proportionalNecessary completion envy-freePossible completion envy-free(ii) ∀ui ∈ U ((cid:2)i), ui(p(i)) ≥ ui(q(i)).(iii) p(i) (cid:2)RSi q(i).Proof. Firstly, (i) and (ii) are known to be equivalent (see e.g., [4,24,38]).We now show that (iii) implies (ii). If p(i) (cid:2)RSi q(i), then we know that for each object allocated to i in q(i), there is an injection which maps the object to an object in p(i) which is at least as preferred by i. Hence, for each ui ∈ U ((cid:2)i), we have that ui(p(i)) ≥ ui(q(i)).(cid:4) ∈ p(i), and oWe now show that (i) implies (iii). Assume that p(i) (cid:11)(cid:2)RS(cid:4)} ∈ E if o ∈ q(i), o{o, otheorem, there exists a set Oobject o ∈ min(cid:2)i(cid:4)is in O(cid:4) : o{obecause this only increases the difference |O(cid:4)|, we have that(cid:4) ⊆ q(i) such that |N(O(cid:4) (cid:2)i o. Since p(i) (cid:11)(cid:2)RS(cid:4))| < |O(cid:4)). We can assume without loss of generality that Oi q(i). Consider a bipartite graph G = (q(i) ∪ p(i), E) where i q(i), G does not have a matching saturating q(i). Then by Hall’s . Consider an ∗ (cid:2)i o(cid:4)) is (cid:4)∗ ∈ q(i) such that o(cid:4) (cid:2)i o} ∩ p(i) and N(O(cid:4)) denote the neighborhood of O(cid:4)(cid:4))|. Note that Ois maximal so that each o(cid:4)| where N(Ois then {o(cid:4)| − |N(O(cid:4) : o(O(cid:4)(cid:4) (cid:2)i o} ∩ q(i). Since, |N(O(cid:4))| < |O(cid:6)(cid:6)(cid:6){o(cid:6){o(cid:6)(cid:6) <(cid:4) (cid:2)i o} ∩ p(i)(cid:4) : o(cid:4) : o(cid:6)(cid:6) .(cid:4) (cid:2)i o} ∩ q(i)But then p(i) (cid:11)(cid:2)SDi q(i). (cid:2)4. Fairness concepts under ordinal preferencesWe now define fairness notions that are independent of the actual cardinal utilities of the agents. The fairness concepts are defined for fractional assignments. Since discrete assignments are special cases of fractional assignments, the concepts apply just as well to discrete assignments. For algorithmic problems, we will only consider those assignments that are discrete. The fairness concepts that are defined are with respect to the SD and RS relations as well as by quantifying over the set of utility functions consistent with the ordinal preferences.Proportionality(i)( a)Weak SD proportionality: An assignment p satisfies weak SD proportionality if no agent strictly SD prefers the uniform assignment to his allocation:¬[(1/n, . . . , 1/n) (cid:9)SDi p(i)] for all i ∈ N.(b) Possible proportionality: An assignment satisfies possible proportionality if for each agent, there are cardinal utilities consistent with his ordinal preferences such that his allocation yields him as at least as much utility as he would get under the uniform assignment:For each i ∈ N, there exists ui ∈ U((cid:2)i) such that ui(p(i)) ≥ ui(O )/n.(ii)(a) SD proportionality: An assignment p satisfies SD proportionality if each agent SD prefers his allocation to the alloca-tion under the uniform assignment:p(i) (cid:2)SDi(1/n, . . . , 1/n) for all i ∈ N.(b) Necessary proportionality: An assignment satisfies necessary proportionality if it is proportional for all cardinal utilities consistent with the agents’ preferences.1For each i ∈ N, and for each ui ∈ U((cid:2)i), ui(p(i)) ≥ ui(O )/n.1 Pruhs and Woeginger [46] referred to necessary proportionality as “ordinal fairness”.76H. Aziz et al. / Artificial Intelligence 227 (2015) 71–92Envy-freeness(i)( a)Weak SD envy-freeness: An assignment p satisfies weak SD envy-freeness if no agent strictly SD prefers someone else’s allocation to his:¬[p( j) (cid:9)SDi p(i)] for all i, j ∈ N.(b) Possible envy-freeness: An assignment satisfies possible envy-freeness if for each agent, there are cardinal utilities consistent with his ordinal preferences such that his allocation yields him as at least as much utility as he would get if he was given any other agent’s allocation.For all i ∈ N, ∃ui ∈ U((cid:2)i) such that ui(p(i)) ≥ ui(p( j)) for all j ∈ N(c) Possible completion envy-freeness: An assignment satisfies possible completion envy-freeness [12] if for each agent, there exists a preference relation of the agent over sets of objects that is a weak order consistent with the responsive set extension such that the agent weakly prefers his allocation over the allocations of other agents. The concept has also been referred to as not “envy-ensuring” [17].(ii)( a)SD envy-freeness: An assignment p satisfies SD envy-freeness if each agent SD prefers his allocation to that of any other agent:p(i) (cid:2)SDi p( j) for all i, j ∈ N.(b) Necessary envy-freeness: An assignment satisfies necessary envy-freeness if it is envy-free for all cardinal utilities consistent with the agents’ preferences.For each i, j ∈ N, and for each ui ∈ U((cid:2)i), ui(p(i)) ≥ ui(p( j)).(c) Necessary completion envy-freeness: An assignment satisfies necessary completion envy-freeness [12] if for each agent, and each total order consistent with the responsive set extension of the agents, each agent weakly prefers his alloca-tion to any other agents’ allocation. The concept has also been referred to as not envy-possible [17].We consider the assignment problem in Example 1 to illustrate some of the fairness notions.Example 2. Consider an assignment problem (N, O , (cid:2)) where |N| = 2, O = o1, o2, o3, o4 and the preferences of the agents are as follows1 :2 :o1, o2, o3, o4o2, o3, o1, o4Consider the discrete assignment p in which agent 1 gets o1 and o4 and agent 2 gets o2 and o3. The assignment p is not SD proportional or SD envy-free because the fairness constraints for agent 1 are not satisfied. However, p is weak SD proportional, possible envy-free, and weak SD envy-free.Possible completion envy-freeness and necessary completion envy-freeness were simply referred to as possible and nec-essary envy-freeness in [12]. We will use the former terms to avoid confusion.5. Relations between fairness conceptsIn this section, we highlight the inclusion relationships between fairness concepts (see Fig. 1). Based on the connec-tion between the SD relation and utilities (Theorem 1), we obtain the following equivalences. The equivalences are also summarized in Table 2.Theorem 2. For any number of agents and objects,(i) Weak SD proportionality and possible proportionality are equivalent;(ii) SD proportionality and necessary proportionality are equivalent;(iii) weak SD envy-freeness and possible completion envy-freeness are equivalent;(iv) SD envy-freeness, necessary envy-freeness and necessary completion envy-freeness are equivalent.Proof. We deal with each case separately.(i) T he statement follows directly from the characterization of the SD relation.(ii) T he statement follows directly from the characterization of the SD relation.H. Aziz et al. / Artificial Intelligence 227 (2015) 71–9277(iii) If an assignment is weak SD envy-free, then each agent either SD prefers his allocation over another agent’s allocation or finds them incomparable. In case of incomparability, the relation can be completed with the agent’s own allocation being more preferred. Thus the assignment is also possible completion envy-free. If an assignment is possible comple-tion envy-free, then either an agent prefers his allocation over another agent’s allocation with respect to the responsive set extension or finds them incomparable with respect to the responsive set extension. Hence each agent either SD prefers his allocation over another agent’s allocation or finds them incomparable. Thus the assignment is also weak SD envy-free.(iv) I t follows from Theorem 1 that SD envy-freeness and necessary envy-freeness are equivalent. We now prove that SD envy-freeness and necessary completion envy-freeness are equivalent. Note that an agent SD prefers his allocation over other agents’ allocation if and only if he prefers his allocation with respect to the responsive set extension over other agents’ allocation. (cid:2)It is well-known that when an allocation is complete and utilities are additive, envy-freeness implies proportional-ity. Assume that an assignment p is envy-free. Then for each i ∈ N, ui(p(i)) ≥ ui(p( j)) for all j ∈ N. Thus, n · ui(p(i)) ≥(cid:2)j∈N ui(p( j)) = ui(O ). Hence ui(p(i)) ≥ ui(O )/n. We can also get similar relations when we consider stronger and weaker notions of envy-freeness and proportionality.Theorem 3. The following relations hold between the fairness concepts defined.(i) SD envy-freeness implies SD proportionality.(ii) SD proportionality implies weak SD proportionality.(iii) Possible envy-freeness implies weak SD proportionality.(iv) Possible envy-freeness implies weak SD envy-freeness.Proof. We deal with the cases separately.(i) SD envy-freeness implies SD proportionality. Assume an assignment p satisfies SD envy-freeness. Then, by Theorem 2(iv), it satisfies envy-freeness for all utilities consistent with the ordinal preferences. If an assignment satisfies envy-freeness for particular cardinal utilities, it satisfies proportionality for the same cardinal utilities. Therefore, p satisfies propor-tionality for all cardinal utilities consistent with the ordinal preferences. Hence, due to Theorem 2(ii), it implies that psatisfies SD proportionality.(ii) SD proportionality implies weak SD proportionality. Assume an assignment p does not satisfy weak SD proportionality. (1/n, . . . , 1/n)]. i p(i). But this implies that ¬[p(i) (cid:2)SDThen, there exists some agent i ∈ N such that (1/n, . . . , 1/n) (cid:9)SDHence p is not SD proportional.i(iii) Possible envy-freeness implies weak SD proportionality. Assume an assignment p is not weak SD proportional. By Theo-rem 2, p is not possible proportional. Let i ∈ N be an agent such that for all ui ∈ U ((cid:2)i) we have that ui(p(i)) < ui(O )/n. But then, for each ui ∈ U ((cid:2)i) there exists an agent j ∈ N such that ui(p(i)) < ui(p( j)), otherwise n · ui(p(i)) ≥ ui(O ). Hence p is not possible envy-free.(iv) Possible envy-freeness implies weak SD envy-freeness. Assume that an assignment p is not weak SD envy-free. Therefore i p(i). Due to Theorem 1, we get that for each ui ∈ U ((cid:2)i), ui(p( j)) > ui(p(i)). there exist i, j ∈ N such that p( j) (cid:9)SDHence p is not possible envy-free. (cid:2)We also highlight certain equivalences for the special case of two agents.Theorem 4. For two agents,(i) proportionality is equivalent to envy-freeness;(ii) SD proportionality is equivalent to SD envy-freeness;(iii) weak SD proportionality and possible envy-freeness are equivalent; and(iv) weak SD envy-freeness and weak SD proportionality are equivalent.Proof. We deal with the cases separately while assuming n = 2. Since n = 2, for any agent i, we will denote by −i the other agent.(i) Proportionality is equivalent to envy-freeness. Since envy-freeness implies proportionality, we only need to show that for two agents proportionality implies envy-freeness. Assume that an assignment is not envy-free. Then,ui(p(i)) < ui(p(−i)) ⇔2 · ui(p(i)) < ui(p(i)) + ui(p(−i)) ⇔78H. Aziz et al. / Artificial Intelligence 227 (2015) 71–92ui(p(i)) <ui(p(i)) + ui(p(−i))2= ui(O )/2.(ii) SD proportionality is equivalent to SD envy-freeness. We note that for n = 2, if an assignment satisfies envy-freeness for particular cardinal utilities, it satisfies proportionality for those cardinal utilities. Moreover, if an assignment is SD proportional, it satisfies proportionality for all cardinal utilities, hence it satisfies envy-freeness for all cardinal utilities and hence it satisfies SD envy-freeness.(iii) Weak SD proportionality and possible envy-freeness are equivalent. By Theorem 3(iii), possible envy-freeness implies weak SD proportionality. If an assignment satisfies weak SD proportionality, then there exist cardinal utilities consistent with the ordinal preferences for which proportionality is satisfied. Hence for n = 2, there exist cardinal utilities consistent with the ordinal preferences for which envy-freeness is satisfied, which means that the assignment satisfies possible envy-freeness.(iv) Weak SD envy-freeness and weak SD proportionality are equivalent. We have already shown that weak SD proportionality implies possible envy-freeness for n = 2, and that possible envy-freeness implies weak SD envy-freeness. Therefore, it is sufficient to prove that weak SD envy-freeness implies weak SD proportionality. Assume that an assignment p is not weak SD proportional. Then, there exists at least one agent i ∈ {1, 2} such that(cid:6)(cid:6)(cid:6)(cid:6)(cid:6)(cid:6)(cid:6)(cid:6)(cid:6)(cid:6)((cid:6)(cid:6)(cid:6)(cid:7)(cid:6)k(cid:6)j=1 E(cid:6)(cid:6)(cid:6)jik(cid:8)(E≥(cid:6)(cid:6)(cid:6)(cid:6)i ) ∩ p(i)(cid:6)(cid:6)j22j=1for all k ∈ {1, . . . , ki} and(cid:6)(cid:7)(cid:6)k(cid:6)j=1 E(cid:6)(cid:6)(cid:6)jik(cid:8)E>(cid:6)(cid:6)(cid:6)(cid:6)i ) ∩ p(i)(cid:6)(cid:6)jj=1for some k ∈ {1, . . . , ki}. But this implies that(cid:6)(cid:6)(cid:6)(cid:6)∩ p(−i)(cid:6)(cid:6)(cid:6)(cid:6)(cid:6)(cid:6)i ) ∩ p(i)(cid:6)(cid:6)(cid:6)(cid:6)(cid:6)(cid:6)((cid:6)(cid:6)(cid:6)(cid:6)(cid:6)(cid:6)(cid:6)(cid:6)k(cid:8)k(cid:8)≥jiEEjj=1j=1for all k ∈ {1, . . . , ki} and(cid:6)(cid:6)(cid:6)(cid:6)(cid:6)(cid:6)k(cid:8)j=1Eji(cid:6)(cid:6)(cid:6)(cid:6)∩ p(−i)(cid:6)(cid:6)(cid:6)(cid:6)(cid:6)(cid:6)(cid:6)(cid:6)(k(cid:8)j=1(cid:6)(cid:6)(cid:6)(cid:6)i ) ∩ p(i)(cid:6)(cid:6)jE>for some k ∈ {1, . . . , ki}. Thus p(−i) (cid:9)SDi p(i) and hence p is not weak SD envy-free. (cid:2)In the next examples, we show that some of the inclusion relations do not hold in the opposite direction and that some of the solution concepts are incomparable. Firstly, we show that SD proportionality does not imply weak SD envy-freeness.Example 3. SD proportionality does not imply weak SD envy-freeness. Consider the following preference profile:1 :2 :3 :{a, b, c}, {d, e, f }{a, b, c, d, e, f }{a, b, c, d, e, f }The allocation that gives {a, d} to agent 1, {b, c} to agent 2 and {e, f } to agent 3 is SD proportional. However it is not weak SD envy-free since agent 1 is envious of agent 2. Hence it also follows that SD proportionality does not imply possible envy-freeness or SD envy-freeness.Next, we show that weak SD envy-freeness neither implies possible envy-freeness nor weak SD proportionality.Example 4. Weak SD envy-freeness neither implies possible envy-freeness nor weak SD proportionality. Consider an assign-ment problem in which N = {1, 2, 3}, and there are 4 copies of A, 6 copies of B, 1 copy of C and 1 copy of D. Let the preference profile be as follows.1 :2 :3 :A, B, C, D{ A}, {B, C, D}{B}, { A, C, D}.H. Aziz et al. / Artificial Intelligence 227 (2015) 71–9279Table 3Discrete assignment p in Example 4.A130B105C100D100123Clearly p, the assignment specified in Table 3 is weak SD envy-free. Assume that p is also possible envy-free. Let u1 be the utility function of agent 1 for which he does not envy agent 2 or 3. Let u1( A) = a; u1(B) = b; u1(C) = c; and u1(D) = d. Since A (cid:9)1 B (cid:9)1 C (cid:9)1 D, we get thata > b > c > d.(1)Since p is possible envy-free, u1(p(1)) ≥ u1(p(2)) iff a +b +c +d ≥ 3a iff a ≤ b+c+d2 . Since p is possible envy-free, u1(p(1)) ≥ u1(p(3)) iff a + b + c + d ≥ 5b iff a + c + d ≥ 4b. Since a > b > c > d, it follows that a > 2b. This is a contradiction since both a < 3b2 which implies a < 3b2 and a ≥ 2b cannot hold.Now we show that weak SD envy-freeness does not even imply weak SD proportionality. Assignment p is weak SD envy-free. If it were weak SD proportional then there exists a utility function u1 such that u1(a) + u1(b) + u1(c) + u1(d) ≥4u1(a)+6u1(b)+u1(c)+u1(d)3 . But this is 3not possible because of (1).3 which is equivalent to awhich means that u1(a)+ u1(b) ≤ 2u1(c)+ b ≤ 2c3+ 2u1(d)+ 2d333Since, we have shown that weak SD envy-freeness is not equivalent to possible envy-freeness, and since we showed in Theorem 2(iii) that weak SD envy-freeness is equivalent to possible completion envy-freeness, this means that possible envy-freeness and possible completion envy-freeness are also not equivalent to each other. We now point out that possible envy-freeness does not imply SD proportionality.Example 5. Possible envy-freeness does not imply SD proportionality. Consider an assignment problem with two agents with preferences 1 : {a}, {b, c} and 2 : {a, b, c}. Then the assignment in which 1 gets a and 2 gets b and c is possible envy-free. However it is not SD proportional, because agent 1’s allocation does not SD dominate the uniform allocation.Finally, we note that all notions of proportionality and envy-freeness are trivially satisfied if randomized assignments are allowed by giving each agent 1/n of each object. As we show here, achieving any notion of proportionality is a challenge when outcomes need to be discrete.Next, we study the existence and computation of fair assignments. Even the weakest fairness concepts like weak SD proportionality may not be possible to achieve: consider two agents with identical and strict preferences over two objects. This problem remains even if m is a multiple of n.Example 6. A discrete weak SD proportional assignment may not exist even if m is a multiple of n. Consider the following preferences:1 :2 :3 :{a1, a2, a3, a4}, {b1, b2}{a1, a2, a3, a4}, {b1, b2}{a1, a2, a3, a4}, {b1, b2}If all agents get 2 objects, then those agents that have to get at least one object from {b1, b2} will get an allocation that is strictly SD dominated by (1/3, . . . , 1/3). Otherwise, at least one agent gets at most one object, and is therefore strictly SD dominated by the uniform assignment.If m is not a multiple of n, then an even simpler example shows that a weak SD proportional assignment may not exist. Consider the case when all agents are indifferent among all objects. Then the agent who gets less objects than m/n will get an allocation that is strictly SD dominated by (1/n, . . . , 1/n).6. Computational complexityIn this paper, we consider the natural computational question of checking whether a discrete fair assignment exists and if it does exist then to compute it. The problem of verifying whether a (discrete or fractional) assignment is fair is easy for all the notions we defined.Remark 1. It can be verified in time polynomial in n and m whether an assignment is fair for all notions of fairness considered in the paper. For possible envy-freeness, a linear program can be used to find the ‘witness’ cardinal utilities of the agents.80H. Aziz et al. / Artificial Intelligence 227 (2015) 71–92Remark 2. For a constant number of objects, it can be checked in polynomial time whether a fair discrete assignment exists for all notions of fairness considered in the paper. This is because the total number of discrete assignments is nm .We note that if the assignment is not required to be discrete, then even SD envy-freeness can be easily achieved [38]. Finally, we have the following necessary condition for SD proportional and hence for SD envy-free assignments.Theorem 5. If p is a discrete SD proportional assignment, then m is a multiple of n and each agent gets m/n objects.Proof. If p is an SD proportional assignment, then the following constraint is satisfied for each agent i ∈ N.|p(i) ∩ O | ≥|O |n= mn.Each agent must get m/n objects. If p is discrete, each agents gets m/n objects only if m is a multiple of n. (cid:2)6.1. SD proportionalityIn this subsection, we show that it can be checked in polynomial time whether a discrete SD proportional assignment exists even in the case of indifferences. The algorithm is via a reduction to the problem of checking whether a bipartite graph admits a feasible b-matching.Let H = (V H , E H ) be an undirected graph with vertex capacities b : V H → N0 and edge capacities c : E H → N0where N0 is the set of natural numbers including zero. Then, a b-matching of H is a function m : E H → N0 such that (cid:2)e∈{e(cid:4)∈E H :v∈e(cid:4)} m(e) ≤ b(v) for each v ∈ V H , and m(e) ≤ c(e) for all e ∈ E H . The size of the b-matching m is defined as (cid:2)m(e). We point out that if b(v) = 1 for all v ∈ V H , and c(e) = 1 for all e ∈ E H then a maximum size b-matching is e∈E Hequivalent to a maximum cardinality matching. In a b-matching problem with upper and lower bounds, there further is a function a : V H → N0. A feasible b-matching then is a function m : E H → N0 such that a(v) ≤e∈{e(cid:4)∈E H :v∈e(cid:4)} m(e) ≤ b(v) for each v ∈ V H , and m(e) ≤ c(e) for all e ∈ E H . If H is bipartite, then the problem of computing a maximum weight feasible b-matching with lower and upper bounds can be solved in strongly polynomial time (Chapter 35 [47]).(cid:2)Theorem 6. It can be checked in polynomial time whether a discrete SD proportional assignment exists even if agents are allowed to express indifference between objects.Proof. Consider (N, O , (cid:2)). If m is not a multiple of n, then by Theorem 5, no discrete SD proportional assignment exists. In this case, in each discrete assignment p, there exists some agent i ∈ N who gets less than m/n objects. Thus, the following does not hold: p(i) (cid:2)SD(1/n, . . . , 1/n). Hence we can now assume that m is a multiple of n i.e., m = nc where c is a iconstant. We reduce the problem to checking whether a feasible b-matching exists for a graph G = (V , E). Recall that kiis the number of equivalence classes of agent i. For each agent i, and for each (cid:2) ∈ {1, . . . , ki} we introduce a vertex v(cid:2)i . For each o ∈ O , we create a corresponding vertex with the same name. Now, V = {v 1: i ∈ N} ∪ O . The graph G is bipartite with independent sets O and V \ O . Let us now specify the edges of G:i , . . . , vkii• for each i ∈ N, (cid:2) ∈ {1, . . . , ki} and o ∈ O we have that {v(cid:2)i , o} ∈ E if and only if o ∈(cid:7)(cid:2)j=1 Eji .We specify the lower and upper bounds of each vertex:(cid:9) (cid:2)(cid:10)(cid:6)(cid:6)(cid:6)E(cid:6)(cid:6)(cid:6)jii ) =• a(v(cid:2)(cid:2)(cid:2)−1j=1j=1 a(vn• a(o) = b(o) = 1 for each o ∈ O .−(cid:2)ji ) and b(v(cid:2)i ) = ∞ for each i ∈ N and (cid:2) ∈ {1, . . . , ki};For each edge e ∈ E, c(e) = 1.Now that (V , E) has been specified, we check whether a feasible b-matching exists. If so, we allocate an object o to an agent i if the edge incident to o that is included in the matching is incident to a vertex corresponding to an equivalence class of agent i. We claim that a discrete SD proportional assignment exists if and only if a feasible b-matching exists. If a feasible b-matching exists, then each o ∈ O is matched so we have a complete assignment. For each agent i ∈ N, and for each E (cid:2)objects of the same or more preferred equivalence class. Thus, the assignment is SD proportional.i , an agent is allocated at least (cid:11)(cid:2)(cid:2)j=1(cid:6)(cid:6)(cid:6)/nOn the other hand if a discrete SD proportional assignment p exists, then p(i) (cid:2)SDiequivalence class E (cid:2)class as E (cid:2)vertices o ∈ O that have not been allocated, they may be allocated to any agent. Hence a feasible b-matching exists. (cid:2)i . Hence there is a b-matching in which the lower bound of each vertex of the type v(cid:2)i , an agent is allocated at least (1/n, . . . , 1/n) implies that for each objects from the same or more preferred equivalence is met. For any remaining (cid:6)(cid:6)(cid:6)/n(cid:11)(cid:2)(cid:6)(cid:6)(cid:6)E(cid:6)(cid:6)(cid:6)E(cid:2)j=1(cid:12)(cid:12)jijiiH. Aziz et al. / Artificial Intelligence 227 (2015) 71–92816.2. Weak SD proportionalityIn the previous subsection, we examined the complexity of checking the existence of SD proportional discrete assign-ments. In this section we consider weak SD proportionality.Theorem 7. For strict preferences, a weak SD proportional discrete assignment exists if and only if one of two cases holds:(i) m = n and it is possible to allocate to each agent an object that is not his least preferred object;(ii) m > n.Moreover, it can be checked in polynomial time whether a weak SD proportional discrete assignment exists when agents have strict preferences.(cid:4)(cid:4)}Proof. If m < n, at least one agent will not get any object. Hence there exists no weak SD proportional discrete assignment. Hence m ≥ n is a necessary condition for the existence of a weak SD proportional discrete assignment., then his allocation p(i) is weak SD proportional. The reason is that (cid:6)(cid:6) /n. Hence the following does not hold: (1/n, . . . , 1/n) (cid:2)SDLet us consider the case of m = n. Clearly each agent needs to get one object. If an agent i gets an object that is o(cid:9)o(cid:4) p(i)(o) = 1 >not the least preferred object o(cid:6)(cid:6){o : o (cid:9) oi p(i). On the other hand, if i gets the least preferred object, his allocation is not weak SD proportional since (1/m, . . . , 1/m) (cid:9)SDi p(i). Hence, we just need to check whether there exists a discrete assignment in which each agent gets an object that is not least preferred. This can be solved as follows. We construct a graph (V , E) such that V = N ∪ O and for all i ∈ N and o ∈ O , {i, o} ∈ E if and only if o /∈ min(cid:2)i(O ). We just need to check whether (V , E) has a perfect matching. If it does, the matching is a weak SD proportional discrete assignment.(cid:2)If m ≥ n + 1, we show that a weak SD proportional discrete assignment exists. Allocate the most preferred object to the agents in the following order 1, 2, 3, . . . n, n, n − 1 . . . , 1, . . .. Then each agent i ∈ {1, . . . , n − 1} gets in the worst case his i-th most preferred object. This worst case occurs if agents preceding i pick the i − 1 most preferred objects of agent i. Even in this worst case, since 1 > i/n, we have that the allocation of agents in {1, . . . , n − 1} is weak SD proportional. As for agent n, in the worst case he get his n-th and n + 1st most preferred objects. Since 2 ≥ nn , by Lemma 1 we get that the allocation nof agent n is also weak SD proportional. This completes the proof. (cid:2)+ 1Indifferences result in all sorts of challenges. Some arguments that we used for the case for strict preferences do not work for the case of indifferences. The case of strict preferences may lead one to wrongly assume that given a sufficient number of objects, a weak SD proportional discrete assignment is guaranteed to exist. However, if agents are allowed to express indifference, this is not the case. Consider the case where m = nc + 1 and each agent is indifferent among each of the objects. Then there exists no weak SD proportional discrete assignment because some agent will get fewer than m/nobjects. We first present a helpful lemma which follows directly from the definition of weak SD proportionality.Lemma 1. An assignment p is weak SD proportional if and only if for each i ∈ N,(cid:2)(cid:2)o(cid:4)(cid:2)o p(i)(oo(cid:4)(cid:2)o p(i)(o(cid:4)) >(cid:4)) ≥(i)(ii)(cid:6)(cid:6){o(cid:6)(cid:6){o(cid:4) : o(cid:4) : o(cid:6)(cid:6) /n for some o ∈ O ; or(cid:4) (cid:2) o}(cid:6)(cid:6) /n for all o ∈ O .(cid:4) (cid:2) o}We will use Lemma 1 in designing an algorithm to check whether a weak SD proportional discrete assignment exists when agents are allowed to express indifference.Theorem 8. For a constant number of agents, it can be checked in polynomial time whether a weak SD proportional discrete assignment exists even if agents are allowed to express indifference between objects.Proof. Consider (N, O , (cid:2)). We want to check whether a weak SD proportional discrete assignment exists. By Lemma 1, this is equivalent to checking whether there exists a discrete assignment p, where for each i ∈ N, one of the following kiconditions holds: for l ∈ {1, . . . , ki},(cid:5)(cid:7)lj=1 Ejio∈p(i)(o) >(cid:6)(cid:7)(cid:6)l(cid:6)j=1 E(cid:6)(cid:6)(cid:6)jinor the following (ki + 1)-st condition holdsp(i) ∼SDi(1/n, . . . , 1/n).(2)(3)82H. Aziz et al. / Artificial Intelligence 227 (2015) 71–92(cid:6)(cid:6)(cid:6)Eji(cid:6)(cid:6)(cid:6) is a multiple of n for j ∈ {1, . . . , ki}.The (ki + 1)-st condition only holds if each We need to check whether there exists a discrete assignment in which for each agent one of the ki + 1 conditions is i=1(ki + 1) different ways in which the agents could be satisfied. We will now present an satisfied. In total there are algorithm to check if there exists a feasible weakly SD proportional discrete assignment in which for each agent i, a certain condition among the ki + 1 conditions is satisfied. Since n is a constant, the total number of combinations of conditions is polynomial.(cid:13)nWe define a bipartite graph G = (V , E) whose vertex set is initially empty. For each agent i, if the condition number jis (cid:2) ∈ {1, . . . , ki} then we add a vertex v(cid:2)iwhere j ∈ {1, . . . , ki}. For each o ∈ O , we add a corresponding vertex with the same name. The sets O and V \ O will be independent sets in G. We now specify the edges of G.i . If the condition number is ki + 1, then we add ki vertices – Bfor each Eji• {v(cid:2)j• {Bi , o} ∈ E if and only if o ∈i , o} ∈ E if and only if o ∈ Ej(cid:7)(cid:2)j=1 Ei for each i ∈ N, j ∈ {1, . . . , ki}, and o ∈ O .i for each i ∈ N, (cid:2) ∈ {1, . . . , ki} and o ∈ O .jWe specify the lower and upper bounds of each vertex.(cid:15)(cid:14) (cid:6)(cid:7)(cid:6)(cid:2)(cid:6)j=1 En(cid:6)(cid:6)(cid:6)ji• a(v(cid:2)i ) =+ 1 and b(v(cid:2)i ) = ∞ for each i ∈ N and (cid:2) ∈ {1, . . . , ki};ji ) = b(B• a(Bi ) =for each B• a(o) = b(o) = 1 for each o ∈ O .j(cid:6)(cid:6)(cid:6)(cid:6)(cid:6)(cid:6)Ejinji ;For each edge e ∈ E, c(e) = 1. For each n-tuple of satisfaction conditions, we construct the graph as specified above and then check whether there exists a feasible b-matching. A weak SD proportional discrete assignment exists if and only if a i=1(ki + 1) combinations of conditions. Since feasible b-matching exists for the graph corresponding to at least one of the (cid:13)i=1(ki + 1) is polynomial if n is a constant and since a feasible b-matching can be checked in strongly polynomial time, n(cid:13)nwe can check the existence of a weak SD proportional discrete assignment in polynomial time. (cid:2)6.3. Envy-freenessIn this section, we examine the complexity of checking whether an envy-free assignment exists or not. Our positive algorithmic results for SD proportionality and weak SD proportionality help us obtain algorithms for SD envy-freeness and weak SD envy-freeness when n = 2.From Theorem 6, we get the following corollary.Corollary 1. For two agents, it can be checked in polynomial time whether a discrete SD envy-free assignment exists even if agents are allowed to express indifference between objects.Proof. For two agents, SD proportionality implies SD envy-freeness, and by Theorem 3, SD envy-freeness implies SD pro-portionality. (cid:2)Corollary 1 generalizes Proposition 10 of [12] which stated that for two agents and strict preferences, it can be checked in polynomial time whether a necessary envy-free discrete assignment exists.Similarly, from Theorem 8, we get the following corollary.Corollary 2. For two agents, it can be checked in polynomial time whether a weak SD envy-free or a possible envy-free discrete assignment exists.Proof. For two agents, weak SD proportional is equivalent to weak SD envy-free and possible envy-free (Theorem 4). (cid:2)We prove that checking whether a (weak) SD envy-free or possible envy-free discrete assignment exists is NP-complete. The complexity of the second problem was mentioned as an open problem in [12]. Bouveret et al. [12] showed that the problem of checking whether a necessary envy-free discrete assignment exists is NP-complete. The statement carries over to the more general domain that allows for ties. We point out that if agents have identical preferences, it can be checked in linear time whether an SD envy-free discrete assignment exists even when preferences are not strict. Identical preferences have received special attention within fair division (see e.g., [19]).Theorem 9. For agents with identical preferences, an SD envy-free discrete assignment exists if and only if each equivalence class is a multiple of n.H. Aziz et al. / Artificial Intelligence 227 (2015) 71–9283Even n is not constant but preferences are strict, it can be checked in time linear in n and m whether a complete weak SD envy-free discrete assignment exists. This follows from an equivalent result in [12] for possible completion envy-freeness and the fact that weak SD envy-freeness is equivalent to possible completion envy-freeness (Theorem 2(iii)). We use similar arguments as Bouveret et al. [12] for possible envy-freeness.Theorem 10. For strict preferences, it can be checked in time linear in n and m whether a possible envy-free discrete assignment exists.(cid:4)(cid:4)(cid:4)Proof. We reuse the arguments in the proof of (Proposition 4 [12]). Let the number of distinct top-ranked objects be k. If m < 2n − k, then there is at least one agent who receives one object that is not his top-ranked o and no further items. Thus he necessarily envies the agent who received o and hence there cannot exist a possible envy-free discrete assignment. If m ≥ 2n −k, then we run the following algorithm. (1) For each of the k top-ranked objects, allocate it to an agent that ranks it the set of agents that have not yet received an object, and order them arbitrarily. (2) Go through the n − kfirst. Denote by Nin ascending order and ask them to claim their most preferred item from those still available. (3) Go through agents in Nthe agents in Nagain, but this time in descending order, and ask them to claim their most preferred item from those still available. The agents who got their most preferred object do not envy any other agent if they have sufficiently high utility for their most preferred object. For the remaining agents, who have received two objects each, no agent i strictly SD prefers another agent j’s current allocation: even if j (who had an earlier first turn) received a more preferred first object, i strictly prefers his second object to j’s second object (in case j received a second object). Therefore, there exist cardinal utilities consistent with the ordinal preferences where the agents in Nput high enough utility for the second object they get so that they are not envious of other agents even if the other agent gets all the unallocated objects. Therefore the unallocated objects can be allocated in an arbitrary manner among the remaining agents and the resulting complete discrete assignment is still possible envy-free. (cid:2)(cid:4)Bouveret et al. [12] mentioned the complexity of possible completion envy-freeness for the case of indifferences as an open problem. We present a reduction to prove that for all notions of envy-freeness considered in this paper, checking the existence of a fair discrete assignment is NP-complete.Theorem 11. The following problems are NP-complete:(i) check whether there exists a weak SD envy-free (equivalently possible completion envy-free) discrete assignment,(ii) check whether there exists a possible envy-free discrete assignment, and(iii) check whether there exists an SD envy-free discrete assignment.Proof. Membership in NP is shown by Remark 1. To show hardness we use a reduction from X3C (Exact Cover by 3-sets). In X3C, the input is a ground set S and a collection C containing 3-sets of elements from S, and the question is whether there exists a subcollection X ⊆ C such that each element of S is contained in exactly one of the 3-sets in X . X3C is known to be NP-complete [36]. Consider an instance (S, C) of X3C where S = {s1, . . . , s3q} and C = {c1, . . . , cl}. Without loss of generality, l ≥ q. We construct the following assignment problem (N, O , (cid:2)) where N = {a1, . . . , a40l} is partitioned into three sets N1, N2 and N3 with |N1| = l, |N2| = 30l, |N3| = 9l and O = {o1, . . . , o120l} is partitioned into three sets O 1, O 2 and O 3 with |O 1| = 3l, |O 2| = 90l and |O 3| = 27l. The set O 1 is partitioned into two sets, O S1 , the first one corresponding to | = 3l − 3q. the set of elements of S in the X3C instance and the second being a ‘buffer’ set. We have |O S1We associate each c j ∈ C with the j-th agent in N1. With each c j ∈ C we also associate nine consecutive agents in N3. The preferences of the agents are defined as follows:| = 3q and |O B11 and O Bi : O 2 ∪ ci, (O 1\ci) ∪ O 3 for i ∈ N1i : O 2, O 1 ∪ O 3 for all i ∈ N2i : f (i), O \ f (i) for i ∈ N3The function f : N3 → 2O is such that it ensures the following properties: For each of the three elements e of c j , three out of the nine agents associated with c j list e as a second choice object, and list c j\{e} as first choice objects. Let us label these three agents a1, a2 and a3. The sets of objects f (a1), f (a2) and f (a3) each exclude a distinct 13 of the buffer objects O B1 . f (a1), f (a2) and f (a3) each contain 2/3 of the elements of O B . The 1/3 elements that are excluded from each of these sets must be distinct i.e., elements that f (a1) does not contain are contained in f (a2) and f (a3), and vice versa.For each i ∈ N3, f (i) ∩ (O 2 ∪ O 3) = O f . Let O f contain 23 of the elements of O 3. Con-sider a discrete assignment that is weak SD envy-free or possible envy-free or SD envy-free. We can make the following observations:3 of the elements of O 2 and 2(i) Agents in N2 are allocated all objects from O 2 and none from O \O 2. To show this, first consider the case where 30l or more objects from O 2 are assigned to N\N2. In this case, at least one agent in N2 is envious of an agent from N\N2: there will be an agent b1 in N\N2 with three or more objects from O 2, and there will be an agent b2 in N2 with 84H. Aziz et al. / Artificial Intelligence 227 (2015) 71–92at most three elements, at most two of which are from O 2. This is because if an agent has more than three objects, another has at most two and if they all have three, some of those will be objects from O 1 , and at least one agent from N2 will have a second choice object. For all considered notions of envy-freeness b2 will be envious of b1.If 0 < z1 < 30l objects from O 2 are assigned to N\N2, we have three cases:(a) z2 < z1 objects from O \O 2 are assigned to N2. In this case an agent from N2 has two or less objects, which implies he will be envious of others in N2.(b) z2 = z1 objects from O \O 2 are assigned to N2. To not be envious of each other agents from N2 will each receive two first choice objects and one second choice object. At least one agent from N1 will receive at least three objects from O 2, making agents in N2 envious of him.(c) z2 > z1 objects from O \O 2 are assigned to N2. In this case all agents from N2 are given three or four objects. If an agent has two, he will be envious as before. There are not enough objects left for each agent in N\N2 to receive three or more objects. Therefore one of these agents, labeled b1 only has two items. Even if those two items are most preferred items, he will be envious of at least one agent in N1 because to any agent in N\N2 the ratio of most preferred items assigned to N1 is higher than 13 . This implies at least one agent in N1 will have two most preferred items according to b1, and since all in N2 have at least three objects, b1 is envious of that agent.(ii) Each agent in N2 is allocated exactly three objects. Since as shown above all and only O 2 objects go to N2, not all agents in N2 can have four objects. Therefore if one has four, those without four objects will envy him since they value all objects from O 2 the same.(iii) E ach agent in N2 ∪ N1 has three objects. This is because if an agent in N2 ∪ N1 has four or more objects, another has two or less. The argument in the first observation still applies, and therefore this agent will be envious of at least one agent from N2.(iv) A gents in N1 will not be assigned any objects from O 3 since they all consider them to be second choices. To not envy agents in N2 agents in N1 have three of their preferred choices.(v) E ach agent in N2 ∪ N3 are given two of N3’s common preferred choices, and one of their second choices. This is the only way to avoid envy from an element of N3 to at least one element of N2 ∪ N3: if an element of N2 has two or three of N3 second choices, then another has three preferred choices, and therefore at least one of N3 will be envious of him. If an agent in N3 has three preferred choices, then at least one has only one preferred choice, and will be envious of the agent with three preferred choices.(vi) A n agent from N1 does not have objects from O S1 , since otherwise at least one agent from N3 will be envious of him. This is because of the conditions satisfied by f . There are at least three agents in N3 who see the one or two selected elements from the three-set associated to the N1 agent as first choice objects. For any set of elements of size two or less in O B1 , at least one of these three agents considers said set to be composed of first choice object. Therefore, there is at least one agent in N3 who will be envious of an agent in N1 who selects both from O S1and O B1 , since he sees this agent as having three preferred choices whilst he only has two (according to the previous observation).1 and also O BIf there exists an exact cover of S by a subset of C , then there is an SD envy-free discrete assignment since agents 1 and the others will be given corresponding to elements of C used for the cover will be given their preferred items from O Sitems from O B1 .If there does not exist an exact cover of S by a subset of C then there does not exist a weak SD envy-free discrete assignment (equivalently an assignment in which no agent strictly prefers another agent’s allocation with respect to respon-sive preferences). This is because even if all the previous conditions are respected, at least one agent from N1 gets a second choice object and is envious of agents from N2. This follows from the fact that no matter which agents of N1 we assign buffer objects to, the remaining agents are not able to cover O S1 with their sets of most preferred objects. This completes the proof. (cid:2)In view of Theorem 1, the proof above also shows that when agents have responsive preferences over sets of objects, then checking whether there exists an envy-free (weak or strong) allocation is NP-complete. Another corollary is that is if agents have cardinal utilities 1 or 0 for objects, then checking whether there exists an envy-free assignment is NP-complete.7. ExtensionsIn this section, we consider two extensions of our results: (i) additionally requiring Pareto optimality and (ii) handling varying entitlements. We show that our algorithmic results can be extended in both cases.7.1. Additionally requiring Pareto optimalityWe focused on fairness and only required a weak form of efficiency that each object is allocated. In this subsection, we seek discrete assignments that are both fair and Pareto optimal.H. Aziz et al. / Artificial Intelligence 227 (2015) 71–9285Let (N, O , (cid:2)) be an assignment problem. A discrete assignment q Pareto dominates a discrete assignment p if q(i) (cid:2)SDi p(i)i p(i) for some i ∈ N. We also say that q is a Pareto improvement over p. A discrete assignment p is for all i ∈ N and q(i) (cid:9)SDPareto optimal if there exists no discrete assignment q that Pareto dominates it.Example 7. Consider the following assignment problem:1 :2 :{a, b, c}, {d, e, f }{d, e, f }, {a, b, c}The discrete assignment that gives {b, c, f } to agent 1 and {d, e, a} to agent 2 is SD proportional. However it is not Pareto optimal since it is SD-dominated by the assignment in which agent 1 gets {a, b, c} and agent 2 gets {d, e, f }.Let (N, O , (cid:2)) be an assignment problem and p be a discrete assignment. We will create an auxiliary assignment problem and assignment where each agent is allocated exactly one object. The clones of an agent i ∈ N are the agents in N={io : o ∈ O and p(i)(o) = 1}. The cloned assignment problem corresponding to assignment problem (N, O , (cid:2)) and assignment p, (cid:2)(cid:4)=(cid:2)i . The cloned assignment of p is the discrete assignment is (Nio(cid:4)pin which pA cloned assignment can easily be transformed back into the original assignment where each agent i ∈ N is allocated all (cid:4)(io)(o) = 1 if p(i)(o) = 1 and p(cid:4)i . and for each io ∈ N(cid:4)(io)(o) = 0 otherwise.(cid:4), O , (cid:2)(cid:4)) such that Ni∈N N(cid:4) =(cid:7)(cid:4)i(cid:4)the objects assigned by pto the clones of i.(cid:4)Lemma 2. A discrete assignment is Pareto optimal if and only if its cloned assignment is Pareto optimal for the cloned assignment problem.Proof. Let (N, O , (cid:2)) be an assignment problem and p be a discrete assignment. We will prove that p is not Pareto optimal if and only if its cloned assignment pis not Pareto optimal for the cloned assignment problem (N(cid:4), O , (cid:2)(cid:4)).For the backwards direction, assume that p(cid:4), O , (cid:2)(cid:4)). Then, there exists another discrete in which each of the cloned agents get at least as preferred an object and at least one agent gets a strictly for the original assignment problem, then is transformed into the discrete assignment pis not Pareto optimal for (N(cid:4) ∗(cid:4) ∗∗(cid:4)(cid:4)Pareto dominates p.For the forward direction, assume that p is not Pareto optimal. Then, there exists another discrete assignment p∗assignment pmore preferred object. But if pp∗∗also Pareto dominates pin (N(cid:4)that (cid:4), O , (cid:2)(cid:4)) (modulo Pareto dominates it. But this implies that the cloned assignment of pname changes among clones). (cid:2)Lemma 3. If a discrete assignment is not Pareto optimal, a Pareto improvement that is Pareto optimal can be computed in polynomial time.Proof. We first take the assignment problem and the given discrete assignment and construct the corresponding cloned assignment problem and cloned assignment. For such a cloned discrete assignment, a Pareto optimal Pareto improvement can be computed in polynomial time (see e.g., [6]). The updated cloned assignment is then transformed back into an assignment for the original assignment problem. (cid:2)Remark 3. A Pareto improvement over a weak SD proportional or SD proportional discrete assignment is weak SD pro-portional or SD proportional, respectively. Therefore, if a (weak) SD proportional discrete assignment exists then there also exists a Pareto optimal and (weak) SD proportional discrete assignment.Based on Lemma 3 and Remark 3 we obtain the following theorems.Theorem 12. If a Pareto optimal and SD proportional discrete assignment exists, it can be computed in polynomial time.Theorem 13. For a constant number of agents, if a Pareto optimal and weak SD proportional discrete assignment exists, it can be computed in polynomial time.7.2. Unequal entitlementsThroughout this paper, we assumed that each agent has the same entitlement to the objects. However, it could be the case that an agent i ∈ N has entitlement ei . There can be various reasons for unequal entitlements. An agent may be given more entitlement for the resources to reward his contributions and effort in obtaining the objects for the set of objects. Entitlements can also be used to model justified demand. For example, if an agent represents a different number 86H. Aziz et al. / Artificial Intelligence 227 (2015) 71–92of sub-agents, the agent who represents more sub-agents may have more entitlement. Unequal entitlements have been considered in the fair division literature (see, e.g., [22, page 44]).In the case of unequal entitlements, proportionality and envy-freeness can be redefined:ui(p(i)) ≥ei(cid:2)(cid:5)j∈N e jo∈Oui(o) for each i ∈ Nfor proportionality andui(p(i)) ≥ eie jui(p( j)) for each i, j ∈ Nfor envy-freeness. For envy-freeness, the idea is that if agent i has half the entitlement of agent j, then i will only be envious of agent j if agent’s j allocation gives agent i more than twice the utility agent i has for his own allocation. Just like possible and necessary fairness is defined for equal entitlements, the definitions can be extended for the case of unequal entitlements. Hence possible and necessary proportionality and envy-freeness are natural ordinal notions that can also take into account entitlements. Our two algorithms for possible and necessary proportionality can also be modified to cater for entitlements by replacing 1/n with whenever a matching lower bound is specified for a vertex.ei(cid:2)j∈N e jTheorem 14. For a constant number of agents, it can be checked in polynomial time whether a possible proportional discrete assign-ment exists even if agents have different entitlements.Theorem 15. It can be checked in polynomial time whether a necessary proportional discrete assignment exists even if agents have different entitlements.8. Fairness concepts that guarantee the existence of fair outcomesWe observed that there are instances where even the weakest fairness notions such as weak SD proportionality cannot be guaranteed. Hence the fairness notions considered are not proper solution concepts. In this section, we propose fairness concepts that always suggest a non-empty set of assignments with meaningful fairness properties.8.1. Maximal and maximum fairnessWe first seek a way out by considering corresponding solution concepts that maximize the number of agents be-ing satisfied with their allocation. The idea has been used in matching theory where for example if a stable matching does not exist, then one may aim to minimize the number of unstable pairs (see, e.g., [10]). For each fairness notion X ∈ {SD envy-freeness, weak SD envy-freeness, possible envy-freeness, SD proportionality, weak SD proportionality}, we de-fine the following concepts:(i) Maximum X : a discrete assignment p satisfies Maximum X if it maximizes the total number of agents for which the fairness condition according to X is satisfied.(ii) Maximal X : a discrete assignment p satisfies Maximal X if the fairness condition according to X cannot be satisfied for any more agents while maintaining the fairness condition for agents who are satisfied by p.The following lemmas are useful in relating the complexity of fairness concept X with Maximum X and Maximal X . The proofs are straightforward.Lemma 4. If there exists a polynomial-time algorithm to compute a discrete assignment that is Maximum X then there exists a polynomial-time algorithm to compute a discrete assignment satisfying X if one exists.Proof. Simply compute the Maximum X and check whether the fairness condition is satisfied for each agent. If not, then the fairness condition cannot be satisfied for each agent and hence no X discrete assignment exists. (cid:2)Corollary 3. Computing a maximum SD envy-free discrete assignment is NP-hard.Lemma 5. If there exists a polynomial-time algorithm to check whether a discrete assignment satisfying X exists, then the problem of computing a Maximal X discrete assignment can also be solved in polynomial time.Proof. We describe the reduction. Initialize S, the set of agents for which the fairness condition can be met, to the empty set. Check whether there exists an agent j ∈ N \ S that can be moved to S such that there still exists a discrete assignment that satisfies the fairness condition according to X for agents in S. If yes, then move j to S. Repeat the process until the set S cannot be grown. Hence S is the maximal set of agents that can be satisfied. (cid:2)H. Aziz et al. / Artificial Intelligence 227 (2015) 71–9287Fig. 2. Polynomial-time reductions between computational problems for fairness concept X ∈ {envy-freeness, proportionality, SD envy-freeness, weak SDenvy-freeness, possible envy-freeness, weak SD proportionality, SD proportionality}.Corollary 4. A maximal SD proportional discrete assignment can be computed in polynomial time.Corollary 5. A maximal weak SD proportional discrete assignment can be computed in polynomial time if n is a constant.Fig. 2 illustrates the polynomial-time reductions between computational problems for fairness concept X ∈ {envy-freeness, proportionality, SD envy-freeness, weak SD envy-freeness, possible envy-freeness, weak SD proportionality, SD pro-portionality}.8.2. Optimal proportionalityA possible criticism of maximal and maximum fairness is that the fairness constraint of each agent is strong enough so that it is not possible to satisfy it for each agent. Hence those agents that do not have their fairness constraints satisfied may not view the assignment as fair from their perspective. To counter this criticism, we weaken the fairness constraint in a uniform way which leads to attractive fairness concepts called optimal proportionality and optimal weak proportionality. The concepts are similar to egalitarian equivalence rule for continuous resource settings [43]. For continuous settings, an allo-cation satisfies egalitarian equivalence if each agent is indifferent between his allocation and the reference resource bundle. Since we consider only ordinal preferences, we exploit the SD relations to define suitable concepts. Moreover, since we con-sider discrete assignments, we relax the requirement of each agent’s allocation being equivalent to the reference allocation.We say that an assignment satisfies 1/α proportionality ifp(i) (cid:2)SDi(1/α, . . . , 1/α) for all i ∈ N.We note that 1/n proportionality is equivalent to SD proportionality. An assignment satisfies optimal proportionality ifp(i) (cid:2)SDi(1/α, . . . , 1/α) for all i ∈ N.for the smallest possible α. We will refer to the smallest such α as α∗as the optimal proportionality value.We point out that Theorem 6 can be generalized from 1/n proportionality to 1/α proportionality for any value of α:and call 1/α∗Theorem 16. It can be checked in polynomial time whether a discrete 1/α proportional assignment exists even if agents are allowed to express indifference between objects.Proof. The algorithm and proof is identical to that of the algorithm in the proof of Theorem 6. The only difference is that (cid:9) (cid:2)(cid:10)(cid:6)(cid:6)(cid:6)E(cid:6)(cid:6)(cid:6)ji(cid:2)j=1α(cid:2)−(cid:2)−1j=1 a(vji ) instead of for each i ∈ N and (cid:2) ∈ {1, . . . , ki}, the lower bound of each vertex is set to a(v(cid:2)(cid:9) (cid:2)(cid:10)i ) =(cid:6)(cid:6)(cid:6)E(cid:6)(cid:6)(cid:6)ji(cid:2)j=1n(cid:2)−(cid:2)−1j=1 a(vji ). (cid:2)The algorithm in the proof of Theorem 16 can be used to check the existence of a 1/α proportional assignment for different values of α. However, among other cases, if m < n, then we know that a 1/α proportional assignment does not exist for any finite value of α. We first characterize the settings that admit a 1/α proportional assignment for some finite α.Lemma 6. α∗is finite iff there exists an assignment in which each agent gets one of his most preferred objects.Proof. In case each agent gets one of his most preferred objects, proportionality is satisfied for α∗ = mn. If α∗each agent’s proportionality constraint with respect to the first equivalence class is satisfied. Hence for some finite α∗is finite, then ,(cid:6)(cid:6)(cid:6)p(i) ∩ E 1i(cid:6)(cid:6)(cid:6) ≥||E 1iα∗ .Hence each i gets at least one of his most preferred objects. (cid:2)88H. Aziz et al. / Artificial Intelligence 227 (2015) 71–92Since α is a positive real in the interval (0, ∞], it appears that even binary search cannot be used to find the optimal proportional assignment in polynomial time. Next, we show that interestingly we only need to check a polynomial number of values of α to find the optimal proportional assignment.Theorem 17. An optimal proportional assignment can be computed in polynomial time even if agents are allowed to express indiffer-ence between objects.Proof. If there exists no assignment in which each agent gets one of his most preferred objects, then α∗is infinite. This means the first proportionality constraint of agents cannot be simultaneously satisfied for a finite α∗. In that case any arbitrary assignment satisfies optimality proportionality with α∗ = ∞. In case there exists an assignment in which each agent gets one of his most preferred objects, then α∗as well as the assignment corresponding to it. An assignment p satisfies 1/α proportionality if for each i ∈ N and each k ∈ {1, . . . , ki},is finite. We show how to compute such an α∗(cid:6)(cid:6)(cid:6)(cid:6)(cid:6)(cid:6)p(i) ∩k(cid:8)j=1Eji(cid:6)(cid:6)(cid:6)(cid:6)(cid:6)(cid:6)|(cid:7)kj=1 Eα|ji.≥(4)Since ki ≤ m, there are in total mn such constraints. Since the left hand side of each such constraint is an integer, the overall constraint is tight if(cid:6)(cid:6)(cid:6)(cid:6)(cid:6)(cid:6)p(i) ∩(cid:6)(cid:6)(cid:6)(cid:6)(cid:6)(cid:6)k(cid:8)j=1Eji(cid:9)|(cid:7)kj=1 Eα|ji(cid:10).=If the value of α is such that no proportionality constraint is tight then this means that α is not optimal. Therefore, we can restrict our attention to those values of α for which at least one of the constraints of the type in (4) is tight. When a constraint is tight, both sides of the constraint take one of the values from the set {1, . . . , m}. No constraint can take value 0because we know that α∗is finite and that there exists an assignment in which each agent gets one of his most preferred objects. For the tight constraint(cid:6)(cid:6)(cid:6)(cid:6)(cid:6)(cid:6)p(i) ∩(cid:6)(cid:6)(cid:6)(cid:6)(cid:6)(cid:6)k(cid:8)j=1Eji|(cid:7)kj=1 Eα|ji=∈ ((cid:2), (cid:2) + 1]for some (cid:2) ∈ {0, . . . , m − 1}. This constraint is tight for one of the following values of α:(cid:16)|(cid:7)kj=1 E(cid:2) + 1|ji(cid:17): (cid:2) ∈ {0, . . . , m − 1}It follows that if we restrict α to those values for which at least one proportionality constraint is tight, then we just need to consider at most nm2 values of α all of which are rationals. For each of these values, we check whether a 1/αproportional assignment exists or not. The smallest α for which a 1/α proportional assignment exists is the optimal α = α∗. The assignment is the optimal proportional assignment. (cid:2)We note that if an SD proportional assignment exists, then it is also an optimal proportional assignment.Theorem 18. SD proportionality implies optimal proportionality irrespective of whether the assignments are discrete or not.Proof. Assume that assignment p is SD proportional not an optimal proportional assignment. Then, we know that it is 1/n proportional. Assume for contradiction that p is 1/α proportional for α < n. But this means that for each i ∈ N, the following constraint is satisfied.|p(i) ∩ O | ≥|O |α.Since α < n, it follows that |O |α >than |O | which is a contradiction. (cid:2)n . But if each agent gets more than |O ||O |n objects, then the number of objects is more We show that even if an SD proportional assignment does not exist, an optimal proportional assignment suggests a desirable allocation of objects.H. Aziz et al. / Artificial Intelligence 227 (2015) 71–9289Example 8. Assume that the preferences of the agents are as follows.1 :2 :{o1, o2, o3}{o1, o2, o3}Since m is not a multiple of n, an SD proportional assignment does not exist. Now consider the assignment p that gives two objects to one agent and one object to the other. It is an optimal proportional assignment where the optimal proportionality value is 1/3.Optimal proportionality seems to be a useful fairness concept for ordinal settings. It guarantees the existence of an assignment that satisfies a fairness notion along the lines of proportionality. If each agent cannot get a most preferred object, then the optimal proportionality value reached is 1/∞ = 0. If the optimal proportionality value is 0, then one can modify the preference profile by gradually merging the first few equivalence classes of the agents. If m > n, then after merging enough equivalence classes of the agents, one can ensure that the optimal proportional value for the modified profile is finite. An optimal proportional assignment for the modified preference profile stills seems to constitute a desirable and fair assignment for the original preference profile. We note that in contrast to the ordinal setting, when agents have cardinal utilities, even checking whether there exists a proportional assignment is NP-complete [15,39].8.3. Optimal weak proportionalityJust like the concept of SD proportionality can be used to define optimal proportionality, weak SD proportionality can be used to define optimal weak proportionality. We say that an assignment satisfies 1/β weak proportionality if(1/β, . . . , 1/β) (cid:2)SDi p(i) for all i ∈ N.We note that 1/n weak proportionality is equivalent to weak SD proportionality. An assignment satisfies optimal weak proportionality if(1/β, . . . , 1/β) (cid:2)SDi p(i) for all i ∈ N.for the infimum of the set {β | ∃ a 1/β weak proportional assignment}. We will refer to the infimum as β∗as the optimal weak proportionality value.and call 1/β∗We point out that Theorem 8 can be generalized from 1/n proportionality to 1/β proportionality for any value of β:Theorem 19. For a constant number of agents, it can be checked in polynomial time whether a 1/β weak proportional discrete assignment exists even if agents are allowed to express indifference between objects.Proof. The algorithm and proof is identical to that of the algorithm in the proof of Theorem 8. The only difference in the algorithm is in the lower bounds of vertices.(cid:15)(cid:6)(cid:6)(cid:6)• a(v(cid:2)i ) =+ 1 and b(v(cid:2)i ) = ∞ for each i ∈ N and (cid:2) ∈ {1, . . . , ki};(cid:14) (cid:6)(cid:7)(cid:6)(cid:2)(cid:6)j=1 Eβjiji ) = b(B• a(B• a(o) = b(o) = 1 for each o ∈ O . (cid:2)for each Bi ) =ji ;j(cid:6)(cid:6)(cid:6)(cid:6)(cid:6)j(cid:6)EiβThe algorithm in the proof of Theorem 19 can be used to check the existence of a 1/β weak proportional assignment for different values of β. However, among other cases, if m < n, then we know that a 1/β weak proportional assignment does not exist for any finite value of β.Lemma 7. For any assignment setting, β∗ ≥ 1.Proof. Assume for contradiction that β∗ < 1. This means that there exists a discrete assignment p such that for each agent |i ∈ N, either p(i) ∼SDfor some k. Note that the former condition is not i(cid:7)feasible because it means that p(i) (cid:9)RSkj=1 Ethis is a contradiction. (cid:2)i O . For the latter condition, since β∗ < 1, therefore (1/β∗, . . . , 1/β∗) or (cid:7)kj=1 E i |β∗(cid:6)(cid:6)(cid:6)p(i) ∩(cid:6)(cid:6)(cid:6)p(i) ∩(cid:7)kj=1 E(cid:7)kj=1 E(cid:6)(cid:6)(cid:6) > | (cid:6)(cid:6)(cid:6) >|. But jijijiNext, we characterize those assignment settings for which β∗is finite.90H. Aziz et al. / Artificial Intelligence 227 (2015) 71–92Lemma 8. β∗is finite if and only if m ≥ n.Proof. If β∗agent gets at least one object which means that m ≥ n.is finite, then at least one of each agent’s weak β∗proportionality constraint is satisfied. This implies that each Assume that m ≥ n. Hence there exists an assignment in which each agent gets one object. In the worst case, some agent (1/β, . . . , 1/β) if 1/β < 1/m. Hence p is weak i ∈ N gets only one object that is also his least preferred. Even then p(i) (cid:9)SDi1/β weak proportional for any finite β > m. (cid:2)Next, we show that if the number of agents is constant, an optimal weak proportional assignment can be computed in polynomial time.Theorem 20. If the number of agents is constant, a discrete optimal weak proportional assignment can be computed in polynomial time even if agents are allowed to express indifference between objects.Proof. If m < n, then by Lemma 8, β∗satisfies 1/∞ weak proportionality. If m ≥ n, then by Lemma 8, β∗as the assignment corresponding to it. Assume that β∗(1/β∗, . . . , 1/β∗). In this case, for each j ∈ {1, . . . , ki} i gets Eis infinite and at least one agent cannot get an object. In that case, any assignment is finite, we show how to compute such a β∗as well is such that there exists at least one i ∈ N such that p(i) ∼SDii . Since |E|Eβ∗ objects from p(i) ∩ E| ∈ {1, . . . , m} and |p(i) ∩| ∈ {1, . . . , m}, β∗Now let us assume that β∗takes one of at most O (m2) values from set {a/b : a, b ∈ {1, . . . , m}, a > b}.is such that there exists no i ∈ N such that p(i) ∼SDi(1/β∗, . . . , 1/β∗). In that case for each agent i ∈ N, an assignment p satisfies 1/β proportionality if for each i ∈ N and some k ∈ {1, . . . , ki},jijiji|jp(i) ∩k(cid:8)j=1Eji|(cid:7)kj=1 Eβ|ji.>(5)For an arbitrarily small rational (cid:5) > 0, this constraint is equivalent to(cid:10)(cid:9)p(i) ∩Eji≥k(cid:8)j=1|(cid:7)kj=1 Eβ − (cid:5)|ji.Since ki ≤ m, there are in total mn such constraints. Since the left hand side of each such constraint is an integer, the overall constraint is tight ifp(i) ∩k(cid:8)j=1Eji(cid:9)|(cid:7)kj=1 Eβ − (cid:5)|ji(cid:10).=(6)If the value of β − (cid:5) is such that no proportionality constraint is tight then this means that β − (cid:5) is not optimal. Therefore, we can restrict our attention to those values of β − (cid:5) for which at least one of the constraints of the type in (6)is tight. When a constraint is tight, both sides of the constraint take one of the values from the set {1, . . . , m}. For the tight constraint,p(i) ∩k(cid:8)j=1Eji|(cid:7)kj=1 Eβ − (cid:5)|ji=∈ ((cid:2), (cid:2) + 1]for some (cid:2) ∈ {0, . . . , m − 1}. This constraint is tight for one of the following values of β − (cid:5):(cid:16)|(cid:7)kj=1 E(cid:2) + 1|ji: (cid:2) ∈ {0, . . . , m − 1}(cid:17)It follows that if we restrict β − (cid:5) to those values for which at least one proportionality constraint is tight, then we just need to consider at most nm2 values of β − (cid:5) all of which are rationals. We can informally consider these values as the values of β because β − (cid:5) is a tiny perturbation of β. For each of the values, we check whether a 1/β proportional assignment exists or not. Similarly, for each of the values from the set β ∈ {a/b : a, b ∈ {1, . . . , m}, a > b}, we check whether a β weak proportional assignment exists or not. The smallest β for which a 1/β assignment exists is β∗. (cid:2)It remains open whether the theorem above can be generalized to the case where the number of agents is not constant. We note that whereas an SD proportional assignment is an optimal proportional assignment (Theorem 18), a weak SD proportional assignment may not be an optimal weak proportional assignment.(cid:6)(cid:6)(cid:6)(cid:6)(cid:6)(cid:6)(cid:6)(cid:6)(cid:6)(cid:6)(cid:6)(cid:6)(cid:6)(cid:6)(cid:6)(cid:6)(cid:6)(cid:6)(cid:6)(cid:6)(cid:6)(cid:6)(cid:6)(cid:6)(cid:6)(cid:6)(cid:6)(cid:6)(cid:6)(cid:6)(cid:6)(cid:6)(cid:6)(cid:6)(cid:6)(cid:6)(cid:6)(cid:6)(cid:6)(cid:6)(cid:6)(cid:6)(cid:6)(cid:6)(cid:6)(cid:6)(cid:6)(cid:6)H. Aziz et al. / Artificial Intelligence 227 (2015) 71–9291Example 9. Assume that the preferences of the agents are as follows.1 :2 :o1, o2, o3, o4, o5{o2, o3}, {o1, o4, o5}Note that the discrete assignment p that gives {o2, o3} to agent 1 and the other objects to agent 2 is weak SD proportional. In fact it is not only 1/2 weak proportional but (3/5 − (cid:5)) weak proportional where (cid:5) > 0 is arbitrarily small. It is not 1/βweak proportional for 1/β < 3/5.We now consider a discrete assignment q, that gives {o1} to agent 1 and the other objects to agent 2. It is easily seen that q is (1 − (cid:5)) weak proportional where (cid:5) > 0 is arbitrarily small. Since the weak SD proportional assignment p is not 1/β weak proportional for 1/β < 3/5 but there exists another discrete assignment q that is (1 − (cid:5)) weak proportional, it shows that a weak SD proportional discrete assignment may not be an optimal weak proportional assignment.Next, we provide further justification for optimal weak proportionality. Optimal weak proportionality is equivalent to an established fairness concept called maximin defined for a restricted domain. When n = m and preferences of agents are strict, Brams and King [21] defined an assignment satisfying maximin if it maximizes the minimum rank of items that any player receives. We show that for n = m and strict preferences, maximin is equivalent to optimal weak proportional.Theorem 21. For n = m and strict preferences, maximin is equivalent to optimal weak proportional.Proof. Assume that each agent gets an object that is at least his k-th ranked object. Then the assignment satisfies 1/(k − (cid:5))weak proportionality for some arbitrarily small (cid:5) > 0. We now assume that an assignment satisfies 1/(k − (cid:5)) weak pro-portionality for some arbitrarily small (cid:5) > 0. In that case we know that each agent gets an object that is k-th or higher ranked. (cid:2)9. ConclusionsWe have presented a taxonomy of fairness concepts under ordinal preferences, and identified the relationships between the concepts. Compared to refinements of the responsive set extension to define fairness concepts [12], using cardinal utili-ties and the SD relation to define fairness concepts not only gives more flexibility (for example reasoning about entitlements) but can also be convenient for algorithm design.A problem with the fairness concepts presented in the paper was that the set of fair outcomes is not guaranteed to be non-empty. In view of this we highlighted in Section 8 how alternative notions of maximal and maximum fairness are useful and how the respective computational problems are related to each other. Another possible way to circumvent non-existence of SD proportional or weak SD proportional assignments is to define less stringent notions by replacing the reference vector ( 1n ) with a reference vector with 1/n replaced by some constant. We show that an optimal proportional discrete assignment can be computed in polynomial time whereas an optimal weak proportional discrete assignment can be computed in polynomial time if the number of agents is bounded. Both fairness notions appear to promising solution concepts for fair division of indivisible objects. They are also compatible with Pareto optimality. The optimal notions can be further refined with respect to leximin refinements.n , . . . , 1There are number of directions for future research. The complexity of finding a weak SD proportional discrete assignment remains open for an unbounded number of agents with non-strict preferences. The complexity of checking whether an SD envy-free assignment exists for a bounded number of agents is open. It will be interesting to see how various approximation algorithms in the literature designed to reduce envy or maximize welfare fare in terms of satisfying ordinal notions of fairness (see, e.g., [9,13,39]). Examining other dominance notions may also be fruitful [34]. Another avenue for positive algorithmic results is to consider parameterized algorithms. Finally, strategic aspects of ordinal fairness is another interesting direction for future research.AcknowledgementsThe authors thank the anonymous reviewers of the 13th International Conference on Autonomous Agents and Multiagent Systems (AAMAS 2014) [5] as well as the anonymous reviewers of the Artificial Intelligence journal. They also thank Steven Brams for comments and pointers. NICTA is funded by the Australian Government through the Department of Communi-cations and the Australian Research Council through the ICT Centre of Excellence Program. Serge Gaspers is the recipient of an Australian Research Council Discovery Early Career Researcher Award (project number DE120101761) and a Future Fellowship (project number FT140100048).References[1] D.J. Abraham, K. Cechlárová, D. Manlove, K. Mehlhorn, Pareto optimality in house allocation problems, in: Proceedings of the 16th International Sym-posium on Algorithms and Computation, ISAAC, in: Lecture Notes in Computer Science, vol. 3341, 2005, pp. 1163–1175.92H. Aziz et al. / Artificial Intelligence 227 (2015) 71–92[2] A. Asadpour, A. Saberi, An approximation algorithm for max–min fair allocation of indivisible goods, SIAM J. Comput. 39 (7) (2010) 2970–2989.[3] H. Aziz, A note on the undercut procedure, in: Proceedings of the 13th International Conference on Autonomous Agents and Multi-Agent Systems, AAMAS, 2014, pp. 1361–1362.[4] H. Aziz, F. Brandt, P. Stursberg, On popular random assignments, in: Proceedings of the 6th International Symposium on Algorithmic Game Theory, SAGT, in: Lecture Notes in Computer Science, vol. 8146, Springer-Verlag, 2013, pp. 183–194.[5] H. Aziz, S. Gaspers, S. Mackenzie, T. Walsh, Fair assignment of indivisible objects under ordinal preferences, in: Proceedings of the 13th International Conference on Autonomous Agents and Multi-Agent Systems, AAMAS, 2014, pp. 1305–1312.[6] H. Aziz, B. de Keijzer, Housing markets with indifferences: a tale of two mechanisms, in: Proceedings of the 26th AAAI Conference on Artificial [7] S. Barberà, W. Bossert, P.K. Pattanaik, Ranking sets of objects, in: S. Barberà, P.J. Hammond, C. Seidl (Eds.), Handbook of Utility Theory, vol. II, Kluwer Intelligence, AAAI, 2012, pp. 1249–1255.Academic Publishers, 2004, pp. 893–977, Ch. 17.[8] D. Baumeister, S. Bouveret, J. Lang, N.-T. Nguyen, T.-T. Nguyen, J. Rothe, A. Saffidine, Axiomatic and computational aspects of scoring allocation rules for indivisible goods, in: Proceedings of the 5th International Workshop on Computational Social Choice, COMSOC, 2014.[9] I. Bezáková, V. Dani, Allocating indivisible goods, ACM SIGecom Exch. 5 (3) (2005) 11–18.[10] P. Biró, D.F. Manlove, E.J. McDermid, “Almost stable” matchings in the roommates problem with bounded preference lists, Theor. Comput. Sci. 432 (11) [11] A. Bogomolnaia, H. Moulin, A new solution to the random assignment problem, J. Econ. Theory 100 (2) (2001) 295–328.[12] S. Bouveret, U. Endriss, J. Lang, Fair division under ordinal preferences: computing envy-free allocations of indivisible goods, in: Proceedings of the 19th European Conference on Artificial Intelligence, ECAI, 2010, pp. 387–392.[13] S. Bouveret, J. Lang, Efficiency and envy-freeness in fair division of indivisible goods: logical representation and complexity, J. Artif. Intell. Res. 32 (1) (2012) 10–20.(2008) 525–564.[14] S. Bouveret, J. Lang, A general elicitation-free protocol for allocating indivisible goods, in: Proceedings of the 22 International Joint Conference on Artificial Intelligence, IJCAI, 2011, pp. 73–78.[15] S. Bouveret, M. Lemaître, Characterizing conflicts in fair division of indivisible goods using a scale of criteria, in: Proceedings of the 13th International Conference on Autonomous Agents and Multi-Agent Systems, AAMAS, 2014, pp. 1321–1328.[16] S.J. Brams, P. Edelman, P.C. Fishburn, Fair division of indivisible items, Theory Decis. 55 (2003) 147–180.[17] S.J. Brams, P.H. Edelman, P.C. Fishburn, Paradoxes of fair division, J. Philos. 98 (6) (2001) 300–314.[18] S.J. Brams, M. Feldman, J. Morgenstern, J.K. Lai, A.D. Procaccia, On maxsum fair cake divisions, in: Proceedings of the 26th AAAI Conference on Artificial Intelligence, AAAI, AAAI Press, 2012, pp. 1285–1291.Soc. Choice Welf. 17 (2000) 247–267.[19] S.J. Brams, P.C. Fishburn, Fair division of indivisible items between two people with identical preferences: envy-freeness, Pareto-optimality, and equity, [20] S.J. Brams, D.M. Kilgour, C. Klamler, The undercut procedure: an algorithm for the envy-free division of indivisible items, Soc. Choice Welf. 39 (2012) 615–631.[21] S.J. Brams, D.L. King, Efficient fair division: help the worst off or avoid envy?, Ration. Soc. 17 (4) (2005) 387–421.[22] S.J. Brams, A.D. Taylor, Fair Division: From Cake-Cutting to Dispute Resolution, Cambridge University Press, 1996.[23] Y. Chevaleyre, P.E. Dunne, U. Endriss, J. Lang, M. Lemaître, N. Maudet, J. Padget, S. Phelps, J.A. Rodríguez-Aguilar, P. Sousa, Issues in multiagent resource [24] W.J. Cho, Probabilistic assignment: a two-fold axiomatic approach, Mimeo, 2012.[25] Y.J. Cohler, J.K. Lai, D.C. Parkes, A.D. Procaccia, Optimal envy-free cake cutting, in: Proceedings of the 25th AAAI Conference on Artificial Intelligence, [26] A. Darmann, J. Schauer, Maximizing Nash product social welfare in allocating indivisible goods, in: Proceedings of the 5th International Workshop on [27] B. de Keijzer, S. Bouveret, T. Klos, Y. Zhang, On the complexity of efficiency and envy-freeness in fair division of indivisible goods with additive preferences, in: Proceedings of the 1st International Conference on Algorithmic Decision Theory, 2009, pp. 98–110.[28] S. Demko, T.P. Hill, Equitable distribution of indivisible objects, Math. Soc. Sci. 16 (1988) 145–158.[29] C. Domshlak, E. Hüllermeier, S. Kaci, H. Prade, Preferences in AI: an overview, Artif. Intell. 175 (7–8) (2011) 1037–1052.[30] D. Ferraioli, L. Gourves, J. Monnot, On regular and approximately fair allocations of indivisible goods, in: Proceedings of the 13th International Confer-ence on Autonomous Agents and Multi-Agent Systems, AAMAS, 2014, pp. 997–1004.[31] D. Foley, Resource allocation and the public sector, Yale Econ. Essays 7 (1967) 45–98.[32] P. Gärdenfors, Assignment problem based on ordinal preferences, Manag. Sci. 20 (1973) 331–340.[33] N. Garg, T. Kavitha, A. Kumar, K. Mehlhorn, J. Mestre, Assigning papers to referees, Algorithmica 58 (2010) 119–136.[34] B. Golden, P. Perny, Infinite order Lorenz dominance for fair multiagent optimization, in: Proceedings of the 9th International Conference on Au-tonomous Agents and Multi-Agent Systems, AAMAS, 2010, pp. 383–390.[35] D. Golovin, Max–min fair allocation of indivisible goods, Tech. rep. CMU-CS-05-144, Carnegie Mellon University, 2005.[36] R.M. Karp, Reducibility among combinatorial problems, in: R.E. Miller, J.W. Thatcher (Eds.), Complexity of Computer Computations, Plenum Press, 1972, pp. 85–103.[37] I. Kash, A.D. Procaccia, N. Garg, No agent left behind: dynamic fair division of multiple resources, in: Proceedings of the 12th International Conference on Autonomous Agents and Multi-Agent Systems, AAMAS, 2013, pp. 351–358.[38] A.-K. Katta, J. Sethuraman, A solution to the random assignment problem on the full preference domain, J. Econ. Theory 131 (1) (2006) 231–250.[39] R.J. Lipton, E. Markakis, E. Mossel, A. Saberi, On approximately fair allocations of indivisible goods, in: Proceedings of the 5th ACM Conference on Electronic Commerce, ACM-EC, 2004, pp. 125–131.[40] D. Manlove, Algorithmics of Matching Under Preferences, World Scientific Publishing Company, 2013.[41] H. Moulin, Fair Division and Collective Welfare, The MIT Press, 2003.[42] T.T. Nguyen, M. Roos, J. Rothe, A survey of approximability and inapproximability results for social welfare optimization in multiagent resource alloca-[43] E.A. Pazner, D. Schmeidler, Egalitarian equivalent allocations: a new concept of economic equity, Q. J. Econ. 92 (4) (1978) 671–687.[44] A.D. Procaccia, Thou shalt covet thy neighbor’s cake, in: Proceedings of the 21st International Joint Conference on Artificial Intelligence, IJCAI, 2009, [45] A.D. Procaccia, J. Wang, Fair enough: guaranteeing approximate maximin shares, in: Proceedings of the 15th ACM Conference on Economics and tion, Ann. Math. Artif. Intell. (2013) 1–26.pp. 239–244.Computation, ACM-EC, 2014, pp. 675–692.[46] K. Pruhs, G.J. Woeginger, Divorcing made easy, in: Proceedings of FUN, in: Lecture Notes in Computer Science, vol. 7288, 2012, pp. 305–314.[47] A. Schrijver, Combinatorial Optimization – Polyhedra and Efficiency, Springer, 2003.[48] H. Steinhaus, The problem of fair division, Econometrica 16 (1948) 101–104.[49] H.R. Varian, Equity, envy, and efficiency, J. Econ. Theory 9 (1974) 63–91.[50] L. Wilson, Assignment using choice lists, Oper. Res. Q. 28 (3) (1977) 569–578.[51] H.P. Young, Dividing the indivisible, Am. Behav. Sci. 38 (1995) 904–920.allocation, Informatica 30 (2006) 3–31.AAAI, 2011, pp. 626–631.Computational Social Choice, COMSOC, 2014.