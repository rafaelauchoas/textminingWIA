Artiﬁcial Intelligence 172 (2008) 1400–1427

www.elsevier.com/locate/artint

Imprecise probability trees:
Bridging two theories of imprecise probability

Gert de Cooman ∗, Filip Hermans

Ghent University, SYSTeMS Research Group, Technologiepark – Zwijnaarde 914, 9052 Zwijnaarde, Belgium

Received 30 March 2007; received in revised form 12 February 2008; accepted 3 March 2008

Available online 18 March 2008

Abstract

We give an overview of two approaches to probability theory where lower and upper probabilities, rather than probabilities,
are used: Walley’s behavioural theory of imprecise probabilities, and Shafer and Vovk’s game-theoretic account of probability.
We show that the two theories are more closely related than would be suspected at ﬁrst sight, and we establish a correspondence
between them that (i) has an interesting interpretation, and (ii) allows us to freely import results from one theory into the other.
Our approach leads to an account of probability trees and random processes in the framework of Walley’s theory. We indicate how
our results can be used to reduce the computational complexity of dealing with imprecision in probability trees, and we prove an
interesting and quite general version of the weak law of large numbers.
© 2008 Elsevier B.V. All rights reserved.

Keywords: Game-theoretic probability; Imprecise probabilities; Coherence; Conglomerability; Event tree; Probability tree; Imprecise probability
tree; Lower prevision; Immediate prediction; Prequential Principle; Law of large numbers; Hoeffding’s inequality; Markov chain; Random
process

1. Introduction

In recent years, we have witnessed the growth of a number of theories of uncertainty, where imprecise (lower and
upper) probabilities and previsions, rather than precise (or point-valued) probabilities and previsions, have a central
part. Here we consider two of them, Glenn Shafer and Vladimir Vovk’s game-theoretic account of probability [29],
which is introduced in Section 2, and Peter Walley’s behavioural theory [33], outlined in Section 3. These seem to have
a rather different interpretation, and they certainly have been inﬂuenced by different schools of thought: Walley follows
the tradition of Frank Ramsey [22], Bruno de Finetti [11] and Peter Williams [39] in trying to establish a rational model
for a subject’s beliefs in terms of her behaviour. Shafer and Vovk follow an approach that has many other inﬂuences
as well, and is strongly coloured by ideas about gambling systems and martingales. They use Cournot’s Principle
to interpret lower and upper probabilities (see [28]; and [29, Chapter 2] for a nice historical overview), whereas on
Walley’s approach, lower and upper probabilities are deﬁned in terms of a subject’s betting rates.

* Corresponding author.

E-mail addresses: gert.decooman@UGent.be (G. de Cooman), ﬁlip.hermans@UGent.be (F. Hermans).

0004-3702/$ – see front matter © 2008 Elsevier B.V. All rights reserved.
doi:10.1016/j.artint.2008.03.001

G. de Cooman, F. Hermans / Artiﬁcial Intelligence 172 (2008) 1400–1427

1401

What we set out to do here, 1 and in particular in Sections 4 and 5, is to show that in many practical situations, the
two approaches are strongly connected.2 This implies that quite a few results, valid in one theory, can automatically be
converted and reinterpreted in terms of the other. Moreover, we shall see that we can develop an account of coherent
immediate prediction in the context of Walley’s behavioural theory, and prove, in Section 6, a weak law of large
numbers with an intuitively appealing interpretation. We use this weak law in Section 7 to suggest a way of scoring a
predictive model that satisﬁes A. Philip Dawid’s Prequential Principle [5,6].

Why do we believe these results to be important, or even relevant, to AI? Probabilistic models are intended to
represent an agent’s beliefs about the world he is operating in, and which describe and even determine the actions
he will take in a diversity of situations. Probability theory provides a normative system for reasoning and making
decisions in the face of uncertainty. Bayesian, or precise, probability models have the property that they are completely
decisive: a Bayesian agent always has an optimal choice when faced with a number of alternatives, whatever his state
of information. While many may view this as an advantage, it is not always realistic. Imprecise probability models try
to deal with this problem by explicitly allowing for indecision, while retaining the normative, or coherentist stance of
the Bayesian approach. We refer to [8,33,34] for discussions about how this can be done.

Imprecise probability models appear in a number of AI-related ﬁelds. For instance in probabilistic logic: it was
already known to George Boole [1] that the result of probabilistic inferences may be a set of probabilities (an imprecise
probability model), rather than a single probability. This is also important for dealing with missing or incomplete data,
leading to so-called partial identiﬁcation of probabilities, see for instance [9,19]. There is also a growing literature on
so-called credal nets [3,4]: these are essentially Bayesian nets with imprecise conditional probabilities.

We are convinced that it is mainly the mathematical and computational complexity often associated with imprecise
probability models that is keeping them from becoming a more widely used tool for modelling uncertainty. But we
believe that the results reported here can help make inroads in reducing this complexity. Indeed, the upshot of our
being able to connect Walley’s approach with Shafer and Vovk’s, is twofold. First of all, we can develop a theory
of imprecise probability trees: probability trees where the transition from a node to its children is described by an
imprecise probability model in Walley’s sense. Our results provide the necessary apparatus for making inferences in
such trees. And because probability trees are so closely related to random processes, this effectively brings us into a
position to start developing a theory of (event-driven) random processes where the uncertainty can be described using
imprecise probability models. We illustrate this in Examples 1 and 3, and in Section 8.

Secondly, we are able to prove so-called Marginal Extension results (Theorems 3 and 7, Proposition 9), which
lead to backwards recursion, and dynamic programming-like methods that allow for an exponential reduction in
the computational complexity of making inferences in such imprecise probability trees. This is also illustrated in
Examples 3 and Section 8. For (precise) probability trees, similar techniques were described in Shafer’s book on
causal reasoning [26]. They seem to go back to Christiaan Huygens, who drew the ﬁrst probability tree, and showed
how to reason with it, in his solution to Pascal and Fermat’s Problem of Points.3

2. Shafer and Vovk’s game-theoretic approach to probability

In their game-theoretic approach to probability [29], Shafer and Vovk consider games with two typical players,
Reality and Sceptic, who play according to certain protocols. They obtain the most interesting results for what they
call coherent probability protocols. This section is devoted to explaining what this means: what are the roles of Reality
and Sceptic, how and by what rules do they play, and how can their game-play be related to probabilistic reasoning?

2.1. Reality’s event tree

We begin with a ﬁrst and basic assumption, dealing with how the ﬁrst player, Reality, plays.

1 An earlier and condensed version of this paper, with much less discussion and without proofs, was presented at the ISIPTA ’07 Conference [7].
2 Our line of reasoning here should be contrasted with the one in [28], where Shafer et al. use the game-theoretic framework developed in [29] to
construct a theory of predictive upper and lower previsions whose interpretation is based on Cournot’s Principle. See also the comments near the
end of Section 5.
3 See Section 8 for more details and precise references.

1402

G. de Cooman, F. Hermans / Artiﬁcial Intelligence 172 (2008) 1400–1427

Fig. 1. A simple event tree for Reality, displaying the initial situation (cid:2), other non-terminal situations (such as t ) as grey circles, and paths, or
terminal situations, (such as ω) as black circles. Also depicted is a cut U = {u1, u2, u3, u4} of (cid:2). Observe that t (strictly) precedes u1: t (cid:2) u1, and
that C(t) = {u1, u2} is the children cut of t .

G1. Reality makes a number of moves, where the possible next moves may depend on the previous moves he has

made, but do not in any way depend on the previous moves made by Sceptic.

This means that we can represent his game-play by an event tree (see also [26,27] for more information about event
trees). We restrict ourselves here to the discussion of bounded protocols, where Reality makes only a ﬁnite and
bounded number of moves from the beginning to the end of the game, whatever happens. But we don’t exclude the
possibility that at some point in the tree, Reality has the choice between an inﬁnite number of next moves. We shall
come back to these assumptions further on, once we have the appropriate notational tools to make them more explicit.4

Let us establish some terminology related to Reality’s event tree.

2.1.1. Paths, situations and events

A path in the tree represents a possible sequence of moves for Reality from the beginning to the end of the game.

We denote the set of all possible paths ω by Ω, the sample space of the game.

A situation t is some connected segment of a path that is initial, i.e., starts at the root of the tree. It identiﬁes the
moves Reality has made up to a certain point, and it can be identiﬁed with a node in the tree. We denote the set of all
situations by Ω ♦. It includes the set Ω of terminal situations, which can be identiﬁed with paths. All other situations
are called non-terminal; among them is the initial situation (cid:2), which represents the empty initial segment. See Fig. 1
for a simple graphical example explaining these notions.

If for two situations s and t, s is a(n initial) segment of t, then we say that s precedes t or that t follows s, and write
s (cid:3) t, or alternatively t (cid:4) s. If ω is a path and t (cid:3) ω then we say that the path ω goes through situation t. We write
s (cid:2) t, and say that s strictly precedes t, if s (cid:3) t and s (cid:5)= t.

An event A is a set of paths, or in other words, a subset of the sample space: A ⊆ Ω. With an event A, we can

associate its indicator IA, which is the real-valued map on Ω that assumes the value 1 on A, and 0 elsewhere.

We denote by ↑t := {ω ∈ Ω: t (cid:3) ω} the set of all paths that go through t: ↑t is the event that corresponds to Reality
getting to a situation t. It is clear that not all events will be of the type ↑t . Shafer [26] calls events of this type exact.
Further on, in Section 4, exact events will be the only events that can be legitimately conditioned on, because they are
the only events that can be foreseen to occur as part of Reality’s game-play.

2.1.2. Cuts of a situation

Call a cut U of a situation t any set of situations that follow t, and such that for all paths ω through t, there is a

unique u ∈ U that ω goes through. In other words:

(i) (∀u ∈ U )(u (cid:4) t); and
(ii) (∀ω (cid:4) t)(∃!u ∈ U )(ω (cid:4) u);

4 Essentially, the width of the tree may be inﬁnite, but its depth should be ﬁnite.

G. de Cooman, F. Hermans / Artiﬁcial Intelligence 172 (2008) 1400–1427

1403

Fig. 2. An event tree for Reality, with the move space Wt and the corresponding children cut C(t) of a non-terminal situation t .

see also Fig. 1. Alternatively, a set U of situations is a cut of t if and only if the corresponding set {↑u: u ∈ U } of
exact events is a partition of the exact event ↑t. A cut can be interpreted as a (complete) stopping time.

If a situation s (cid:4) t precedes (follows) some element of a cut U of t, then we say that s precedes (follows) U , and
we write s (cid:3) U (s (cid:4) U ). Similarly for ‘strictly precedes (follows)’. For two cuts U and V of t, we say that U precedes
V if each element of U is followed by some element of V .

A child of a non-terminal situation t is a situation that immediately follows it. The set C(t) of children of t
constitutes a cut of t, called its children cut. Also, the set Ω of terminal situations is a cut of (cid:2), called its terminal cut.
The event ↑t is the corresponding terminal cut of a situation t.

2.1.3. Reality’s move spaces

We call a move w for Reality in a non-terminal situation t an arc that connects t with one of its children s ∈ C(t),

meaning that s = tw is the concatenation of the segment t and the arc w. See Fig. 2.

Reality’s move space in t is the set Wt of those moves w that Reality can make in t: Wt = {w: tw ∈ C(t)}. We
have already mentioned that Wt may be (countably or uncountably) inﬁnite: there may be situations where reality has
the choice between an inﬁnity of next moves. But every Wt should contain at least two elements: otherwise there is
no choice for Reality to make in situation t.

2.2. Processes and variables

We now have all the necessary tools to represent Reality’s game-play. This game-play can be seen as a basis for
an event-driven, rather than a time-driven, account of a theory of uncertain, or random, processes. The driving events
are, of course, the moves that Reality makes.5 In a theory of processes, we generally consider things that depend on
(the succession of) these moves. This leads to the following deﬁnitions.

Any (partial) function on the set of situations Ω ♦ is called a process, and any process whose domain includes all
situations that follow a situation t is called a t-process. Of course, a t-process is also an s-process for all s (cid:4) t; when
we call it an s-process, this means that we are restricting our attention to its values in all situations that follow s.

A special example of a t-process is the distance d(t, ·) which for any situation s (cid:4) t returns the number of steps
d(t, s) along the tree from t to s. When we said before that we are only considering bounded protocols, we meant that
there is a natural number D such that d(t, s) (cid:3) D for all situations t and all s (cid:4) t.

Similarly, any (partial) function on the set of paths Ω is called a variable, and any variable on Ω whose domain
includes all paths that go through a situation t is called a t-variable. If we restrict a t-process F to the set ↑t of all
terminal situations that follow t, we obtain a t-variable, which we denote by FΩ .

If U is a cut of t, then we call a t-variable g U -measurable if for all u in U , g assumes the same value g(u) := g(ω)

for all paths ω that go through u. In that case we can also consider g as a variable on U , which we denote as gU .

If F is a t-process, then with any cut U of t we can associate a t-variable FU , which assumes the same value
FU (ω) := F(u) in all ω that follow u ∈ U . This t-variable is clearly U -measurable, and can be considered as a
variable on U . This notation is consistent with the notation FΩ introduced earlier.

5 These so-called Humean events shouldn’t be confused with the Moivrean events we have considered before, and which are subsets of the sample
space Ω. See Shafer [26, Chapter 1] for terminology and more explanation.

1404

G. de Cooman, F. Hermans / Artiﬁcial Intelligence 172 (2008) 1400–1427

Fig. 3. The event tree associated with two successive coin ﬂips. Also depicted are two cuts, X1 and U , of the initial situation.

Similarly, we can associate with F a new, U -stopped, t-process U (F), as follows:

(cid:2)

U (F)(s) :=

F(s)
F(u)

if t (cid:3) s (cid:3) U,
if u ∈ U and u (cid:3) s.

The t-variable U (F)Ω is U -measurable, and is actually equal to FU :

U (F)Ω = FU .

The following intuitive example will clarify these notions.

(1)

Example 1 (Flipping coins). Consider ﬂipping two coins, one after the other. This leads to the event tree depicted in
Fig. 3. The identifying labels for the situations should be intuitively clear: e.g., in the initial situation ‘(cid:2) =?, ?’ none
of the coins have been ﬂipped, in the non-terminal situation ‘h, ?’ the ﬁrst coin has landed ‘heads’ and the second coin
hasn’t been ﬂipped yet, and in the terminal situation ‘t, t’ both coins have been ﬂipped and have landed ‘tails’.

First, consider the real process N , which in each situation s, returns the number N (s) of heads obtained so far,
e.g., N (?, ?) = 0 and N (h, ?) = 1. If we restrict the process N to the set Ω of all terminal elements, we get a real
variable NΩ , whose values are: NΩ (h, h) = 2, NΩ (h, t) = NΩ (t, h) = 1 and NΩ (t, t) = 0.

Consider the cut U of the initial situation, which corresponds to the following stopping time: “stop after two
ﬂips, or as soon as an outcome is heads”; see Fig. 3. The values of the corresponding variable NU are given by:
NU (h, h) = NU (h, t) = 1, NU (t, h) = 1 and NU (t, t) = 0. So NU is U -measurable, and can therefore be considered
as a map on the elements h, ? and t, h and t, t of U , with in particular NU (h, ?) = 1.
Next, consider the processes F, F 1, F 2: Ω ♦ → {h, t, ?}, deﬁned as follows:

s
F(s)
F 1(s)
F 2(s)

?, ?
?
?
?

h, ?
h
h
?

t, ?
t
t
?

h, h
h
h
h

h, t
t
h
t

t, h
h
t
h

t, t
t
t
t

F returns the outcome of the latest, F 1 the outcome of the ﬁrst, and F 2 that of the second coin ﬂip. The associated
variables F 1
Ω give, in each element of the sample space, the respective outcomes of the ﬁrst and second coin
ﬂips.

Ω and F 2

The variable F 1

Ω is X1-measurable: as soon as we reach (any situation on) the cut X1, its value is completely

determined, i.e., we know the outcome of the ﬁrst coin ﬂip; see Fig. 3 for the deﬁnition of X1.

We can associate with the process F the variable F

X1 that is also X1-measurable: it returns, in any element of the
sample space, the outcome of the ﬁrst coin ﬂip. Alternatively, we can stop the process F after one coin ﬂip, which
leads to the X1-stopped process X1(F). This new process is of course equal to F 1, and for the corresponding variable
Ω , we have that X1(F)Ω = F 1
F 1
Ω

X1 ; also see Eq. (1).

= F

G. de Cooman, F. Hermans / Artiﬁcial Intelligence 172 (2008) 1400–1427

1405

2.3. Sceptic’s game-play

We now turn to the other player, Sceptic. His possible moves may well depend on the previous moves that Reality
has made, in the following sense. In each non-terminal situation t, he has some set St of moves s available to him,
called Sceptic’s move space in t. We make the following assumption:

G2. In each non-terminal situation t, there is a (positive, negative, or zero) gain for Sceptic associated with each of
the possible moves s in St that Sceptic can make. This gain depends only on the situation t and the next move w
that Reality will make.

This means that for each non-terminal situation t there is a gain function λt : St × Wt → R, such that λt (s, w)
represents the change in Sceptic’s capital in situation t when he makes move s and Reality makes move w.

2.3.1. Strategies and capital processes

Let us introduce some further notions and terminology related to Sceptic’s game-play. A strategy P for Sceptic is
a partial process deﬁned on the set Ω ♦ \ Ω of non-terminal situations, such that P(t) ∈ St is the corresponding move
that Sceptic will make in each non-terminal situation t. If Sceptic conceives of a strategy P, this means he determines
beforehand (before Reality leaves situation (cid:2)) what move P(t) to make in each non-terminal situation t.

With each such strategy P there corresponds a capital process KP , whose value in each situation t gives us
Sceptic’s capital accumulated so far, when he starts out with zero capital in (cid:2) and plays according to the strategy P.
It is given by the recursion relation

KP

(tw) = KP

(t) + λt (P(t), w), w ∈ Wt ,

with initial condition KP ((cid:2)) = 0. Of course, when Sceptic starts out (in (cid:2)) with capital α and uses strategy P, his
corresponding accumulated capital is given by the process α + KP . In the terminal situations, his accumulated capital
is then given by the real variable α + KP
Ω .

If we start in a non-terminal situation t, rather than in (cid:2), then we can consider t-strategies P that tell Sceptic how
to move starting from t onwards, and the corresponding capital process KP is then also a t-process, that tells us how
much capital Sceptic has accumulated since starting with zero capital in situation t and using t-strategy P.

2.3.2. Lower and upper prices

The assumptions G1 and G2 outlined above determine so-called gambling protocols. They are sufﬁcient for us to

be able to deﬁne lower and upper prices for real variables.

Consider a non-terminal situation t and a real t-variable f . The upper price Et (f ) for f in t is deﬁned as the
inﬁmum capital α that Sceptic has to start out with in t in order that there would be some t-strategy P such that his
accumulated capital α + KP allows him, at the end of the game, to hedge f , whatever moves Reality makes after t:
(cid:4)
,

(2)
(cid:4) f is taken to mean that α + KP (ω) (cid:4) f (ω) for all terminal situations ω that go through t. Similarly,

(cid:3)
α: α + KP
Et (f ) := inf
Ω

(cid:4) f for some t-strategy P

where α + KP
Ω
for the lower price E
(cid:3)
t (f ) := sup
E

t (f ) for f in t:
α: α − KP
Ω

(3)
t (f ) = −Et (−f ). If we start from the initial situation t = (cid:2), we simply get the upper and lower prices for a real

(cid:3) f for some t-strategy P

so E
variable f , which we also denote by E(f ) and E(f ).

(cid:4)
,

2.3.3. Coherent probability protocols

Requirements G1 and G2 for gambling protocols allow the moves, move spaces and gain functions for Sceptic to

be just about anything. We now impose further conditions on Sceptic’s move spaces.

A gambling protocol is called a probability protocol when besides G1 and G2, two more requirements are satisﬁed.

P1. For each non-terminal situation t, Sceptic’s move space St is a convex cone in some linear space: a1s1 + a2s2 ∈ St

for all non-negative real numbers a1 and a2 and all s1 and s2 in St .

1406

G. de Cooman, F. Hermans / Artiﬁcial Intelligence 172 (2008) 1400–1427

P2. For each non-terminal situation t, Sceptic’s gain function λt has the following linearity property: λt (a1s1 +
a2s2, w) = a1λt (s1, w) + a2λt (s2, w) for all non-negative real numbers a1 and a2, all s1 and s2 in St and all w
in Wt .

Finally, a probability protocol is called coherent6 when moreover:

C. For each non-terminal situation t, and for each s in St there is some w in Wt such that λt (s, w) (cid:3) 0.

It is clear what this last requirement means: in each non-terminal situation, Reality has a strategy for playing from t
onwards such that Sceptic can’t (strictly) increase his capital from t onwards, whatever t-strategy he might use.

For such coherent probability protocols, Shafer and Vovk prove a number of interesting properties for the corre-
sponding lower (and upper) prices. We list a number of them here. For any real t-variable f , we can associate with a
U by E
cut U of t another special U -measurable t-variable E
u(f ), for all paths ω through t, where u is
the unique situation in U that ω goes through. For any two real t-variables f1 and f2, f1 (cid:3) f2 is taken to mean that
f1(ω) (cid:3) f2(ω) for all paths ω that go through t.

U (f )(ω) = E

Proposition 1 (Properties of lower and upper prices in a coherent probability protocol [29]). Consider a coherent
probability protocol, let t be a non-terminal situation, f , f1 and f2 real t-variables, and U a cut of t. Then

t (f ) (cid:3) Et (f ) (cid:3) supω∈↑t f (ω) [convexity];
t (f1) + E
t (f2) [super-additivity];
t (f ) for all real λ (cid:4) 0 [non-negative homogeneity];
t (f ) + α for all real α [constant additivity];

1. infω∈↑t f (ω) (cid:3) E
t (f1 + f2) (cid:4) E
2. E
t (λf ) = λE
3. E
t (f + α) = E
4. E
t (α) = α for all real α [normalisation];
5. E
6. f1 (cid:3) f2 implies that E
7. E

U (f )) [law of iterated expectation].

t (f2) [monotonicity];

t (f1) (cid:3) E

t (f ) = E

t ( E

What is more, Shafer and Vovk use speciﬁc instances of such coherent probability protocols to prove various limit
theorems (such as the law of large numbers, the central limit theorem, the law of the iterated logarithm), from which
they can derive, as special cases, the well-known measure-theoretic versions. We shall come back to this in Section 6.
The game-theoretic account of probability we have described so far, is very general. But it seems to pay little or
no attention to beliefs that Sceptic, or other, perhaps additional players in these games might entertain about how
Reality will move through its event tree. This might seem strange, because at least according to the personalist and
epistemicist school, probability is all about beliefs. In order to ﬁnd out how we can incorporate beliefs into the game-
theoretic framework, we now turn to Walley’s imprecise probability models.

3. Walley’s behavioural approach to probability

In his book on the behavioural theory of imprecise probabilities [33], Walley considers many different types of
related uncertainty models. We shall restrict ourselves here to the most general and most powerful one, which also
turns out to be the easiest to explain, namely coherent sets of really desirable gambles; see also [35].

Consider a non-empty set Ω of possible alternatives ω, only one of which actually obtains (or will obtain); we
assume that it is possible, at least in principle, to determine which alternative does so. Also consider a subject who
is uncertain about which possible alternative actually obtains (or will obtain). A gamble on Ω is a real-valued map
on Ω, and it is interpreted as an uncertain reward, expressed in units of some predetermined linear utility scale: if ω
actually obtains, then the reward is f (ω), which may be positive, negative, or zero. We use the notation G(Ω) for the
set of all gambles on Ω. Walley [33] assumes gambles to be bounded. We make no such boundedness assumption
here.7

6 For a discussion of the use of ‘coherent’ here, we refer to [28, Appendix C].
7 The concept of a really desirable gamble (at least formally) allows for such a generalisation, because the coherence axioms for real desirability
nowhere hinge on such a boundedness assumption, at least not from a technical mathematical point of view.

G. de Cooman, F. Hermans / Artiﬁcial Intelligence 172 (2008) 1400–1427

1407

If a subject accepts a gamble f , this is taken to mean that she is willing to engage in the transaction where, (i)
ﬁrst it is determined which ω obtains, and (ii) then she receives the reward f (ω). We can try and model the subject’s
beliefs about Ω by considering which gambles she accepts.

3.1. Coherent sets of really desirable gambles

Suppose our subject speciﬁes some set R of gambles she accepts, called a set of really desirable gambles. Such a

set is called coherent if it satisﬁes the following rationality requirements:

D1. if f < 0 then f (cid:5)∈ R [avoiding partial loss];
D2. if f (cid:4) 0 then f ∈ R [accepting partial gain];
D3. if f1 and f2 belong to R then their (point-wise) sum f1 + f2 also belongs to R [combination];
D4. if f belongs to R then its (point-wise) scalar product λf also belongs to R for all non-negative real numbers λ

[scaling].

Here ‘f < 0’ means ‘f (cid:3) 0 and not f = 0’. Walley has also argued that, besides D1–D4, sets of really desirable
gambles should satisfy an additional axiom:

D5. R is B-conglomerable for any partition B of Ω: if IB f ∈ R for all B ∈ B, then also f ∈ R [full conglomerabil-

ity].

When the set Ω is ﬁnite, all its partitions are ﬁnite too, and therefore full conglomerability becomes a direct con-
sequence of the ﬁnitary combination axiom D3. But when Ω is inﬁnite, its partitions may be inﬁnite too, and then
full conglomerability is a very strong additional requirement, that is not without controversy. If a model R is B-
conglomerable, this means that certain inconsistency problems when conditioning on elements B of B are avoided;
see [33] for more details and examples. Conglomerability of belief models wasn’t required by forerunners of Walley,
such as Williams [39],8 or de Finetti [11]. While we agree with Walley that conglomerability is a desirable property
for sets of really desirable gambles, we do not believe that full conglomerability is always necessary: it seems that we
only need to require conglomerability with respect to those partitions that we actually intend to condition our model
on.9 This is the path we shall follow in Section 4.

3.2. Conditional lower and upper previsions

Given a coherent set of really desirable gambles, we can deﬁne conditional lower and upper previsions as follows:

for any gamble f and any non-empty subset B of Ω, with indicator IB ,

(cid:4)
(cid:3)
α: IB (α − f ) ∈ R
P (f |B) := inf
,
(cid:4)
(cid:3)
α: IB (f − α) ∈ R
P (f |B) := sup
,

(4)

(5)

so P (f |B) = −P (−f |B), and the lower prevision P (f |B) of f , conditional on B is the supremum price α for which
the subject will buy the gamble f , i.e., accept the gamble f − α, contingent on the occurrence of B. Similarly, the
upper prevision P (f |B) of f , conditional on B is the inﬁmum price α for which the subject will sell the gamble f ,
i.e., accept the gamble α − f , contingent on the occurrence of B.

For any event A, we deﬁne the conditional lower probability P (A|B) := P (IA|B), i.e., the subject’s supremum

rate for betting on the event A, contingent on the occurrence of B, and similarly for P (A|B) := P (IA|B).

We want to stress here that by its deﬁnition [Eq. (5)], P (f |B) is a conditional lower prevision on what Walley
[33, Section 6.1] has called the contingent interpretation: it is a supremum acceptable price for buying the gamble f
contingent on the occurrence of B, meaning that the subject accepts the contingent gambles IB (f − P (f |B) + (cid:6)),

8 Axioms related to (D1)–(D4), but not (D5), were actually suggested by Williams for bounded gambles. But it seems that we need at least some
weaker form of (D5), namely the cut conglomerability (D5
9 The view expressed here seems related to Shafer’s, as sketched near the end of [25, Appendix 1].

) considered further on, to derive our main results: Theorems 3 and 6.

(cid:12)

1408

G. de Cooman, F. Hermans / Artiﬁcial Intelligence 172 (2008) 1400–1427

(cid:6) > 0, which are called off unless B occurs. This should be contrasted with the updating interpretation for the condi-
tional lower prevision P (f |B), which is a subject’s present (before the occurrence of B) supremum acceptable price
for buying f after receiving the information that B has occurred (and nothing else!). Walley’s Updating Principle
[33, Section 6.1.6], which we shall accept, and use further on in Section 4, (essentially) states that conditional lower
previsions should be the same on both interpretations. There is also a third way of looking at a conditional lower
prevision P (f |B), which we shall call the dynamic interpretation, and where P (f |B) stands for the subject’s supre-
mum acceptable buying price for f after she gets to know B has occurred. For precise conditional previsions, this
last interpretation seems to be the one considered in [13,23,24]. It is far from obvious that there should be a relation
between the ﬁrst two and the third interpretations.10 We shall brieﬂy come back to this distinction in the following
sections.

(cid:5)

B∈B IB P (f |B) be the gamble on Ω that in any element ω of B

For any partition B of Ω, we let P (f |B) :=

assumes the value P (f |B), where B is any element of B.

The following properties of conditional lower and upper previsions associated with a coherent set of really desirable
bounded gambles were (essentially) proved by Walley [33], and by Williams [39]. We give the extension to potentially
unbounded gambles:

Proposition 2 (Properties of conditional lower and upper previsions [33]). Consider a coherent set of really desirable
gambles R, let B be any non-empty subset of Ω, and let f , f1 and f2 be gambles on Ω. Then11

1. infω∈B f (ω) (cid:3) P (f |B) (cid:3) P (f |B) (cid:3) supω∈B f (ω) [convexity];
2. P (f1 + f2|B) (cid:4) P (f1|B) + P (f2|B) [super-additivity];
3. P (λf |B) = λP (f |B) for all real λ (cid:4) 0 [non-negative homogeneity];
4. P (f + α|B) = P (f |B) + α for all real α [constant additivity];
5. P (α|B) = α for all real α [normalisation];
6. f1 (cid:3) f2 implies that P (f1|B) (cid:3) P (f2|B) [monotonicity];
7. if B is any partition of Ω that reﬁnes the partition {B, Bc} and R is B-conglomerable, then P (f |B) (cid:4)

P ( P (f |B)|B) [conglomerative property].

The analogy between Propositions 1 and 2 is striking, even if there is an equality in Proposition 1.7, where we have
only an inequality in Proposition 2.7.12 In the next section, we set out to identify the exact correspondence between
the two models. We shall ﬁnd a speciﬁc situation where applying Walley’s theory leads to equalities rather than the
more general inequalities of Proposition 2.7.13

We now show that there can indeed be a strict inequality in Proposition 2.7.

Example 2. Consider an urn with red, green and blue balls, from which a ball will be drawn at random. Our subject
is uncertain about the colour of this ball, so Ω = {r, g, b}. Assume that she assesses that she is willing to bet on this
colour being red at rates up to (and including) 1/4, i.e., that she accepts the gamble I{r} − 1/4. Similarly for the
other two colours, so she also accepts the gambles I{g} − 1/4 and I{b} − 1/4. It is not difﬁcult to prove using the
coherence requirements D1–D4 and Eq. (5) that the smallest coherent set of really desirable gambles R that includes
these assessments satisﬁes f ∈ R ⇔ P (f ) (cid:4) 0, where

P (f ) = 3
4

f (r) + f (g) + f (b)
3

+ 1
4

(cid:3)
min

(cid:4)
f (r), f (g), f (b)

.

10 In [28], the authors seem to confuse the updating interpretation with the dynamic interpretation when they claim that their new understanding
of lower and upper previsions “justiﬁes Peter Walley’s updating principle”.
11 Here, as in Proposition 1, we implicitly assume that whatever we write down is well-deﬁned, meaning that for instance no sums of −∞ and
+∞ appear, and that the function P (f |B) is real-valued, and nowhere inﬁnite. Shafer and Vovk don’t seem to mention the need for this.
12 Concatenation inequalities for lower prices do appear in the more general context described in [28].
13 This seems to happen generally for what is called marginal extension in a situation of immediate prediction, meaning that we start out with, and
extend, an initial model where we condition on increasingly ﬁner partitions, and where the initial conditional model for any partition deals with
gambles that are measurable with respect to the ﬁner partitions; see [33, Theorem 6.7.2] and [20].

G. de Cooman, F. Hermans / Artiﬁcial Intelligence 172 (2008) 1400–1427

1409

For the partition B = {b, {r, g}} (a Daltonist has observed the colour of the ball and tells the subject about it), it follows
from Eq. (5) after some manipulations that

(cid:7)

(cid:6)
f |{b}

P

= f (b)

and P

(cid:6)
f |{r, g}

(cid:7)

= 2
3

f (r) + f (g)
2

+ 1
3

(cid:4)
(cid:3)
f (r), f (g)

.

min

If we consider f = I{g}, then in particular P ({g}|{b}) = 0 and P ({g}|{r, g}) = 1/3, so P ({g}|B) = 1/3I{r,g} and
therefore
(cid:6)

(cid:7)(cid:7)

P

(cid:6)
{g}|B

1/3 + 1/3
3
whereas P ({g}) = 1/4, and therefore P ({g}) > P ( P ({g}|B)).

0 = 1
6

= 3
4

+ 1
4

P

,

The difference P (f |B) − P (f |B) between inﬁmum selling and supremum buying prices for gambles f repre-
sents imprecision present in our subject’s belief model. If we look at the inequalities in Proposition 2.1, we are led
to consider two extreme cases. One extreme maximises the ‘degrees of imprecision’ P (f |B) − P (f |B) by letting
P (f |B) = infω∈B f (ω) and P (f |B) = supω∈B f (ω). This leads to the so-called vacuous model, corresponding to
R = {f : f (cid:4) 0}, and intended to represent complete ignorance on the subject’s part.

The other extreme minimises the degrees of imprecision P (f |B) − P (f |B) by letting P (f |B) = P (f |B) every-
where. The common value P (f |B) is then called the prevision, or fair price, for f conditional on B. We call the
corresponding functional P (·|B) a (conditional) linear prevision. Linear previsions are the precise probability models
considered by de Finetti [11]. They of course have all properties of lower and upper previsions listed in Proposition 2,
with equality rather than inequality for statements 2 and 7. The restriction of a linear prevision to (indicators of) events
is a ﬁnitely additive probability measure.

4. Connecting the two approaches

In order to lay bare the connections between the game-theoretic and the behavioural approach, we enter Shafer and
Vovk’s world, and consider another player, called Forecaster, who, in situation (cid:2), has certain piece-wise beliefs about
what moves Reality will make.

4.1. Forecaster’s local beliefs

More speciﬁcally, for each non-terminal situation t ∈ Ω ♦ \ Ω, she has beliefs (in situation (cid:2)) about which move
w Reality will choose from the set Wt of moves available to him if he gets to t. We suppose she represents those
beliefs in the form of a coherent14 set Rt of really desirable gambles on Wt . These beliefs are conditional on the
updating interpretation, in the sense that they represent Forecaster’s beliefs in situation (cid:2) about what Reality will do
immediately after he gets to situation t. We call any speciﬁcation of such coherent Rt , t ∈ Ω ♦ \ Ω, an immediate
prediction model for Forecaster. We want to stress here that Rt should not be interpreted dynamically, i.e., as a set of
gambles on Wt that Forecaster accepts in situation t.

We shall generally call an event tree, provided with local predictive belief models in each of the non-terminal
situations t, an imprecise probability tree. These local belief models may be coherent sets of really desirable gambles
Rt . But they can also be lower previsions P t (perhaps derived from such sets Rt ). When all such local belief models
are precise previsions, or equivalently (ﬁnitely additive) probability measures, we simply get a probability tree in
Shafer’s [26, Chapter 3] sense.

4.2. From local to global beliefs

We can now ask ourselves what the behavioural implications of these conditional assessments Rt in the imme-
diate prediction model are. For instance, what do they tell us about whether or not Forecaster should accept certain
gambles15 on Ω, the set of possible paths for Reality? In other words, how can these beliefs (in (cid:2)) about which next

14 Since we don’t immediately envisage conditioning this local model on subsets of Wt , we impose no extra conglomerability requirements here,
only the coherence conditions D1–D4.
15 In Shafer and Vovk’s language, gambles are real variables.

1410

G. de Cooman, F. Hermans / Artiﬁcial Intelligence 172 (2008) 1400–1427

Fig. 4. In a non-terminal situation t , we consider a gamble ht on Reality’s move space Wt that Forecaster accepts, and turn it into a process, also
denoted by ht . The values ht (s) in situations s (cid:3) t are indicated by curly arrows.

move Reality will make in each non-terminal situation t be combined coherently into beliefs (in (cid:2)) about Reality’s
complete sequence of moves?

In order to investigate this, we use Walley’s very general and powerful method of natural extension, which is just
conservative coherent reasoning: we construct, using the local pieces of information Rt , a set of really desirable
gambles on Ω for Forecaster in situation (cid:2) that is (i) coherent, and (ii) as small as possible, meaning that no more
gambles should be accepted than is actually required by coherence.

4.2.1. Collecting the pieces

Consider any non-terminal situation t ∈ Ω ♦ \ Ω and any gamble ht in Rt . With ht we can associate a t-gamble,16

also denoted by ht , and deﬁned by
(cid:7)
(cid:6)
ω(t)

ht (ω) := ht

for all ω (cid:4) t, where we denote by ω(t) the unique element of Wt such that tω(t) (cid:3) ω. The t-gamble ht is U -
measurable for any cut U of t that is non-trivial, i.e., such that U (cid:5)= {t}. This implies that we can interpret ht as a map
on U . In fact, we shall even go further, and associate with the gamble ht on Wt a t-process, also denoted by ht , by
letting ht (s) := ht (ω(t)) for any s (cid:4) t, where ω is any terminal situation that follows s; see also Fig. 4.

I↑t ht represents the gamble on Ω that is called off unless Reality ends up in situation t, and which, when it isn’t
called off, depends only on Reality’s move immediately after t, and gives the same value ht (w) to all paths ω that go
through tw. The fact that Forecaster, in situation (cid:2), accepts ht on Wt conditional on Reality’s getting to t, translates
immediately to the fact that Forecaster accepts the contingent gamble I↑t ht on Ω, by Walley’s Updating Principle.
We thus end up with a set

(cid:8)

R :=

{I↑t ht : ht ∈ Rt }

t∈Ω ♦\Ω

of gambles on Ω that Forecaster accepts in situation (cid:2).

The only thing left to do now, is to ﬁnd the smallest coherent set ER of really desirable gambles that includes R
(if indeed there is any such coherent set). Here we take coherence to refer to conditions D1–D4, together with D5(cid:12), a
variation on D5 which refers to conglomerability with respect to those partitions that we actually intend to condition
on, as suggested in Section 3.

4.2.2. Cut conglomerability

These partitions are what we call cut partitions. Consider any cut U of the initial situation (cid:2). The set of events
BU := {↑u: u ∈ U } is a partition of Ω, called the U -partition. D5(cid:12) requires that our set of really desirable gambles
should be cut conglomerable, i.e., conglomerable with respect to every cut partition BU :17

16 Just as for variables, we can deﬁne a t -gamble as a partial gamble whose domain includes ↑t .
17 Again, when all of Reality’s move spaces Wt are ﬁnite, cut conglomerability (D5
) is a consequence of D3, and therefore needs no extra
attention. But when some or all move spaces are inﬁnite, then a cut U may contain an inﬁnite number of elements, and the corresponding cut
partition BU will then be inﬁnite too, making cut conglomerability a non-trivial additional requirement.

(cid:12)

G. de Cooman, F. Hermans / Artiﬁcial Intelligence 172 (2008) 1400–1427

1411

Fig. 5. The t -selection S in this event tree is a process deﬁned in the two non-terminal situations t and s; it selects, in each of these situations, a
really desirable gamble for Forecaster. The values of the corresponding gamble process GS

are indicated by curly arrows.

D5(cid:12). R is BU -conglomerable for any cut-partition BU of Ω: if I↑uf ∈ R for all u in some cut U of (cid:2), then also

f ∈ R [cut conglomerability].

Why do we only require conglomerability for cut partitions? Simply because we are interested in predictive infer-
ence: we eventually will want to ﬁnd out about the gambles on Ω that Forecaster accepts in situation (cid:2), conditional
(contingent) on Reality getting to a situation t. This is related to ﬁnding lower previsions for Forecaster conditional
on the corresponding events ↑t. A collection {↑t: t ∈ T } of such events constitutes a partition of the sample space Ω
if and only if T is a cut of (cid:2).
(cid:5)

Because we require cut conglomerability, it follows in particular that ER will contain the sums of gambles g :=
u∈U I↑uhu for all non-terminal cuts U of (cid:2) and all choices of hu ∈ Ru, u ∈ U . This is because I↑ug = I↑uhu ∈ R
for all u ∈ U . Because moreover ER should be a convex cone [by D3 and D4], any sum of such sums
u∈U I↑uhu
over a ﬁnite number of non-terminal cuts U should also belong to ER. But, since in the case of bounded protocols we
are discussing here, Reality can only make a bounded and ﬁnite number of moves, Ω ♦ \ Ω is a ﬁnite union of such
u∈Ω ♦\Ω I↑uhu should belong to ER for all choices hu ∈ Ru, u ∈ Ω ♦ \ Ω.
non-terminal cuts, and therefore the sums

(cid:5)

(cid:5)

4.2.3. Selections and gamble processes

(cid:9)

GS

(s) =

Consider any non-terminal situation t, and call t-selection any partial process S deﬁned on the non-terminal s (cid:4) t

such that S(s) ∈ Rs . With a t-selection S, we associate a t-process GS , called a gamble process, where

S(u)(s)

(6)

t(cid:3)u(cid:2)s

in all situations s (cid:4) t; see also Fig. 5. Alternatively, GS is given by the recursion relation

GS

(sw) = GS

(s) + S(s)(w), w ∈ Ws

(cid:9)

GS
Ω

=

for all non-terminal s (cid:4) t, with initial value GS (t) = 0. In particular, this leads to the t-gamble GS
terminal situations ω that follow t, by letting

Ω deﬁned on all

I↑uS(u).

(7)

t(cid:3)u,u∈Ω ♦\Ω

Then we have just argued that the gambles GS
Ω should belong to ER for all non-terminal situations t and all t-selections
S. As before for strategy and capital processes, we call a (cid:2)-selection S simply a selection, and a (cid:2)-gamble process
simply a gamble process.

4.2.4. The Marginal Extension Theorem

It is now but a technical step to prove Theorem 3 below. It is a signiﬁcant generalisation, in terms of sets of really
desirable gambles rather than coherent lower previsions,18 of the Marginal Extension Theorem ﬁrst proved by Walley
[33, Theorem 6.7.2], and subsequently extended by De Cooman and Miranda [20]. It essentially tells us that a t-
gamble is (globally) desirable if and only if it dominates some t-gamble obtained by (additively) piecing together
locally desirable gambles in the manner we have described above.

18 The difference in language may obscure that this is indeed a generalisation. But see Theorem 7 for expressions in terms of predictive lower
previsions that should make the connection much clearer.

1412

G. de Cooman, F. Hermans / Artiﬁcial Intelligence 172 (2008) 1400–1427

Theorem 3 (Marginal Extension Theorem). There is a smallest set of gambles that satisﬁes D1–D4 and D5(cid:12) and
includes R. This natural extension of R is given by

ER :=

(cid:3)
g: g (cid:4) GS

Ω for some selection S

(cid:4)
.

Moreover, for any non-terminal situation t and any t-gamble g, it holds that I↑t g ∈ ER if and only if there is some
t-selection St such that g (cid:4) GSt
Ω (ω) for all terminal
situations ω that follow t.

Ω is taken to mean that g(ω) (cid:4) GSt

Ω , where as before, g (cid:4) GSt

4.3. Predictive lower and upper previsions

(8)

We now use the coherent set of really desirable gambles ER to deﬁne special lower previsions P (·|t) := P (·|↑t) for
Forecaster in situation (cid:2), conditional on an event ↑t , i.e., on Reality getting to situation t, as explained in Section 3.19
We shall call such conditional lower previsions predictive lower previsions. We then get, using Eq. (5) and Theorem 3,
that for any non-terminal situation t,

P (f |t) := sup
= sup

(cid:3)
α: I↑t (f − α) ∈ ER
(cid:3)
α: f − α (cid:4) GS

(cid:4)

(cid:4)
.

(9)
We also use the notation P (f ) := P (f |(cid:2)) = sup {α: f − α ∈ ER}. It should be stressed that Eq. (8) is also valid in
terminal situations t, whereas Eq. (9) clearly isn’t.

Ω for some t-selection S

Besides the properties in Proposition 2, which hold in general for conditional lower and upper previsions, the
predictive lower (and upper) previsions we consider here also satisfy a number of additional properties, listed in
Propositions 4 and 5.

Proposition 4 (Additional properties of predictive lower and upper previsions). Let t be any situation, and let f , f1
and f2 be gambles on Ω.

1. If t is a terminal situation ω, then P (f |ω) = P (f |ω) = f (ω);
2. P (f |t) = P (f I↑t |t) and P (f |t) = P (f I↑t |t);
3. f1 (cid:3) f2 (on ↑t) implies that P (f1|t) (cid:3) P (f2|t) [monotonicity].

Before we go on, there is an important point that must be stressed and clariﬁed. It is an immediate consequence of
Proposition 4.2 that when f and g are any two gambles that coincide on ↑t, then P (f |t) = P (g|t). This means that
P (f |t) is completely determined by the values that f assumes on ↑t , and it allows us to deﬁne P (·|t) on gambles that
are only necessarily deﬁned on ↑t, i.e., on t-gambles. We shall do so freely in what follows.

For any cut U of a situation t, we may deﬁne the t-gamble P (f |U ) as the gamble that assumes the value P (f |u)
in any ω (cid:4) u, where u ∈ U . This t-gamble is U -measurable by construction, and it can be considered as a gamble
on U .

Proposition 5 (Separate coherence). Let t be any situation, let U be any cut of t, and let f and g be t-gambles, where
g is U -measurable.

1. P (↑t|t) = 1;
2. P (g|U ) = gU ;
3. P (f + g|U ) = gU + P (f |U );
4. if g is moreover non-negative, then P (gf |U ) = gU P (f |U ).

4.4. Correspondence between immediate prediction models and coherent probability protocols

There appears to be a close correspondence between the expressions [such as (3)] for lower prices E

t (f ) associated
with coherent probability protocols and those [such as (9)] for the predictive lower previsions P (f |t) based on an

19 We stress again that these are conditional lower previsions on the contingent/updating interpretation.

G. de Cooman, F. Hermans / Artiﬁcial Intelligence 172 (2008) 1400–1427

1413

immediate prediction model. Say that a given coherent probability protocol and given immediate prediction model
match whenever they lead to identical corresponding lower prices E
t and predictive lower previsions P (·|t) for all
non-terminal t ∈ Ω ♦ \ Ω.

The following theorem marks the culmination of our search for the correspondence between Walley’s, and Shafer

and Vovk’s approaches to probability theory.

Theorem 6 (Matching Theorem). For every coherent probability protocol there is an immediate prediction model such
that the two match, and conversely, for every immediate prediction model there is a coherent probability protocol such
that the two match.

The ideas underlying the proof of this theorem should be clear. If we have a coherent probability protocol with move
spaces St and gain functions λt for Sceptic, deﬁne the immediate prediction model for Forecaster to be (essentially)
Rt := {−λ(s, ·): s ∈ St }. If, conversely, we have an immediate prediction model for Forecaster consisting of the sets
Rt , deﬁne the move spaces for Sceptic by St := Rt , and his gain functions by λt (h, ·) := −h for all h in Rt . We
discuss the interpretation of this correspondence in more detail in Section 5.

4.5. Calculating predictive lower prevision using backwards recursion

The Marginal Extension Theorem allows us to calculate the most conservative global belief model ER that corre-
sponds to the local immediate prediction models Rt . Here beliefs are expressed in terms of sets of really desirable
gambles. Can we derive a result that allows us to do something similar for the corresponding lower previsions?

To see what this question entails, ﬁrst consider a local model Rs : a set of really desirable gambles on Ws , where
s ∈ Ω ♦ \ Ω. Using Eq. (5), we can associate with Rs a lower prevision P s on G(Ws). Each gamble gs on Ws can be
seen as an uncertain reward, whose outcome gs(w) depends on the (unknown) move w ∈ Ws that Reality will make
if it gets to situation s. And Forecaster’s local (predictive) lower prevision

P s(gs) := sup {α: gs − α ∈ Rs}

(10)

for gs is her supremum acceptable price (in (cid:2)) for buying gs when Reality gets to s.

But as we have seen in Section 4.3, we can also, in each situation t, derive global predictive lower previsions P (·|t)
for Forecaster from the global model ER, using Eq. (8). For each t-gamble f , P (f |t) is Forecaster inferred supremum
acceptable price (in (cid:2)) for buying f , contingent on Reality getting to t.

Is there a way to construct the global predictive lower previsions P (·|t) directly from the local predictive lower

previsions P s ? We can infer that there is from the following theorem, together with Propositions 8 and 9 below.

Theorem 7 (Concatenation Formula). Consider any two cuts U and V of a situation t such that U precedes V . For
all t-gambles f on Ω,20

1. P (f |t) = P ( P (f |U )|t);
2. P (f |U ) = P ( P (f |V )|U ).

To make clear what the following Proposition 8 implies, consider any t-selection S, and deﬁne the U -called off
t-selection SU as the selection that mimics S until we get to U , where we begin to select the zero gambles: for any
non-terminal situation s (cid:4) t, let SU (s) := S(s) if s strictly precedes (some element of) U , and let SU (s) := 0 ∈ Rs
otherwise. If we stop the gamble process GS at the cut U , we readily infer from Eq. (6) that for the U -stopped process
U (GS )

U (GS

) = GSU

and therefore, also using Eq. (1), GS
U

= GSU
Ω .

(11)

20 Here too, it is implicitly assumed that all expressions are well-deﬁned, e.g., that in the second statement, P (f |v) is a real number for all v ∈ V ,
making sure that P (f |V ) is indeed a gamble.

1414

G. de Cooman, F. Hermans / Artiﬁcial Intelligence 172 (2008) 1400–1427

Fig. 6. The event tree for the uncertain process involving n successive coin ﬂips described in Example 3.

We see that stopped gamble processes are gamble processes themselves, that correspond to selections being ‘called
off’ as soon as Reality reaches a cut. This also means that we can actually restrict ourselves to selections S that are
U -called off in Proposition 8.

Proposition 8. Let t be a non-terminal situation, and let U be a cut of t. Then for any U -measurable t-gamble f ,
I↑t f ∈ ER if and only is there is some t-selection S such that I↑t f (cid:4) GSU
U . Consequently,

Ω , or equivalently, fU (cid:4) GS
(cid:3)
α: fU − α (cid:4) GS

U for some t-selection S

(cid:4)
.

P (f |t) = sup

(cid:3)
α: f − α (cid:4) GSU

Ω for some t-selection S

= sup

(cid:4)

If a t-gamble h is measurable with respect to the children cut C(t) of a non-terminal situation t, then we can
interpret it as gamble on Wt . For such gambles, the following immediate corollary of Proposition 8 tells us that the
predictive lower previsions P (h|t) are completely determined by the local model Rt .

Proposition 9. Let t be a non-terminal situation, and consider a C(t)-measurable gamble h. Then P (h|t) = P t (h).

These results tells us that all predictive lower (and upper) previsions can be calculated using backwards recursion,
by starting with the trivial predictive previsions P (f |Ω) = P (f |Ω) = f for the terminal cut Ω, and using only the
local models P t . This is illustrated in the following simple example. We shall come back to this idea in Section 8.

Example 3. Suppose we have n > 0 coins. We begin by ﬂipping the ﬁrst coin: if we get tails, we stop, and otherwise
we ﬂip the second coin. Again, we stop if we get tails, and otherwise we ﬂip the third coin, . . . In other words, we
continue ﬂipping new coins until we get one tails, or until all n coins have been ﬂipped. This leads to the event tree
depicted in Fig. 6. Its sample space is Ω = {t1, t2, . . . , tn, hn}. We will also consider the cuts U1 = {t1, h1} of (cid:2),
U2 = {t2, h2} of h1, U3 = {t3, h3} of h2, . . . , and Un = {tn, hn} of hn−1. It will be convenient to also introduce the
notation h0 for the initial situation (cid:2).

For each of the non-terminal situations hk, k = 0, 1, . . . , n − 1, Forecaster has beliefs (in (cid:2)) about what move
Reality will make in that situation, i.e., about the outcome of the k + 1th coin ﬂip. These beliefs are expressed in terms
of a set of really desirable gambles Rhk on Reality’s move space Whk in hk. Each such move space Whk can clearly
be identiﬁed with the children cut Uk+1 of hk.

For the purpose of this example, it will be enough to consider the local predictive lower previsions P hk

on G(Uk+1),
associated with Rhk through Eq. (10). Forecaster assumes all coins to be approximately fair, in the sense that she
assesses that the probability of heads for each ﬂip lies between 1
2 . This assessment
2
leads to the following local predictive lower previsions:21
1
2

(cid:4)
(cid:3)
,
g(hk+1), g(tk+1)

(cid:10)
(g) = (1 − 2δ)

g(hk+1) + 1
2

+ δ, for some 0 < δ < 1

− δ and 1
2

+ 2δ min

g(tk+1)

P hk

(12)

(cid:11)

where g is any gamble on Uk+1.

21 These so-called linear-vacuous mixtures, or contamination models, are the natural extensions of the probability assessments P hk
1
2

+ δ; see [33, Chapters 3–4] for more details.

− δ and P hk ({hk+1}) = 1
2

({hk+1}) =

G. de Cooman, F. Hermans / Artiﬁcial Intelligence 172 (2008) 1400–1427

1415

Let us see how we can for instance calculate, from the local predictive models P hk , the predictive lower probabil-
ities P ({hn}|s) for a gamble f on Ω and any situation s in the tree. First of all, for the terminal situations it is clear
from Proposition 4.1 that
(cid:6)
{hn}|tk

(13)
We now turn to the calculation of P ({hn}|hn−1). It follows at once from Proposition 9 that P ({hn}|hn−1) =
P hn−1

(cid:6)
{hn}|hn

and P

= 1.

= 0

P

(cid:7)

(cid:7)

({hn}), and therefore, substituting g = I{hn} in Eq. (12) for k = n − 1,
(cid:6)
{hn}|hn−1

− δ.

(cid:7)

P

(14)

= 1
2

To calculate P ({hn}|hn−2), consider that, since hn−1 (cid:3) Un−1,
(cid:6)
{hn}|Un−1

(cid:6)
{hn}|Un−1

(cid:6)
{hn}|hn−2

(cid:7)
|hn−2

= P

P

P

P

(cid:7)

(cid:6)

(cid:6)

(cid:7)

= P hn−2

(cid:7)(cid:7)

where the ﬁrst equality follows from Theorem 7, and the second from Proposition 9, taking into account that
gn−1 := P ({hn}|Un−1) is a gamble on the children cut Un−1 of hn−2. It follows from Eq. (13) that gn−1(tn−1) =
P ({hn}|tn−1) = 0 and from Eq. (14) that gn−1(hn−1) = P ({hn}|hn−1) = 1
− δ. Substituting g = gn−1 in Eq. (12) for
2
k = n − 2, we then ﬁnd that

(cid:6)
{hn}|hn−2

(cid:7)

P

=

(cid:12)

(cid:13)
2

1
2

− δ

.

,

Repeating this course of reasoning, we ﬁnd that more generally
n−k

(cid:12)

(cid:13)

(cid:6)
{hn}|hk

(cid:7)

P

=

1
2

− δ

k = 0, . . . , n − 1.

(15)

(16)

This illustrates how we can use a backwards recursion procedure to calculate global from local predictive lower
previsions.22

5. Interpretation of the Matching Theorem

In Shafer and Vovk’s approach, there sometimes also appears, besides Reality and Sceptic, a third player, called
Forecaster. Her role consists in determining what Sceptic’s move space St and gain function λt are, in each non-
terminal situation t. Shafer and Vovk leave largely unspeciﬁed just how Forecaster should do that, which makes their
approach quite general and abstract.

But the Matching Theorem now tells us that we can connect their approach with Walley’s, and therefore inject a
notion of belief modelling into their game-theoretic framework. We can do that by being more speciﬁc about how
Forecaster should determine Sceptic’s move spaces St and gain functions λt : they should be determined by Forecast-
er’s beliefs (in (cid:2)) about what Reality will do immediately after getting to non-terminal situations t.23 Let us explain
this more carefully.

Suppose that Forecaster has certain beliefs, in situation (cid:2), about what move Reality will make next in each non-
terminal situation t, and suppose she models those beliefs by specifying a coherent set Rt of really desirable gambles
on Wt . This brings us to the situation described in the previous section.

When Forecaster speciﬁes such a set, she is making certain behavioural commitments: she is committing herself
to accepting, in situation (cid:2), any gamble in Rt , contingent on Reality getting to situation t, and to accepting any
combination of such gambles according to the combination axioms D3, D4 and D5(cid:12). This implies that we can derive
predictive lower previsions P (·|t), with the following interpretation: in situation (cid:2), P (f |t) is the supremum price

22 It also indicates why we need to work in the more general language of lower previsions and gambles, rather than the perhaps more familiar one
of lower probabilities and events: even if we only want to calculate a global predictive lower probability, already after one recursion step we need
to start working with lower previsions of gambles. More discussion on the prevision/gamble versus probability/event issue can be found in [33,
Chapter 4].
23 The germ for this idea, in the case that Forecaster’s beliefs can be expressed using precise probability models on the G(Wt ), is already present
in Shafer’s work, see for instance [29, Chapter 8] and [25, Appendix 1]. We extend this idea here to Walley’s imprecise probability models.

1416

G. de Cooman, F. Hermans / Artiﬁcial Intelligence 172 (2008) 1400–1427

Forecaster can be made to buy the t-gamble f for, conditional on Reality’s getting to t, and on the basis of the
commitments she has made in the initial situation (cid:2).

What Sceptic can now do, is take Forecaster up on her commitments. This means that in situation (cid:2), he can use
a selection S, which for each non-terminal situation t, selects a gamble (or equivalently, any non-negative linear
combination of gambles) S(t) = ht in Rt and offer the corresponding gamble GS
Ω on Ω to Forecaster, who is bound
to accept it. If Reality’s next move in situation t is w ∈ Wt , this changes Sceptic’s capital by (the positive, negative,
or zero amount) −ht (w). In other words, his move space St can then be identiﬁed with the convex set of gambles Rt
and his gain function λt is then given by λt (ht , ·) = −ht . But then the selection S can be identiﬁed with a strategy
P for Sceptic, and KP
Ω (this is the essence of the proof of Theorem 6), which tells us that we are led to
Ω
a coherent probability protocol, and that the corresponding lower prices E
t for Sceptic coincide with Forecaster’s
predictive lower previsions P (·|t).

= −GS

In a very nice paper [28], Shafer, Gillett and Scherl discuss ways of introducing and interpreting lower previsions
in a game-theoretic framework, not in terms of prices that a subject is willing to pay for a gamble, but in terms of
whether a subject believes she can make a lot of money (utility) at those prices. They consider such conditional lower
previsions both on a contingent and on a dynamic interpretation, and argue that there is equality between them in
certain cases. Here, we have decided to stick to the more usual interpretation of lower and upper previsions, and
concentrated on the contingent/updating interpretation. We see that on our approach, the game-theoretic framework is
useful too.

This is of particular relevance to the laws of large numbers that Shafer and Vovk derive in their game-theoretic
framework, because such laws can now be given a behavioural interpretation in terms of Forecaster’s predictive lower
and upper previsions. To give an example, we now turn to deriving a very general weak law of large numbers.

6. A more general weak law of large numbers

Consider a non-terminal situation t and a cut U of t. Deﬁne the t-variable nU such that nU (ω) is the distance
d(t, u), measured in moves along the tree, from t to the unique situation u in U that ω goes through. nU is clearly
U -measurable, and nU (u) is simply the distance d(t, u) from t to u. We assume that nU (u) > 0 for all u ∈ U , or in
other words that U (cid:5)= {t}. Of course, in the bounded protocols we are considering here, nU is bounded, and we denote
its minimum by NU .

Now consider for each s between t and U a bounded gamble hs and a real number ms such that hs − ms ∈ Rs ,
meaning that Forecaster in situation (cid:2) accepts to buy hs for ms , contingent on Reality getting to situation s. Let
B > 0 be any common upper bound for sup hs − inf hs , for all t (cid:3) s (cid:2) U . It follows from the coherence of Rs [D1]
that ms (cid:3) sup hs . To make things interesting, we shall also assume that inf hs (cid:3) ms , because otherwise hs − ms (cid:4) 0
and accepting this gamble represents no real commitment on Forecaster’s part. As a result, we see that |hs − ms| (cid:3)
sup hs − inf hs (cid:3) B.

We are interested in the following t-gamble GU , given by

GU = 1
nU

(cid:9)

t(cid:3)s(cid:2)U

I↑s[hs − ms],

which provides a measure for how much, on average, the gambles hs yield an outcome above Forecaster’s accepted
buying prices ms , along segments of the tree starting in t and ending right before U . In other words, GU measures
the average gain for Forecaster along segments from t to U , associated with commitments she has made and is taken
up on, because Reality has to move along these segments. This gamble GU is U -measurable too. We may therefore
interpret GU as a gamble on U . Also, for any hs and any u ∈ U , we know that because s (cid:2) u, hs has the same value
hs(u) := hs(ω(s)) in all ω that go through u. This allows us to write

GU (u) = 1

nU (u)

(cid:9)

(cid:14)
hs(u) − ms

(cid:15)
.

t(cid:3)s(cid:2)u

We would like to study Forecaster’s beliefs (in the initial situation (cid:2) and contingent on Reality getting to t) in the
occurrence of the event
(cid:3)
ω ∈ ↑t: GU (ω) (cid:4) −(cid:6)

{GU (cid:4) −(cid:6)} :=

(cid:4)
,

G. de Cooman, F. Hermans / Artiﬁcial Intelligence 172 (2008) 1400–1427

1417

where (cid:6) > 0. In other words, we want to know P ({GU (cid:4) −(cid:6)}|t), which is Forecaster’s supremum rate for betting on
the event that his average gain from t to U will be at least −(cid:6), contingent on Reality’s getting to t.

Theorem 10 (Weak Law of Large Numbers). For all (cid:6) > 0,

(cid:6)
{GU (cid:4) −(cid:6)}|t

(cid:7)

P

(cid:4) 1 − exp

(cid:12)

(cid:13)

.

− NU (cid:6)2
4B2

We see that as NU increases this lower bound increases to one, so the theorem can be very loosely formulated
as follows: As the horizon recedes, Forecaster, if she is coherent, should believe increasingly more strongly that her
average gain along any path from the present to the horizon won’t be negative.

This is a very general version of the weak law of large numbers. It can be seen as a generalisation of Hoeff-
ding’s inequality for martingale differences [14] (see also [37, Chapter 4] and [30, Appendix A.7]) to coherent lower
previsions on event trees.

7. Scoring a predictive model

We now look at an interesting consequence of Theorem 10: we shall see that it can be used to score a predictive
model in a manner that satisﬁes Dawid’s Prequential Principle [5,6]. We consider the special case of Theorem 10
where t = (cid:2).

Suppose Reality follows a path up to some situation uo in U , which leads to an average gain GU (uo) for Forecaster.
Suppose this average gain is negative: GU (uo) < 0. We see that ↑uo ⊆ {GU < −(cid:6)} for all 0 < (cid:6) < −GU (uo), and
therefore all these events {GU < −(cid:6)} have actually occurred (because ↑uo has). On the other hand, Forecaster’s
upper probability (in (cid:2)) for their occurrence satisﬁes P ({GU < −(cid:6)}) (cid:3) exp(− NU (cid:6)2
4B2 ), by Theorem 10. Coherence
then tells us that Forecaster’s upper probability (in (cid:2)) for the event ↑uo, which has actually occurred, is then at most
SNU (γU (uo)), where
(cid:12)

(cid:13)

SN (x) = exp

− N
4

x2

and γU (u) := GU (uo)

.

B

Observe that γU (uo) is a number in [−1, 0), by assumption. Coherence requires that Forecaster, because of her local
predictive commitments, can be forced (by Sceptic, if he chooses his strategy well) to bet against the occurrence of
the event ↑uo at a rate that is at least 1 − SNU (γU (uo)). So we see that Forecaster is losing utility because of her local
predictive commitments. Just how much depends on how close γU (uo) lies to −1 , and on how large NU is; see Fig. 7.
The upper bound SNU (γU (uo)) we have constructed for the upper probability of ↑uo has a very interesting property,
which we now try to make more explicit. Indeed, if we were to calculate Forecaster’s upper probability P (↑uo) for
↑uo directly using Eq. (9), this value would generally depend on Forecaster’s predictive assessments Rs for situations
s that don’t precede uo, and that Reality therefore never got to. We shall see that such is not the case for the upper
bound SNU (γU (uo)) constructed using Theorem 10.

Fig. 7. What Forecaster can be made to pay, 1 − SN (x), as a function of x = γU (u), for different values of N = NU .

1418

G. de Cooman, F. Hermans / Artiﬁcial Intelligence 172 (2008) 1400–1427

Consider any situation s before U but not on the path through uo, meaning that Reality never got to this situation s.
Therefore the corresponding gamble hs − ms in the expression for GU isn’t used in calculating the value of GU (uo),
so we can change it to anything else, and still obtain the same value of GU (uo).

Indeed, consider any other predictive model, where the only thing we ask is that the R(cid:12)

U for this alternative predictive model, where the only restriction is that we let h(cid:12)

s coincide with the Rs for
s can be chosen arbitrarily, but still coherently. Now construct a new average
= ms
U (uo) = GU (uo), so the new upper probability that the

= hs and m(cid:12)
s

all s that precede uo. For other s, the R(cid:12)
gain gamble G(cid:12)
if s precedes uo. We know from the reasoning above that G(cid:12)
event ↑uo will be observed is at most

s

(cid:12)

(cid:13)

(cid:12)

(cid:13)

SNU

G(cid:12)

U (uo)
B

= SNU

GU (uo)
B

= SNU

(cid:6)
(cid:7)
γU (uo)

.

In other words, the upper bound SN (γU (u)) we found for Forecaster’s upper probability of Reality getting to a situation
uo depends only on Forecaster’s local predictive assessments Rs for situations s that Reality has actually got to, and
not on her assessments for other situations. This means that this method for scoring a predictive model satisﬁes
Dawid’s Prequential Principle; see for instance [5,6].

8. Concatenation and backwards recursion

As we have discovered in Section 4.5, Theorem 7 and Proposition 9 enable us to calculate the global predic-
tive lower previsions P (·|t) in imprecise probability trees from local predictive lower previsions P s , s (cid:4) t, using a
backwards recursion method. That this is possible in probability trees, where the probability models are precise (pre-
visions), is well-known,24 and was arguably discovered by Christiaan Huygens in the middle of the 17th century.25
It allows for an exponential, dynamic programming-like reduction in the complexity of calculating previsions (or ex-
pectations); it seems to be essentially this phenomenon that leads to the computational efﬁciency of such machine
learning tools as, for instance, Needleman and Wunsch’s [21] sequence alignment algorithm.

In this section, we want to give an illustration of such exponential reduction in complexity, by looking at a problem
involving Markov chains. Assume that the state X(n) of a system at consecutive times n = 1, 2, . . . , N can assume
any value in a ﬁnite set X . Forecaster has some beliefs about the state X(1) at time 1, leading to a coherent lower
prevision P 1 on G(X ). She also assesses that when the system jumps from state X(n) = xn to a new state X(n + 1),
where the system goes to will only depend on the state X(n) the system was in at time n, and not on the states X(k) of
the system at previous times k = 1, 2, . . . , n − 1. Her beliefs about where the system in X(n) = xn will go to at time
n + 1 are represented by a lower prevision P xn on G(X ).

The time evolution of this system can be modelled as Reality traversing an event tree. An example of such a tree for
X = {a, b} and N = 3 is given in Fig. 8. The situations of the tree have the form (x1, . . . , xk) ∈ X k, k = 0, 1, . . . , N ;
for k = 0 this gives some abuse of notation as we let X 0 := {(cid:2)}. In each cut Xk := X k of (cid:2), the value X(k) of the
state at time k is revealed.

This leads to an imprecise probability tree with local predictive models P (cid:3) := P 1 and

P (x1,...,xk)

= P xk

(17)

expressing the usual Markov conditional independence condition, but here in terms of lower previsions. For notational
convenience, we now introduce a (generally non-linear) lower transition operator T on the linear space G(X ) as
follows:

T: G(X ) → G(X ): x (cid:15)→ P x(f ),

24 See Chapter 3 of Shafer’s book [26] on causal reasoning in probability trees. This chapter contains a number of propositions about calculating
probabilities and expectations in probability trees that ﬁnd their generalisations in Sections 4.3 and 4.5. For instance, Theorem 7 generalises
Proposition 3.11 in [26] to imprecise probability trees.
25 See Appendix A of Shafer’s book [26]. Shafer discusses Huygens’s treatment of a special case of the so-called Problem of Points, where
Huygens draws what is probably the ﬁrst recorded probability tree, and solves the problem by backwards calculation of expectations in the tree.
Huygens’s treatment can be found in Appendix VI of [15].

G. de Cooman, F. Hermans / Artiﬁcial Intelligence 172 (2008) 1400–1427

1419

Fig. 8. The event tree for the time evolution of system that can be in two states, a and b, and can change state at each time instant n = 1, 2, 3. Also
depicted are the respective cuts X 1 and X 2 of (cid:2) where the state at times 1 and 2 are revealed.

or in other words, Tf is a gamble on X whose value Tf (x) in the state x ∈ X is given by P x(f ). The lower transition
operator T completely describes Forecaster’s beliefs about how the system changes its state from one instant to the
next.

We now want to ﬁnd the corresponding model for Forecaster’s beliefs (in (cid:2)) about the state the system will be in
at time n. So let us consider a gamble fn on X N that actually only depends on the value X(n) of X at this time n. We
then want to calculate its lower prevision P (fn) := P (fn|(cid:2)).

Consider a time instant k ∈ {0, 1, . . . , n − 1}, and a situation (x1, . . . , xk) ∈ X k. For the children cut C(x1, . . . ,
xk) := {(x1, . . . , xk, xk+1): xk+1 ∈ X } of (x1, . . . , xk), we see that P (fn|C(x1, . . . , xk)) is a gamble that only depends
on the value of X(k + 1) in X , and whose value in xk+1 is given by P (fn|x1, . . . , xk+1). We then ﬁnd that

P (fn|x1, . . . , xk) = P

P

(cid:6)

(cid:7)
(cid:6)
fn|C(x1, . . . , xk)

(cid:7)

|x1, . . . , xk

= P xk

(cid:6)

(cid:6)
fn|C(x1, . . . , xk)

(cid:7)(cid:7)
,

P

(18)

where the ﬁrst equality follows from Theorem 7, and the second from Proposition 9 and Eq. (17). We ﬁrst apply
Eq. (18) for k = n − 1. By Proposition 5.2, P (fn|C(x1, . . . , xn−1)) = fn, so we are led to P (fn|x1, . . . , xn−1) =
P xn−1

(fn) = Tfn(xn−1), and therefore
= Tfn.

(cid:6)
(cid:7)
fn|C(x1, . . . , xn−2)

P

Substituting this in Eq. (18) for k = n − 2, yields P (fn|x1, . . . , xn−2) = P xn−2

(cid:6)
(cid:7)
fn|C(x1, . . . , xn−3)

P

= T2fn.

(Tfn), and therefore

Proceeding in this fashion until we get to k = 1, we get P (fn|C((cid:2))) = Tn−1fn, and going one step further to k = 0,
Eq. (18) yields P (fn|(cid:2)) = P (cid:3)( P (fn|C((cid:2)))) and therefore
(cid:7)
.

(19)

(cid:6)

Tn−1fn

P (fn) = P 1

We see that the complexity of calculating P (fn) in this way is essentially linear in the number of time steps n.
In the literature on imprecise probability models for Markov chains [2,17,31,32], another so-called credal set, or
set of probabilities, approach is generally used to calculate P (fn). The point we want to make here is that such an
approach typically has a worse (exponential) complexity in the number of time steps. To see this, recall [33] that a
lower prevision P on G(X ) that is derived from a coherent set of really desirable gambles, corresponds to a convex
closed set M( P ) of probability mass functions p on X , called a credal set, and given by

(cid:3)
p:

(cid:4)
(cid:7)
(cid:6)
∀g ∈ G(X )
P (g) (cid:3) Ep(g)
(cid:5)

M( P ) :=
where we let Ep(g) :=
x∈X p(x)g(x) be the expectation of the gamble g associated with the mass function p; Ep
is a linear prevision in the language of Section 3.2. It then also holds that for all gambles g on X ,
(cid:4)
(cid:3)
Ep(g): p ∈ ext M( P )
where ext M( P ) is the set of extreme points of the convex closed set M( P ). Typically on this approach, ext(M( P ))
is assumed to be ﬁnite, and then M( P ) is called a ﬁnitely generated credal set. See for instance [3,4] for a discussion
of credal sets with applications to Bayesian networks.

(cid:4)
(cid:3)
Ep(g): p ∈ M( P )

P (g) = min

= min

1420

G. de Cooman, F. Hermans / Artiﬁcial Intelligence 172 (2008) 1400–1427

Then P (fn) can also be calculated as follows:26 Choose for each non-terminal situation t = (x1, . . . , xk) ∈ X k,
k = 0, 1, . . . , n − 1, a mass function pt in the set M( P t ) given by Eq. (17), or equivalently, in its set of extreme
points ext M( P t ). This leads to a (precise) probability tree for which we can calculate the corresponding expectation
of fn. Then P (fn) is the minimum of all such expectations, calculated for all possible assignments of mass functions
to the nodes. We see that, roughly speaking, when all M( P t ) have a typical number of extreme points M, then the
complexity of calculating P (fn) will be essentially M n, i.e., exponential in the number of time steps.

This shows that the ‘lower prevision’ approach can for some problems lead to more efﬁcient algorithms than the
‘credal set’ approach. This may be especially relevant for probabilistic inferences involving graphical models, such as
credal networks [3,4]. Another nice example of this phenomenon, concerned with checking coherence for precise and
imprecise probability models, is due to Walley et al. [36].

9. Additional remarks

We have proved the correspondence between the two approaches only for event trees with a bounded horizon.
For games with inﬁnite horizon, the correspondence becomes less immediate, because Shafer and Vovk implicitly
make use of coherence axioms that are stronger than D1–D4 and D5(cid:12), leading to lower prices that dominate the
corresponding predictive lower previsions. Exact matching would be restored of course, provided we could argue that
these additional requirements are rational for any subject to comply with. This could be an interesting topic for further
research.

We haven’t paid much attention to the special case that the coherent lower previsions and their conjugate upper
previsions coincide, and are therefore (precise) previsions or fair prices in de Finetti’s [11] sense. When all the local
predictive models P t (see Proposition 9) happen to be precise, meaning that P t (f ) = P t (f ) = −P t (−f ) for all
gambles f on Wt , then the immediate prediction model we have described in Section 4 becomes very closely related,
and arguably identical to, the probability trees introduced and studied by Shafer in [26]. Indeed, we then get predictive
previsions P (·|s) that can be obtained through concatenation of the local models Pt , as guaranteed by Theorem 7.27
Moreover, as indicated in Section 8, it is possible to prove lower envelope theorems to the effect that (i) the
local lower previsions P t correspond to lower envelopes of sets Mt of local previsions Pt ; (ii) each possible choice
of previsions Pt in Mt over all non-terminal situations t, leads to a compatible probability tree in Shafer’s [26]
sense, with corresponding predictive previsions P (·|s); and (iii) the predictive lower previsions P (·|s) are the lower
envelopes of the predictive previsions P (·|s) for the compatible probability trees. Of course, the law of large numbers
of Section 6 remains valid for probability trees.

Finally, we want to recall that Theorem 7 and Proposition 9 allow for a calculation of the predictive models P (·|s)
using only the local models and backwards recursion, in a manner that is strongly reminiscent of dynamic program-
ming techniques. This should allow for a much more efﬁcient computation of such predictive models than, say, an
approach that exploits lower envelope theorems and sets of probabilities/previsions. We think that there may be lessons
to be learnt from this for dealing with other types of graphical models, such as credal networks [3,4], as well.

What makes this more efﬁcient approach possible is, ultimately, the Marginal Extension Theorem (Theorem 3),
which leads to the Concatenation Formula (Theorem 7), i.e., to the speciﬁc equality, rather than the general inequal-
ities, in Proposition 2.7. Generally speaking (see for instance [33, Section 6.7] and [20]), such marginal extension
results can be proved because the models that Forecaster speciﬁes are local, or immediate prediction models: they
relate to her beliefs, in each non-terminal situation t, about what move Reality is going to make immediately after
getting to t.

Acknowledgements

This paper presents research results of BOF-project 01107505. We would like to thank Enrique Miranda, Marco
Zaffalon, Glenn Shafer, Vladimir Vovk and Didier Dubois for discussing and questioning some of the views ex-
pressed here, even though many of these discussions took place more than a few years ago. Sébastien Destercke and

26 An explicit proof of this statement would take us to far, but it is an immediate application of Theorems 3 and 4 in [20].
27 This should for instance be compared with Proposition 3.11 in [26].

G. de Cooman, F. Hermans / Artiﬁcial Intelligence 172 (2008) 1400–1427

1421

Erik Quaeghebeur have read and commented on earlier drafts. We are also grateful for the insightful and generous
comments of three reviewers, which led us to better discuss the signiﬁcance and potential applications of our results,
and helped us improve the readability of this paper.

Appendix A. Proofs of main results

In this appendix, we have gathered proofs for the most important results in the paper.

A.1. Proofs of results in Section 3

We begin with a proof of Proposition 2. Although similar results were proved for bounded gambles by Walley
[33], and by Williams [39] before him, our proof also works for the extension to possibly unbounded gambles we are
considering in this paper.

Proof of Proposition 2. For the ﬁrst statement, we only give a proof for the ﬁrst two inequalities. The proof
for the remaining inequality is similar. For the ﬁrst inequality, we may assume without loss of generality that
inf {ω ∈ B: f (ω)} > −∞ and is therefore a real number, which we denote by β. So we know that IB (f − β) (cid:4) 0
and therefore IB (f − β) ∈ R, by D2. It then follows from Eq. (5) that β (cid:3) P (f |B). To prove the second inequality,
assume ex absurdo that P (f |B) < P (f |B), then it follows from Eqs. (4) and (5) that there are real α and β such that
β < α, IB (f − α) ∈ R and IB (β − f ) ∈ R. By D3, IB (β − α) = IB (f − α) + IB (β − f ) ∈ R, but this contradicts
D1, since IB (β − α) < 0.

We now turn to the second statement. As announced in Footnote 11, we may assume that the sum of the terms
P (f1|B) and P (f2|B) is well-deﬁned. If either of these terms is equal to −∞, the resulting inequality then holds
trivially, so we may assume without loss of generality that both terms are strictly greater than −∞. Consider any
real α < P (f1|B) and β < P (f2|B), then by Eq. (5) we see that both IB (f1 − α) ∈ R and IB (f2 − β) ∈ R. Hence
IB [(f1 + f2) − (α + β)] ∈ R, by D3, and therefore P (f1 + f2|B) (cid:4) α + β, using Eq. (5) again. Taking the supremum
over all real α < P (f1|B) and β < P (f2|B) leads to the desired inequality.

To prove the third statement, ﬁrst consider λ > 0. Since by D4, IB (λf − α) ∈ R if and only if IB (f − α/λ) ∈ R,

we get, using Eq. (5)
P (λf |B) = sup

(cid:4)
(cid:3)
α: IB (λf − α) ∈ R

= sup

(cid:4)
(cid:3)
λβ: IB (f − β) ∈ R

= λP (f |B).

For λ = 0, consider that P (0|B) = sup {α: −IB α ∈ R} = 0, where the last equality follows from D1 and D2.

For the fourth statement, use Eq. (5) to ﬁnd that
(cid:4)
(cid:3)
β: IB (f + α − β) ∈ R

P (f + α|B) = sup

= sup

(cid:4)
(cid:3)
α + γ : IB (f − γ ) ∈ R

= α + P (f |B).

The ﬁfth statement is an immediate consequence of the ﬁrst.

To prove the sixth statement, observe that f1 (cid:3) f2 implies that IB (f2 − f1) (cid:4) 0 and therefore IB (f2 − f1) ∈ R, by
D2. Now consider any real α such that IB (f1 − α) ∈ R, then by D3, IB (f2 − α) = IB (f1 − α) + IB (f2 − f1) ∈ R.
Hence
(cid:4)
(cid:3)
α: IB (f1 − α) ∈ R

(cid:4)
(cid:3)
α: IB (f2 − α) ∈ R

⊆

and by taking suprema and considering Eq. (5), we deduce that indeed P (f1|B) (cid:3) P (f2|B).

For the ﬁnal statement, assume that P (f |C) is a real number for all C ∈ B. Also observe that P (f |D) = P (f ID|D)
for all non-empty D. Deﬁne the gamble g as follows: g(ω) := P (f |C) for all ω ∈ C, where C ∈ B. We have to
prove that P (g|B) (cid:3) P (f |B). We may assume without loss of generality that P (g|B) > −∞ [because otherwise the
inequality holds trivially]. Fix (cid:6) > 0, and consider the gamble IB (f − g + (cid:6)). Also consider any C ∈ B. If C ⊆ B then
ICIB (f − g + (cid:6)) = IC(f − P (f |C) + (cid:6)) ∈ R, using Eq. (5). If C ∩ B = ∅ then again ICIB (f − g + (cid:6)) = 0 ∈ R, by
D2. Since R is B-conglomerable, it follows that IB (f − g + (cid:6)) ∈ R, whence P (f − g|B) (cid:4) −(cid:6), again using Eq. (5).
Hence P (h|B) (cid:4) 0, where h := f − g. Consequently,

P (f |B) = P (h + g|B) (cid:4) P (h|B) + P (g|B) (cid:4) P (g|B),

where we use the second statement, and the fact that P (g|B) > −∞ and P (h|B) (cid:4) 0 implies that the sum on the
right-hand side of the inequality is well-deﬁned as an extended real number. (cid:4)

1422

G. de Cooman, F. Hermans / Artiﬁcial Intelligence 172 (2008) 1400–1427

A.2. Proofs of results in Section 4

Proof of Theorem 3. We have already argued that any coherent set of really desirable gambles that includes R, must
contain all gambles GS [by D3 and D5(cid:12)]. By D2 and D3, it must therefore include the set ER. If we can show that ER
is coherent, i.e., satisﬁes D1–D4 and D5(cid:12), then we have proved that ER is the natural extension of R. This is what we
now set out to do.

We ﬁrst show that D1 is satisﬁed. It clearly sufﬁces to show that for no selection S, it holds that GS

Ω < 0. This

follows at once from Lemma 2 below.

To prove that D2 holds, consider the selection S0 := 0, then GS0 = 0, and if f (cid:4) 0 it follows that f (cid:4) GS0 whence

indeed f ∈ ER.

To prove that D3 and D4 hold, consider any f1 and f2 in ER, and any non-negative real numbers a1 and a2. We
know there are selections S1 and S2 such that f1 (cid:4) GS1 and f2 (cid:4) GS2 . But a1S1 + a2S2 is a selection as well [because
the Rt satisfy D3 and D4], and Ga1S1+a2S2 = a1GS1 + a2GS2 (cid:3) a1f1 + a2f2, whence indeed a1f1 + a2f2 ∈ ER.

To conclude, we show that D5(cid:12) is satisﬁed. Consider any cut U of (cid:2). Consider a gamble f and assume that
I↑uf ∈ ER for all u ∈ U . We must prove that f ∈ ER. Let Ut := U ∩ Ω and Unt := U \ Ω, so U is the disjoint union
of Ut and Unt. For ω ∈ Ut, I↑ωf = I↑ωf (ω) ∈ ER implies that f (ω) (cid:4) 0, by D1. For u ∈ Unt, we invoke Lemma 3 to
ﬁnd that there is some u-selection Su such that I↑uf (cid:4) GSu
Ω . Now construct a selection S as follows. Consider any s
in Ω ♦ \ Ω. If u (cid:3) s for some [unique, because U is a cut] u ∈ Unt, let S(s) := Su(s). Otherwise let S(s) := 0. Then

(cid:9)

GS =

I↑uGSu (cid:3)

(cid:9)

(cid:9)

I↑uf (cid:3)

I↑uf = f,

u∈Unt

u∈Unt

u∈U

so indeed f ∈ ER; the ﬁrst equality can be seen as immediate, or as a consequence of Lemma 1, and the second
inequality holds because we have just shown that f (ω) (cid:4) 0 for all ω ∈ Ut . The rest of the proof now follows from
Lemma 3. (cid:4)

Lemma 1. Let t be any non-terminal situation, and let U be any cut of t. Consider a t-selection S, and let, for any
u ∈ U \ Ω, Su be the u-selection given by Su(s) = S(s) if the non-terminal situation s follows u, and Su(s) := 0
otherwise. Moreover, let SU be the U -called off t-selection for S (as deﬁned after Theorem 7). Then
(u) + GSu
Ω

I↑uGS

(cid:14)
GS

(u) +

GS
Ω

I↑u

(cid:9)

(cid:9)

=

(cid:15)

u∈U ∩Ω

= GS
U

+

(cid:9)

u∈U \Ω

u∈U \Ω
= GSU
Ω

I↑uGSu

Ω

(cid:9)

+

u∈U \Ω

I↑uGSu
Ω .

Proof. It is immediate that the second equality holds; see Eq. (11) for the third. For the ﬁrst equality, it obviously
sufﬁces to consider the values of the left- and right-hand sides in any ω ∈ ↑u for u ∈ U \ Ω. The value of the right-hand
side is then, using Eqs. (6) and (7),

GS

(u) + GSu

Ω (ω) =

(cid:9)

(cid:9)

(cid:9)

S(s)(u) +

S(s)(ω) =

t(cid:3)s(cid:2)u

u(cid:3)s(cid:2)ω

t(cid:3)s(cid:2)ω

S(s)(ω) = GS

Ω (ω).

(cid:4)

Lemma 2. Consider any non-terminal situation t and any t-selection S. Then it doesn’t hold that GS
a corollary, consider any cut U of t, and the gamble GS
GS
U < 0 (on U ).

Ω < 0 (on ↑t). As
U (u) = GS (u). Then it doesn’t hold that

U on U deﬁned by GS

Proof. Deﬁne the set PS := {s ∈ Ω ♦ \ Ω: t (cid:3) s and S(s) (cid:4) 0}, and its (relative) complement NS := {s ∈ Ω ♦ \ Ω:
t (cid:3) s and S(s) (cid:5)(cid:4) 0}. If NS = ∅ then GS
(cid:4) 0, by Eq. (7), so we can assume without loss of generality that NS is
Ω
non-empty. Consider any minimal element t1 of NS , meaning that there is no s in NS such that s (cid:2) t1 [there is such
a minimal element in NS because of the bounded horizon assumption]. So for all t (cid:3) s (cid:2) t1 we have that S(s) (cid:4) 0.
Choose w1 in Wt1 such that S(t1)(w1) > 0 [this is possible because Rt1 satisﬁes D1]. This brings us to the situation
t2 := t1w1. If t2 ∈ NS , then choose w2 in Wt2 such that S(t2)(w2) > 0 [again possible by D1]. If t2 ∈ PS then we

G. de Cooman, F. Hermans / Artiﬁcial Intelligence 172 (2008) 1400–1427

1423

know that S(t2)(w2) (cid:4) 0 for any choice of w2 in Wt2 . We can continue in this way until we reach a terminal situation
ω = t1w1w2 . . . after a ﬁnite number of steps [because of the bounded horizon assumption]. Moreover

GS
Ω (ω) =

(cid:9)

t(cid:2)t1

(cid:7)
(cid:6)
S(t)
ω(t)

+

(cid:9)

It therefore can’t hold that GS

k
Ω < 0 (on ↑t ).

S(tk)(wk) (cid:4) 0 + S(t1)(w1) + 0 > 0.

whence, for all ω ∈ Ω,

GS
Ω (ω) (cid:3) 0, ω (cid:5)(cid:4) t,
(t) + GSt
GS

To prove the second statement, consider the U -called off t-selection SU derived from S by letting SU (s) := S(s)
Ω (ω) for

if s (follows t and) strictly precedes some u in U , and zero otherwise. Then GS (u) =
all ω that go through u, where u ∈ U [see also Eq. (11)]. Now apply the above result for the t-selection SU . (cid:4)

S(s)(u) = GSU

t(cid:3)s(cid:2)u

(cid:5)

Lemma 3. Consider any non-terminal situation t and any gamble f . Then I↑t f ∈ ER if and only if there is some
t-selection St such that I↑t f (cid:4) GSt

Ω (on ↑t).

Proof. It clearly sufﬁces to prove the necessity part. Assume therefore that I↑t f ∈ ER, meaning [deﬁnition of the set
ER] that there is some selection S such that I↑t f (cid:4) GS
Ω . Let St be the t-selection deﬁned by letting St (s) := S(s) if
t (cid:3) s, and zero otherwise. It follows from Lemma 1 [use the cut of (cid:2) made up of t and the terminal situations that do
not follow t] that
I↑t f (cid:4) GS

= I↑t [GS

I↑ω(cid:12)GS

(cid:9)

] +

),

(cid:12)

(t) + GSt
Ω

Ω (ω

Ω

ω(cid:12)(cid:5)∈↑t

(A.1)

Ω (ω) (cid:3) f (ω), ω (cid:4) t.

(A.2)
Then, by (A.2), the proof is complete if we can prove that GS (t) (cid:4) 0. Assume ex absurdo that GS (t) < 0. Consider
the cut of (cid:2) made up of t and the terminal situations that don’t follow t. Applying Lemma 2 for this cut and for the
initial situation (cid:2), we see that there must be some ω ∈ Ω \ ↑t such that GS

Ω (ω) > 0. But this contradicts (A.1). (cid:4)

Proof of Proposition 4. For the ﬁrst statement, consider a terminal situation ω and a gamble f on Ω. Then ↑ω = {ω}
and therefore I↑ω(f − α) = I{ω}(f (ω) − α) ∈ ER if and only if α (cid:3) f (ω), by D1 and D2. Using Eq. (8), we ﬁnd that
indeed P (f |ω) = f (ω). By conjugacy, P (f |ω) = −P (−f |ω) = −(−f (ω)) = f (ω) as well.

For the second statement, use Eq. (8) and observe that I↑t (f − α) = I↑t (f I↑t − α). The last statement is an

immediate consequence of the second and Proposition 2.6. (cid:4)

Proof of Proposition 5. The ﬁrst statement follows from Eq. (8) if we observe that I↑t (I↑t − α) = I↑t (1 − α) ∈ ER
if and only if α (cid:3) 1, by D1 and D2.

For the second statement, consider any u ∈ U , then we must show that P (g|u) = gU (u). But the U -measurability
of g tells us that I↑u(g − α) = I↑u(gU (u) − α), and this gamble belongs to ER if and only if α (cid:3) gU (u), by D1 and
D2. Now use Eq. (8).

The proofs of the third and fourth statements are similar, and based on the observation that I↑u(f + g − α) =

I↑u(f + gU (u) − α) and I↑u(gf − α) = I↑u(gU (u)f − α). (cid:4)

Proof of Theorem 6. First, consider an immediate prediction model Rt , t ∈ Ω ♦ \ Ω. Deﬁne Sceptic’s move spaces
to be St := Rt and his gain functions λt : St × Wt by λt (h, w) := −h(w) for all h ∈ Rt and w ∈ Wt . Clearly P1 and
P2 are satisﬁed, because each Rt is a convex cone by D3 and D4. But so is the coherence requirement C. Indeed, if
it weren’t satisﬁed there would be some non-terminal situation t and some gamble h in Rt such that h(w) < 0 for
all w in Wt , contradicting the coherence requirement D1 for Rt . We are thus led to a coherent probability protocol.
We show there is matching. Consider any non-terminal situation t, and any t-selection S. For all terminal situations
ω (cid:4) t,

GS
Ω (ω) =

(cid:9)

(cid:7)
(cid:6)
S(u)
ω(u)

=

(cid:9)

(cid:7)
(cid:6)
S(u), ω(u)

−λu

= −KS

Ω (ω),

t(cid:3)u(cid:2)ω

t(cid:3)u(cid:2)ω

1424

G. de Cooman, F. Hermans / Artiﬁcial Intelligence 172 (2008) 1400–1427

= P (·|t).

or in other words, selections and strategies are in a one-to-one correspondence (are actually the same things), and the
corresponding gamble and capital processes are each other’s additive inverses. It is therefore immediate from Eqs. (3)
and (9) that E
t

Conversely, consider a coherent probability protocol with move spaces St and gain functions λt : St × Wt for all
:= {−λt (s, ·): s ∈ St }. By a similar argument to the one above, we see that P (cid:12)(·|t) = E
non-terminal t. Deﬁne R(cid:12)
t ,
t
where the P (cid:12)(·|t) are the predictive lower previsions associated with the sets R(cid:12)
t is a convex cone of
gambles by P1 and P2, and by C we know that for all non-terminal situations t and all gambles h in R(cid:12)
t there is some
w in Wt such that h(w) (cid:4) 0. This means that the conditions for Lemma 4 are satisﬁed, and therefore also P (cid:12)(·|t) =
P (·|t), where the P (·|t) are the predictive lower previsions associated with the immediate prediction model Rt that
is the smallest convex cone containing all non-negative gambles and including {−λt (s, ·) + δ: s ∈ St , δ > 0}. (cid:4)

t . But each R(cid:12)

Lemma 4. Consider, for each non-terminal situation t ∈ Ω ♦ \ Ω, a set of gambles R(cid:12)
is a convex cone, and (ii) for all h ∈ R(cid:12)
t
{α(h + δ) + f : h ∈ R(cid:12)
dictive lower previsions obtained using the sets Rt coincide with the ones obtained using the R(cid:12)
t .

t on Wt such that (i) R(cid:12)
t
there is some w in Wt such that h(w) (cid:4) 0. Then each set Rt :=
t , δ > 0, f (cid:4) 0, α (cid:4) 0} is a coherent set of really desirable gambles on Wt . Moreover, all pre-

Proof. Fix a non-terminal situation t. We ﬁrst show that Rt is a coherent set of really desirable gambles, i.e., that
D1–D4 are satisﬁed. Observe that Rt is the smallest convex cone of gambles including the set {h + δ: h ∈ R(cid:12)
t , δ > 0}
and containing all non-negative gambles. So D2–D4 are satisﬁed. To prove that D1 holds, consider any g < 0 and
assume ex absurdo that g ∈ Rt . Then there are h in R(cid:12)
t , δ > 0, f (cid:4) 0 and α (cid:4) 0 such that 0 > g = α(h + δ) + f ,
whence α(h + δ) < 0 and therefore α > 0 and h + δ < 0. But by (ii), there is some w in Wt such that h(w) (cid:4) 0,
whence h(w) + δ > 0. This contradicts h + δ < 0.

We now move to the second part. Consider any gamble f on Ω. Fix t in Ω ♦ \ Ω and (cid:6) > 0. First consider any
t-selection S(cid:12) associated with the R(cid:12)
s for all s (cid:4) t. Since Reality can only make a ﬁnite and
bounded number of moves, whatever happens, it is possible to choose δs > 0 for each non-terminal s (cid:4) t such that
(cid:5)
t(cid:3)s(cid:2)ω δs < (cid:6) for all ω in Ω that follow t. Deﬁne the t-selection S associated with the Rs by S(s) := S(cid:12)(s)+δs ∈ Rs

s , i.e., such that S(cid:12)(s) ∈ R(cid:12)

(cid:12)

for all non-terminal s that follow t. Clearly GS
Ω
(cid:3)
α: f − α (cid:4) GS(cid:12)
Ω
(cid:4)
(cid:3)
α: f − α (cid:4) GS
Ω

(f |t) = sup
S(cid:12)
= sup
S(cid:12)

sup

sup

P

(cid:4)

(cid:3) sup
S(cid:12)

+ (cid:6) (cid:3) P (f |t) + (cid:6).

(cid:3) (cid:6) + GS(cid:12)
Ω , and therefore
(cid:3)
α: f − α + (cid:6) (cid:4) GS
Ω

sup

(cid:4)

Since this inequality holds for all (cid:6) > 0, we ﬁnd that P (cid:12)(f |t) (cid:3) P (f |t).

Conversely, consider any t-selection S associated with the Rs . For all s (cid:4) t, we have that there are hs in R(cid:12)
s ,
s by

δs > 0, fs (cid:4) 0 and αs (cid:4) 0 such that S(s) = αs(hs + δs) + fs . Deﬁne the t-selection S(cid:12) associated with the R(cid:12)
S(cid:12)(s) := αshs = S(s) − αsδs − fs (cid:3) S(s). Clearly then also GS(cid:12)
(cid:3)
α: f − α (cid:4) GS
Ω

(cid:3) GS
Ω , and therefore
(cid:4)
α: f − α (cid:4) GS(cid:12)
(cid:12)
Ω

(cid:3)
sup

(f |t).

(cid:3) P

Ω

(cid:4)

P (f |t) = sup
S

(cid:3) sup
S
This proves that indeed P (cid:12)(f |t) = P (f |t). (cid:4)

sup

Proof of Theorem 7. It isn’t difﬁcult to see that the second statement is a consequence of the ﬁrst, so we only prove
the ﬁrst statement.

Consider any t-gamble f on Ω. Recall that it is implicitly assumed that P (f |U ) is again a t-gamble. Then we have
to prove that P (f |t) = P ( P (f |U )|t). Let, for ease of notation, g := P (f |U ), so the t-gamble g is U -measurable,
and we have to prove that P (f |t) = P (g|t). Now, there are two possibilities.

First, if t is a terminal situation ω, then, on the one hand, P (f |t) = f (ω) by Proposition 4.1. On the other hand,

again by Proposition 4.1,

P (g|t) = g(ω) = P (f |U )(ω).

Now, since U is a cut of t = ω, the unique element u of U that t = ω goes through, is u = ω, and therefore
P (f |U )(ω) = P (f |ω) = f (ω), again by Proposition 4.1. This tells us that in this case indeed P (f |t) = P (g|t).

G. de Cooman, F. Hermans / Artiﬁcial Intelligence 172 (2008) 1400–1427

1425

Secondly, suppose that t is not a terminal situation. Then it follows from Proposition 2.7 and the cut conglom-
erability of ER that P (f |t) (cid:4) P ( P (f |U )|t) = P (g|t) [recall that P (·|t) = P (·|↑t) and that P (·|U ) = P (·|BU )]. It
therefore remains to prove the converse inequality P (f |t) (cid:3) P (g|t). Choose (cid:6) > 0, then using Eq. (9) we see that
there is some t-selection S such that f − P (f |t) + (cid:6) (cid:4) GS
Ω on all paths that go through t. Invoke Lemma 1, using the
notations introduced there, to ﬁnd that

f − P (f |t) + (cid:6) (cid:4) GS
U

+

I↑uGSu

Ω

(on ↑t).

(A.3)

u∈U \Ω

Now consider any u ∈ U . If u is a terminal situation ω, then by Proposition 4.1, g(u) = P (f |ω) = f (ω), and therefore
Eq. (A.3) yields

(cid:9)

g(ω) − P (f |t) + (cid:6) (cid:4) GSU
also taking into account that GS
U
yields

Ω (ω),

= GSU

Ω [see Eq. (11)]. If u is not a terminal situation then for all ω ∈ ↑u, Eq. (A.3)

(A.4)

f (ω) − P (f |t) + (cid:6) (cid:4) GS

U (u) + GSu

Ω (ω),

and since Su is a u-selection, this inequality together with Eq. (9) tells us that P (f |u) (cid:4) P (f |t) − (cid:6) + GS
therefore, for all ω ∈ ↑u,

U (u), and

g(ω) − P (f |t) + (cid:6) (cid:4) GSU

(A.5)
If we combine the inequalities (A.4) and (A.5), and recall Eq. (9), we get that P (g|t) (cid:4) P (f |t) − (cid:6). Since this holds
for all (cid:6) > 0, we may indeed conclude that P (g|t) (cid:4) P (f |t). (cid:4)

Ω (ω).

Proof of Proposition 8. The condition is clearly sufﬁcient, so let us show that it is also necessary. Suppose that
I↑t f ∈ ER, then there is some t-selection S such that f (cid:4) GS
Ω , by Theorem 3 [or Lemma 3]. Deﬁne, for any u ∈ U \Ω,
the selection Su as follows: Su(s) := S(s) if s (cid:4) u and Su(s) := 0 elsewhere. Then, by Lemma 1,

(cid:9)

GS
Ω

= GS
U

+

I↑uGSu
Ω .

u∈U \Ω

Now ﬁx any u in U . If u is a terminal situation ω, then it follows from the equality above that

fU (u) = f (ω) (cid:4) GS

U (u).
If u is not a terminal situation, we get for all ω ∈ ↑u:

fU (u) = f (ω) (cid:4) GS

U (u) + GSu

Ω (ω),

whence, by taking the supremum of all ω ∈ ↑u,

fU (u) (cid:4) GS

U (u) + sup
ω∈↑u

GSu
Ω (ω) (cid:4) GS

U (u),

where the last inequality follows since supω∈↑u
U (u) is equivalent to I↑t f (cid:4) GSU
fU (cid:4) GS

GSu
Ω (ω) (cid:4) 0 by Lemma 2 [with t = u and S = Su]. Now recall that
Ω [see Eq. (11)]. (cid:4)

A.3. Proofs of results in Section 6

Proof of Theorem 10. This proof builds on an intriguing idea, used by Shafer and Vovk in a different situation and
form; see [29, Lemma 3.3].

Because |hs − ms| (cid:3) B for all t (cid:3) s (cid:2) u, it follows that GU (u) (cid:4) −B, and it therefore sufﬁces to prove the
:= {GU < −(cid:6)}.

|t) of the complementary event Δc
t,(cid:6)

inequality for (cid:6) < B. We work with the upper probability P (Δc
t,(cid:6)
It is given by

(cid:3)
α: α − GS
inf
Ω

(cid:4) IΔc

t,(cid:6) for some t-selection S

(cid:4)
.

(A.6)

1426

G. de Cooman, F. Hermans / Artiﬁcial Intelligence 172 (2008) 1400–1427

t,(cid:6) as an event on U . In the expression (A.6), we may
t,(cid:6) for some t-selection S, then it would follow that
(cid:4) IΔc
(cid:3) α < 0, contradicting Lemma 2. Fix therefore α > 0 and δ > 0 and consider the selection S such that S(s) :=

Because GU is U -measurable, we can (and will) consider Δc
assume that α (cid:4) 0. Indeed, if we had α < 0 and α − GS
Ω
GS
Ω
λs(hs − ms) ∈ Rs for all t (cid:3) s (cid:2) U and let S(s) be zero elsewhere. Here
(cid:7)(cid:15)
,

(cid:6)
mv − hv(u)

(cid:6)
mv − hv(s)

(cid:14)
1 + δ

(cid:14)
1 + δ

λs := αδ

= αδ

(A.7)

(cid:16)

(cid:16)

(cid:7)(cid:15)

t(cid:3)v(cid:2)s

t(cid:3)v(cid:2)s

where u is any element of U that follows s. Recall again that −B (cid:3) hs − ms (cid:3) B, so if we choose δ < 1
2B , we are
certainly guaranteed that λs > 0 and therefore indeed λs(hs − ms) ∈ Rs . After some elementary manipulations we get
for any u ∈ U and any ω ∈ ↑u:

GS
Ω (ω) =

(cid:9)

(cid:6)

t(cid:3)s(cid:2)u

hs(u) − ms

(cid:9)

(cid:7)
λs =

(cid:6)
hs(u) − ms

(cid:7)
αδ

(cid:16)

(cid:14)
1 + δ

(cid:6)
mv − hv(u)

(cid:7)(cid:15)

t(cid:3)s(cid:2)u

t(cid:3)v(cid:2)s

where the second equality follows from Eq. (A.7). [The gamble GS
ease of notation, then we get

Ω is U -measurable.] If we let ξs := ms − hs(u) for

GS
Ω (u) = −α

(cid:9)

(cid:16)

δξs

[1 + δξv] = α

(cid:9)

(cid:16)

[1 + δξv] − α

(cid:9)

(cid:16)

[1 + δξv]

t(cid:3)s(cid:2)u

(cid:16)

= α − α

t(cid:3)v(cid:2)s

[1 + δξv] = α − α

t(cid:3)s(cid:2)u
(cid:16)
(cid:14)
1 + δ

t(cid:3)v(cid:2)s
(cid:6)
mv − hv(u)

(cid:7)(cid:15)

t(cid:3)s(cid:2)u

t(cid:3)v(cid:3)s

t(cid:3)v(cid:2)u

t(cid:3)v(cid:2)u

for all u in U . Then it follows from (A.6) that if we can ﬁnd an α (cid:4) 0 such that

(cid:16)

α

(cid:14)
1 + δ

(cid:6)
mv − hv(u)

(cid:7)(cid:15)

(cid:4) 1

t(cid:3)v(cid:2)u

whenever u belongs to Δc
inequality above, we get the equivalent condition

t,(cid:6) , then this α is an upper bound for P (Δc
t,(cid:6)

|t). By taking logarithms on both sides of the

ln α +

(cid:9)

t(cid:3)s(cid:2)u

(cid:14)
1 + δ
ln

(cid:6)
ms − hs(u)

(cid:7)(cid:15)

(cid:4) 0.

(A.8)

Since ln(1 + x) (cid:4) x − x2 for x > − 1

(cid:9)

(cid:6)

(cid:14)
1 + δ

ln

(cid:7)(cid:15)

ms − hs(u)

t(cid:3)s(cid:2)u

2 , and δ(ms − hs(u)) (cid:4) −δB > − 1
(cid:6)
ms − hs(u)

(cid:7)
(cid:6)
ms − hs(u)

(cid:14)
δ

(cid:9)

(cid:9)

−

δ

(cid:4)

(cid:7)(cid:15)
2

2 by our previous restrictions on δ, we ﬁnd

t(cid:3)s(cid:2)u
(cid:9)

(cid:4) δ

(cid:14)
(cid:15)
ms − hs(u)

t(cid:3)s(cid:2)u

− δ2nU (u)B2

t(cid:3)s(cid:2)u
= nU (u)δ

(cid:14)

−GU (u) − B2δ

(cid:15)

.

But for all u ∈ Δc
(cid:9)

t,(cid:6) , −GU (u) > (cid:6), so for all such u
(cid:7)(cid:15)

(cid:6)

ms − hs(u)

> nU (u)δ((cid:6) − B2δ).

(cid:14)
1 + δ

ln

t(cid:3)s(cid:2)u

If we therefore choose α such that for all u ∈ U , ln α + nU (u)δ((cid:6) − B2δ) (cid:4) 0, or equivalently α (cid:4) exp(−nU (u)δ((cid:6) −
B2δ)), then the above condition (A.8) will indeed be satisﬁed for all u ∈ Δc
t,(cid:6) , and then α is an upper bound for
P (Δc
2B2 . Replacing nU by its
t,(cid:6)
minimum NU allows us to get rid of the u-dependence, so we see that P (Δc
4B2 ). We previously
t,(cid:6)
2B , so if we use this value for δ, we ﬁnd that we have indeed proved this inequality for (cid:6) < B. (cid:4)
required that δ < 1

|t). The tightest (smallest) upper bound is always (for all u ∈ U ) achieved for δ = (cid:6)

|t) (cid:3) exp(− NU (cid:6)2

G. de Cooman, F. Hermans / Artiﬁcial Intelligence 172 (2008) 1400–1427

1427

References

[1] G. Boole, The Laws of Thought, Dover Publications, New York, 1847, reprint 1961.
[2] M.A. Campos, G.P. Dimuro, A.C. da Rocha Costa, V. Kreinovich, Computing 2-step predictions for interval-valued ﬁnite stationary Markov

chains, Technical Report UTEP-CS-03-20a, University of Texas at El Paso, 2003.

[3] F.G. Cozman, Credal networks, Artiﬁcial Intelligence 120 (2000) 199–233.
[4] F.G. Cozman, Graphical models for imprecise probabilities, International Journal of Approximate Reasoning 39 (2–3) (2005) 167–184.
[5] A.Ph. Dawid, Statistical theory: The prequential approach, Journal of the Royal Statistical Society, Series A 147 (1984) 278–292.
[6] A.Ph. Dawid, V.G. Vovk, Prequential probability: Principles and properties, Bernoulli 5 (1999) 125–162.
[7] G. de Cooman, F. Hermans, On coherent immediate prediction: Connecting two theories of imprecise probability, in: G. de Cooman, J.
Vejnarova, M. Zaffalon (Eds.), ISIPTA ’07—Proceedings of the Fifth International Symposium on Imprecise Probability: Theories and Ap-
plications, SIPTA, 2007, pp. 107–116.

[8] G. de Cooman, E. Miranda, Symmetry of models versus models of symmetry, in: W.L. Harper, G.R. Wheeler (Eds.), Probability and Inference:

Essays in Honor of Henry E. Kyburg, Jr., King’s College Publications, 2007, pp. 67–149.

[9] G. de Cooman, M. Zaffalon, Updating beliefs with incomplete observations, Artiﬁcial Intelligence 159 (1–2) (2004) 75–125.
[10] B. de Finetti, Teoria delle Probabilità, Einaudi, Turin, 1970.
[11] B. de Finetti, Theory of Probability: A Critical Introductory Treatment, John Wiley & Sons, Chichester, 1974–1975. English translation of

[10], two volumes.

[12] P. Gärdenfors, N.-E. Sahlin, Decision, Probability, and Utility, Cambridge University Press, Cambridge, 1988.
[13] M. Goldstein, The prevision of a prevision, Journal of the American Statistical Society 87 (1983) 817–819.
[14] W. Hoeffding, Probability inequalities for sums of bounded random variables, Journal of the American Statistical Association 58 (1963)

13–30.

[15] Ch. Huygens, Van Rekeningh in Spelen van Geluck, 1656–1657. Reprinted in vol. XIV of [16].
[16] Ch. Huygens, Œuvres complètes de Christiaan Huygens, Martinus Nijhoff, Den Haag, 1888–1950. Twenty-two volumes. Available in digitised

form from the Bibliothèque nationale de France, http://gallica.bnf.fr.

[17] I.O. Kozine, L.V. Utkin, Interval-valued ﬁnite Markov chains, Reliable Computing 8 (2) (2002) 97–113.
[18] H.E. Kyburg Jr., H.E. Smokler (Eds.), Studies in Subjective Probability, Wiley, New York, 1964. Second edition (with new material) 1980.
[19] C. Manski, Partial Identiﬁcation of Probability Distributions, Springer-Verlag, New York, 2003.
[20] E. Miranda, G. de Cooman, Marginal extension in the theory of coherent lower previsions, International Journal of Approximate Reason-

ing 46 (1) (2007) 188–225.

[21] S.B. Needleman, C.D. Wunsch, A general method applicable to the search for similarities in the amino acid sequence of two proteins, Journal

of Molecular Biology 48 (1970) 443–453.

[22] F.P. Ramsey, Truth and probability (1926), in: R.B. Braithwaite (Ed.), The Foundations of Mathematics and other Logical Essays, Kegan,

Paul, Trench, Trubner & Co., London, 1931, pp. 156–198. Chapter VII, reprinted in [18] and [12].

[23] G. Shafer, Bayes’s two arguments for the rule of conditioning, The Annals of Statistics 10 (1982) 1075–1089.
[24] G. Shafer, A subjective interpretation of conditional probability, Journal of Philosophical Logic 12 (1983) 453–466.
[25] G. Shafer, Conditional probability, International Statistical Review 53 (1985) 261–277.
[26] G. Shafer, The Art of Causal Conjecture, The MIT Press, Cambridge, MA, 1996.
[27] G. Shafer, P.R. Gillett, R. Scherl, The logic of events, Annals of Mathematics and Artiﬁcial Intelligence 28 (2000) 315–389.
[28] G. Shafer, P.R. Gillett, R.B. Scherl, A new understanding of subjective probability and its generalization to lower and upper prevision,

International Journal of Approximate Reasoning 33 (2003) 1–49.

[29] G. Shafer, V. Vovk, Probability and Finance: It’s Only a Game! Wiley, New York, 2001.
[30] V. Vovk, A. Gammerman, G. Shafer, Algorithmic Learning in a Random World, Springer, New York, 2005.
[31] D. Škulj, Finite discrete time Markov chains with interval probabilities, in: J. Lawry, E. Miranda, A. Bugarin, S. Li, M.A. Gil, P. Grze-

gorzewski, O. Hryniewicz (Eds.), Soft Methods for Integrated Uncertainty Modelling, Springer, Berlin, 2006, pp. 299–306.

[32] D. Škulj, Regular ﬁnite Markov chains with interval probabilities, in: G. de Cooman, J. Vejnarová, M. Zaffalon (Eds.), ISIPTA ’07—

Proceedings of the Fifth International Symposium on Imprecise Probability: Theories and Applications, SIPTA, 2007, pp. 405–413.

[33] P. Walley, Statistical Reasoning with Imprecise Probabilities, Chapman and Hall, London, 1991.
[34] P. Walley, Measures of uncertainty in expert systems, Artiﬁcial Intelligence 83 (1) (1996) 1–58.
[35] P. Walley, Towards a uniﬁed theory of imprecise probability, International Journal of Approximate Reasoning 24 (2000) 125–148.
[36] P. Walley, R. Pelessoni, P. Vicig, Direct algorithms for checking consistency and making inferences from conditional probability assessments,

Journal of Statistical Planning and Inference 126 (2004) 119–151.

[37] L. Wasserman, All of Statistics, Springer, New York, 2004.
[38] P.M. Williams, Notes on conditional previsions, Technical report, School of Mathematical and Physical Science, University of Sussex, UK,

1975.

[39] P.M. Williams, Notes on conditional previsions, International Journal of Approximate Reasoning 44 (2007) 366–383. Revised journal version

of [38].

