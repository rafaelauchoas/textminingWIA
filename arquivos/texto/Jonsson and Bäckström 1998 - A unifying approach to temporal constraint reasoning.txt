ELSEVIER Artificial Intelligence 102 1998 143155 Artificial Intelligence A unifying approach temporal constraint reasoning Peter Jonsson Christer Biickstriim Department Computer Information Science Linkiiping University S581 83 LinkOping Sweden Received 25 September 1997 Abstract We present formalism Disjunctive Linear Relations constraints DLRs subsume formalisms literature computationally Horn DLRs polynomialtime tractable algebra Nebel Btirckert simple temporal constraints Dechter et al Thus DLRs suitable unifying formalism reasoning temporal constraints 0 1998 Elsevier Science BV All rights reserved reasoning temporal type DLRs satisfiability problem We prove approaches ORDHorn DLRs temporal constraint expensive We present restricted temporal constraint reasoning encoded Horn DLRs including reasoning proposed Keywords Temporal constraint reasoning Disjunctive linear relations Complexity Algorithms 1 Introduction Reasoning temporal knowledge abounds 411 In applications areas planning biology terms collections relations tasks include determining formalisms information relations artificial intelligence 2 natural language understanding knowledge temporal constraints applications 23 molecular expressed time intervals time points Typical reasoning satisfiability collections deducing new relations known The research largely concentrated systems inequalities systems constraints encode quantitative encode qualitative time intervals Some attempts integrate quantitative time points Allens 61821 algebra kinds l Corresponding author Email petejidaliuse 1 Email cbaidaliuse 00043702983900 0 1998 Elsevier Science BV All rights reserved PII SOOO4370298000319 144 R Jonsson C BZickstrtim Articial Intelligence 102 1998 143155 qualitative NPcomplete computational Allens algebra difficulties reasoning unified frameworks 1621 Since satisfiability problem qualitative unified approaches suffered In response computational TIMEGRAPH type quantitative subalgebras proposed later extended mechanisms example limited 22 unique maximal relations Hence especially information respect qualitative expressiveness maximality II literature 89112224 handling quantitative hardness Allen algebra polynomial Some algebras For information 24 algebra basic extend algebra quantitative ORDHorn tractable subclass Allens algebra containing pointisable lo extends interesting algebra information Of special result carry new algebra To concrete form topic temporal constraint fictious crime scenario Professor Jones shot beach near following house Rumours tell sure having proof P NP shown colleagues The graduate student Hill soon defend thesis newly invented complexity class NRQPxI unfortunately value known certain prime suspects inspector Smith faced following observations Hill facts P NP Needless reasoning consider postmortem Professor Jones died 6 pm 11 pm according Mr Green lives close beach certain heard gunshot evening certainly TV news The TV news 730 pm 800 pm A reliable neighbour Hill claims Hill arrived home 915 pm 930 pm It takes 10 20 min walk run place crime closest parking It takes 45 60 min drive parking lot Hills home lot The thing verifying obviously time death interval 800 pm 11 pm assuming Mr Green actually killing shot case We draw conclusions facts observations consistent like narrowing gunshot heard Now suppose inspector Smith adds hypothesis murder time gunshot known occur 800 pm 11 OO pm If set facts observations inspector Smith rule Hill murderer 2 inconsistent Hill place interval hypothesis This problem easily cast terms temporalconstraintreasoning qualitative problem like simple example solved It solved tractable methods reported literature time points relations intervals quantitative involving durations Unfortunately computationally polynomial time method proposed paper 2 Unfortunately like Hill need juridicial assistance I Jonsson C Biickstrtim Artijicial Intelligence 102 1998 143I55 145 We introduce formalism Disjunctive Linear Relations DLRs reasoning temporal constraint problem including literature Allens algebra Consequently temporal constraints DLRs subsumes formalisms reasoning proposed satisfiability Linear Relations Horn DLRs short allows polynomialtime checking Horn DLRs subsumes encoding quantitative different base method managing abstracted away resulting algorithm DLRs NPcomplete To reason efficiently DLRs impose type restriction formalism We present Hone Disjunctive satisfiability algebra formalisms approaches We tool information Since lowlevel handling time points commonly constraint network graphtheoretic linear programming proves literature The approach convenient ORDHorn surprisingly information proposed temporal simple Bjtieland reasoning We strongly believe reasoning One example areas Horn DLRs useful science action change obtain replacing Horn DLRs It worth noticing approach nontrivial express disjunctions Another example Horn DLRs useful et al languages temporal Drakengren computationally standard ability query 141 resemblance Horn DLRs 7 shown Horn DLRs deductive databases For instance proposal Kanellakis tractable formalisms linear programming method needs appeared 191 published Parts Ithis article previously results independently conference paper 12 It discovered Manolis acknowledged Koubarakis conference weeks presentlzd results The paper structured follows We begin giving basic terminology complexity time algorithm algorithm NPcompleteness stated temporal constraint discussion results issues linear programming We continue presenting deciding satisfiability Horn DLRs As direct consequence DLRs After having results compare DLRs Horn DLRs number formalisms proposed literature The paper concludes short definitions rest paper brief introduction polynomial complexity deciding satisfiability 2 Prelimharies We begin defining different types relations Definition 1 Let X x1 x set realvalued variables Let linear polynomial degree X c integer A hear disequation polynomial X expression form c A hear equality X expression form CY c A linear relation X expression form wc relation X expression form olr c r E c 2 A convexlinear r E c 3 A disjunctive linear relation DLR set linear relations 146 F Jonwm C Bdckstriim Artcial Intelligence 102 1998 143155 The restriction integral coeffecients important practice integral rational coeffecients transformed coeffecients multiplication suitable factors equivalent relations non relations integral Example 2 The set 2x1 x2 x3 512x3 7x2 0 x2 5 DLR 1X2X3 It limitation assume righthand sides relations relation form o r 3 I linear polynomials equivalent relation form o r c c constant constants rewritten We assume sets DLRs finite The definition satisfiability DLRs straightforward Definition 3 Let X XI x set realvalued variables let R RI _ Rk set DLRs X We R satisjiable real values variables true X makes member Ri 1 6 k iff exists assignment For DLRs following decision problem Definition 4 The decision problem DLRSAT defined follows INSTANCE A finite set 0 DLRs QUESTION Is 0 satisfiable We continue classifying different types DLRs Definition 5 Let y DLR Cy denotes disequations lCy 0 If y convex disequational y homogenous heterogenous Furthermore DLR We extend definitions r y We y convex iff lNC y 1 0 y disequational iff lCy 1 1 y Horn 1 y 1 1 y unit set DLRs y E r Horn r obvious way For example convex relations sets relations y NCy Horn This classification provides basis forthcoming proofs One note Horn DLR convex unit DLR For Horn DLRs following decision problem Definition 6 The decision problem HORNDLRSAT defined follows INSTANCE A finite set 0 Horn DLRs QUESTION Is 0 satisfiable For Horn DLRs restrict relations This loss generality terms For example DLR form o c U D replaced DLRs 6 c U D express relations use I Jonsson C Biickstriim Artcial Intelligence 102 1998 143155 147 x y 1 U D Observe resulting set contain twice members original polynomialtime transformation Our metlhod reasoning DLRs based linear programming begin providing follows basic facts needed The linear programming problem techniques defined Definition 7 Let A arbitrary m x n matrix integers let x xl x nvector variables real numbers Then instance linear programming LP problem defined min cTx subject Ax 6 b b mvector integers c nvector integers The computational follows problem 1 Find assignment cTx minimial variables x1 x condition Ax b holds subject conditions 2 Report assignment 3 Report lower bound cTx conditions Analogously define LP problem objective maximize cTx condition Ax b We following theorem Theorem 171 Karmarkar 151 8 The linearprogrammingproblem solvable polynomial time I Khachiyan Note convex unit DLRs Iexpressed LP problems Next recapitulate standard mathematical concepts straightforward way 9 Given points x y E IRY convex combination x y point Definition oftheformzhx1hywhereOA61AsetScIWnisconvexiffitcontainsall convex combinations pairs points x y E S Definition 10 A hyperpZane H Rn nonempty set defined Xl xnEIWalxlaxnb b E IR Definition defined 4 b set x E Iw 1 Ax b Ll Let A arbitrary m x n matrix b mvector The polyhedron The connection polyhedrons convex sets expressed following known fact Fact 12 Every nonemptypolyhedron convex 148 I Jonsson C BiickFtriim Artcial Intelligence 102 1998 143155 3 Complexity reasoning DLRs In section prove DLRSAT algorithm HORNDLRSAT polynomial HoRNDLRSAT We claim NPcomplete present polynomial Fig 1 correctly time The concept blocking defined follows algorithm solves Definition 13 Let A satisfiable set DLRs let DLR We y blocks A iff A U d satisfiable d E NCv Observe A U y J satisfiable y blocks A exist relation later time 6 E Cy A U S satisfiable This observation great importance Another polynomial provided A consists convex unit DLRs important property blocking decided Lemma 14 Let A arbitrary m x n matrix b mvector x x1 x nvector variables real numbers Let linear polynomial x c integer Deciding S Ax 6 b cz c satisjiable Xl polynomial Proof Consider following instances LP LPI mina subject Ax b LP2 maxa subject Ax b If LPl LP2 solutions If LPl LP2 yield optimal value c S satisfiable solution y LPl LP2 satisfies oy c Otherwise S obviously satisfiable Since solve LP problem polynomial time Theorem 8 lemma follows q S satisfiable Corollary 15 Let A satisfiable set convex unit DLRs let y DLR Deciding y blocks A decided polynomial time Observe convex relations set Horn DLRs define convex set IlY Furthermore identify disequation hyperplane motivate lemma XV These observations 1 algorithm SAT f 2 A t UCy y E F convex 3 4 5 6 A satisfiable reject 3y E r blocks A disequational reject 3y E r blocks A heterogenous SATr y UCy accept Fig 1 Algorithm deciding satisfiability Horn DLRs P Jonsson C Biickstrijm Artijicial Intelligence 102 1998 143155 149 Lemma 161 Let S c IF convex set let HI _ ffk G 8 distinct hyperplanes Zf S s Uf Hi exists j 1 j k S s Hj Proof If possible H union containing S Let H Hi set hyperplanes Every Hi E H contains point ni S Hj E H We HA m k resulting minimal drop hyperplanes want prove hyperplane H If case consider line segment L adjoining x1 x2 The choice xt 2 important Every choice Xi xj 1 6 j m j equally By convexity holds L c S H E H contains L meets point But Hi E H contain L contain x1 x2 Thus Hi point common L rest L c S G Uy Hi Hence L cannat subset Uy Hi contradicts lemma follows 0 A complicated proof previous lemma appears Lassez McAloon 20 We tie results end sufficient condition Horn DLRs satisfiability Lemma 17 Let r set arbitrary Horn DLRs Let C C r set convex DLRs Dk C r set DLRs convex Under inrandletDDl condition C satisfiable r Di block C 1 k satisable Proof Pick disequation di Di C di satisfiable This possible Di blocks C We r C dl dk satisfiable r di ai ci 1 k Define hyperplanes HI HA satisfiable Assume Hi X EIR YiXC Since C di satisfiable convex Fact 12 subset Hi Suppose r satisfiable Then polyhedron P defined C nonempty k P_UHi0 1 equivalent il By Lemma 16 exists Hj 1 j k P 5 Hi Clearly lemma holds q initial assumptions contradicts It important note previous satisfiability Horn DLRs Now need auxiliary observation previously lemma necessary condition lemma formal version 150 I Jonsson C Biickstriim ArtQicial Intelligence 102 1998 143155 Lemma 18 Let r set Horn DLRs let C E r set convex DLRs r Zf exists heterogenous DLR y E r y blocks C r iff r v UCy satisfiable satisfiable Proof If Trivial If r Onlyif satisfiable satisfied solution r y satisfiable Since y blocks C Cy q Proving soundness completeness SAT straightforward Lemma 19 Let r set Horn DLRs Zf SATr accepts r satisfiable Proof Induction n number heterogenous DLRs r Basis step If n 0 SATr accepts formulae A satisfiable exist y E r blocks A Consequently r satisfiable Lemma 17 claim holds n k k 3 0 Induction hypothesis Assume Induction step r contains k 1 heterogenous DLRs If SAT accepts line 5 v U Cy contains k heterogenous DLRs satisfiable induction r hypothesis By Lemma 18 equivalent line 6 exist disequational heterogenous y E r blocks A By Lemma 17 means r r satisfiable If SAT accepts satisfiable q Lemma 20 Let r set Horn DLRs Let C s r set convex DLRs r rf exists disequational DLR y E r blocks C r satisjable Proof disequational In solution r relations C U y satisfied Since blocks C possible lemma follows q Lemma 21 Let r set Horn DLRs Zf SATr rejects r satisfiable Proof Induction n number heterogenous DLRs r Basis step If n 0 SAT reject lines 3 4 If SAT rejects line 3 trivially r satisfiable If SAT rejects line 4 exists disequational y E r blocks A Hence r satisfiable Lemma 20 claim holds n k k 3 0 Znduction hypothesis Assume Induction step r contains k 1 heterogenous DLRs If SAT rejects line 3 r satisfiable If SAT rejects line 4 r satisfiable Lemma 20 If SAT rejects line 5 r v UCy contains k heterogenous DLRs satisfiable induction hypothesis By Lemma 18 equivalent r satisfiable 0 Finally SAT polynomialtime algorithm HORNDLRSAT polynomialtime problem Theorem 22 Horn DLRSat solved polynomial time R Jonsson C Bckstriim Artcial Intelligence 102 1998 143155 151 Proof By Lemmata 19 2 1 sufficient SAT polynomial The number recursive calls bounded number heterogenous DLRs given input By time Since Corollary 15 decide blocking property polynomial theorem follows q decided polynomial number times recursion By previous theorem DLRSAT NPcomplete Theorem 3 DLRSAT NPcomplete satisfiability finite set DLRs If 0 Proof Let 0 I arbitrary 1 6 6 n exists linear relation yi E 0i r 1 yn Theorem 22 Thus given satisfiable Checking polynomial 0 let r nondeterministic time Consequently DLRSAT NP NPhardness 3 COLOURABILITY For vertex u introduce DLR form v 0 u 1 2 ensure v coloured colours To guarantee adjacent vertices coloured colour add DLR u w edge u w q polynomial guess checked follows trivially reduction satisfiable r 4 Temporal constraint reasoning We begin section showing temporal constraint general proposed methods tractable reasoning temporal constraints reasoning Furthermore Horn DLRs subsumes proposed methods DLRs subsumes In sequel let x y realvalued variables c d constants A Allens algebra I It trivial DLR language subsumes Allens algebra Furthermore universal language Kautz Ladkin defined follows temporal subsumes Definition 24 Kautz Ladkin augmented formulae form crlx endpoints intervals 16 The universal language consists A yrzd rl r2 E 6 x y temporal DLRs subsumes quulititutive algebra QA Meiri 21 In QA qualitative constraint disjunction form objects Oi Oj point interval ri s basic relation exist types basic relations objects There hold pair intervals These relations 1 Intervalinterval correspond 2 Pointpoint correspond relations Allens algebra relations point algebra 25 hold pair points These relations 3 Pointinterval intervalpoint relations hold point interval vice versa These relations introduced Vilain 25 152 l Jonsson C Btickstriim Artcial Intelligence 102 1998 143155 Obviously DLRs subsumes QA Meiri considers QA extended quantitative constraints intervals let x1 x time points endpoints following forms l Cl Xl 4v VCl xndl 0 C1XdvvC1Xnxn_ldl Also extension satisfiability problem formalisms different restrictions imposed formalisms DLRs especially reduce complexity problem QA easily expressed DLRs It shown 162126 In retrospect NPcomplete artificial compared We continue showing reasoning temporal constraint Horn DLRs subsume tractable methods Definition 25 Nebel Btirckert 22 An ORD clause disjunction relations form xry I E The ORDHorn subclass relations A written ORD clauses containing disjunctions relation form x y x y arbitrary number relations form x y Ft contains Note ORDHorn class subsumes continuous endpoint algebra 26 pointisable endpoint algebra 24 Definition 26 Koubarakis forms 1 x yrc xycorxc 181 Let r E 3 A Kuubarukis formula formula 2 xrc 3 disjunction formulae form Definition 27 Dechter et al 6 A simple temporal constraint formula form c x y d Definition 28 Kautz Ladkin form crl x yrd rl r2 E 16 A simple metric constraint formula Definition 29 Meiri following formula forms 1 crl x y r2 d 2 x r y r E 3 21 A CPAsingle interval formula rl r2 E I I Definition 30 Gerevini et al lo A TGII formula forms 1 c x d 2 c x y d 3 x r y r E 6 3 formula following The tractable formalisms defined Definitions 2530 trivially expressed Horn DLRs Beside classes temporal classes expressed Horn DLRs include approach Barber 3 identified different authors Examples algebra V23 relating points intervals Jonsson et al 131 temporal TMM Dean Boddy 5 Also note Golumbic Shamir 1 l Drakengren Jonsson tractable classes obvious way 89 consider F Jonsson C Bdckstriim Artificial Intelligence 102 1998 143155 153 transformed Horn DLRs especially Horn DLRs The finding ORDHorn algebra expressed important light following theorem Theorem 31 Nebel Btirckert basic relations Then 22 Let S subclass A contains 1 S C 7l satisjiability problem S polynomial 2 satirability S NPcomplete By previous theorem expect tractable classes able A time able handle single relation handle basic relations expressed Horn DLR 5 Discussion Several researchers field temporal constraint reasoning expressed feeling proposed methods extended express relations time points As example Dechter et al 6 write The natural extension work explore TCSPs higherorder John drives work 30 minutes Fred X2 X1 30 6 X4 X3 Even define exact meaning higherorder expressions notice example simple Horn DLR Something similar 181 Koubarakis wants express duration interval I exceeds duration interval J Once easily expressed Horn DLR These claims indicate use Horn DLRs significant contribution temporal reasoning expressions problem We shown computationally Horn DLRs solved linear programs available satisfiability time However method builds solving polynomial spread belief calculations solving truth longer These packages easily solve linear programs containing variables tens thousands constraints Nevertheless proposed rnethod outperform highly specialized algorithms classes It likewise obvious Horn DLRs terms expressivity We tradeoff expressivity complexity better algarithms SAT The algorithm SAT constructed correctness proofs optimized respect execution linear programs wide heavy The commercial packages today shows absolute thousands severely restricted specialized methods compete facing tractable improved devising way facilitates reasoning complexity We believe fairly obvious drastically computational time way deciding satisfiability Throughout time dense One question paper assumed case real applications For example assume changing reasoning time Meiri integer time satisfiability time linear dense unbounded sampled effects time probably discrete reasoning problems time Switching harder There positive 21 presents class temporal constraint assumptions computationally future discrete results concerning polynomial answer 154 p Jonsson C BSickstriim Artificial Intelligence 102 1998 143155 6 Conclusion We suggested DLRs formalism reasoning temporal constraints We temporal constraint shown DLRs subsumes formalisms proposed literature A restricted polynomialtime temporal constraint algebra Nebel Btirckert simple temporal constraints Dechter et al type DLRs Horn DLRs shown tractable ORDHorn satisfiability problem We proved approaches encoded Horn DLRs including reasoning reasoning Acknowledgements We like thank Marcus Bjareland Thomas Drakengren anonymous discussions valuable comments We indebted reviewers Waterhouse improved original proof Lemma 16 This work sponsored Swedish Research Council Engineering Sciences TFR grants Dnr 92143932919573196737 William C 97301 References l JF Allen Maintaining knowledge temporal 2 JF Allen Temporal planning reasoning intervals Comm ACM 26 11 1983 832843 J Allen H Kautz R Pelavin J Tenenberg Eds Reasoning Plans Morgan Kaufmann San Mateo CA 1991 pp l67 3 EA Barber A metric timepoint durationbased 141 S Benzer On topology genetic fine structure Proc Nat Acad Sci USA 1959 16071620 5 T Dean M Boddy Reasoning partially ordered events Artificial Intelligence 36 1989 375399 6 R Dechter I Meiri J Pearl Temporal constraint networks Artificial 7 T Drakengren M Beland Reasoning action polynomial temporal model SIGART Bull 4 3 1993 3049 Intelligence 49 1991 6195 time Proceedings 15th International IJCAI97 Morgan Kaufmann San Mateo CA 1997 pp 1447 Joint Conference Artificial Intelligence 1452 8 T Drakengren P Jonsson Eight maximal tractable subclasses Allens algebra metric time J Artif Intell Res 7 1997 2545 9 T Drakengren P Jonsson Twentyone large tractable subclasses Allens algebra Artificial Intelligence 93 1997 297319 lo A Gerevini L Schubert S Schaeffer Temporal reasoning Timegraph III SIGART Bull 4 3 1993 2125 11 MC Golumbic R Shamir Complexity algorithms reasoning time graphtheoretic approach J ACM 40 5 1993 1108l 133 12 P Jonsson C BLckstrom A linearprogramming National Conference Artificial Intelligence 13 P Jonsson T Drakengren C Backstrom Tractable approach temporal reasoning Proceedings 13th AAAI96 Portland OR 1996 pp 12351240 subclasses pointinterval algebra complete classification Reasoning X96 Morgan Kaufmann San Mateo CA 1996 pp 352363 Proceedings 5th International Conference Principles Knowledge Representation 14 PC Kanellakis GM Kuper PZ Revesz Constraint query languages J Comput Syst Sci 5 1 1 1995 2652 15 N Karmarkar A new polynomial 16 H Kautz P Ladkin Integrating metric temporal qualitative time algorithm linear programming Combinatorics reasoning temporal 4 1984 373395 Proceedings 9th National Conference Artificial Intelligence AAAI91 Anaheim CA 1991 pp 241246 17 LG Khachiyan A polynomial algorithm linear programming Soviet Math Dokl 20 1979 191194 fl Jonsson C Biickstriim Artificial Intelligence 102 1998 143155 155 IS M Koubarakis Dense time temporal constraints Proceedings 3rd International Conference Principles Knowledge Representation Reasoning R92 1992 pp 2435 19 M Koubarakis Tractable disjunctions linear constraints Principles Practice Constraint Programming 1996 pp 297307 Proceedings 2nd International Conference 20 JL Larsez K McAloon A canonical form generalized linear constraints J Symbolic Logic 13 1992 114 21 I Meiri Combining qualitative quantitative constraints temporal reasoning Artificial Intelligence 87 l2 1996 343385 22 B Nebel HJ Biirckert Reasoning temporal relations maximal tractable subclass Allens interval algebra J ACM 42 1 1995 4366 23 E Song R Cohen The interpretation Conference Artificial Intelligence AAAl88 1988 pp 745750 temporal relations narrative Proceedings 7th National 1241 P van Beek R Cohen Exact approximate reasoning temporal relations Comput Intell 6 3 1990 132144 25 MB Vilain A reasoning time Proceedings 2nd National Conference Artificial Intelligence AAAI82 Pittsburgh PA 1982 pp 197201 26 MB Vilain HA Kautz PG van Beek Constraint propagation algorithms temporal reasoning revised Qualitative Reasoning Physical Systems Morgan Kaufmann San Mateo CA report Readings 1990 pp 373381