Artificial Intelligence 80 1996 2993 Artificial Intelligence Diagnosis based explicit meansend models Jan Eric Larsson Department Automatic Control Lund Institute Technology Box 118 S221 00 Lund Sweden Received June 1993 revised March 1994 Abstract validation This artrcle describes diagnostic methods use industrial processes They consistency checking sensor measurement values measurement redundancy instrumentation alarm analysis analysis multiple alarm situations alarms ate directly connected primary faults alarms consequential effects primary ones andfault diagnosis search causes remedies faults The methods use multilevel Jaw models MFM target process They implemented realtime expert tool G2 C Common Lisp successfully tested simulations processes The knowledge representation ontology based notion ofows mass energy information physical systems The relationships structure function described teleological relations connect flow structures graph built model construction time This allows diagnostic reasoning implemented searchers static graph structure performed extremely rapidly As modelbased approaches general algorithms representation generative capacities The representation gains strength functional abstract physical level abstract qualitative physics models It works systems described flows currently lacks capability capturing important aspects types systems example electronic circuits This article based authors doctors Automatic Control Lund Department fellowship visit Knowledge Institute Technology Lund Sweden work postdoctoral Stanford University Palo Alto CA Current address Knowledge Systems Laboratory Systems Laboratory Department Computer Science Stanford University 701 Welch Road Building C Palo Alto CA 94304 USA thesis 00043702961500 SSDIOOO4370294000433 1996 Elsevier Science BV All rights reserved 30 JE LarssodArtificial Inelligence 80 1996 2993 1 Introduction Diagnosis industrial processes performed different types models types use today focus physical structure behavior information The important try incorporate teleological However model contain diagnosis knowledge little meansend teleological worthwhile modelbased diagnosis level abstraction This article describes diagnosis type explicit meansend models mul 731 These functional models formal 79801 671 The following work based tilevel jaw models MFM developed Lind high goals purposes modeled language minor differences different versions MFM presented 731 Linds newer version version described The contributions reasoning MFM combined teleological Lind suggested syntax ideas use MFM representation Note 671 latest definition MFM appears article descriptions 79801 diagnostic given general methods representation validation l measurement 0 alarm analysis l fault diagnosis The measurement validation algorithm takes set measured check consistency A single erroneous flow values uses flow measurement redundancy available marked corrected measurements If conflicting marked flow value corrected values consistent subgroups The alarm analysis algorithm flow highJlow low volume high volume Each alarm MFM model method recognizes primary consequences primary ones takes input set alarm states normal low associated primary alarms alarms The fault diagnosis algorithm uses MFM model ing style diagnosis The input come questions measured signals triggering rules The explanations gives remedies produce backward chain answered user looks faults provides 2 The basic concepts MFM An MFM model designed basic concept normative description representation Thus types MFM 0 goals l functions l physical components The goals objectives purposes structors operators want goals obtained reach The functions means powers capabilities The physical com ends JE LurssonArtcial Intelligence 80 1996 2993 31 Fig 1 Goals functions components connected components relations shown condition relations The functions connected functions realize relations Subgoals connected goals achieve relations functions figure All kinds relations manytomany ponents constructed The components equipment consists depend specific ways Thus MFM types relations connect objects functions different relations relations relations l achieve l condition 0 realize An achieve functions obtain tank A condition relation connects relation connects set functions goal For example achieve goal keeping goal signifies function transporting water level tank high order function fulfilled case mass transport electrical power pump fulfilled flow function goal function signifies available For example goal realized pump subgoal delivering drive mass order pump A reaZie relation connects physical component realize implement function signifies function For example pump component realize mass transport function observe It important relations manytomany Several functions usNed achieve goal function satisfy goals goal goals condition function implement realized different components functions function conditioned component different Fig 1 functions MFM dlemands goals functions functions physical components separate entities The assumption components function structure assumption qualitative physics In addition assumes designer model construction goals given separate functions Instead viewed separate similar MFM stated 3 Goals The concept goal MFM representational central It important able recognize activity meansend device goals information Without teleological information play important 32 JE LmssonArtcial Intelligence 80 1996 2993 knowing broad definition goal follows goals impossible know available functions A A goal outcome certain activities directed However specific descriptions Thus different definition types goals recognized general useful narrow l production goals 0 safety goals l economy goals Production goals A production goal express enable production specific process inequality following variable kept specified form satisfied general interval Of course limits infinitely kept certain state production small large This means possible Safety goals express A safety goal process variable interval case probably onesided kept safe regions reasons safe operation specific kept value inside outside test production goal However common process variables means far dangerous values essentially In practise interval Economy goals An economy goal express considerations overall process optimization complex function G xt x2 x3 depending efficiency The satisfaction expressed Thus typically connected operational satisfaction following constraints economical inequality Go GXlX2X3 Gl GO Gt numerical tory efficiency inequality following It possible form limits inside working satisfac define economy goal optimization Often translated impossible use form directly earlier forms order useful Instead test JE LmssodArtijcial Intelligence 80 1996 2993 33 4 Functions The second important concept MFM afunction In context processes possible interpretations function concept In MFM function associated goal correspondingly goals associated functions In general function given following definition A function r6le achievement goal MFM describes functional structure set interrelated flow struc tures different abstraction levels The levels connected achieve condition relations structures consist connected flow functions The types tlow structures currently treated MFM 0 mass flows 0 energy flows 0 information flows These flows completely different types properties common Most flow functions appear type flow structure 0 types flow functions There function types treated MFM First following Imass energy flow functions 0 source 0 transport l barrier 0 storage l balance l sink These functions describing information flows There specific information flow functions l observer l decision maker 0 actor In addition flow functions proper organizational functions They concerned expressing support control 0 network 0 manager The network function group flow structure connect goal manager function describes control supervisory systems including human operators Most graphical symbols build MFM models shown Fig 2 The choice jaw functions The flow functions chosen MFM specifically aimed describing certain aspects physical systems primarily mass energy flows This choice limitation arbitrary The motives choosing jlow functions follows 34 LE LarssonArtijicial Intelligence 80 1996 2993 Mass flow functions Energy flow functions ii Fkzy Source Transport Barrier Storage Balance Sink Observer Decision Actor Manager Network Goal Fig 2 The symbols different MFh4 objects l Interchange mass energy responsible causal interaction physical components l Controlling l Controlling l How concepts applies flows mass energy flows mass energy important important safety production efficiency wide range physical processes Thus choice flow functions interesting MFM extented types functions discussion limitation general useful 67 Source functions represents A source function capability physical act infinite reservoir mass energy information Of course idealization behavior physical A source provided limitations function maximize F It output port flow functions useful Typical examples source functions tanks storages power supplies flow F capability connected subgoals condition connected characterized output transmitters information relations Transport functions represents function A transport information Typical examples transport transported gravity heat exchangers characterized interval connected relations F flow functions throughput capability transfer mass energy medium functions provided pumps pipes liquids information function lie It input output port flow F capability channels A transport limitations connected subgoals condition JE LarssodArhjicial Melligence 80 1996 2993 35 Barrier functions represents A barrier function energy information Typical examples barrier heat isolating materials A barrier equal flow functions connected capability prevent transfer mass medium provided traps water systems safety encasing nuclear reactors encryption devices flow F close zero It input output port connected subgoals condition relations throughput characterized functions function Storage fhmctions A storage function represents capability Typical examples storage information liquids stored water central heating energy information stored A storage function V representing output flow Fo These attributes fulfill inequality mass energy accumulated functions accumulate mass energy provided tanks stored memory characterized state variable input flow Fi dV dt fiF GE defined A storage function input output port connected subgoals condition relations formulation Lind storage function inputs outputs disallowed connected flow functions current work 73 For simplicity In original Balance functions A balance function total rates incoming provided forks pipes A balance function fulfill inequality represents capability provide balance functions flows Typical examples balance selectors heated water channel steam characterized set input output flows These flows outgoing injection FI FzFI cl A balance flow functions function input output ports connected connected subgoals condition relations Sink functions A sink function represents mass energy information As sources physical tanks storages energy dissipation useful Typical examples sink functions provided information receivers A sink function capability act infinite drain idealization behavior 36 JE LarssonArtijicial Inielligence 80 1996 2993 input flow F capability characterized It input port connected connected subgoals condition relations flow functions limits maximize F Observer functions function represents An observer translate physical obser capability vations information Typical examples observer functions provided measure ment devices performed human operators An observer function output port connected connected subgoals condition flow functions relations Decision functions represents A decision function performed control algorithms Lind functions lowlevel intentions making A decision flow functions control systems operators decision making capabilities Decision work decision function input output port connected relations In functions differs 731 Lind view simple control algorithms connected modeled decision subgoals condition Actor functions function represents An actor capability physical consequences Typical examples actor functions provided valves motors performed operators An actor function input port connected flow functions subgoals condition connected information relations turn Network functions A network function allow represents property function perform provide conditions It way flow structure A network function necessary grouping connected connected flow functions goals achieve relations Manager functions A manager function represent resource management example description control information task In current work manager connected connected functions describing achievebycontrol information control A typical flow functions function port It contain network flow flow path A manager manage certain information intended relation flow JE LurssonArtijcial Intelligence 80 1996 2993 31 All tlow functions attributes associated depend algorithms use described reasoning methods later sections This concludes description semantics MFM It certainly possible use representation based example predicate logic representation developed For simple fast diagnostic algorithms presented article graphical representation simple underlying data structure based objects links sufficient 5 Flow structures Flow functions connected flow paths Jrow structures These structures model mass energy information flows function function In fact flow functions belong flow path isolation A flow structure graph connected flow functions The functions nected different types relations called links terminology Lind 0 mass Aow connections energy flow connections information flow connections The fiow fkction connection syntax Flow functions connected according specific syntax rules l A flow function connected specific connection points l A flow function connected functions flow type mass energy information l Sources connected outgoing transports l Transports connected sources storages balances sinks observers cision functions actors They outgoing sources observers incoming sinks actors direction connected storages balances decision functions l Barriers connected balances l Storages connected transports l Balances connected transports barriers l Sinks connected incoming transports l Observers connected outgoing transports l Decision functions connected transports l Actors connected incoming transports The original formulation Lind allows storages barriers connected stor ages multiple inports outports simplicity disallowed A storage multiple connections replaced storage connected transports balances ports The rationale connection rules formulated following points 38 JE LurssodArtijicial Intelligence 80 1996 2993 Fig 3 A heat exchanger The flowsheet shows water pumped steam injector heated steam plate heat exchanger heats product l Some rules needed order ensure intelligible models demand flow functions flow type connected l Some rules motivated consistency transports transports directly connected sources connected incoming l Some rules derive assumption transports drive flows Thus sources storages balances produce transports active functions flows This reason passive sinks connected transports connected directly transports barriers The given description MFM based 731 following original work It noted later versions MFM differ descriptions control systems information flow 79801 6 An example flow model The following example explain basic concepts MFM The target Fig 3 This simple serves temperature brief analysis shows subgoals having concepts MFM The primary goal heat product process consists plate heat exchanger certain water product available media heat exchanger bringing explain l Gl heat product l G2 bring product l G3 bring water heat exchanger certain heat exchanger temperature small functions present The given example process l Fl provide product l F2 transport product l F3 transfer l F4 provide l F5 transport 0 F6 transport water l F7 provide water l F8 provide stream thermal energy media thermal energy thermal energy JE LarssonArtificial Intelligence 80 1996 2993 39 Fig 4 Goals functions components relations heat exchanger l F9 tmnsport l FlO mix water steam steam The type objects physical components Note product water tanks actually appear Fig 3 tank l Cl product l C2 product pump l C3 heat exchanger l C4 water tank 0 C5 water pump l C6 steam 0 C7 steam valve l C8 steam injector components However goal Gl superior goal hierarchy These sets goals functions objects important First subgoals Gl Thus There relations goals functions heat exchanger component water product graph As seen graph objects relations small process example relations function In Fig 4 goal hierarchy meansend represented graphical In MFM model product Fig 5 relations G2 G3 relations formed goalsubgoal For example components thermal energy achieve goal heating relations shown complex goals functions realize function transferring language A model example process 7 Diagnostic algorithms Before proceed diagnostic methods useful mention facts implementations performed implemented The algorithms 89901 doctors project described successfully The realworld process products tool G2 expert 671 All algorithms tested simulations processes simple lab process Steritherm sterilization liquid food ultrahigh realtime temperature 40 JE LurssodArtifcial Intelligence 80 19 2993 Fig 5 A flow model heat exchanger The goals goal hierarchy shown tree structure graph functions connected flow paths networks The topmost goal heat product achieved beat transfer flow path upper network subgoals bring water product heat exchanger achieved water flow path lower left product flow path lower right The components realize relations shown The algorithms implemented C graphical editor ASCII file form MFM Toolbox Macintosh systems This version tested processes including G2 Common Lisp implementations A simpler console version program run C compiler 691 The alarm analysis fault diagnosis algorithms implemented Common Lisp use Guardian 40 Here algorithms tested small examples systems human body Currently large MFM model body intensivecare unit patient verified medical experts 8 The architecture monitoring control The methods diagnostic reasoning fit different parts monitoring control The measurement validation algorithm typically belongs low level feed validated signal values higher level algorithms alarm analysis fault diagnosis tasks dealing supervisory diagnosis control Fig 6 The inputs needed obtained different ways They direct filtered signals sensors It possible outputs lowlevel data filtration direct signals outputs Kalman filter statistical algorithm The measured flow values assigned attributes appropriate flow functions It flow values measurement validation algorithm operates The validated output values algorithms higher levels JE LarssonArtificial Intelligence 80 1996 2993 41 Alarm analysis Fault diagnosis Measurement validation Data filtration Process 1 Fig 6 The places diagnostic methods monitoring control Raw data process treated filters lowlevel numerical routines sent algorithms The measurement validation algorithm works intermediate level alarm analysis fault diagnosis algorithms belong topmost supervisory level The alarm analysis higher levels supervisory control user presentation The fault diagnosis method placed For example Guardian alarm analysis fault diagnosis operate qualitative data supplied routines perform data filtration abstraction based current resources available The MEM algorithms course standalone fashion presenting results directly user operator realistic use integral parts larger monitoring control The approach project KnowledgeBased RealTime Control Systems 39631 currently investigated Guardian project Here MFM algorithms alternatively methods depending available resources needs results methods combined obtain higher quality diagnosis single method provide When operating conditions target change considerably new different MFM model needed This example case nuclear power plant switches production emergency shutdown mode In case monitoring control switch new MFM model 9 Measurement validation Most industrial processes equipped large number sensors directly indirectly measure variables Especially material energy balance equations taken account total set measurements commonly gives rise redundancy check consistency signals validate 42 JE LmssodArtijicial Intelligence 80 1996 2993 Flow semantics In order use MFM basis measurement semantics different flow functions defined assigns flow values grouping common grouped Four flow functions attributes class called jaw carrier Sources balances sinks flow carriers Storages barrier functions forking balances given separate treatment The following attributes transports nonforking information validation l Flow carriers flow value quantitative flow mass energy Its unit measure m3s Js A device flow attribute single measurement corresponds connected physical flow carrier set value measured signal variable l Storages flow values There input output flows connected responding measurements There attribute corresponding change mass energy contained storages volume Thus storage connected storage measurements cor rate derivative l Barriers flow value transport working states serve borders separately analyzed matter energy flows sum inflows equal l Forking balances flow value Instead sum outflows In addition belongs validated reconciled flow attributes flow function contains group flow functions consistent information flow values flow value different measured Consistent subgroups With use semantics possible connected following rules flow functions internally consistent split MFM model set subgroups This use l For flows FI F2 connected flow carriers following inequality hold IF1 F21 1 flow carriers belong If support If flow values disagree arate subgroups This situation error consistent indicates subgroup belong sep measurements l If input flow Fi storage equal flow F flow carrier connected input storage following inequality holds input storage belongs Should flows disagree subgroups The corresponding flow F flow carrier connected flow carrier subgroup storage flow carrier belong different true output flow F storage JE LurssonArtcial Intelligence 80 1996 2993 43 Fig 7 An example flow path Here flow functions form tyo consistent subgroups group surrounding The possible fault hypotheses measurements correct faulty correct faulty measurements faulty l For storage volume V inflow Fi outflow F following inequality shoulmd hold dV fiF dt cl belong input output parts storage belong If measurement inlet outlet treated completely separate subgroups Note requires If available derivative flows connected separate flows subgroup separate l For balance inflows outflows Fi following inequality hold IFI F2 FI 6 1 balance belong consistent If flow carriers connected If connected flow carriers belong subgroup subgroup telling In case balance given special marking user flow carriers consistent flow carriers marked However belonging current different groups implementations connected l If flow values flow functions flow path separated subgroup However belong flow path form subgroups agree flow functions subgroups flow functions inconsistent values It noted Application rules enables splitting flow smaller groups consistent measurement groups holes need directly consecutive This case Fig 7 Here flow values shown shown shading graphical symbols There subgroup subgroups flow functions connected global analysis line look directly connected The rule uses information rule means needed This enables efficient flow functions encloses flow functions algorithm information Flow propagation The description far assumption ments This seldom usually unknown case Many flow values needed flow functions measure algorithm 44 JE LarssonArtifcial Intelligence 80 1996 2993 guess unknown connected different propagation The MFM flow paths propagate flow values The idea simple known known value propagated unknown flow information unknown However flow value l A flow value subgroup flow values trustworthy rules The implemented algorithm uses following necessary rules flow function flow values supplied single validated propagated upstream downstream It precedence flow paths said flow functions l A single measured downstream l If validated flow value propagated unmeasured flows upstream information flow values meet available propagated stream precedence propagated upstream This imply downstream propagation propagation behave consistently serves sense better flow l If flow values propagated downstream arbitrary decision single precedence propagated upstream Once flow functions meet propagation work l Guessed values propagated balance functions value currently unknown unguessed propagation rules provide validated flows redundant information guessed values flow functions Using network Validation Each flow value corresponding validated flow attribute This set according following rules l If flow value subgroup surrounded consistent group flow value overridden flow surrounding subgroup validated flow flow function In cases validated presentation information scheme In addition subgroup l A coloring user separate validated flow equal corresponding measured flow values implementation flow presents representation different subgroups group belong l Each flow function MFM model Thus inconsistent graphical receive light gray gray dark gray rim depending group highlighted symbols flow functions subgroups red explicitly mark single subgroups possible alternative It derived The decision probably certain larger consistent possibility taken obvious possibility measured value error It important observe It possible subgroup albeit lower probability error measurements account results analysis wrong It important presented single value correct The cases operator question probable measurements JE LurssonArtificial Intelligence 80 1996 2993 45 level algorithm This reason implemented primarily higher displays information It noted validated groups order magnitude However failure likelihood values The assumption precedence guessed inconsistent guessing different consistent presentation rests assumption subgroups method extended single value trustworthy likelihoods single subgroups trustworthy failure use explicit measures group flow propagation validated values exists sensor value sensors However aimed giving reliability based single values This flow values functions connected groups measurements strategy downstream propagation arbitrary downstream inconsistencies reliability The description propagation based G2 implementation instead This allows In C version single detect method flow values minimal degree provide guessed In case method able detect possible inconsistency flow measurements Note measurement Instead flow structure validation method uses achieve condition relations inter actions considered This makes method behave favorably problem size increases Furthermore measurement validation described needed process goals meansend list separate flow structures This true algorithms MFM model relations treated separate global Examples measurement validation Let dlemonstrate tanks Fig 8 The main goal process tank pump cylindrical water level tanks specified mass flow circulation source sink One transport pump depends subgoal achieved secondary complicateld modeled seen MFM model method small example The process consists storage level This achieved primary tank modeled pump motor power goal turn simply source transport sink All flow electrical energy The power support water Here storage corresponds Fig 9 functions Example 1 Now assume tank storage upper flow measurements outflow flow pump inflow derivative outflow throughput tank flows values shown Table 1 available The situation described The flow values shown flow function Table 1 shown Fig 10 concerned symbols tank values corresponding realized upper flow functions storage inflow denivative volume outflow function The flow Fl flows F3 agree form consistent The flow F2 disagree forming subgroup function subgroup 46 JE LurssonArtcial Intelligence 80 1996 2993 Fig 8 The tanks process Water pumped storage tank cylindrical tank flows tank storage Fig 9 An MFM model tanks process The main goal level upper tank correct achieved water flow In order transport function F2 available pump running energy supplied Table 1 A set flow measurement values flow Fi flow F2 inflow F3 deriv F3 outflow F3 outflow storage flow pump upper tank inflow volume change upper tank outflow 20 x 10e6 m3s 10 x lo m3s 20 x 10V6 m3s 0 x 10m6 m3s 20 x 10e6 m3s 20 10 20 0 20 Ft F2 F3 Fig 10 A flow path corresponding Table 1 The flow F2 disagrees rest consistent subgroups whereof single surrounded The marks inconsistency validated subgroups In case marks F2 specially single function group flow value F2 set 20 x 10V6 m3s flow surrounding different colors notifying group 1 The consistent subgroup In addition single function group flow function F2 special marking information shown Fig 10 shading forming JE LmssonArtcial Intelligence 80 I 996 2993 41 Table 2 A second set flow measurement values flow Fi flow F2 inflow F3 deriv F3 outflow F3 10 x 10V6 m3s unmeasured 20 x 10e6 m3s 0 x 10M6 m3s 20 x 10m6 m3s Fl F2 F3 outflow storage flow pump upper tank inflow volume change upper tank outflow Fig 11 A flow path corresponding Table 2 The flow value F2 propagated storage measurements form multiply validated consistent subgroup It seen Fi forms single surrounded subgroup Table 3 A set flow measurement values flow Fi flow F2 inflow F3 deriv F3 outflow F 20 x 10e6 m3s 20 x 10V6 m3s 10 x lo m3s 5 x 10e6 m3s 5 x 10e6 m3s outflow storage flow pump upper tank inflow volume change upper tank outflow Fl 2 F3 Fig 12 A flow path corresponding Table 3 Here consistent subgroups consist measurement The algorithm signals flows agree guess ones correct instead situation flow value Fl Example Z Now assume flow F2 measured correspond validated value 20 x 10e6 m3s upstream single function Fl guessed value F2 Fl surrounded flow values 10 x 10m6 m3s Table 2 It flow function description Fig 11 In case propagates inflow derivative outflow F3 subgroup precedence value flow Fl agree flow reset marked single failure Its validated F2 value validated It observes shown situation described Table 3 Example 3 Further assume Fig 12 Here consistent difficult This situation support The marks inconsistent particular value wrong misleading subgroups measurement assess sensor values wrong groups takes action Marking potentially dangerous 48 JE LurssonArttjcial Intelligence 80 19 2993 10 Alarm analysis Most industrial processes equipped large number alarms In failure state usual alarms trigger Some directly connected primary sources error secondary connected failed equipment consequential effects primary failures In failure state vital operator separate primary secondary alarms Failure conditions Jlow functions Every flow function alarmed connected corresponding process way measurement tells function currently available However alarm conditions limited according following rules l A source working current outflow F sources maximum capacity FCaP F FcaP If condition fulfilled alarm locap true l A transport working current flow F lies interval specified design 40 F 6 Fhi If flow F Fl alarm low true Fhi hiflow true l A barrier working current flow F low approximately zero IFI et If condition fulfilled alarm leak true l A storage working current volume V lies specified interval 40 V hi following inequality fulfilled dV zFiF 61 If volume V lower N alarm lovol true higher Vhi hivol true If expression bars et larger et al311 alarm leak true true l A balance working following inequality fulfilled If expression bars et ei al11 true alarm leak true larger J E LmssonArtcial Intelligence 80 I 996 2993 49 FI F2 Fig 13 A connected working actual flow source transport The source maximum outflow capacity Fcap transport interval 4 Q fi Fhi If wanted outflow source goes capacity transport leaves working interval alarms occur l A sink working current inflow F sinks maximum capacity F cap F Fcap If condition fulfilled alarm locup true A method alarm analysis Failures propagate flow function flow function failure conditions described Thus primary certain ways This failures functions failures connected given Fig 13 source Fl consequence types flow functions cause secondary failures connected pump An example transport function F2 This correspond tank connected The source output flow F lie beneath maximum capacity F cap source Thus following inequality hold F 6 Fcap If risen source locup alarm capacity Fcap fallen output flow F The transport throughput flow F lie lower upper limit FIO Fhi set holdl design Thus following inequalities If da transport cause alarms If Ft FI alarm loflow Ft Fhi alarm hiow Note normative character assumptions Here working interval transport decided design modeling phase output flow source controlled throughput flow Assume transport normal operation interval transport normal working conditions Then small Fcap analysis following working outside formed l If capacity Fcap source fall desired outflow transport flow Ft forced flow medium throughput 50 JE rsoci intdigence 80 19 2993 working interval Thus source loses capacity transport flow correct limits This implies locap alarm source force tofrow alarm connected transport function l If hand current throughput flow transport higher upper limit working interval Fr rises fault lead output flow source going mimum capacity FCGp Thus u alarm transport cause bucffp alarm connected source I If current throughput flow transport fall lower limit working interval flow demanded transport sources capacity source affected Thus lujw alarm transport cause alarm connected source This analysis expressed simply crisply rules quantitative information suppressed alarm information l A source locap alarm force connected transport alarm e A transport hQ7ow alarm cause connected source locap alarm With use rules faults cause faults alarms cause alarms alarm situation concerning source connected transport analyzed Assumptions flow function behavior In examples different working condions gave rise set assump tions flow functions involved react connected Using assumptions flow functions small G2 program written automati cally generate rules possible alarm causations 68 In fact set rules generated hand automatic rule generation program ready previous handgenerated rules checked correct Possible secondary alarms The examples extended allowed connections flow functions This gives set rules alarm flow function cause consequential alarms connected functions A complete set rules follows l A source tocup force connected transport loffow l A transport loow cause storage connected inlet transport hid storage connected outlet 15voE It cause transport connected direction balance OW If balance connections alarm forced l A transport hiflow cause connected source sink locup It cause storage connected inlet transport lovol storage connected outlet hvoZ It cause transport connected direction balance hiflow If balance connec tions alarm forced It cause transport connected opposite direction balance loJlow LE LarssonArcial Inrelligence 80 19 2993 51 l A barrier leak cause transport connected balance lojibw l A storage lovol cause outgoing connected transport lojlow l A storage hivol cause incoming connected transport loIow cause outgoing connected transport hijow l A storage leak cause storage 1001 l A storage jll cause storage hivol l A balance leak cause connected outgoing transport lojow connected incoming transport hiflow l A balance cause connected incoming transport lojlow connected outgoing transport hiow l A sink locap force connected transport 1oJlow l An alarm network force function depending network fail Note final rule makes use meansend relations Thus algorithm concerned comparing alarms functions single flow structure information propagate upwards model graph single alarm ulti mately affect failure states goals networks way toplevel goals entire model Different rule sets different domains The rule set presented reasonable solution choose possible secondary alarms However rests assumptions behavior flow functions If assumptions changed new rule sets needed This point illustrated examples l One possible assumption active transports forced hifrow state connected balance transport hipow This corresponds case rotor pumps connected pipe assumption pump force medium flow quicker second The obvious counterassumption allow transport cause line The normal case hifow rules l Another assumption storages limited volume closed stlorage hivol cause 1ofTow incoming transport If storage overflow causation place The assumption rulers The solution ambiguities allow types flow functions transports Likewise shown separation active passive possible allow closed oveowing storages However lead plethora similar flow functions difficult understand MFM models Anothla possibility design different rule sets use appropriate specific processes equipment design tasks In case choice flow function assumptions beginning modeling process This leave problem mix MFM models different domains 52 JE LurssonArticial Intelligence 80 1996 2993 The possibility different assumptions flow function behavior consequently rule sets rises interesting questions For example different differ properties applicability rule different sets proposed different domains processes And given different rule sets best provide rule sets certain supervisory monitoring appropriate diagnosis control choose It possible task chosen The choice assumptions choice flow function semantics choice flow functions types large number possible abstractions behaviors flow systems theoretical problem enumerating possibilities selection flow functions semantics The step way deciding rule sets preferable experience construction problem gain practical authors opinion engineering use MFM models ongoing effort different properties investigating ultimately Higher order rules The rule set shown contains rules involving possible functions At glance fault causation involved flow functions involved functions tightly connected flow exist cases separated flow functions There cases easily seen fact allows propagation faulty flow value having type flow function alarm balance As balances connected longest chain fault causation middle All causations flow functions involve pairs directly connected long balance flow functions An alarm analysis algorithm It important observe decide alarms The rules automated alarm analysis Given set alarms primary ones ones fault possible secondary fault secondary hidden causation fault Thus method differentiates positively primary alarms alarms primary secondary taken socalled mean peculiarity MFM It basic property causal analysis corresponding indeterminate failed indeterminate concept secondary It noted As soon new alarm value discovered certain look like secondary multiple faults primary In article alarms set alarm value transport alarm concerned loJow storage hivol balance new alarm tried order flow functions If failure state flow function Then rules applied match change new situation normal primary failed secondary failed JE LarssonArtcial Intelligence 80 19 2993 53 Fig 14 A storage connected transports If alarm state storage measured transports receive lofrow alarms order alarms determine considered primary This solved conflict resolution mechanism recognizes case sets transpoa alarms secondary failed The rules applied locally involve closely connected flow functions The way global information propagated connections MFM graphs Thus efficiency proportional length networks depth abstraction hierarchies This makes execution fast Unknown alarm states When alarm states unknown flow networks guess missing values This method called consequence propagation The idea simple Given set known primary secondary alarms set unknown alarm states unknown values filled secondary indeterminate alarms according set rules The rules exactly correspond alarm analysis rules Every rule converted guessing rule case flow function question given alarm state measurements For example consequence propagation rules formulated source transport Fig 13 l If source locap alarm guess loJIow alarm connected transport l If transport hifow alarm guess locap alarm connected source ConJIct rfsolution There cases conflicting guesses possible Consider situation shown Fig 14 Assume alarm state storage F2 measured transports Fl F3 Further assume Fl F3 lojIow alarms The guess alarm state F2 2001 alarm F3 consequence If lojlow F3 came Fl guess hivol F2 alarm F3 considered primary instead Thus cases order alarms rise different results This situation remedied conflict resolution strategy sim ple gives preference secondary indeterminate alarms possible For example case transport alarms considered indetermi nate This conflict resolution gives rise diminishing diagnostic resolution complexity rules resulting interpretation correct This actually corresponds wait step fault 54 JE LarssonArtifcial Intelligence 80 1996 2993 F3 primary died Measurement faults discovered fault Fl reme Sensor faults common sources false incorrect alarms In cases state process correctly shown alarm presentation occur dangerous situations The method described aimed discovering sensitive false alarms largely dependent correct sensor values However cases detected situations alarm state contains sensor fault This true alarm force If alarm active wrong measurements alarm states incorrect alarms leading Instead Implementations The description alarm analysis The method implement Common Lisp The C version uses table driven algorithm resulted faster execution Section 14 based G2 implementation uses generic rules C instead rules This implemented Using results The result applying described method primary indeterminate An operator algorithm use information task finding faults fault situation An obvious user check primary strategy faults known alarms marked When remedied indeterminate instead primary These primary faults gone taken care It possible likelihoods investigated remain This knowledge If failure actions operator Likewise alarms standard actions discriminate rule base results alarm analysis use knowledge known guessed guide search ordering alarms primary nature clearly separated indeterminate important dangerous alarm heuristic It example implemented situations giving advice different Examples alarm analysis Let demonstrate method example Once tanks process Example 4 Assume alarm states F4 F6 Further assume functions Fl F2 F3 F5 measurements Fl locap F2 connected JE LarssonArtcial Intelligence 80 1996 2993 55 Fig 15 An alarm analysis situation The functions Fl F2 F3 F5 locap ZOZOW lovol Is The alarms F4 F6 guessed In situation locap Fl primary alarm TFZ R i4 F5 Fig 16 Another alarm analysis situation Here fofIow F2 primary alarm achieving network lofiow F9 Fig 17 A alarm analysis situation Here primary alarms The situation highly dynamic lojbw F3 Zovol F5 lovol alarm This alarm situation indicate shading flow function means primary alarm lighter shade indeterminate unalarmed complicated far simpler shown Fig 15 The failure state dark shade alarm white normal plethora alarms appear course state This correspond fault situation larger plant situation symbols An application alarm propagation presented methods result locap Fl loflow F2 lovol F3 secondary The F4 F6 loflow alarms implies alarm analysis F4 Zofow alarm lovol F5 secondary alarm The result locap This tank little water primary consequence measured Thus assuming conclude Fl shown shading sole cause fault situation tank primary alarm consequences Fig 15 Fl source function storage L If function F9 transport electrical energy Example alarm rule rule set rule concerning achieve condition relations primary pump pump motor causation F2 pump faults power supply fault primary iand little water storage tank Fig 16 imply 56 JE LurssodArtijcial Intelligence 80 1996 2993 algorithm conclude Example 6 If instead F3 hivol alarm hivol F3 Zovol F5 primary alarms locup Fl Fig 17 This correspond dynamic process state pump flow volumes lower storage tanks low volume upper tank high 11 Fault diagnosis systems diagnosing process control The classical use knowledgebased operator rules backward chaining The techniques MYCIN rule base specific inconsistencies difficult diagnose aid process faults This usually rulebased expert running known good example example certain process task rule base contain overview building updating rulebased faults anticipated large rule base probably large rule base systems shortcomings design rule base 1121 However rulesbased These shortcomings solved large degree modelbased approaches The process design construction efficient Consistency deviation properties modelbased updating knowledge database models intuitive easy use domain expert model faults MFM shares working state prespecified model guaranteed approaches The MFM data structure diagnosis In MFM meansend dependencies explicitly represented certain reasons information subsystems fault occurs model provide error component control goal fails functions failure The working conditions alarm analysis Thus flow function normal locup loflow working hiow 1001 hivol leak orll state fault directly corresponding flow functions fault diagnosis algorithm corresponding algorithm way finding failure states The fault diagnosis flow functions Thus flow physical components function question investigate automatic sensor readings Each flow function remedy fault form text string output algorithm automatic procedure failure state function Alternatively asked test performed different order As example use flow model tanks process In order enable fault diagnosis different flow functions assigned questions l The source Fl question Zs water associated remedy Fill water storage storuge tan tank JE hrssonArtijcial Intelligence 80 1996 2993 51 l The transport F2 question remedy pump supporting probably taken care Is pump transporting water run The remedies enabling question l The storage F3 Zs water level upper tank correct special rule associated This rule activated algorithm use external measurement set failure state flow function The remedy The water level upper tank corrected actions l The rest flow functions remedies questEons remedies These simply skipped algorithm It possible water network similar questions flow functions l The source F8 electrical energy network question ZS power available l The transport F9 question Zs power switch remedy Switch power assumptions monitoring remedies Thus use following control better solution model physical structure use formulate questions provide remedies This solution example When al handle MFSI Guardian connect Note gorithm questions model ceive measurements project The search strategy structure rulebased implemented expert An MFM model consists information In standard rules MFM The fault diagnosis algorithm uses questions goals process goals achieved networks functions functions depend subgoals realized physical components information explicitly described implemented Thus fault diagnosis easily search model graph The strategy usled search follows traverses single failure state flow functions answers sensor readings parts flow model flow functions Depending combined alarm analysis traversed The algorithm consequence propagation interleaves diagnosis algorithm The simple rule successful matching diagnosis flow function guessing diagnostic questionsensor MFM graph comes guessing consequences reading subject consequence information performed incrementally propagation sensor readings comes The specifics diagnostic l The user chooses goal diagnosis search follows process investigated However If toplevel goal model goal chosen case process diagnosed l The search propagates downwards goal achieve relations connected network flow functions investigated subgoal 58 JE LurssonArttjcial Intelligence 80 1996 2993 l Each flow function diagnostic question asked function rule relation order function corresponding function physical component currently available Alternatively physical component information realizing order working l The appropriate consequence propagation algorithms activated alarm state flow function set alarm analysis l If flow function conditioned connected subgoal subgoal fault means If investigated subtree recursively skipped checked function working The fault diagnosis method yields incremental resolution needed algorithm static connections local algorithm implemented group generic rules It noted search propagates conflict search pattern matching Thus global efficient The description implemented performing depthfirst based G2 implementation The method C Common Lisp form recursive procedures search This enables faster execution PERFECT project As shown Section 14 speed fault diagnosis algorithm high unnecessary Instead select parts Ml34 model simply check goals functions This approach speed diagnosis taken sensor determined readings computa costly number questions tions Due important small parts possible diagnosis sensor process The questions time resources involve simulation readings direct search algorithm 108l 111 However investigate An example fault diagnosis Let demonstrate method small example Once tanks process level upper tank correct Example 7 Assume violated user asks diagnosis goal The algorithm goal Gl topmost goal moves network describing water flow functions flow checks goal Gi starts mass turn The source Fl describes reached search algorithm The current position source function storage tank flow marked flow model Fig 18 The source Fl following function graphic representation question associated Q Is water storage tank The user checks discovers Thus gives answer Fl activated draw conclusions water left storage tank marked Zocap The alarm analysis Fig 19 JE LurssodArtificial Intelligence 80 1996 2993 59 Fig 18 The diagnostic search started goal Cl followed achieve relation water flow network reached source Fi Fig 19 The diagnostic search concluded source Fl faulty Then moved reach transport F2 Fig 20 The diagnostic search concluded transport F2 fault alarm analysis signals fault Fl primary fault F2 secondary Then search reached storage F3 The algorithm moves F2 asks following question Q Is pump running Once answer F2 marked low alarm The alarm analysis activated deduces fault lofow F2 caused fault Fl Fig 20 locap Fl primary 60 JE LurssodArtijcial Intelligence 80 1996 2993 Fig 21 The diagnostic search finished investigation water flow network alarm analysis concludes primary fault secondary guessed faults F4 F6 As transport F2 fault condition relation search continued energy supply network reached source F8 The storage function F3 corresponds asked connected upper tank It question volume tank correct limits level alarm sensor It automatically lovol alarm Before diagnosis started Zofow F2 established alarm considered alarm analysis algorithm associated Assume assigned primary decides consequential fault The transport function F4 corresponds gravitationally upper tank It alarm question guess alarm state lojow consequence caused outflow propagation The storage F5 corresponds lower tank connected reasonable sensor Under automatically marked Zovol algorithm use guessed Zovol F5 consequential F4 decide level tank assumption fault alarm low lojow The flow functions F6 F7 alarmed questions guess F6 loflow alarm F7 normal seen Fig 21 algorithm state All working As fault F2 algorithm goes subtree goal G2 It moves finds source F8 Fig 21 starts diagnosing asks question belongs Q Is power supplied The user checks electrical power gives yes answer power line connected wall equipment When algorithm comes transport F9 Fig 22 corresponds power switch pump asks following question Q Is power switch The user discovers question The transport analysis deduces support The total power switch answers function F9 marked low alarm The alarm fault F2 primary fault position fault situation independent LE LarssonArtQzial Intelligence 80 1996 2993 61 Fig 22 Tine diagnostic search concluded source F8 working reached transport F9 Hg 23 The state fault diagnosis As transport F9 fault fault F2 known primary faullt The user ask explanations remedies algorithm search graph output appropriate text strings failed flow functions causes level low water storage tank pump power switch Fig 23 This state probably long water presently cylindrical tanks flow storage tank making source function Fl available Example 8 The implemented allows flow functions explanations remedies associated asked In example algorithm different primary faults When Fl reached output following remedy R EN water storage tank When reaches power switch F9 output remedy R Syvitch power So far examples built G2 implementation simple strat egy outputting remedy text failed function Another possibility activate rules procedures produce explanations reme dies information MFM model actually perform remedying actions The rules procedures needed written general G2 rule format 62 JE LmssodArtijcial Intelligence 80 1996 2993 goal Gl maintain This failure Fl The diagnosis fuljlled tanks ability provide water F2 pump working F2s failure caused fact fulfilled This failure F9 pumps power switch working water level upper tank goal G2 provide pump power storage Fig 24 An explanation failure state Examples 7 8 The text copied screen associated goal MFM Toolbox generate function Some formulations explanations C The expressions brackets textual descriptions produce correct natural clumsy example systems ability intended language Generation explanations implemented automatic generation explanations algorithm This algorithm MFM model objects builds textual explanation The C Common Lisp versions fault diagnosis enhanced language style recursive depthfirst search reads fault states moves graph fault state MFM model goals functions depending This algorithm uses information reasonable produce goals functions failed An example output shown Fig 24 restricted natural causal explanations algorithm explanations larger monitoring fault diagnosis When cooperation diagnosis generated algorithms For example unit personnel explanations communication intensivecare fault diagnosis computed set failed functions treatments handled separate treatment database treatment plan generator Guardian remedies handled execution plans automatically Guardian monitors diseases project 12 Experimental experiences No matter theoretical properties diagnostic algorithms utility ultimately decided practical usefulness Different properties methods add determine relative merit MFM new largely untested modeling concept differs Thus use experiences gained assessed best currently experiences modeling present conceptually properties approaches modelbased abovementioned needed Therefore models constructed Three test processes The algorithms process Steritherm described tested simulations tanks theory Department Automatic Control Lund Institute Technology Lund Sweden It Guardian model human body small laboratory process teaching basic control The tanks process JE LmssonArtijcial Intelligence 80 1996 2993 63 Fig 25 The Steritherm flow sheet screen dump G2 Toolbox implementation produce aLs generic toy example demonstrating Steritham algorithms widely moderately examples development MFM algorithms article As shown suffices sized process Fig 25 Steritherm manageable temperature world research Real 39631 authors doctors project informal ultrahigh real process size academic It target process Swedish project KnowledgeBased treatment UHT dairy products wide use small project Time Control Systems The MFM model Steritherm describes liquid foodstuff heating 137C seconds The supporting main flow thermal energy flows product water heating cooling described Some support systems systems included pressurized model air 220 380 Volt electrical toplevel goal sterilizing addition product modeled validation The measurement algorithm verified fairly complex product mass flow Steritherm The alarm analysis tested thermal energy fault diagnosis faults effects entire plant All tests flow fault situations The conclusion algorithms worked realistic handle multiple accurately gave correct useful information They managed faults problems It noted changes whatsoever necessary transferring The Guardian tanks process diagnosis Steritherm algorithms project aims developing intensivecare agent use different patients available resources use postoperative intelligent changing demands architecture 38391 monitoring 401 The implemented reasoning methods according It based BBI blackboard For Guardian project large MFM model human body devel temperature calcium magnesium oped It covers systems needed heart circulation acidbase balance intensivecare nutrition sodium potassium body fluid volume concentrations unit monitoring body respiration 64 JE LmssonArtial Intelligence 80 1996 2993 Table 4 Three modeling tasks different size The times fairly reasonable estimates manhours Note Guardian modeling effort entirely finished Process Lab Tanks Steritherm Guardian Size toy medium large Knowledge engineering Model construction 0 2 months 4 months 1 hour 1 week 1 week multiple regulatory mechanisms systems The implemented algorithms alarm analysis fault diagnosis verified work problems model probably largest MFM model existence Judging experiences clear MFM algorithms scale favorably changing qualitative properties behavior results Reasonable assessments efforts needed construct MFM models shown Table 4 The knowledge engineering includes time needed study process physical facts works model construction time identifying goals functions constructing actual MFM model Since difficult practice completely compartmentalize different phases figures Table 4 approximations As seen MFM specific effort modest Although comparative studies available authors experience MFM modeling effort smaller effort needed turn knowledge rule base Furthermore modelbased graphical nature MFM makes considerably easier handle MFM models use knowledge encoded rules 13 Properties algorithms Using MFM represent diagnostic knowledge clear advantages ordinary rulebased retain advantages comparison modelbased techniques This fact MFM models consist static graphs The algorithms local incremental They work real time propagate information static links This makes efficient effort function model complexity increases worst linearly size MFM models The local nature benefit feedback recirculation loops pose problems algorithms Worstcase estimates Diagnostic reasoning tasks like ones described implemented searches MFM graphs The fault diagnosis method uses depthfirst search size subtree known simple obtain worstcase estimate time computational effort needed diagnose certain subgoal Similar statements LE LarssodArtijEcial Intelligence 80 1996 2993 65 algorithms In general reliable MFM provide true algorithms case efforts It important operating mode different MFM model needed functions set MFM models available worstcase estimates write diagnostic worst case target process shift new goals MFM algorithm In cases monitoring control note possible precise information Ham reakime demands The ability giving worstcase estimates time needed diagnostic diagnosis hard realtime fixed time known worst case constraints Whenever comply timing demands If subproblem subtask test makes MFM suited subtask finished question solved possible Here hierarchical structure MFM models valuable The general structure MFM model toplevel goals flow structures plantwide flow structures conditioned subgoals goals functions The functions concerned support systems main systems functions turn conditioned For example generators primary reactor generators subsystems Measurements toplevel flow structures flow water On level flow models lower level models reactor generator MFM model nuclear power plant flow energy usually available different reactor primary water smaller subsystems levels search moves downwards fault diagnosis search implemented general concern production The fault diagnosis algorithm presented starts topmost goals safety demands entire goals MFM graph attacks specific plant Then simple depthfirst subproblems Currently levels obtain result It simple matter use search investigates breadthfirst toplevel plantwide diagnosis gradually search deeper making handle time diagnostic run coarse diagnosis available Thus MFM allows graceful degradation hard realtime constraints finer finer time available Whenever search instead This allow algorithm staged depthfirst resolution Large scaling problems MFMs graphical structure makes presented algorithms behave favorably increase worst linearly size problems scaled All methods MFM model However incoming data cause local changes cost performing adding fault diagnosis subpart model affected linearly For example computational diagnosis effort increases separate subpart 66 JE LurssonArtijicial Intelligence 80 1996 2993 Table 5 The methods implemented G2 knowledge databases Measurement validation Alarm analysis Fault diagnosis Parallel execution 66 rules 93 rules 19 rules updating diagnostic methods incremental efficiently parallelized Since methods use local infor The distribution information global bottleneck The local enables mation different ways l Each processor responsible standard distributed control supervisory specific subpart model This corre sponds process MFM model designated processor The topmost levels model handled globally gathers processors responsible processor information tasks server basis When new subpart task sent new processor In version MFM graph splits parallel l Processors assigned MFM model traversed fault diagnosis moving downwards branches Once note implementation unnecessary level simulations motivate increase efficiency algorithms activities sensor readings fast parallel lower time resources asking questions require 14 Implementation The algorithms presented tool G2 C Macintosh expert Guardian project All examples C implementations shown implemented realtime tested systems Common Lisp use G2 article tested algorithm The implementation G2 tools special graphical data rules The MFM models built G2s standard graphical rule base speed sampling period second available structures generic interface reasonably methods Since G2 minimal diagnostic algorithm sold CERN G2 developed Gensym Corporation takes precisely 1 second The commercially Table 5 This implemented implementation generic 8990 small The second implementation portable graphics algorithms available conventional monitoring algorithms Since fault diagnosis Macintosh interface systems This implementation C 691 The MFM data structures efficiency file enables control systems highlights algorithms currently timeconsuming algorithms JE LurssonArttjcial Intelligence 80 1996 2993 67 data fault diagnoses models Table 6 Performance C implementation number MPM objects model Rules number rules needed diagnosis backward chaining Worst case longest possible execution model ancl Rules second gives apparent rulebased speed algorithm More half time spent sensor readings bookkeeping Objects total perform equivalent time fault diagnosis performed operations Process Lab tanks Steritherm Guardian Objects 27 99 331 Rules 39 150 544 Worst case Rules second 480 LS 630 LS 1100 ps 81 000 240 000 500 000 sensor readings performance data shown Table 6 Here fault diagnosis executed simulated fault situation Note times given worst case objects model investigated Often diagnosis alarm analysis faster The central C code implementation diagnosis faster measurement fault orders magnitude pregenerated validation algorithm given Appendix B described rule base performing includes The Lisp implementation MFM model produces standard backward chaining function respectively These MFM models rulebased systems Each goal translated small translator fault diagnosis reads algorithm rule failed rough estimate complexity standard function working compared handling rule bases cases speed algorithms The relative difference different size For affect execution efficiency smaller models times models probably initializing bookkeeping operations Guardian model poses test significant difficulties It noted functions level loops It contains numerous depend subfunctions flow structures consist loops flows human body closed handle classically difficult cases feedback recirculation loops circular dependencies problems turn depend original loops The algorithms meansend functions dimension 15 An overview related work The main contributions MFM Morten Lind group Lind contains Linds suggestion 747677 describes basics MFM 737980 diagnostic operator STRIPS planning discussion MFM types models Lind treated realtime diagnosis 72 Linds group developed graphical 61621 fault diagnosis alarm analysis fault diagnosis interfaces 75 design interface 249495 45 171 78 contains comparative ship engines MFM nuclear safety research 11201 operator fault diagnosis 231 constructing COGSYS diagnostic systems interfaces 108l 111 68 JE LurssonArtcial Intelligence 80 19 2993 fault diagnosis process industry 124125 intelligent manmachine systems nuclear plants 871 The methods described article presented earlier papers measure ment validation 651 alarm analysis 641 fault diagnosis 661 They thoroughly described Doctors thesis 67 basis article The report 68 contains detailed descriptions implementation algorithms 69 reports C implementation Modelbased diagnosis The thorough work modelbased diagnosis arguably research areas related qualitative physics The main bulk work Al community concerned diagnosis analog digital electronic circuits applications neurophysiology hydraulic systems process industry domains 1371 Since automatic reasoning usually need quantified details math ematical model knowledge qualitative behavior available qualitative representations suggested replace mathemat ical models physics Common approaches use representations based logics constraints directed graphs Sussman Steele 1161 based hierarchical constraints consistency checking Davis 181 describes use structural functional models diagnosis The area qualitative physics described 31126 A good overview modelbased diagnosis given 371 191 gives good overview 1221 gives theoretical overview relates standard expert techniques The theoretical foundation diagnostic methods Reiters algorithm 35107 A model physical structure component behavior generate description target logic formulae Together information measurements Reiters algorithm compute minimal set possible hypotheses sufficient explain current failed state The method outlined implemented domain independent architec ture called General Diagnostic Engine GDE 541 GDE uses assumptionbased truth maintenance ATMS 505 11 direct incremental implementation Reiters algorithm Most results area concern digital circuits analog circuits circuits containing components internal states addressed There probabilistic approaches All excellently covered 371 Other important approaches qualitative reasoning taken Kleer Brown 531 points need topological functional mod els formulates theory based confluences Forbus 30 describes modeling method starting physical description giving set constraints process concept model behavior Kuipers 58601 describing qualitative simulation method The starts set qualita tive constraints initial state predict set possible futures Dvoraks project 2526 describes MIMIC fault diagnosis based JE LmssodArtijcial Intelligence 80 1996 2993 69 language qualitative uses QSIM representation maintain set measurement failures tracing dependencies algorithm presented article simulation The DATMI program 58601 The IncDiagnose 22 uses qualita diagnose This compared measurement differ considerable interpretations QSIM 92 tive representation sensor validation ences A comparison It important note MI34 differs classical kinds modelbased exemplified Reiters algorithm diagnosis mains basic problem results produced The main contribution research new methods suited application systems formulation Ml34 GDE typical diagnostic extends process target task modelbased industry control The classical AI version modelbased diagnosis clearly geared diagnosis circuits similar domains The models components physical electronic connected components behavior entire circuit varying input signals structure diagnosis tests behavior complex faulty tries isolate faulty components described analog discrete equations constraints From MFM handles special class behaviors small set abstract ure state flow function diagnosis casual assumed observed flow functions Furthermore described fail tests consists description fault state target pro reasons alarm analysis known desired state pro assume use varying similar domains For example fault state MFM possible direct measurements systems algorithms geared industry inputs cess nuclear fault diagnosis cess On hand domains It imeresting note Reiters algorithm project Walseth et al uses Ml34 1241251 This interesting effort generate goal joining MFM classical modelbased diagnosis input Another difference general unconstrained explicitly analysis electronic circuits obtained MFM concept goals central classical concerned teleology A notable exception 49 approaches teleological In domain Kleer applied analysis structure shows purposes components case possible function However principle function structure physics proposed Qualitative conclude function component observation physical impossible observed equivalent principle properties In MFM principle solely analysis functions goals concluded tell purpose For example additional telephone stop door closing enable electromechanical possible communication information 70 JE LarssonArtcial Intelligence 80 1996 2993 describing flow information An interesting question extent MEM models equivalent qualita generate MFM models structure behavior QSIM QPT modelbased representations tive quantitative models possible automatically representation As bond graphs provide cient An Theory mation types models This question open research MFM detailed important QPT process concept Forbus Qualitative Process infor device translation suffi goals target answer needed information MFM define representations provide If possible The flow descriptions 301 similar meansend teleological interesting possibility models translated produce models automatically abstract end However article presented yields efficiency complex circuits abstractions behavior provide valuable diagnostic models Thus MFM MFM flows suffice In dimension abstraction MFM clear results results The idea abstraction diagnose reported Hamschers XDE 361 program tentative study available It worth noting comparative construction MFM models probably demands lesser effort modelbased approaches This project KnowledgeBased built quantitative equations constraint efforts demanded mainly MFM demand detailed knowledge based authors experiences conclusion RealTime Control Systems models Steritherm G2 simulator quantitative DMP qualitative causal graphs MIDAS All tasks MFM model Steritherm behavior models A practical difference MFM modelbased equations constraints needed abstract construct techniques simulation equations larger efficient The MFM algorithms presented time scale microseconds typical slow Indeed computations tasks MFM methods perform diagnostic based Reiters algorithm systems tenths components GDE increase diagnosis probable temporarily orders magnitude probably difficulties comparing ignoring efficiency orders magnitude concentrating faults This algorithm perform poorly certain symptoms faulty sections circuit focus slower MFM algorithms different algorithms In 521 Kleer shows article intractable A fuller overview related work given Appendix A 16 Conclusions The article presented use multilevel perform measurement newly diagnostic methods flow models MFM The methods use MFM database fault diagnosis They validation invented implemented alarm analysis LE LarssonArcial Intelligence 80 1996 2993 71 MFM Functional Qualitative Quantitative Integrated General Lind De KjaerHansen Validation Alarms Diagnosis Planning Presentahor Simulation Larsson Creutzfeldt Larsson Lind Creutzfeldt Sassen Larsson Walseth Jrgensen Larsen Lind Duncan Businaro Monta Larsson Arz6n Krijgsman Crespo Kleer Forbus Kuipers Woods DeCoste Isermann Frank Woods Mah Kramer Lees Petti Viiia struss Marifio Davis Reiter Kleer Dvorak Ng Modarres Padalkar Modarres Padalkar Allen Tomita Rasmussen Modarres ChBruy Bond graphs Kuipers Fig A1 An overview different projects according problem solved rows model type columns type implemented G2 C Common Lisp successfully tested processes The search algorithms efficient work real time sensitivity large scaling models worst linear Together implemented toolboxes demonstrations project shows good example usefulness power meansend models Appendix A An overview related work MFM young largely unexplored research area The current work related areas research modelbased diagnosis modelbased reasoning qualitative physics general modeling This appendix overview previous work related projects overview papers books mentioned In following overview different projects sorted according type models use group separated different problem areas fault diagnosis simulation presentation This summarized Fig Al 12 JE LmssodArttjkial Intelligence 80 1996 2993 Projects MFM Lind Morten Lind creator MFM The important documents MFM defined These MFM works definition 737980 reports introduction Linds current version Some examples given MFM 7 I original paper syntax semantics background basic ideas Linds solution data structures diagnostic algorithms 747677 The implementation interface building MFM graphs written Smalltalk Smalltalk 80 MFM layer described Together graphical 249495 forms main effort Linds group De et al Westinghouse Corporation MFM perform functional analysis new control room concept pressurized water reactor early 1980s 201 KjaxHansen KjaerHansen MFM development models decision making processes 481 Measurement validation Larson The MFM method described problem Section 9 article treats measurement validation separate Creutzfeldt The project described 171 partly concerned measurement treats sensor validation It realtime diagnostic lowlevel data collection Fortran MFM models manually validation The project diagnosis written handle propagating measurement exists small heat distribution plant target process thesis published alarm analysis fault routines rules tests mixture translated processing The generates hypotheses alarm analysis fault diagnosis A working demonstration highlevel values Nexpert Object MFM graphs performing validation Alarm analysis Larson A method work However alarm analysis MFM separately concerned alarm analysis partly treats problem Section 10 presented project Creutzfeldt Fault diagnosis Several projects use MFM fault diagnosis Lind Lind described approach structure MFM models realtime diagnosis suited fault diagnosis hard obtain produce answer low resolution quickly use time increase resolution diagnosis Each goal corresponds task lower level subgoals met diagnosis argued realtime constraints By searching algorithms additional diagnostic finer finer giving behavior similar anytime algorithms 10213 MFM graphs possible 75 topdown Creutzfeldt Fault diagnosis main aim Creutzfeldt project JE LnrssonlArtijicial Intelligence 80 I 996 2993 13 Jorgensen The thesis Jorgensen 45 treats problem building general MFM models diagnosis ship engines aiding supporting reuse modeling knowledge Sassen et al The Dutch project PERFECT uses preprocessor translate MFM models CGGSYS programs diagnosis 108l 1 1 The implemented method uses external measurement values check working condition leaf node MFM graph propagates fault information upwards enabling quickly lowlevel faults use additional time descriptions consequences higher levels An advantage checking leaf nodes ordered according failure likelihood drawback leaf nodes continually checked The project points common method described Section 11 article CGGSYS realtime expert shell developed cooperation 35 British European companies It written PIDPI 1 C uses textbased language KRL Knowledge Representation Language knowledge database uses blackboard architecture designed efficient 141 The PERFECT works compiler translates MFM models code COGSYS Sassen SCWERE project Supervisory Control With Embedded Real time Expert systems This joint project faculties Informatics Electrical Mechanical Chemical Engineering Delft Technical University The aim project support plantwide control systems supervisory level AI techniques real time example 105106117118 Larsson Section 11 article presents method fault diagnosis ward search MFM graphs Walseth The Norwegian project Walseth et al uses MFM diagnosis waterammonia separation unit 124125 One contribution idea connecting MFM goal satisfaction tests quantitative state variables functions The MFM model produce input Reiters algorithm diagnostic vehicle project Planning Larsen One project Linds group uses MFM control production STRIPS plans startup plants 61621 The standard way STRIPS planning perform search applicable operators order construct viable plan sequence actions takes process initial goal state MFM contains information functions available goal achieved implemented uses information control blind search operators Sometimes needs guessing backtracking truth maintenance techniques For readings STRIPS 281 Presentation Lind Lirtd treated presentation meansend information design operator interfaces 721 The main idea use graphical representation MFM models combined flow sheets highlighting functions correspond ing physical components Another set symbols graphical environment 14 JE LurssodArtcial Intelligence 80 1996 2993 SIP project developed use thesis uses Linds older versions A effort Linds group development cooperated CECJRC 811 new symbols 249495 Lind general graphics environment Ispra Italy MFM information faults Praetorius Duncan Pmtorius Duncan 23 use MFM alternative operators interesting operators The students experiments students acting inexperienced way presenting diagnostic comparative received hours training standard efficient test involve result MFM means presentation To perform graphical presentation Businaro Businaro flow sheet MFM model flow sheet fault diagnosis aid It noted example process trained operators test series small In spite clearly provides good reason work test Duncan Pratorius developed MFM Sassen later performed similar experiments interfaces studies manmachine et al performed test MFM proved interesting MFM mid 1980s 11 I Monta et al Toshiba developing nuclear reactors The uses MFM represent plant knowledge generation operator comprehensive based design principles supervisory control boiling water science appear room software diagnosis The scheduled cognitive interesting project far Larsson Some ideas examples presentation meansend information given integrated related information 67 The conclusion multiple view allowing ways presenting MFM suitable presentation Projects functional models Several projects meansend MFM closely usually tree graph describing related This means functional models pure goals functions representation hierarchy goals functions Alarm analysis Modarres et al The Goal Tree Expert System containing trees perform diagnostic goal trees success tree structures requirements clearly resembles MFM This data structure implement program Lisp runs IBMPCAT helps evaluate alarm systems goals subgoals higher It successfully components 86 The tasks The representation GCYIRES project uses database consists levels hardware working lower ones Thus UMPIREI Common written tested real processes Padalkar et al The Intelligent Process Control System IPCS uses hierarchical mod fault graphs fact performs alarm analysis The target process functions hierarchical representation systems subsystems Constraints els structure function propagation described subfunctions tree structures functional 971 The models structural fault diagnosis representation perform JE LmssodArtijcial Intelligence 80 1994 2993 75 faulty components hierarchies lution diagnosis The tested successfully small power plant producing electricity propagated downwards lower level causes In way diagnosis low reso granularity quickly available extra time improve steam Senboku Works Osaka Gas Company information Osaka Japan Fault diagnosis Modarres et ai The GGIRES perform implemented program uses depthfirst The failures construct facility results satisfactory equipment online leaf nodes fault diagnosis expert search downwards goal 131 The experimental trees fault diagnosis reactor nuclear fault diagnosis Allen Rao Fault Padalkar et al The IPCS Padalkar et al 97 deserves mentioned performs mixture alarm analysis fault diagnosis faults tree struc levels contain tree faults See toplevels trees contain subcomponents A diagnosis consists search path trees process possible leaves alarms primary lower root ture components example I 1 Planning subgoals generated synthesizer automatic automatically construct operating qualitative description Tomita et al The project Tomita et al describes operating procedures based functional models plants The uses heuristic search chemical plants The goal operator support The database contains directed fragments operating graphs fashion sequences scripts help build plans networks scopes scope corresponds plant Scripts constructing startup practical chemical plant subprocess existing ethylene plant application plant behavior construct plans topdown Working plants described sequences scopes The applied scopes work guidelines called scopes successful function subfunction plans consisting bottomup abstract conditions sequences 1201 Another specifically aimed batch processes tree tasks subtasks performed operation The process topology plant The operational knowledge description subtasks performs quick simulation perform possible described schedule set operations linear programming check result directed graph showing 1211 Here data structure ensure successful physical task The uses tree needed technique table recipes contained Presentation Rasmussen Rasmussen thoroughly discussed design manmachine faces describes accomplish importance presenting meansend information order example 102103 Rasmussen greatly original inter 16 LE LmssonArtcial Intelligence 80 1996 2993 performed rulebased tasks operators users manmachine work structuring systems behavior tasks Some tasks usually performed skillbased tasks level means automated reflexive behavior Other tably kinds diagnosis expressed simple symptomaction needed knowledge form Yet complex difficult ones performed tasks especially reasoning use models This knowledgebased structure task levels fit differently performed operators automated The demands implementation different depending task type skillbased conventional expert knowledgebased reasoning Rasmussens extensive overview task solved task better solved automated 1021 contributions 1041 starting point ideas MFM rich reader referred techniques rulebased task advanced level reasoning different implies complex paramount level importance control Modarres et al The GOTRES representation utilized database 471 In project operator advisory operation nuclear power plants Prolog implementation building small expert Simulation idea use abstract Several projects use functional models generation equations simulation The systems behavior order produce equations representation general away physical needed modeling simulation Chuy et al The CAMBIO uses graphical diagrams reactions The different description biochemical reactions represented described connections Thus building graph equations given manually representation provide interesting connection readings CAMBIO unclear successful Bond graphs From functional types reactions media affected structures symbols reaction graphical reaction lets user design compound screen The reads graph produce Some extra information reactions The CAMBIO 671 For Pascal perform simulation order different 122788 The implemented study systematic use block diagrams MFM described semiautomatically comes concept bond graphs representation signal exchanges components product variables representation effort corresponds product velocity rotation temperature effect In mechanics flow entropy disciplines frequency voltage process 4698119 They display energy described processes Each connection effort thejow The bond graphs serve graphical In electronics corresponding equations flow corresponds effort force torque flow effort absolute thermodynamics current The elements connected simple bonds corresponding resistors example 1191 functional components wires shafts rods resistance elements describing kinds They flywheels masses inductors inertia elements corresponding JE LarssonArticial Intelligence 80 1996 2993 Fig A2 A simple mechanical mass spring friction The mass seen point mass excitation force independent velocity From 1191 S I 1 IL R C Fig A3 A bond graph Fig A2 The excitation S The spring modeled capacity element friction resistance mass inertia element The connection series junction velocities equal different forces added From 1191 Fig A4 An augmented bond graph The force effort source acts mass responds velocity 2 deducting spring friction forces functions velocity From 1191 Clik Rf elements match condensers capacity transformers series connection The causality different components arrows bars There kinds junctions p s junctions springs art sources Jlow sources parallel shown With building blocks possible systems A mechanical thermo shown Fig A2 This point mass linear spring It described simple bond graph Fig A3 An augmented bond dynamical simple example friction graph described The forces velocities shown graph electrical mechanical Fig A4 Here mechanics causality shown From bond graphs possible automatically transfer functions Bond graphs superficial properties built abstract functions connected generate differential equations common MFM flows 78 JE LarssonArtijicial Intelligence 80 1996 2993 generate balance equations There bond graphs MFM follows l Bond graphs achieve condition similarities end The major differences relations represent meansend l The functions dimension main point MFM Thus bond graphs barriers MFM capacity elements l The paths bond graphs described efforts flows actual values usually decided solved equations solved MFM flows built pure flow variables flow values known normative nature MFM l The intended use vastly different Bond graphs graphical rea mainly concerned diagnostic equations MFM representation soning This leads clear conclusion As bond graphs encompass misleading potentially dangerous bond graphs MFM little important aspect MFM use trying If good bond graph descriptions process flows building understand One connection possible represent energy balances available MFM models Projects qualitative behavioral models The thorough work modelbased diagnosis arguably research Section qualitative physics This area overviewed areas related 15 Here projects described appropriate headings Alarm analysis Kramer et al The Model Integrated Diagnosis Analysis System MIDAS basically It uses qualitative fault diagnosis alarm analysis extensions performs information 29961 An alternative 931 example taken process variables described implementation graphs For readings MIDAS G2 MIDAS described MIDAS qualitative method The incoming measurements belong primary models translated finding deviations steady state turned alarms grouped fault In order MIDAS uses chain different nominal clusters The type model Signed Directed Graph automatically SDG physical equations process State variables represented arcs SDG contain derived nodes faults The SDG graphs transformed Extended SDGs handle loops The ESDGs generate event graphs In set total set root causes relationships qualitative possible primary global feedback events Consider qualitative state changes linked tank Fig AS The level L tank controlled inflow qi outflow qO In outflow pipe flow resistance R vary The balance equations tank root cause gravity JE LarssonArtcial Intelligence 80 1996 2993 19 Fig AS A small gravity flow resistance R outflow pipe tank The level L tank controlled inflow qi outflow qO Upstream leak Tank leak R Fig A6 A signed directed graph describing arcs change gravity variables affect From tank The variables qi L qO R shown 93 L Clqi c2q0 q0 fR The SDG produced translated produce event graph gravity Extended SDG equations handle global tank Fig A7 Fig A6 The SDG model loops feedback MIDAS supervises measured variables set monitor procedures These send qualitative messages construct online graph actual events alarms analyzed Fig A8 shown event interpreter uses event graph representation connected The architecture MIDAS online links root causes Thus Fault diagnosis Several projects AI modelbased sis This effort described earlier connections MFM process control domains described perform fault diagno Section 15 Here projects closer reasoning It uses QSIM models perform semiquantitative based QSIM modeling Dvorak Kuipers The MIMIC simulation uses quantitative simulation 25261 qualitative relationships The compares models corresponding introduces process language simulation values information real process track working fault state The instead tested small example processes working new ways alarms basing model It Ng The IncDiagnose project described new version diagnostic 92 uses set QSIM qualitative perform algorithm Reiter 35107 states fault 80 JE LurssonArtcial Intelligence 80 19 2993 High Inflow Levcl Sensor High Bias Downsearn Leak f Flow Sensor High Bias NOT Level Sensor Bias NOT Flow Sensor Bias NOT Level Sensor Bias fTanlL Low Inflow Level Sensor Low Bias Outlet Blockage Flow Sensor Low Bias Fig A7 An event graph describing gravity tank There events root causes This data structure MIDAS uses online From 93 Data sensors 1 Fig A8 The architecture MIDAS online The input signals sent monitors turns qualitative events The event interpreter receives events uses construct online event graph represents current situation process From 93 LE LarssonArtial Intelligence 80 1996 2993 81 formulation systems Reiters simple physical diagnosis problem theory describes SD set components Comp set observations set firstorder diagnosis description Obs In Reiters SD usually Ng instead uses QSIM constraints Viewed formal problem diagnosis complete problem Ng gives algorithm method tested temperature small processes machine formulas NP efficient The regulator toaster times minutes Explorer Lisp claims controller pressure execution reasonably logical Simulation Kuipers Kuipers developed described set qualitative language QSIM qualitative 58 constraints given initial state future behaviors producing states The expressive power QSIM supports rela simulation possible subtraction derivation state monotonical relationship This idea seen abstraction differential equations MIMIC diagnostic build 601 A QSIM compute tree possible qualitative tionships addition functional The QSIM representation Projects quantitative behavioral models reasoning The classical models control socalled observerbased methods theory quantitative usually differential fault detection mathematical models parameter estimation Process know ledgebased 43 Fault detection classical methods 341 In qualitative space models symbolic QPT described equations extended 32 state framework derived Qualitative Process Theory results examples combination combine HPT Woods describes quantitative models Hybrid Phenomena 301 In group given excellent 1271291 HPT attempt overviewed overviews Theory Measurement validation Mah et ial The classical form data reconciliation probable values set interdependent description There essentially instructive handle small random errors uses statistical methods order exam sensors kinds methods concerned finding gross er 82 ple rors An example type method 821 The assumed model y x t E y vector measurements random errors The process set nodes directed arrows The nodes correspond arrows x vector true flow rates E vector rows 1 outflow described incidence matrix A describes columns matrix 1 marks inflow 82 JE LurssonArtcial Intelligence 80 1996 2993 node The errors ei described covariance matrix Q positive definite known The data reconciliation constrained weighted problem formulated estimation problem leastsquares mm y xQY x 1 subject constraint AxO An approximation 2 true flow values x given 2 y QAT AQAT Ay The use linear programming suggested techniques interval arithmetic 42 fuzzy logic techniques example chi tests There global The common testing treating gross errors based statistical hy pothesis tests 21 nodal tests 831 finds gross error present require method 841 instead fault direct tests measurement These methods usually combined search quire previous data reconciliation suspicious values erroneous measurements level retesting Common covariance matrix known fail usually fault hypothesis instead giving possibilities methods need preset significance kind elimination probable probabilistic Alarm analysis There methods alarm analysis based quantitative techniques See 70 overview Fault diagnosis Delaware Petti The Diagnostic Model Processor method developed Tom Petti 1001 University set violated working assumptions resembles neural network shows implementation examples use method 991011 This uses quantitative set faults internal DMP methodology 1011 describes equations structure available measurements DMP uses model equations fault free operation model equations arrive likely agree fault conditions It assumes extent direction real measurements By analyzing deduced likely failed assumptions violated model equation case redundancy helps diagnosis certain The process model consists form ideally equal zero Each set equations written residual upper lower limits equation tolerance equation residual equation 1 1 telling equation deviates ideal value An example tank gravity outflow given Fig A9 satisfied With use tolerance turned number limits sigmoidal limits representing function JE LarssonArtijcial Inrelligence 80 1996 2993 83 Fig A9 A tank gravity outflow The outflow depends level qOUt outflow measured model equation Both level The outfow tank given E qaut s form Each equation depends number assumptions satisfied The order equation immediately equations implicit leaks blocks piping correct sensor values readings residual written conditions fulfilled assumptions explicit visible The assumptions 0 The level sensor 0 The outflow sensor l No leaks tank pipe Each equation related working tank equation working assumptions connections state sensitivity equation Finally failure fault assumption nation satisfaction indicates direction A DMP model Steritherm likelihoods Fi assumption computed combi zero fails fault equations The deviation values connected assumption shown Fig AlO DMP shown easy simple useful diagnostic method An advantage change DMP data structure process relatively Due summing tolerance boolean values DMP handle multiple hypothesis potentially problematic weighting methodology levels insensitive problems turning quantitative measurements faults possible rebuilt setting Projects integration different models As different model types suited different types mixed representation integration different methods model types use model et al The KnowledgeBased advantageous focussed Anin 39631 suggests general architecture tasks needed control supervision lowlevel simulation supervision loop control sequence control alarm control The tasks currently handled logic quantitative diagnosis based fault trees symptombased knowledgebased accommodating RealTime Control Systems project described tasks Some projects 84 JE LarssonArtificial Intelligence 80 1996 2993 MODEL Fig AlO A DMP model Steritherm The picture contains model equations assumptions connections shown c diagnosis MIDAS MFM DMI All structure A demonstration implemented contained multiple view data et al The DICE 4455571 It based blackboard rules Boolean multivalued architecture represents logic based fuzzy ideas The written C runs logic truthmaintenance G2 realtime expert knowledge Krijgsman control systems production available VAXIVMS platforms Crespo et al The RIGAS 15161 realtime expert based architecture Some knowledge solve control subprob blackboard lems called processes handle external internal stimuli They periodic sporadic react requests activities needed responding sources assigned operators Fault diagnosis Viiia HayesRoth Viiia HayesRoth 1231 use set different models architecture The prime physical component organized level describes blackboard processes performed component build realtime knowledgebased describing models structural level level parametrization qualitative description parameters erroneous causes faults constructed These location The uses models offline sensor connectivity structure component represented levels information takes place sign level fault level defines signs With prime models domain models functional precompute levels information functional parameter physical connectivity component JE LarssodArtijcial Intelligence 80 19 2993 85 hierarchy abstract models analyzed This choose simulation online diagnosis information worstcase appropriate model timing estimate realtime Vifia HayesRoth tested control systems RCIC aux 411 Guardian 401 The precomputed models en real time The control prob handle reasoning unit modelbased blackboard architecture specifically designed architecture developed intensivecare surgical simulation diagnosis 38391 This blackboard power plant cooling perform implemented iliary subsystem patient monitoring able lems hard soft deadlines useless valuable control applications Struss Struss sentation physical electronic assumptionbased constraints work domain analyzing goal work arrive general circuits importance truth maintenance levels 113l 151 describes different certain result AIbased algorithm time The realtime semiconductor manufacturing 91 I structure function The fault diagnosis multiple views repre multiple concerned diagnosis pointed An 505 11 track simple electronic circuits The long term structural functional hierarchies ATMS Mariiio et al Marifio et al general multiple view representation sification problems Here inference views scribed bridge objects diagnostic theory diagnosis 851 fault diagnosis The engine designed objectoriented search contact points expert clas switch different views Appendix B Fault diagnosis code Here follows listing C code fault diagnosis algorithm This code actually copied concerned bookkeeping alarm analysis algorithms omitted MFM Toolbox updating C Some variables graphics measurement statements validation _RF Fault agnosis____________________________ Author Jan Eric Larsson __Clobal fiiti___________________________________ Knowledge Systems Laboratory Stanford University 701 Welch Road Building C Palo Alto CA 94304 USA Phone l 415 723 0948 Email LarssonQKSLStanfordEdu struct CoalStruct int No State Conditions struct NetvorkStruct Network struct ManaSerStruct l Manager struct ConditionStruct Condition MAXCONDSI 86 JE LarssonArtcial Inteiiigence 80 1996 2993 struct NetvorkStruct int No State Functions Coals struct FunctionStruct Function MAXFUNCS StruCt malstruct l cd MAXCOALS struct ManagerStruct c int No State Fuactions struct FunctionStruct struct CoalStruct Goal l Function CMAFUNCSI 1 struct FunctionStruct c int No Type MType State struct FunctionStruct Is MAXLINKS MAXLINKS StruCt ConditionStruct struct NetworkStruct Network struct MahagerStruct Manager l Condition CMAXCONDS Ins Outs Conditions 3 struct ConditionStruct int No State struct CoalStruct Coal struct FunctionStruct Function 3 Fault Diagnosis_____________________________________________________ search dovnwards state values way DiagnoseCoal These procedures perform depthfirst MFM graph set performs diagnostic state goal unknown sets state undecided avoid loops DiagnoseManager manager exists returned updated according meansend dimension calls DiagnoseNetwork seach goal object It checks results state Finally int DiagnoseGoal Coal struct GoalStruct Goal Goal State UNKNOWN c Goal State UNDECIDED Goal State DiagnoseNetwork Goal Network Goal Manager NULL DiagnoseManager Goal Manager FAILED Coal State FAILED 3 3 return Goal State 3 DiagnoseNetwork DiagnoseManager perform dovnward search t network manager objects They simply functions calling DiagnoseFunction return object working failed depending results returned int DiaghoseNetvork Network struct NetworkStruct Netvork c int n JE LarssonArtijcial Intelligence 80 1996 2993 87 Network State UNKNOWN1 Network State UNDECIDED Network State DiagnoseFunction DiagnoseFunction n 1 n Network Functions n Network Function CO Network Function Cnl FAILED f Netvork State FAILED 1 1 1 return Network State 1 int DiagnoseManager Manager struct MauagerStruct Manager C int n Manager State UNKNOWN C Manager State UNDECIDED Manager State DiagnoseFunction Hanager Function CO n 1 n Manager Functions n Manager Function Cull FAILED C DiagnoseFunction Manager State FAILED return Manager State reads state sensor reading DiaguoseFuuction performs diagnostic First continued conditions function normal search current branch skipped monitor array corresponds If value unknown failed search function object search int DiagnoseFmction struct FunctixiStruct l Function Function int n Function State Monitor CFunction Nol Function State WORKING kk Function Conditions 0 n 11 II c Function Conditions n I DiagnoseCondition Function Condition nil FAILED Function State FAILED 1 1 return Function State 1 It simply propagates search downwards goal search condition t DiagnoseCondition performs diagnostic object int DiagnoseCondition struct ConditionStruct Condition Condition Condition State DiagnoseCoal Condition State return Condition Goal 1 88 JE LarssonArttjkial Intelligence 80 1996 2993 Acknowledgements I like thank supervisor professor Karl Johan astrom originator MFM professor Morten Lind Doctor KarlErik zn inspiration support This project influenced Swedish IT4 project KnowledgeBased Real Time Control Systems I wish thank members project group The project supported IT4 project 3403 TFR project 92956 The Guardian project taking place Stanford University I like thank Doctor Barbara HayesRoth staff Knowledge Systems Laboratory valuable help support The postdoctoral visit supported grants Swedish Research Council Engineering Sciences Swedish Institute Royal Physiographic Society Lund Nils Hiirjel Research Fund Lund Institute Technology Finally I like thank anonymous referees constructive suggestions helped clarify paper References I DJ Allen MSM Rao New algorithms synthesis analysis fault trees Ind Eng Chem Fund 19 1980 7985 2 GA Ahy T Sztanb Checking correction measurements basis linear model Problems Control Inf Theory 4 1975 5769 131 KE Arzen Knowledgebased control systems aspects unification conventional control systems knowledgebased systems Proceedings 1989 American Control Conference Pittsburgh PA 1989 4 KE zn Knowledgebased control systems Proceedings 1990 American Control Conference San Diego CA 1990 51 KE zi A modelbased control concept Tech Rept TPRT3213 Department Automatic Control Lund Institute Technology Lund 1992 6 KE Arzen C Rytoft C Gerding A knowledgebased control concept Proceedings ESS 90 Intelligent Process Control Design Ghent 1990 7 Asea Brown Boveri SattControl TeleLogic Department Automatic Control Lund Institute Technology Lund KnowledgeBased RealTime Control SystemsIT4 Feasibility Study Studentlitteratur 1988 8 Asea Brown Boveri SattControl Department Automatic Control Lund Institute Technology Lund KnowledgeBased RealTime Control Systems IT4 Project Phase 1 Studenthtteratur 1990 9 Asea Brown Boveri Department Automatic Control Lund Institute Technology Lund KnowledgeBased Real7ime Control SystemsIT4 Project Phase 2 Studentlitteratur 199 1 lo M Boddy T Dean Solving time dependent planning problems Proceedings IJCAI89 Detroit MI 1989 979984 111 T Businaro A Di Lorenzo GB Meo MI Rabbani E Rubino An application MPhI method nuclear plant state identification Proceedings Enl Halden Progr Group Meeting Computerized ManMachine Communication Goteborg 1985 121 A Cheruy R Montellano MP Bemier Computeraided design modeling biotechnical processes P Breedveld et al eds Modeling Simulation Systems Baltzer Basel Switzerland 1989 235237 131 DT Chung M Modanes GGTRES expert fault detection analysis Reliability Eng System Safety 24 1989 113137 141 COGSYS COGSYS Manual COGSYS Ltd Salford 1990 LE LarssonArtifcial Intelligence 80 1996 2993 89 I1 51 A Crespo JL Navarro R Viv6 A Espinosa A Garcia A realtime expert process control Proceedings 3rd IFAC International Workshop Artificial Intelligence RealTime Control Sonoma CA 1991 116 1 A Crespo JL Navarro R Viv6 A Garcia A Espinosa RIGAS expert server task reallime environments Proceedings 1992 IFACIFIPIMACS International Symposium Artificial Intelligence Reallime Control Delft 1992 631636 171 J Creutzfeldt Sensorvalidering alarmbehandling og fejldiagnose storm processanheg Sensor validation alarm analysis fault diagnosis large processes PhD Thesis preliminary status report Institute Automatic Control Systems Technical University Denmark Lyngby 1990 181 R Davis Diagnostic reasoning based structure behavior Artif Intell 24 1984 347410 191 R Davis W Hamscher Modelbased reasoning troubleshooting H Shrohe ed Exploring Artifcial Intelligence Morgan Kaufmann San Mateo CA 1988 297346 20 MK De JA Rumancik AJ Impink JR Easter A functional design approach PWR safety Proceedings International Meeting Thermal Nuclear Reactor Safety Chicago IL 1982 211 T Dean M Boddy An analysis time dependent planning Proceedings AAAI88 St Paul MN 1988 4954 22 1 D CeCoste Dynamic acrosstime measurement interpretation Artif Intell 51 199 1 273341 23 KD Duncan N Prretorius Flow displays representing complex plant Diagnosis process control Proceedings 2nd European Meeting Cognitive Science Approaches Process Control Siena 1989 24 J Duschek Syntax analysis modeling languages knowledgebased modeling Masters Thesis Institute Automatic Control Systems Technical University Denmark Lyngby 1991 1251 DL Dvorak Monitoring diagnosis continuous dynamic systems semiquantitative simulation Doctors Dissertation AI 92170 Artificial Intelligence Laboratory University Texas Austin Austin TX 1992 261 DL Dvorak B Kuipers Process monitoring diagnosis IEEE Expert June 1991 6774 1271 M Farza A Chtruy CAMBIO software modeling simulation bioprocesses Comput Appl Biosci 7 1991 327336 28 RE Fikes NJ Nilsson STRIPS new approach application theorem proving problem solving Artif Intell 2 1971 189208 291 FE Finch Automated fault diagnosis chemical process plants modelbased reasoning Doctors Thetis Massachusetts Institute Technology Cambridge MA 1989 301 KD Forbus A qualitative process theory Arttf Intell 24 1984 85168 1311 KD Forbus Qualitative physics present future H Shrobe ed Exploring Artificial Intelligence Morgan Kaufmann San Mateo CA 1988 239296 1321 PM Frank Fault diagnosis dynamic systems analytical knowledgebased redundancya survey new results Automatica 26 1990 459474 33 PM Frank Enhancement robustness observerbased fault detection Proceedings IFAUIMACS Symposium SAFEPROCESS 91 BdenBaden 1991 275287 341 PM Frank Robust modelbased fault detection dynamic systems Proceedings IFAC Symposium OnLine Fault Detection Supervision Chemical Process Industries Newark DE 1992 1351 R Greiner BA Smith RW Wilkerson A correction algorithm Reiters theory diagnosis Arttf Intell 41 1989 7988 361 W Hamscher Modeling digital circuits troubleshooting Artif Intell 51 1991 223271 1371 W Hamscher L Console J Kleer eds Readings ModelBased Diagnosis Morgan Kau Fmann San Mateo CA 1992 38 1 B HayesRoth A blackboard architecture control Art Intell 26 1985 25 l321 39 B HayesRoth Architectural foundations realtime performance intelligent agents Real lime syst 2 l2 1990 40 B HayesRoth R Washington D Ash R Hewett A Collinot A Vitia A Seiver Guardian prototype intelligent agent intensivecare monitoring Art Intell Medicine 4 1992 165185 1411 R Hewett ICE Manual BBl Internal Report Knowledge Systems Laboratory Stanford CA 1990 90 JE LarssonArtcial Intelligence 80 19 2993 42 DM Himmelblau Interval analysis tool data rectification Proceedings AIChE Annual Meeting Houston TX 1987 1431 R Isermann Process fault detection based modeling estimation methodsa survey Automatica 20 1964 387404 44 R Jager Direct realtime control knowledgebased techniques Proceedings ESS 90 Intelligent Process Control Design Ghent 45 SS Jorgensen Generic MFM models 1990 use fault diagnosis ship systems machinery PhD Thesis Institute Automatic Control Systems Technical University Denmark Lyngby 1993 461 D Karnopp R Rosenberg System Dynamics A lJned Approach Wiley New York 1975 tree models knowledgebase 47 goal treesuccess IS Kim M Modarres Application operator advisory systems Nuclear Eng Design 104 1987 678 1 148 J J KjrerHansen Decision structures multiagent systems PhD Thesis Institute Automatic Control Systems Technical University Denmark Lyngby 1992 49 J Kleer How circuits work Arttf Intell 24 1984 205280 SO J Kleer An assumptionbased 1511 J Kleer Extending 521 J Kr Focusing probable diagnoses Proceedings AAAI91 Anaheim CA 1991 842848 53 J Kleer JS Brown A qualitative physics based confluences Artif Intell 24 1984 783 54 J Kleer BC Williams Diagnosing multiple faults Artif Intell 32 1987 97130 551 AJ Krijgsman ATMS Arttf Intell 28 1986 163196 Preprints 1992 IFAClFIPlMACS TMS Artif Intell 28 1986 127162 R Jager DICE realtime toolbox International Symposium Articial Intelligence Reallime Control Delft 1992 637641 1561 AJ Krijgsman R Jager HB Verbruggen PM Bruijn DICE framework realtime intelligent Proceedings 3rd IFAC International Workshop Artificial Intelligence Real7ime Control control Sonoma CA 1991 571 AJ Krijgsman HB Verbruggen PM Bmijn EGM Holweg DICE realtime intelligent control environment 1581 BJ Kuippers Commonsense Proceedings ESS 90 Intelligent Process Control Design Ghent 1990 reasoning causality deriving behavior structure Artif Intell 24 1984 169204 59 BJ Kuippers Qualitative 601 BJ Kuippers Qualitative 25 1989 571585 simulation Artif Intell 29 1986 289338 reasoning modeling simulation incomplete knowledge Automatica 611 MN Larsen Strips planning method abstractions MFM modeling Tech Rept Institute Automatic Control Systems Technical University Denmark Lyngby 1990 62 MN Larsen Modeling startup tasks functional models Final Rept Project 49379208ED ISP DK CRC JSP Ispra 1993 63 JE Larsson A knowledgebased control concept Monitoring Controlling Aseptic Processing The Swedish Institute Technology Lund 1990 Workshop Methods Measuring Food Research Lund Institute 641 JE Larsson Modelbased alarm analysis MFM Proceedings 3rd IFAC International Workshop Artificial Intelligence RealTime Control Sonoma CA 1991 651 JE Larsson Modelbased measurement validation MFM Proceedings IFAC Symposium OnLine Fault Detection Supervision Chemical Process Industries Newark DE 1992 66 JE Larsson Modelbased fault diagnosis MFM Proceedings IFAC Symposium OnLine Fault Detection Supervision Chemical Process Industries Newark DE 1992 67 JE Larsson Knowledgebased methods control systems Doctors thesis TFRT1040 Department Automatic Control Lund Institute Technology Lund 1992 68 JE Larsson An MFM toolbox Tech Rept TFRT7493 Department Automatic Control Lund Institute Technology Lund 1992 69 JE Larsson Hyperfast algorithms Symposium ComputerAided Control System Design Tucson modelbased diagnosis 1994 Proceedings IEEUIFAC Joint 70 EP Lees Process alarm disturbance analysis review state art Comput Chemical Eng 7 6 1983 7 I M Lind The use flow models design plant operating procedures IWGAVPPCI Specialists Meeting Procedures Systems Assisting Operator During Normal Anomalous Nuclear Power Plant Operation Garching 1979 JE LurssonArtificial Intelligence 80 I 996 2993 91 721 M Lind Humanmachine interface diagnosis based multilevel flow modeling Proceedings 2nd European Meeting Cognitive Science Approaches Process Control Siena 1989 73 M lind Representing goals functions complex systemsan introduction multilevel flow lnstitute Automatic Control Systems Technical University modseling Tech Rept 90D38 Denmark Lyngby 1990 74 M Lind Abstractions version ldescriptions classes use Tech Rept 90D380 Institute Automatic Control Systems Technical University Denmark Lyngby 1990 1751 M lind An architecture realtime MFM diagnosis Tech Rept Institute Automatic Control Systems Technical University Denmark Lyngby 1990 76 M Lind Abstractions modeling diagnostic strategies Proceedings IEAC Workshop Computer Software Integrating ABKBS Systems Process Control Bergen 1991 771 M Lind On modeling diagnostic tasks Proceedings Third European Conference Cognitive Science Approaches Process Control Cardiff 1991 78 M Lind A categorization models application analysis planning knowledge Proceedings POST ANP 92 Conference Human Cognitive Cooperative Activities Advanced Technological Systems Kyoto 1992 79 M Lind Functional architectures systems management control Interactive planning ISP DK integrated supervision control complex plant Final Rept Project 49379208ED CEC JRC Ispra 1993 SO M ILind Modeling goals functions complex industrial plants Appl Arts Intell 8 1994 259283 18 1 M Lind E Harder H Jensen S Agger Systembeskrivelse og prsentation proceskontrol System representation presentation process control SIP project Tech Rept Institute Automatic Conltrol Systems Technical University Denmark Lyngby 1987 821 RSH Mah Chemical Process Structures Information Flows Butterworths Boston MA 1990 83 RSH Mah GM Stanley DM Downing Reconciliation rectification process flow inventory data I EC Prac Des Dev 15 1976 175183 841 RSH Mah AC Tamhane Detection gross errors process data AIChE I 28 1982 828830 85 0 Mnrifio E Rechenmann I Uvietta Multiple perspectives classification mechanism objectoriented representation Proceedings ECAI90 Stockholm 1990 425430 861 M Modarres T Cadman A method alarm analysis process plants Comput Chemical Eng 10 1986 557565 87 K Monta J Takizawa Y Hattori T Hayashi N Sato J Itoh A Sakuma E Yoshikawa An intelligent manmachine BWR nuclear power plants Proceedings AI91Frontiers Innovative Computing Nuclear Industry Jackson WY 1991 88 R Montellano MI Bemier A Cheruy M Farza A knowledgebased modeling control biotechnological processes Preprints ofthe 1990 IFAC World Conference Tallinn 1990 5458 89 RL Moore LB Hawkinson M Levin AG Hoffmann BL Matthews MH David Expert methodology realtime process control Proceedings IOth IFAC World Congress Vol 6 Munchen 1987 27428 1 901 RL Moore H Rosenof G Stanley Process control realtime expert Proceedings I Ith Triennial IFAC World Congress 1990 Tallinn 1991 241245 9 11 JL Murdock B HayesRoth Intelligent monitoring control semiconductor manufacturing equipment IEEE Expert December 199 1 193 1 92 HT Ng Modelbased multiplefault diagnosis dynamic continuous physical devices IEEE Expert December 1991 3843 93 A Nilsson Qualitative modelbased diagnosisMIDAS G2 Masters Thesis TFRT5443 Department Automatic Control Lund Institute Technology Lund 1991 94 A man The interface substrate Tech Rept Institute Automatic Control Systems Technical University Denmark Lyngby 1990 95 A IDsman Graphical control environment Grace PhD Thesis Institute Automatic Control Systems Technical University Denmark Lyngby 1992 92 JE IarssonArtial Intelligence 80 1996 2993 96 00 Oyeleye Qualitative modeling continuous chemical processes applications fault diagnosis Doctors Thesis Massachusetts Institute Technology Cambridge MA 1989 1971 S Padalkar G Karsai C Biegl J Sztipanovits K Okuda N Miyasaka Realtime fault diagnosis IEEE Expert June 1991 7585 98 1 HM Paynter Analysis Design Engineering Systems MIT Press Cambridge MA 1961 991 TF Petti Using mathematical models knowledgebased control systems PhD Dissertation University Delaware Newark DE 1992 1001 TF Petti PS Dhurjati Objectbased automated fault diagnosis Chemical Eng Commun 102 1991 107126 1 101 TX Petti J Klein PS Dhurjati Diagnostic model processor deep knowledge process fault diagnosis AIChE I 36 1990 565575 1021 J Rasmussen Information Processing Human Machine Interaction An Approach Cognitive Engineering NorthHolland New York 1986 1031 J Rasmussen LP Goodstein Information technology work M Helander ed Handbook HumanComputer Interaction NorthHolland New York 1988 1041 J Rasmussen M Lind Coping complexity Tech Rept Risg National Laboratory Roskilde 1981 1051 R van den Ree H Koppelaar EJH Kerckhoffs Knowledge management process modeling Engineering systems intelligence concepts tools applications Proceedings European Robotics Intelligent Systems Conference Kluwer Academic Publishers Dordrecht 199 1 8390 1061 R van den Ree H Koppelaar EJH Kerckhoffs Proposal process modeling Proceedings IMACS MCTS 91 Modeling Control Technological Systems LilJe 1991 732737 1071 R Reiter A theory diagnosis principles Artif Intell 32 1987 5796 1081 JMA Sassen Design issues human operator support systems Doctors Thesis Faculty Mechanical Engineering Marine Technology Laboratory Measurement Control Delft University Technology Delft 1993 1091 JMA Sassen RBM Jaspers Designing realtime knowledgebased systems PERFECT Preprints 1992 IFACIFlPIMACS International Symposium Arttficial Intelligence Realime Confrol Delft 1992 625630 1 lo JMA Sassen A Ollongren RBM Jaspers Predicting improving responsetimes PERFECT models Preprints 1992 IFACIFIPIMACS Internanonal Symposium Artificial Intelligence RealTime Confrol Delft 1992 709714 JMA Sassen PC Riedijk RBM Jaspers Using multilevel flow models fault diagnosis industrial processes Proceedings 3rd European Conference Cognitive Science Approaches Process Control Cardiff 1991 207216 Ill 1121 EH Shortliffe Computer Based Medical Consultations MYCIN NorthHolland New York 1976 1131 P Struss Multiple representation structure function J Gero ed Expert Systems Computer Aided Design NorthHolland New York 1987 1141 P Struss Diagnosis process W Hamscher L Console J Kleer eds Readings ModelBased Diagnosis Morgan Kaufmann San Mateo CA 1992 1151 P Struss Whats SD Towards theory modeling diagnosis W Hamscher L Console J Kleer eds Readings ModelBased Diagnosis Morgan Kaufmann San Mateo CA 1992 Ill61 GJ Sussman GL Steele Constraints language expressing almosthierarchical descriptions Arttf Intell 14 1980 I40 1171 VJ Terpstra HB Verbruggen PM Bruijn Integrating information processing knowledge representation objectoriented way Proceedings Workshop Computer Software Structures Integrating AUKBS Systems Process Control Bergen 1991 1929 1181 VJ Terpstra HB Verbruggen MW Hoogland RAE Ficke A realtime fuzzy deepknowledge based fault diagnosis CSTR Proceedings IFAC Symposium OnLine Fault Detection Supervision Chemical Process Industries University Delaware Newark DE 1992 1191 JU Thoma Introduction Bond Graphs Their Applications Pergamon New York 1975 1201 S Tomita KS Hwang E OShima C McGreavy Automatic syntheziser operating procedures chemical plant use fragmentary knowledge J Chemical Eng Japan 22 1989 364372 JE LurssonArrificial Intelligence 80 19 2993 93 1211 S Tomita H Yuhki M Mohri T Sawa E OShima Development batch process operating Proceedings 3rd World Congress Chemical Engineering Tokyo 1986 1221 P Torasso L Console Diagnostic Problem Solving North Oxford Academic Kogan Page Ltd London 1989 1231 A Viaa B HayesRoth Knowledgebased realtime control use abstraction satisfy deadlines Proceedings 3rd IFAC International Workshop Artificial Intelligence RealTime Control Sonoma CA 199 1 1241 JA Walseth Diagnostic reasoning continuous systems PhD Thesis ITKrappolt 1993 164W Divisicn Engineering Cybernetics Norwegian Institute Technology Trondheim 1993 125 JA Walseth BA Foss M Lind 0 CEgaard Models diagnosisapplication fertilizer plant Proceedings IFAC Symposium OnLine Fault Detection Supervision Chemical Process Industries University Delaware Newark DE 1992 1261 DS Weld J Kleer eds Readings Qualitative Reasoning Physical Systems Morgan Kaufmann San Mateo CA 1990 1271 EA Woods The hybrid phenomena theory J Mylopoulos R Reiter eds Proceedings IJCAI 91 Sydney NSW Morgan Kaufmann San Mateo CA 1991 1281 EA Woods The hybrid phenomena theory PhD Thesis Institute Engineering Cybernetics Technical University Norway Trondheim 1993 1291 EA Woods JG Balchen Structural estimation hybrid phenomena theory PreprinB 3rd IFAC International Workshop Artijicial Intelligence Reallime Conlrol Sonoma CA 199ll