Artiﬁcial Intelligence 249 2017 1946 Contents lists available ScienceDirect Artiﬁcial Intelligence wwwelseviercomlocateartint Constrained coalition formation valuation structures Formal framework applications islands tractability Gianluigi Greco Department Mathematics Computer Science University Calabria Italy b DIMES Department University Calabria Italy Antonella Guzzo b r t c l e n f o b s t r c t Article history Received 20 September 2016 Received revised form 5 April 2017 Accepted 17 April 2017 Available online 21 April 2017 Keywords Coalitional games Solution concepts Computational complexity Treewidth Marginal contribution networks Coalition structure generation problem partitioning agents given environment disjoint exhaustive coalitions available worth maximized While problem classically studied settings coalitions allowed form recently reconsidered literature moving observation environments forbid formation certain coalitions By following perspective model coalition structure generation proposed constraints different kinds expressed simultaneously Indeed model based concept valuation structure consists set pivotal agents pairwise incompatible plus interaction graph prescribing coalition C form subgraph induced nodesagents C connected It shown valuation structures model number relevant problems arising realworld application domains Then complexity coalition structure generation valuation structures studied assuming functions associating coalition worth given input according compact encoding explicitly listing exponentiallymany associations In particular islands tractability identiﬁed based topological properties underlying interaction graphs suitable algebraic properties given worth functions Finally stability issues valuation structures studied considering core prototypical solution concept 2017 Elsevier BV All rights reserved 1 Introduction 11 Constrained coalition structure generation Coalition structure generation fundamental problem study coalition formation processes multiagent systems naturally occurs agents beneﬁt form working forming coalitions 5931 The problem deﬁned pair cid3N vcid4 referred coalitional game N a1 set agents v valuation function coalition C nonempty set C N agents returns real number vC meant express worth members C jointly achieve cooperating 7153 The goal ﬁnd Corresponding author Email addresses ggrecomatunicalit G Greco antonellaguzzounicalit A Guzzo httpdxdoiorg101016jartint201704005 00043702 2017 Elsevier BV All rights reserved 20 G Greco A Guzzo Artiﬁcial Intelligence 249 2017 1946 Fig 1 Interaction graph Example 12 optimal coalition structures basic setting left a1 a2 pivotal agents right optimal coalition structure partition C1 Ck agents disjoint exhaustive coalitions total value cid2 k i1 vCi maximized Example 11 Consider coalitional game cid3N vcid4 N a1 a2 a3 v valuation function va3 0 va1 va2 va2 a3 va1 a3 1 va1 a2 va1 a2 a3 3 Note optimal coalition structures a1 a2 a3 a1 a2 a3 Their associated value va1 a2 a3 va1 a2 va3 3 cid2 While coalition structure generation classically studied literature assuming coalitions allowed form realworld applications case coalition structures inadmissible violate number constraints induced speciﬁc semantics application hand 59 Constraints coalition structures allowed naturally emerge settings cooperation guided underlying structure reﬂecting instance physical limitation legal banishments social relationships In cases natural assume disconnected agents connected intermediaries given coalition able cooperate In particular following Myersons inﬂuential work 51 intuition formalized 15709 equipping coalitional game cid3N vcid4 undirected graph G N E called interaction graph deﬁned set agents considering coalition C feasible subgraph G induced nodes C connected In fact addition topological constraints induced underlying interaction graphs kinds straints occur concrete domains dealing coalition structure generation problem For instance formation certain coalitions prohibited antitrust laws subject constraints coalition sizes Settings kind studied literature 266556 general unifying framework works proposed 58 In framework coalitional game equipped sets N P negative positive constraints respectively A negative constraint n N set agents prescribes coalition C C n formed Positive constraints formalized set agents prescribe feasible coalition C exist constraint p P C p As matter fact framework 58 support deﬁnition interaction graphs despite generality simulate topological constraints induced Example 12 Consider setting Example 11 interaction graph reported left Fig 1 Note instance coalition a1 a3 allowed form Then claim simple scenario modeled positive negative constraints Indeed negative constraint n a1 a3 considered coalition a1 a2 a3 feasible precisely n More generally feasibility a1 a2 a3 monotone semantics negative constraints negative constraint deﬁned Consider use positive constraints We know a1 feasible occur positive constraint However absence negative constraints immediately entails a1 a3 feasible cid2 As matter fact topological constraints positivenegative constraints separate worlds far In paper observation propose study setting coalition structure generation based concept valuation structure basically consists interaction graph associated certain kinds negative constraints In nutshell set S pairwise incompatible pivotal agents deﬁned coalition C satisfy condition S C 1 order feasible Indeed note equivalent having negative constraint S subset S cid10 S S cid10 2 cid10 Example 13 Assume a1 a2 pivotal agents setting Example 11 Then feasible coalitions reduced a1 a2 a3 a2 a3 coalitions a1 a2 a3 a1 a2 longer allowed form In scenario graphically illustrated right Fig 1 optimal coalition structure a1 a2 a3 associated value a2 Hence incompatibility a1 a2 leads reduce total available worth cid2 G Greco A Guzzo Artiﬁcial Intelligence 249 2017 1946 21 12 Contribution The intuition underlying formalization pivotal agents S possess speciﬁc properties differentiating remaining agents N S As extreme case pivotal agent abstraction given parameterobject involved problem necessarily true agent For instance S model set competing facilities agents N S connected In fact starting point analysis 1 We deﬁne framework equipping coalitional games valuation structures constraints induced pivotal agents combined underlying interaction graphs capable expressing number relevant problems arising number real application scenarios Motivated relevance knowledge representation viewpoint paper embarks systematic study algorithmic complexity issues arising Prior detailing technical contributions appropriate recall extensive literature studying computational issues proposing eﬃcient solution algorithms coalition structure generation partition groups based kinds game encoding considered research Classically valuation functions viewed black boxes input coalition C return value vC In partic ular encoding representation issues taken account In context exact solution approaches algorithms worst case guarantee proposed 622257605066 heuristic methods deﬁned 644665 Orthogonally approaches moving observation naive encoding based explicitly listing possible coalitions attached associated valuations require exponential space efforts spent deﬁne methods representing valuation functions coalitional games concisely Then coalition structure generation eﬃciently solved applying optimization techniques compact representation directly 52 In particular algorithmic complexity results derived number wellknown compact representations cluding marginal contribution networks 4352 games synergy coalition groups 1752 coalitional skill games 5 games agenttype representations 267 weighted voting games 29 graph games 2724 Our analysis results positioned group works Indeed study number computational problems related coalition formation presence valuation structures assuming coalitional games provided input according compact encoding In fact absence valuation structures wellknown coalition structure generation NPhard number compact encodings including simple ones graph games 24 Surprisingly precise complexity problem pointed earlier literature Our ﬁrst technical result address research question Indeed 2 We coalition structure generation complete polynomial time closure NP formally com plexity class Fcid2P 2 48 The membership result derived independently speciﬁc game encoding hardness shown hold graph games absence valuation structures coalitions allowed form ii valuation structures underlying graphs acyclic simple forms cooperation emerge Motivated bad news particular focusing setting ii look class valuation functions independent disconnected members short IDM agents effect marginal contribution separator1 wrt underlying interaction graph 69 Indeed absence valuation structures coalition structure generation known 69 tractable IDM functions acyclic interaction graphs generally graphs having bounded treewidth 61 The question result extended general setting constraints coalitions allowed form expressed valuation structures This time answer good news 3 First IDM functions deﬁned interaction graphs bounded treewidth encoded poly nomial time equivalent marginal contribution networks 43 bounded treewidth vice versa This interesting marginal contribution networks encoding generalizes graph games capable expressing valuation function general price exponential blowup size representa tion cf 43 Moreover note IDM functions deﬁne class functions terms algebraic topological properties Hence result interesting algebraically characterizes wellknown inﬂuential represen tation scheme coalitional games allows smoothly extend scheme results derived IDM functions vice versawhen focusing bounded treewidth instances 1 Formally pair j agents directly connected graph C N j C holds vC vC vC j vC j 22 G Greco A Guzzo Artiﬁcial Intelligence 249 2017 1946 4 Then generalize tractability result IDM functions graphs having bounded treewidth 69 case valuation structures considered Founding correspondence discussed point 3 result obtained recasting coalition structure generation marginal contribution networks constraint satisfaction problem CSP subsequently structural decomposition methods CSP instances 363541 The approach uses novel ideas methods reused application domains Moreover easily extended deal valuation structures presence arbitrary positive negative constraints explicitly provided input The careful reader note alternative approaches use encoding monadic secondorder logic subsequently applying generalizations Courcelles theorem tailored opti mization problems 1 use general methods solve combinatorial problems graphs having bounded treewidth dynamic programming 10 However approaches asked restrict values returned valuation functions given unary given interaction graphs bounded degree 5 In addition results hold IDM functions functions derived IDM ones aﬃne transformationswhose speciﬁcation allowed additional feature formal deﬁnition valuation structure Consider instance setting order leave grandcoalition N splitting cost c cid10C vC c paid In case obtain adjusted valuation function v cid10N vN In particular note transformed functions longer IDM ones speciﬁc C N v solution approaches required deal v cid10 Finally order provide comprehensive picture complexity issues arising valuation structures complement research addressing fundamental problem coalitional games determine worth obtained forming optimal coalition structure distributed agents way stable 53 In particular 6 We consider wellknown concept core position setting Then corerelated problems solved polynomial time classes IDM valuation functions graphs having bounded treewidth presence valuation structures Results derived application methods developed deal coalition structure generation setting 13 Organization The rest paper organized follows Section 2 formalizes concept valuation structure illustrates applications The coalition structure generation problem valuation structures deﬁned Section 3 basic complexity results derived Islands tractability singled Section 4 Section 5 illustrates specializations application scenarios previously pointed Stability issues studied Section 6 ﬁnal remarks reported Section 7 2 Coalition structure generation revisited In section propose extension coalition structure generation problem optimization functions general maximization social welfare allowed qualitative constraints coalition structures expressed The extension based concept valuation structure ﬁrst discussed subsequently exempliﬁed number concrete applications2 21 Valuation structures syntax semantics Let cid2 cid3N vcid4 coalitional game Intuitively concept valuation structure going deﬁne cid2 plays role model certain kinds constraints coalitions allowed form plus aﬃne transformation basic valuation function v In particular feature paper N v fully characterize coalitional game conventional sense suﬃce coalitional values extended setting Let G N E undirected graph called interaction graph nodes agents N Edges viewed sets nodes e E e N e 2 hold Let S N possiblyempty set agents called pivotal agents Let α β S cid13 R realvalued functions let x y R real numbers3 Then tuple σ cid3G S α β x ycid4 called valuation structure cid3N vcid4 The semantics σ illustrated The role interaction graph G constrain formation coalitions based connectivity properties nonempty set C agents called coalition allowed form subgraph induced nodes C connected Moreover like forbid formation coalition C containing pivotal agent 2 A table summarizing main notation introduce order deal valuation structures reported Appendix A 3 As usual moving complexity analysis numbers restricted rational ones given fractional form G Greco A Guzzo Artiﬁcial Intelligence 249 2017 1946 23 Fig 2 Coalitional game Example 21 b c Coalition structures Example 23 C allowed C S 1 Whenever connectivity pivotal conditions satisﬁed C C σ feasible The set σ feasible coalitions game cid2 denoted Fσ cid2 Example 21 Consider coalitional game ˆcid2 ˆN ˆv ˆN a1 a7 Moreover consider valuation structure ˆσ cid3 ˆG a1 a2 ˆα ˆβ ˆx ˆycid4 ˆG interaction graph depicted Fig 2a Then C1 a1 a3 C2 a5 a6 a7 ˆσ feasible coalitions Instead a1 a2 ˆσ feasible contains pivotal agents a5 a7 ˆσ feasible subgraph ˆG induced coalition connected cid2 The functions α β real numbers x y deﬁne aﬃne transformation valσ valuation function v Formally C Fσ cid2 σ feasible coalition deﬁne σ value follows cid6 valσ v C αai vC βai x vC y ai C S C S If v understood context write valσ C place valσ v C cid2 Example 22 Consider setting Example 21 graph ˆG ˆN ˆE Fig 2a Note edge e ˆE equipped weight R instance wa1a3 1 wa1a2 24 Moreover assume valuation function ˆv C ˆσ feasible coalition value ˆvC deﬁned sum weights edges covered C ˆvC e ˆEeC For instance coalitions C1 a1 a3 C2 a5 a6 a7 presented Example 21 ˆvC1 wa1a3 1 ˆvC2 wa5a6 wa6a7 1 1 2 Recall ˆσ cid3 ˆG a1 a2 ˆα ˆβ ˆx ˆycid4 given valuation structure Assume ˆα a1 a2 cid13 1 ˆβ a1 a2 cid13 0 constant functions domain a1 a2 pivotal agents ˆx 0 ˆy 12 Then val ˆσ C1 1 ˆvC1 0 1 val ˆσ C2 0 ˆvC2 12 12 More generally ˆσ feasible coalition include pivotal agent gets 12 ﬁnal ˆσ value Instead ˆσ value ˆσ feasible coalition C containing precisely pivotal agents given expression cid2 e ˆEeC cid2 A σ feasible coalition structure cid2 set cid6 C1 Ck σ feasible coalitions C1 Ck N Ci C j pair j 1 k cid16 j The set possible coalition structures denoted CS σ cid2 Note CSσ cid2 cid16 singleton coalition σ feasible ai Fσ cid2 holds ai N For cid6 CSσ cid2 slightly abusing notation deﬁne valσ v cid6 shortly valσ cid6 valuation function v Ccid6 valσ v C called σ value cid6 Moreover denote optσ cid2 clearly understood value maximum σ value attained possible σ feasible coalition structures A coalition structure cid6 CSσ cid2 valσ cid6 optσ cid2 said σ optimal cid2 set σ optimal coalition structures denoted CSoptσ cid2 cid2 Example 23 In setting Example 21 Example 22 clearly emerges suboptimal form coalition including pivotal agents Therefore ˆσ optimal coalition structures necessarily form A1 A2 A1 A2 a1 A1 a2 A2 A1 A2 ˆN Note A1 A2 ˆσ feasible subgraph ˆG induced Ai 1 2 connected As example Fig 2b illustrates ˆσ feasible coalition structure a1 a3 a2 a4 a5 a6 a7 associated ˆσ value 1 6 7 In fact ˆσ optimal ˆσ value a1 a3 a4 a5 a2 a6 a7 7 2 9see Fig 2c It checked coalition structure ˆσ optimal cid2 Note example pivotal agents deﬁned coalition structure consisting grand coalition ˆN optimal In particular scenario constraints provided interaction 4 Throughout paper exhibit exempliﬁcations discuss realworld application domains deﬁned graphs edges equipped weights As Example 22 weights succinctly deﬁne underlying valuation function spirit encoding graph games 27 24 G Greco A Guzzo Artiﬁcial Intelligence 249 2017 1946 graph immaterial sense ˆN optimal complete interaction graph pair agents connected place ˆG deﬁnition structure ˆσ In general case illustrated following example Example 24 Consider game cid2 cid3a1 a2 vcid4 va1 va2 0 va1 a2 1 Consider valuation structure σ cid3 G α β x ycid4 G a1 a2 Thus σ feasible coalitions singletons a1 a2 It follows precisely σ optimal coalition structure a1 a2 associated σ value 0 However graph a1 a2 connected place G optimal coalition structure a2 a2 So G provides true constraint wrt formation optimal coalition structures cid2 Actually looking critically example reader noticed setting artiﬁcial counterintuitive Indeed graph G tells directly beneﬁt cooperation a1 a2 v tells precisely opposite evidences synergy emerge cooperation In fact order study natural scenarios worth functions suitably reﬂect topological properties ex pressed underlying interaction graph concept valuation functions independent disconnected members introduced literature We recall 69 valuation function v independent disconnected members short IDM wrt interaction graph G agents ai j connected G coalition C ai j C following holds vC ai vC vC ai j vC j 1 Intuitively notion tells agents effect marginal contribution vertex separator In particular C1 C2 coalitions edges C1 C2 C2 C1 69 vC1 C2 vC1 vC2 vC1 C2 2 Note valuation function ˆv Example 21 IDM function wrt ˆG Moreover recall absence pivotal agents graph ˆG relaxed complete interaction graph It instructive point chance In order formally state result observe valuation structure cid3G α β x ycid4 compactly denoted cid3Gcid4 functions α β numbers x y play role Moreover C coalition necessarily cid3Gcid4feasible C1 Ck k 1 connected components subgraph G induced nodes C set C1 Ck denoted CG Theorem 25 Let cid2 cid3N vcid4 coalitional game let cid3G 1cid4 cid3G 2cid4 valuation structures cid2 G N E 1 2 E 1 E 2 Assume v IDM function wrt G 1 wrt G 2 Then 1 If cid62 cid3G 2cid4optimal 2 If cid61 cid3G 1cid4optimal cid61 cid3G 2cid4optimal Ccid62 CG 1 cid3G 1cid4optimal cid7 cid7 cid10 cid10cid10 cid10 C cid10 C N C cid10cid10 pair C Proof 1 Let cid62 cid3G 2cid4optimal coalition structure consider coalition structure cid61 CG 1 We claim Ccid62 cid10 cid10 CG 1 That C cid61 cid3G 1cid4feasible Indeed C set nodes connected component subgraph G 1 induced C So coalition cid61 satisﬁes connectedness condition enforced interaction graph G 1 Moreover construction cid61 immediate cid7 coalition cid61 coalition C cid62 C coalitions cid61 That cid61 cid3G 1cid4feasible coalition structure end let CG 1 set C1 Ck cid3G 1cid4feasible coalitions observe valcid3G 1cid4CG 1 cid2 k C cid10cid61 We claim valcid3G 2cid4cid62 valcid3G 1cid4cid61 In fact C cid62 valcid3G 2cid4C valcid3G 1cid4CG 1 holds To i1 valcid3G 1cid4Ci i1 vCi Then recall v IDM function wrt G 1 pair Ch C j CG 1 h cid16 j edge G 1 connecting node Ch node C j Ch C j precisely connected components subgraph G 1 induced nodes C Thus Equation 2 vCh C j vCh vC j Moreover observe C C1 Ck Hence entails vC i1 vCi Finally observe C cid3G 2cid4feasible valcid3G 2cid4C vC So valcid3G 2cid4cid62 valcid3G 1cid4cid61 Armed properties let assume sake contradiction cid61 cid3G 1cid4optimal let 1 cid3G 1cid4optimal coalition structure valcid3G 1cid4cid6cid10 1 1 valcid3G 2cid4cid62 holds However optimality 1 valcid3G 1cid4cid61 Therefore valcid3G 2cid4cid62 valcid3G 1cid4cid61 valcid3G 1cid4cid6cid10 cid6cid10 However cid6cid10 cid62 know valcid3G 2cid4cid62 valcid3G 2cid4cid6cid10 1 trivially cid3G 2cid4feasible valcid3G 2cid4cid6cid10 1 Contradiction 1 valcid3G 1cid4cid6cid10 cid2 k cid2 k 2 Assume cid61 cid3G 1cid4optimal coalition structure Hence cid61 cid3G 2cid4feasible valcid3G 1cid4cid61 valcid3G 2cid4cid61 Assume sake contradiction cid61 cid3G 2cid4optimal let cid62 cid3G 2cid4optimal coalition CG 1 cid3G 1cid4optimal inspection proof structure valcid3G 2cid4cid62 valcid3G 2cid4cid61 By point 1 cid7 Ccid62 G Greco A Guzzo Artiﬁcial Intelligence 249 2017 1946 25 Fig 3 Illustration examples Section 22 CG 1 valcid3G 2cid4cid62 Therefore valcid3G 1cid4 cid7 Ccid62 CG 1 valcid3G 1cid4cid61 impossible cid7 know valcid3G 1cid4 optimality cid61 cid3 Ccid62 22 Knowledge representation applications The concept σ optimal coalition structure illustrated section clearly general counterpart valuation structure σ considered Indeed given coalitional game cid2 cid3N vcid4 deﬁning cid3K N cid4 valuation structure K N complete interaction graph set N agents immediately check coalition S N feasible valv S vS holds Therefore results literature valuation structures considered Section 1 viewed results hold optimal coalition structures Our goal analyze arbitrary valuation structures start illustrating number application scenarios naturally ﬁt basic setting general Further applications discussed Section 6 In following denote suﬃciently large real number5 opposite Moreover real number c R denote cD realvalued function mapping element domain D constant cactually subscript hereinafter omitted notation D coinciding set pivotal agents set clearly understood context It worthwhile noticing tractability results shall provide paper instances having bounded treewidth immediately apply speciﬁc applications discussed cases allowing close tractability questions left open literatureas shall discuss Section 5 221 Application multicut problems In multicut problem given undirected graph G N E edge e E associated positive real number R weight e plus set P N N sourceterminal pairs A multicut set edges cid10 pairs P separated s t P path cid10 E graph N E E E cid10 connecting s t The goal ﬁnd multicut edges minimum total weight For P 1 N E E problem reduces famous mincutmaxﬂow problem central signiﬁcance combinatorial optimization known feasible polynomial time 47 In general problem NPhard number inapproximability results known 68 Example 26 Consider graph reported Fig 3a assume s1 t1 s2 t2 given set sourceterminal pairs Then solution multicut problem deﬁned inputs given multicut graphically illustrated ﬁgure Note total weight 1 1 2 4 cid2 In order encode multicut problem setting set N nodes transparently viewed set agents Moreover deﬁne graph G P N E P E P E s t s t P graph obtained G adding eE 1 s t P deﬁne v P function edge pair P Eventually let wst v P C sum weights edges subgraph G P induced coalition C Note v P C 0 holds C covers pair P cid2 5 For instance set N maxSFσ cid2 vS 26 G Greco A Guzzo Artiﬁcial Intelligence 249 2017 1946 Consider trivial valuation structure observe given deﬁnition v P clearly suboptimal form coalitions covering pairs P For instance example illustrated Fig 3a optimal coalition structure s1 r1 s2 r2 r3 t1 t2 Note coalition structure induced multicut minimum total weight This onetoone corresponds feasible coalition structure cid6 chance Indeed6 reduction multicut E cid10 e E C j cid6 e C j 1 valv P cid6 0 In particular note coalition structure cid3N v P cid4 E cid6 kind valv P cid6 ecid10Ecid10 wecid10 holds Therefore multicut minimum weight computed algorithms computing optimal coalition structures eE cid2 cid2 cid10 222 Application multiway cut problems Similarly multicut problem multiway cut problem takes input graph G N E edge e E equipped weight R set cid10 pair terminals T connected The goal ﬁnd multiway edges E cut edges minimum total weight For T 2 problem solvable polynomial time reduces mincut problem NPhard T 3 21 Moreover takes input set T N terminals A multiway cut E cid10 E graph N E E cid10 Example 27 Consider graph reported Fig 3a nodes t1 t2 s1 s2 treated terminals disconnected In order end multiway cut particular disconnect s2 t1 Fig 3b Note total weight cut 1 1 2 1 5 cid2 The multiway cut problem nicely ﬁts general setting Indeed ﬁrst deﬁne v mw function v mwC weight edges subgraph G induced C note case work original graph G Then consider valuation structure σmw cid3G T 1 0 1 0cid4 terminals play role pivotal agents Therefore σmwfeasible coalition structures naturally correspond multiway cuts viceversa Moreover note C N v mwC valσmw C That aﬃne transformation immaterial similarly case multicut problem valσmw v mw cid6 cut cid6 corresponding coali tion structure Putting multiway cut problem reduced computation σmwoptimal coalition structure ecid10Ecid10 wecid10 E eE cid2 cid2 cid10 23 Application kclustering Let consider framework correlation clustering proposed 6 We undirected graph G N E edge e E label cid7e A cluster C nonempty subset N subgraph G induced C connected7 A clustering partition N disjoint exhaustive clusters For cluster C N denote C e E e C 1 cid7e E C set negative intercluster edges end C Then correlation value C given v ccC E correlation value clustering cid6 sum correlation values clusters value Ccid6 v ccC The goal ﬁnd optimal clustering clustering having maximum correlation value C e E e C cid7e set positive intracluster edges E C E cid2 Example 28 Consider graph illustrated Fig 3c edge associated label It checked optimal correlation clustering given set C1 C2 C3 In particular note v ccC1 1 2 v ccC2 4 3 v ccC3 4 1 overall value clustering 3 6 5 14 cid2 Note basic correlation clustering framework number clusters apriori ﬁxed More recently extension framework studied number clusters stipulated small constant k 33 For instance case Fig 3c ﬁxing k 2 look bipartition graph connected components maximizing correlation valueinterestingly problem NPhard case 33 Accordingly single components C1 C2 C3 v ccC2 C3 11 In particular clustering C1 C2 C3 longer admissible consists 3 clusters In order accommodate kclustering problem setting need deﬁne suitable pivotal agents multiway cut problem use aﬃne transformation valuation function Formally set R N nodes consider valuation structure σR cid3G R 1 0 0 cid4 Intuitively according σR suboptimal form coalition include agent R σRfeasible coalition structure cid6 valσR v cc cid6 0 consists exactly R distinct coalitions R set pivotal agents R coalitions Moreover note set possible coalitions restricted feasible according graph G avoid clusters formed unconnected components Therefore cid6 clustering valσR v cc cid6 precisely value On hand immediate check cid6 clustering cid6 σRfeasible coalition structure 6 For sake readability omit highlevel discussion formal statements proofs related correctness encodings The formal treatment Appendix B 7 The connectivity condition necessary simpliﬁes presentation extension shall address G Greco A Guzzo Artiﬁcial Intelligence 249 2017 1946 27 set R including precisely element cluster cid6 Hence optimal kclustering computed coalition structure having maximum σRvalue σRoptimal coalition structures subset R N R k In particular k given ﬁxed constant 33 polynomially subsets R considered 24 Application chromatic partitioning In number graphbased applications different weights associated edge order express similarity linked nodesobjects wrt different semantics relationships The setting modeled assuming set C colors given graph G N E Each edge e E associated weights onetoone R weight e c Then deﬁne chromatic corresponding colors Accordingly denote wc e partition G set cid3C1 c1cid4 cid3Ch chcid4 C1 Ch partition N disjoint exhaustive coalitions c1 ch h distinct colors taken C The value element cid3Ci cicid4 sum weights e value partition sum values elements The ci edges covered C goal compute optimal chromatic partition Hence model reminiscent works simultaneously labeling partitioning 1220 references eEeCi wci cid2 Example 29 Consider graph illustrated Fig 3d We assume colors available Red Blue Each edge e ﬁgure associated expression form w Red reporting weight e RedBlue The ﬁgure reports chromatic partition R B overall value 5 It easy optimal chromatic partition cid2 e w Blue e e cid2 cid2 eEeS wc1 eEeNS wc1 Note C c1 chromatic partitioning immaterial possible outcome cid3N c1cid4 For C c1 c2 wc2 e e E Indeed case problem reduces computing problem intractable wc1 e set S N maximizing value e NPhard cf 27 Let encode chromatic partitioning setting Let GC denote graph N C E EC colors viewed nodes EC obtained including edge node N color C EC N C Intuitively nodes C play role pivotal agents proceed line encoding kclustering problem k C Accordingly consider valuation structure σch cid3GC C 1 0 0 cid4 In particular considering interaction graph GC coalition including node C trivially satisﬁes connectedness condition edges EC guaranteed optimal form σchfeasible coalition structures consisting k coalitions including distinct available k colors Wlog coalitions form C1 Ch Ch1 Ck Ci C 1 holds 1 h C j C holds j h 1 k In fact onetoone correspond chromatic partitions cid3C1 C1 Ccid4 cid3Ch Ch Ccid4 Therefore v ch valuation function set nodes C N C C C civ chC e holds solve chromatic partitioning computing σchoptimal coalition structure cid3N v chcid4 eEeC wci cid2 3 Coalition structure generation valuation structures An instance coalition structure generation problem valuation structures denoted following CSGval pair cid2 σ cid2 N v coalitional game σ cid3G S α β x ycid4 valuation structure cid2 The goal compute σ optimal coalition structure cid6 CSoptσ cid2 The problem generalizes valuation structure σ wellknown coalition structure generation problem short CSG special case trivial valuation structure considered Based observations Section 22 know CSGval number different concrete applications Here start formal analysis studying computational complexity want formally assess resources needed compute σ optimal coalition structure To carry analysis preliminary need adopt representation input We proceed follows A trivial representation cid2 list possible coalitions attached associated valuations requiring exponential space wrt N However compact encodings obtained cases 49452730 431714 Just think extreme case valuation function v vC 0 C N needs constant space represented Here commit speciﬁc representation strategy Rather following 39 assume representation R coalitional games deﬁnes functions ξ R encode class games denoted CR In particular coalitional game cid2 CR ξ Rcid2 Rξ Rcid2 C value associated coalition C according v We require value encoding cid2 v computed polynomial time wrt cid21cid2cid21 Moreover assume usual agents N listed ξ Rcid2 cid21ξ Rcid2cid21 N holds The encoding valuation structure σ cid3G S α β x ycid4 given encodings elements We assume α β represented explicitly listing entries case polynomially fact S entries assume standard encoding graph G terms adjacency matrix size cid21Gcid21 Eventually size σ denoted cid21σ cid21 v R 28 G Greco A Guzzo Artiﬁcial Intelligence 249 2017 1946 Fig 4 Example reduction formula ˆcid9 proof Theorem 32penalty edges depicted dashed lines 31 Complexity general case The complexity standard CSG problem studied literature shown NPhard speciﬁc kinds encodings considered particular coalitional games given graph games 69 Here recall according graphgame representation gg encoding ξ ggcid2 coalitional game cid2 cid3N vcid4 Cgg given terms graph N E edge e E equipped weight R In particular coalition C N value vC v ggξ ggcid2 C given sum weights edges covered agents C vC eCeE Note games considered far given representation Example 22 Section 221 Section 222 Moreover observe valuation functions games Cgg independent disconnected members wrt underlying weighted graphs deﬁned 69 cid2 The intractability CSG problem graph games immediately leads establish intractability general setting valuation structures possibly taken account Theorem 31 cf 27694 CSGval NPhard class Cgg Surprisingly precise complexity CSG problem pointed earlier literature In fact ﬁrst contribution problem slightly complex NPhard Indeed emerges complete class Fcid2P 2 consisting computation problems solved polynomial time possibly invoking time unitary cost oracle solves decision problem class NP The reader referred 544844 background notions complexity theory Note membership class Fcid2P 2 CSG problem recently shown literature 15 Inspection proof reveals smoothly extends presence valuation structures Accordingly focus showing Fcid2P 2 hardness Theorem 32 CSG CSGval Fcid2P 2 complete Hardness holds class Cgg Proof Let hardness Let cid9 c1 cm Boolean formula conjunctive normal form variables X1 Xn That 1 m ci disjunction literals literal variable X j negation X j Let s1 sm list positive weights associated corresponding clauses cid9 For possibly partial truth assignment τ weight deﬁned sum weights associated clauses satisﬁed τ Computing maximum possible weight associated assignment Fcid2P Based cid9 s1 sm build encoding ξ ggcid2 coalitional game cid2 cid3N vcid4 Cgg In particular ξ ggv 2 hard 48 graph N E equipped weights e E For clause ci literal L ci N includes literal nodeagent cid7Li Moreover N includes agent r agent N For pair cid7 X ji cid7 X ji ci E includes edge cid7Li cid7L edge E cid10 1 m cid16 variable X j occurring ci X j occurs cicid10 edge cid10 E Moreover clause ci 1 m pair distinct literals L L cid10 cid10i Finally E includes edge r cid7Li literal L clause ci cid10 Weights wrcid7Li si literal L occurring clause ci Moreover edge p q E r p q hereinafter called penalty edge wpq i1 si 1 E 1 cid2 n As example Fig 4 reports graph build formula ˆcid9 ˆc1 ˆc2 variables X1 X4 ˆc1 X1 X2 X3 ˆc2 X1 X2 X4 clauses associated weights s1 s2 respectively Note vS 0 holds singleton coalition S N S 1 Moreover arbitrary coalition S N vS 0 holds S cover penalty edge covering nonpenalty edge By construction conclude vS 0 following conditions satisﬁed C1 r S edge penalty covered G Greco A Guzzo Artiﬁcial Intelligence 249 2017 1946 29 C2 clause ci 1 m literal L ci cid7Li S literals deﬁne agents connected penalty edge C3 variable X j j 1 n pair indices literals deﬁne agents connected penalty edge cid10 1 m cid7 X ji cid7 X ji cid10 S Note cid6 optimal coalition structure CSoptcid2 valcid6 0 Now let cid11 0 real number Then claim feasible coalition structure cid6 CS cid2 valcid6 cid11 S N vS cid11 Assume cid6 CScid2 valcid6 cid11 By contradiction let S N coalition vS including S singleton coalition agent S cid11 Consider Then feasible coalition structure cid6 cid11 impossible valcid6 vS Assume S N vS cid11 By condition C1 coalitions S 1 S2 vS1 0 vS2 0 coalition structure CS cid2 valcid6 maxSN vS cid11 hold S1 S2 r Therefore cid6 holds Because result value optimal coalition structure precisely coincides maximum value associated coalition That max cid6CScid2 valcid6 max SN vS 3 To coalition S vS 0 associate possibly partial truth assignment τS X j evaluates true resp false τS cid7 X ji resp cid7 X ji occurs S 1 m Because condition C3 τS welldeﬁned Moreover conditions C1 C2 vS coincides weight associated assignment τS As example considering coalition S cid7 X 1 2 r setting Fig 4 formula ˆcid9 1 cid7 X 2 corresponding assignment τS undeﬁned X3 X4 X1 evaluates true X2 evaluates false Note S fact coalition getting maximum overall value τS truth assignment having maximum weight fact satisfying assignment This chance Indeed following result established S vS v S S N τS truth assignment having maximum weight Assume contradiction τ cid10 Note weight τScid10 coincides weight τ cid10 truth assignment better weight τS Deﬁne S coalition including precisely agent cid7Li L literal ci evaluating cid10 coincides weight Thus vS r clause ci satisﬁed τ cid10 true τ cid10 τ cid10 vS cid10 cid10 vS τScid10 better weight τS cid10 vS impossible coalition vS cid10 By contradiction S Again impossible The result Equation 3 entails value optimal coalition structure cid6 CSoptcid2 2 hardness eventually established coincides maximum possible weight associated assignment The Fcid2P reduction feasible polynomial time cid3 32 Structural restrictions basic results In light intractability result sensible single classes functions valuation structures CSGval CSG eﬃciently solved A natural approach identify classes focus interaction graphs enjoying suitable structural properties In fact basic structural property graph acyclicity consider general concept bounded treewidth 61 A tree decomposition graph G N E pair cid3T χ cid4 T V F tree χ labeling function assigning vertex p V set vertices χ p N following conditions satisﬁed 1 node b G exists p V b χ p 2 edge b d E exists p V b d χ p 3 node b G set p V b χ p induces connected subtree T The width cid3T χ cid4 number maxpV χ p 1 The treewidth G denoted t wG minimum width tree decompositions A graph G acyclic t wG 1 Deciding given graph treewidth bounded ﬁxed natural number k known feasible linear time 11 Example 33 Consider graph G N E shown Fig 5a note contains cycle nodesagents a1 a2 a3 In Fig 5b tree decomposition G reported width 2 cid2 30 G Greco A Guzzo Artiﬁcial Intelligence 249 2017 1946 Fig 5 Illustration Example 33 An interaction graph tree decomposition having width 2 By focusing acyclic generally nearlyacyclic interaction graphs signiﬁcantly constraint coali tions allowed form However suﬃcient end island tractability Theorem 34 CSGval Fcid2P 2 hard structures cid3Gcid4 G acyclic cid10S cid10 vS cid10 aN1 S cid10cid4 aN1 fresh agent N v Proof Let cid2 cid3N vcid4 coalitional game vS 0 holds S N S 1 Based cid2 build coalitional game cid2cid10 cid3N aN1 v cid10 valuation function cid10aN1 0 Moreover build interaction graph v cid10 N aN1 E G Note Fcid3Gcid10cid4cid2cid10 consists singleton coalitions plus coalitions having form S aN1 S N including aN1 cid10 aN1 CScid3Gcid10cid4cid2cid10 form C set singleton coalitions Therefore holds valcid3Gcid10cid4cid6cid10 valcid3Gcid10cid4C Moreover coalition structure cid6cid10 cid6cid10 In particular properties valuation function v construction v coalition cid6cid10 cid10 cid10 v cid10C cid10 vC following holds cid10 aN1 ai ai N cid10 N aN1 v cid10 E C cid6cid10 cid10 cid10 max cid6cid10CScid3G cid10cid4cid2cid10 cid10 valcid3Gcid10cid4cid6 max SN vS 4 In words computation value maxSN vS reduced computation value associated cid10cid4optimal coalition structures cid2cid10 cid3G Now recall proof Theorem 32 observing game built based Boolean formula cid9 precisely satisﬁes conditions game cid2 Then Equation 4 maximum value attained coalition game associated cid9 computed solving CSGval input cid2cid10 cid3G cid10cid4 In fact know computing maximum value Fcid2P 2 hard cf Equation 3 proof Theorem 32 Fcid2P 2 hardness CSGval immediately follows cid3 Intuitively hardness result emerge acyclic interaction graph construct hard valuation function interactions properly taken account Indeed noticed functions independent disconnected members introduced literature precisely classes functions adhere semantics interaction graphs However checked valuation function proof satisfy property In fact applying notion treewidth IDM valuation functions following tractability resultsuitably restated setting notationwas shown 69 basic CSG problem taking account valuation structures Theorem 35 cf 69 Let h 0 ﬁxed natural number Let R representation coalitional games let cid2 cid3N vcid4 CR game v valuation function independent disconnected members wrt graph G t wG h Then CSG solved cid2 polynomial times wrt cid21ξ Rcid2cid21 cid21Gcid21 Note result trivializes size cid21ξ Rcid2cid21 encoding valuation function exponential wrt number agents N Instead interesting cases emerge succinct encodings graph game representation tractability independently derived 4 Moreover note combining Theorem 35 Theorem 25 obtain following tractability result valuation structures based interaction graphs Corollary 36 Let h 0 ﬁxed natural number Let R representation coalitional games let cid2 cid3N vcid4 CR game v valuation function independent disconnected members wrt graph G t wG h Then CSGval solved cid2 cid3Gcid4 polynomial time wrt cid21ξ Rcid2cid21 cid21Gcid21 Proof By Theorem 35 compute polynomial time solution cid6 cid2 cid3K N cid4 Given cid6 cid3 CSG input cid2 solution CSGval based Theorem 251 solution CSGval cid2 cid3Gcid4 computed polynomial time 4 Islands tractability CSGVAL Our main technical achievement paper generalize Corollary 36 arbitrary valuation structures bounded treewidth interaction graphs The proof result involved based technical ingredients interesting right G Greco A Guzzo Artiﬁcial Intelligence 249 2017 1946 31 1 First bounded treewidth graphs IDM valuation function admits simple kind succinct representation terms wellknown encoding based marginal contribution networks 43 Moreover matter representation scheme originally adopted valuation function equivalent marginal contribution network computed polynomial time 2 Second exhibit polynomialtime algorithm solving CSGval marginal contribution networks underlying interaction graphs bounded treewidth The algorithm deﬁned means nontrivial encoding terms constraint satisfaction problem exploiting known structural tractability results setting The ingredients elaborated Section 41 Section 42 respectively 41 Marginal contribution networks IDM functions A representation coalitional games received considerable attention years based marginal contribution networks 43 A marginal contribution network short MCnet M consists set rules involving number Boolean variables represent agents Each rule form pattern value pattern conjunction include positive negative literals value additive contribution associated pattern A rule applies set C agents agents literals occur positively pattern belong C players literals occur negatively pattern belong C In following denote mcn representation coalitional games cid2 cid3N vcid4 Cmcn ξ mcncid2 marginal contribution network8 coalition C v mcnξ mcncid2 C given sum values rules apply C If rule applies value coalition set zero default Example 41 Consider coalitional game cid2 cid3 N vcid4 N a1 a5 v vai 0 1 5 va1 a2 va2 a3 va1 a3 2 va1 a2 a3 5 vC a4 vC a5 vC a4 a5 vC C a1 a2 a3 An encoding game terms marginal contribution network given following set rules a1 a2 a3 2 a1 a2 a3 2 a1 a2 a3 2 a1 a2 a3 5 a3 a5 0 a2 a4 0 For instance va1 a2 a4 2 derives ﬁrst rule rule apply cid2 In order model interactions agents marginal contribution network M deﬁne graph AGM called agent graph M 43 nodes agents game rule pattern value occurring M pair agents nodes occurring pattern connected edge AGM For instance checked agent graph associated marginal contribution network Example 41 illustrated Fig 5a Our ﬁrst result function encoded marginal contribution network independent disconnected mem bers wrt associated agent graph Theorem 42 Let cid2 cid3N vcid4 game Cmcn Then v independent disconnected members wrt AGξ mcncid2 Proof Let ai j agents N connected graph AGξ mcncid2 let C coalition ai j C We vC ai vC vC ai j vC j Let R set rules apply C ai apply C Note agent ai positively occur rule R Moreover note vC ai vC precisely coincides sum values associated rules R Then let R j set rules apply C ai j apply C j noticing similarly vC ai j vC j coincides sum values Moreover agent ai positively occur rule taken R j Based properties R R j Indeed consider rule r agent ai positively occurs Since ai j connected AGξ mcncid2 conclude r contain j Hence r R r R j cid3 8 We consider standard encoding marginal contribution network rules explicitly listed Moreover order guarantee cid21ξ mcncid2cid21 N holds assume wlog agent occurs rule Indeed agent ai N add rule ai 0 altering properties network 32 G Greco A Guzzo Artiﬁcial Intelligence 249 2017 1946 We converse result holds Indeed considering IDM func tions focus wlog games encoded marginal contribution networks In particular note marginal contribution network built polynomial time classes bounded treewidth graphs considered Theorem 43 Let R representation coalitional games let cid2 cid3N vcid4 CR game v valuation function independent disconnected members wrt graph G t wG h Then marginal contribution network M negative literals built time polynomial wrt cid21ξ Rcid2cid21 exponential wrt h AGM G v mcnξ Rcid2 C v mcnM C C N Proof We build encoding game cid2 cid3N vcid4 terms marginal contribution network M Let C N coalition let G C denote subgraph G induced nodes C Throughout proof shall coalition C cid7sparse number nodes C having C 1 adjacent nodes G C cid7 Note C 0sparse G C actually clique nodes C The construction focuses precisely 0sparse coalitions arbitrary cid7sparse coalitions play role valueC patternC cid10 No rule M An example proof Indeed 0sparse coalition C N include M rule rC patternC conjunction containing agents C valueC vC construction illustrated C cid10C vC cid2 Example 44 Consider coalitional game cid2 discussed Example 41 interaction graph depicted Fig 5a The 0sparse coalitions setting following ones a1 a5 a1 a2 a2 a3 a1 a3 a2 a4 a3 a5 a1 a2 a3 Then marginal contribution network consists following rules ai vai 0 1 5 a1 a2 va1 a2 va1 va2 2 0 0 2 a2 a3 va2 a3 va2 va3 2 0 0 2 a1 a3 va1 a3 va1 va3 2 0 0 2 a2 a4 va2 a4 va2 va4 0 0 0 0 a3 a5 va3 a5 va3 va5 0 0 0 0 cid2 a1 a2 a3 va1 a2 a3 C cid10a1a2a3 vC cid10 5 6 1 Note encoding differs discussed Example 41 In particular rule containing negated agents cid2 We start proof pointing following properties construction cid10C Assume t wG h If C 0sparse coalition C h 1 necessarily holds wellknown results tree cid10 C 2h1 Therefore valueC built polynomial time wrt cid21ξ Rcid2cid21 decompositions This means C exponential wrt h Moreover observe number 0sparse coalitions cliques h 1 nodes G polynomial wrt number nodes graph wrt cid21ξ Rcid2cid21 exponential wrt h Hence overall number rules M polynomial conclude M actually built polynomial time Each edge e graph G actually 0sparse coalition Therefore rule M agents e connected AGM On hand rC rule M agents C form clique graph AGM C 0sparse coalition agents C form clique G We conclude AGM G holds After properties remains proven encoding correct v mcnM C vC C N The result proven structural induction sparseness given coalition C Base Case In base case encoding correct 0sparse coalition C N In fact case immediate proven structural induction time size coalition C Base Case Assume C 0sparse coalition C 1 Then rule rC apply C construction v mcnM C valueC vC cid10 vC Induction Step Let p 0 natural number assume 0sparse coalition C cid10 p cid10 holds Let C 0sparse coalition C p 1 By deﬁnition valuation func C cid10C valueCcid10 cid10 C apply C recall negated agent cid10 p Therefore ap cid2 cid10 Eventually recall v mcnM C tion associated marginal contribution network v mcnM C rules apply subset C rules Note C ply inductive hypothesis order conclude v mcnM C valueC valueC vC cid10 vC v mcnM C vC cid10 N C cid2 C cid10C valueCcid10 valueC cid10 C C 0sparse C cid10 So valueC C cid10C vC cid2 cid2 cid2 cid10 C cid10C vC C cid10C vC G Greco A Guzzo Artiﬁcial Intelligence 249 2017 1946 33 Induction Step Assume cid7sparse coalition C cid7 1 sparse coalition C N v mcnM C vC Again nested induction size C cid10 N v mcnM C cid10 vC cid10 We Base Case Assume C cid7 1sparse coalition C cid7 1 cid7 0 Then agentsnodes a1 a2 C connected means edge G Consider coalitions C1 C a1 C2 C a2 C3 C1 C2 It immediately seen C1 cid7 C2 cid7 C3 cid7 Ci 1 2 3 trivially si sparse si cid7 Hence v mcnM Ci vCi 1 2 3 holds inductive hypothesis derive v mcnM C cid2 cid2 cid2 valueCcid10 valueCcid10 C cid10C2 C cid10C1 C cid10C3 v mcnM C1 v mcnM C2 v mcnM C3 vC1 vC2 vC3 va1 C3 va2 C3 vC3 valueCcid10 Since C a1 a2 C3 v independent disconnected members wrt G conclude Equation 1 Section 21 va1 C3 va2 C3 vC3 vC Hence v mcnM C vC cid10cid10 vC Induction Step Let p cid7 1 natural number assume cid7 1sparse coalition C cid10cid10 p cid10cid10 holds Let C cid7 1sparse coalition C p 1 let a1 acid71 v mcnM C set cid7 1 nodes C having C 1 adjacent nodes G C Consider coalitions C1 consisting a1 plus nodes adjacent G C C2 C a1 C3 C1 C2 Note C1 C2 a1 holds Moreover 1 2 3 Ci p Ci trivially si sparse coalition si p Hence inductive hypothesis applied C1 C2 C3 deriving v mcnM Ci vCi 1 2 3 Eventually derive cid10cid10 N C v mcnM C cid2 cid2 valueCcid10 cid2 valueSycid10 C cid10C1 C cid10C2 v mcnM C1 v mcnM C2 v mcnM C1 C2 vC1 vC2 vC3 C cid10C3 valueCcid10 Now observe edge connecting a1 element C1 C2 node C2 C1 Therefore apply Equation 2 Section 21 conclude vC1 vC2 vC1 C2 vC1 C2 C1 C2 C3 C1 C2 C It follows v mcnM C vC cid3 For ﬁxed constant h 0 shall denote CTWhmcn restriction class Cmcn marginal contribution networks associated agent graphs treewidth h According results CTWhmcn representative coalitional games based IDM valuation functions wrt interactions graphs having treewidth bounded h Moreover observe assume CTWhmcn contains networks rules involve negative literals Indeed following easily established Corollary 45 Let cid2 cid3N vcid4 Cmcn game t wAGξ mcncid2 h Then marginal contribution network M containing rule negated literal built time polynomial wrt cid21ξ mcncid2cid21 exponential wrt h AGM AGξ mcncid2 v mcnM C v mcnξ mcncid2 C C N Proof By Theorem 42 v independent disconnected members wrt AGξ mcncid2 So result follows Theo rem 43 applied cid2 graph AGξ mcncid2 cid3 42 Coalition structure generation marginal contribution networks The second technical ingredient exhibit method eﬃciently solve CSGval class CTWhmcn The analysis carried encoding CSGval terms weighted constraint satisfaction problem short CSP showing CSP instances associated games CTWhmcn solved polynomial time Before embarking analysis useful recall 36 CSPencoding approach powerful method exploited tractability results number different areas research However issues arise context coalition structure generation valuation structures considered earlier approaches speciﬁc encoding algorithm substantially involved available literature In particular distinguishing feature proposal ability handling connectivity constraints induced underlying interactions graphs This feature turn useful different domains graph structure given solutions required induce according speciﬁc semantics connected substructure 34 G Greco A Guzzo Artiﬁcial Intelligence 249 2017 1946 421 Constraint satisfaction problems We start preliminaries constraint satisfaction The reader interested expanding formalism referred 23 A constraint satisfaction problem instance triple I cid3Var U Ccid4 Var ﬁnite set variables U ﬁnite domain values C C1 C2 Cq ﬁnite set constraints Each constraint C v 1 v q pair S v rv S v Var set variables called constraint scope rv set substitutions variables S v values U indicating allowed combinations simultaneous values variables S v called tuples A substitution set variables V Var U extensively denoted set pairs form Xu u U value X V mapped A substitution θ satisﬁes constraint C v restriction S v set pairs Xu θ X S v occurs tuple rv A solution I substitution θ Var cid13 U q tuples t1 r1 tq rq exist θ t1 tq Thus solution satisﬁes constraints I Encoding Let cid2 cid3N vcid4 CTWhmcn N a1 coalitional game let σ cid3G S α β x ycid4 associated valuation structure G AGξ mcncid2 That interactions constrained underlying agent graph cf Theorem 43 The CSP instance associated cid2 σ denoted CSPcid2 σ cid3Var U Ccid4 deﬁned follows Variables transparently viewed agents N Var N The domain U contains element form cid3from j origincid7 levelhcid4 triple indices j cid7 h 1 n More U contains element form cid3origincid7 level0cid4 index cid7 1 n No constant U The set C consists following kinds constraints C1 For rule γ pattern value encoding ξ mcncid2 C contains constraint Cγ Sγ rγ Sγ ai ai occurs pattern rγ contains possible substitutions Sγ U Note constraints immaterial play role equipped weighing function shall discuss later C2 For agent ai N C contains constraint Ci ai ri 1 If ai pivotal agent ai S agent j connected edge ai AGξ mcncid2 pair indices cid7 h 1 n substitution aicid3from j origincid7 levelhcid4 ri 2 The substitution aicid3origini level0cid4 ri substitution occurs Thus aicid3origini level0cid4 available substitution ai pivotal agent C3 For pair agents ai j connected edge AGξ mcncid2 C contains constraint Ci j ai j ri j deﬁned follows 1 For u U substitution aicid3origini level0cid4 ju ri j 2 For u U jcid10 cid3from jcid10 origincid7 levelhcid4 ju ri j cid16 j connected ai cid7 h 1 n substitution ai 3 For agent ak cid16 ai connected j cid7 h 1 n substitution aicid3from j origincid7 levelh1cid4 jcid3fromk origincid7 levelhcid4 ri j 4 The substitution aicid3from j origin j level1cid4 jcid3origin j level0cid4 ri j substitution ri j Intuitively elements U encode number spanning trees underlying coalitions deﬁned interaction graph In particular element cid3origincid7 level0cid4 assigned variable acid7 intended meaning acid7 root spanning tree Instead node ai mapped constant cid3from j origincid7 levelhcid4 intend ai belongs spanning tree rooted node acid7 j father ai tree ai occurs level h tree level 0 root More node deﬁned root node spanning tree actually induced solution However require pivotal agent necessarily root spanning tree preventing occurs tree component associated pivotal agent Example 46 Consider coalitional game cid2 encoding terms marginal contribution network M deﬁned Example 44 Consider valuation structure σ cid3AG M a3 a5 1 0 0 cid4 a3 a5 pivotal agents A solution CSP associated cid2 σ given following substitution θ a5cid3origin5 level0cid4 a3cid3origin3 level0cid4 a2cid3from3 origin3 level1cid4 a1cid3from3 origin3 level1cid4 a4cid3from2 origin3 level2cid4 The reader check constraints kind C2 C3 satisﬁed θ Moreover reader observe Fig 6 CSP solution induces σ feasible coalition structure a3 a5 belong different coalitions spanning trees cid2 G Greco A Guzzo Artiﬁcial Intelligence 249 2017 1946 35 Fig 6 Illustration Example 46 The crucial properties correspondence games CSP instances formalized Hereinafter substitution θ subset Var U index 1 n denote θi set agents mapped θ tuple containing term origini Moreover denote cid6θ coalition structure including precisely coalition θi 1 n θi cid16 For instance Example 46 θ1 θ2 θ4 θ3 a3 a2 a1 a4 θ5 a5 Note cid6 θ θ3 θ5 σ feasible coalition structure Lemma 47 For σ feasible coalition structure cid6 CSσ cid2 solution θ CSPcid2 σ cid6 cid6θ Proof Let cid6 σ feasible coalition structure CSσ cid2 consider substitution θ built follows For coalition C cid6 observe subgraph G C AGξ mcncid2 induced nodes C connected Let T C spanning tree G C let root node acid7 C In particular C contains pivotal agent acid7 precisely univocally determined agent Otherwise acid7 arbitrary node C Then restriction θ variables C built follows For agent acid7 set θacid7 cid3origincid7 level0cid4 Moreover agent ai C acid7 let j parent ai let h number edges occurring path connecting j acid7 T C Then set θai cid3from j origincid7 levelh1cid4 Note parent ai acid7 θai cid3fromcid7 origincid7 level1cid4 Otherwise j cid16 acid7 h 0 Eventually coalitions cid6 disjoint cover agentsvariables N iterating construction coalitions substitution θ deﬁned maps variable constant U In particular construction cid6 cid6θ In order conclude proof claim coalition C cid6 θ satisﬁes constraints variable C occurs Note constraints kind C1 trivially satisﬁed substitution Thus focus constraints kind C2 C3 Let ai node C let acid7 root node T C consider following constraints C2 Observe θai tuple cid3origini level0cid4 cid7 tuple having form cid3from j origincid7 levelhcid4 index j j connected ai h 1 n In particular ai pivotal agent guaranteed cid7 holds construction It follows θ satisﬁes constraint Ci ai ri C3 Consider constraint form Ci j let distinguish following cases corresponding items deﬁnition elements ri j 1 If θai cid3origini level0cid4 cid7 holds Ci j satisﬁed matter value θa j cid10 cid16 j Ci j trivially satisﬁed 2 If θai cid3from jcid10 origincid7 levelhcid4 j 3 If θai cid3from j origincid7 levelh1cid4 h 1 n construction guaranteed j parent ai spanning tree T C j cid16 acid7 Therefore θa j form cid3fromk origincid7 levelhcid4 ak parent j T It follows θ satisﬁes Ci j 4 Finally θai cid3from j origincid7 level1cid4 recall cid7 j actually holds Therefore θai cid3fromcid7 origincid7 level1cid4 construction θa j θacid7 cid3origincid7 level0cid4 So θ satisﬁes Ci j Given constraints satisﬁed θ conclude θ solution cid3 Lemma 48 For solution θ CSPcid2 σ cid6θ σ feasible coalition structure CSσ cid2 Proof Let θ solution consider set cid6θ We ﬁrst agent ai N coalition C cid6θ ai C Indeed θ solution θai necessarily mapped tuple having term form origincid7 index cid7 1 n This means ai θcid7 holds θcid7 cid6θ Moreover deﬁnition cid6θ given universe cid10 cid16 holds Therefore U CSP instance immediate check pair coalitions C C cid6θ set disjoint coalitions covering agents N To complete proof coalition C cid6θ feasible cid6θ C C cid10 Connectivity Let C coalition cid6θ assume acid7 N agent C θcid7 First note node ai C mapped θ tuple containing term form levelh h 0 n In following shall h level ai prove subgraph cid6θ induced nodes C connected 36 G Greco A Guzzo Artiﬁcial Intelligence 249 2017 1946 In fact claim node ai C level h 1 h 0 ai connected node j C level h To prove claim observe constraint Ci j θai cid3from j origincid7 levelh1cid4 holds j agent connected ai Therefore base case j cid7 concluded Otherwise guaranteed θa j form cid3fromk origincid7 levelhcid4 j node C level h Finally simple argument based structural induction observation conclude node ai level h 1 connected acid7 means path involving nodes C associated levels lower h Pivotal agents Let ai j pivotal agents S Because constraints kind C2 case θai cid3origini level0cid4 θa j cid3origin j level0cid4 Thus construction cid6θ ai j belongs distinct coalitions cid6θ Given properties hold conclude cid6θ σ feasible cid3 422 Weighted CSPs The ingredient need equip CSP instances weights properly encode goal maximizing σ value Note immediate setting original valuation function v mapped aﬃne transformation provided valuation structure σ novel function valσ preserve properties v In particular v IDM function necessarily case valσ results derived previous section apply For reason forced work original valuation function v deal aﬃne transformation sophisticated encoding Before detailing encoding recall weighted CSP short WCSP instance consists tuple cid3I wr1 wrq cid4 I cid3Var U Ccid4 C C1 C2 Cq CSP instance tuple t v rv wrv t v R denotes weight associated t v For solution θ t1 tq I deﬁne wθ v1 wrv t v associated weight Then solution cid3I wr1 wrq cid4 solution9 θ I wθ wθ cid10 solution θ cid10 Given game cid2 cid3N vcid4 CTWhmcn σ cid3G S α β x ycid4 deﬁne WCSPcid2 σ weighted CSP instance underlying CSP instance CSPcid2 σ constraint relation rγ kind C1 fact associated rule γ pattern value equipped function wrγ deﬁned follows First rule γ active wrt tuple t rγ agent ai a1 called witness ti set agents mapped t constant term origini coincides set agents occurring pattern scope Sγ recall Corollary 45 assuming agents occur positively pattern Then tuple t rγ I cid2 q γ active wrt t set wrγ t 0 γ active wrt t ai associated witness fact unique distinguish cases ai pivotal agent S set wrγ t value αai ai pivotal agent set wrγ t value x Concerning constraints kind C2 constraint relation ri ai N set wri aiu 0 constant u U cid3origini level0cid4 constant cid3origini level0cid4 distinguish cases ai pivotal agent S set wri aicid3origini level0cid4 βai ai pivotal agent set wri aicid3origini level0cid4 y All constraint relations kind C3 equipped constant function assigning 0 substitution shall rid We proposed weighting scheme leads equip coalition structures associated σ value Lemma 49 For solution θ CSPcid2 σ wθ valσ cid6θ Proof Let cid6θ coalition structure associated θ cf Lemma 47 Lemma 48 In following set nodesvariables W denote θW restriction substitution θ elements W Let ai agent θi cid6θ let R denote set rules ξ mcncid2 apply θi Then ﬁrst claim valσ θi cid8 γ R wrγ θSγ wri θS 5 9 Note dually interpret weights costs look minimization problems maximization ones G Greco A Guzzo Artiﬁcial Intelligence 249 2017 1946 37 In order prove claim let consider deﬁnition valσ θi distinguishing cases depending ai pivotal agent 1 In case ai pivotal agent valσ θi vθi αai βai 2 valσ θi vθi x y Let focus case 1 In case θai cid3origini level0cid4 wri θS βai holds deﬁ nition weighting function Moreover consider rule γ R γ pattern value Let A set agents occurring positively pattern consider tuple t rγ θ t A Sγ Since γ applies θi case ti A Hence γ active wrt t wrγ θSγ value αai Now recall worth coalition given sum values associated rules apply Therefore vθi sum values rules R Hence cid2 Let focus case 2 Then apply line reasoning replacing value αai resp βai wrγ θSγ wri θS vθi αai βai cid2 wrγ θSγ wri θS vθi x y x resp y Eventually derive γ R At point know Equation 5 correct Moreover recall valσ cid6θ given sum valσ θi γ R coalition θi cid6θ That valσ cid6θ wrγ θSγ cid8 cid8 θi cid6θ γ R cid8 θi cid6θ wri θS On hand R denotes set rules write cid8 cid8 wθ wrγ θSγ wr j θS j 6 7 γ R j N cid2 In order conclude proof righthand sides Equation 6 Equation 7 coincide To end consider ﬁrst agent j N θ j cid6θ This means θa j cid16 cid3origin j level0cid4 wr j θS j 0 holds That j N wr j θS j cid2 We prove γ R wrγ θSγ In fact note rule γ belongs set R belong set R j agent j cid16 ai Therefore care rules γ apply coalition cid6θ shall wrγ θSγ 0 holds Indeed consider tuple θSγ rγ note rules γ active wrt θSγ cid3 wri θS γ R wrγ θSγ θi cid6θ θi cid6θ cid2 cid2 cid2 423 Proof main result extensions The structure CSP instance I represented literature associated primal graph PGI deﬁned variables Var variables connected edge occur scope constraint While looking CSP instance CSPcid2 σ cid3Var U Ccid4 immediate check variables occur scope constraint associated agents occurs rule underlying marginal contribution network Therefore graph associated constraints coincides agent graph underlying cid2 Fact 410 PGCSPcid2 σ AGξ mcncid2 Moreover bounded treewidth instances construction WCSPcid2 σ eﬃciently carried Lemma 411 Let h 0 ﬁxed natural number Let cid2 cid3N vcid4 game CTWhmcn let σ cid3AGξ mcncid2 S α β x ycid4 valuation structure Then WCSPcid2 σ built polynomial time wrt cid21ξ mcncid2cid21 cid21σ cid21 Proof We build CSPcid2 σ cid3Var U Ccid4 Clearly Var U build polynomial time N cid21ξ cmcncid2cid21 Constraints form C2 C3 built polynomial time deﬁned variables Concerning constraints kind C1 observe constraint Sγ rγ rule γ pattern value conclude claim Sγ h encoding Sγ N In particular observe rγ n Indeed Sγ p h agent graph AGξ mcncid2 contain clique p h agents Sγ treewidth graph p greater h In order conclude proof notice weighting functions built polynomial time In particular explicitly list weights encoding size bounded cid21σ cid2110 cid3 Sγ By Lemma 47 Lemma 48 Lemma 49 Fact 410 Lemma 411 Theorem 43 given solutions weighted straint satisfaction known computable polynomial time classes instances associated primal graphs 10 This standard encoding results shall use complexity WCSPs 40 38 G Greco A Guzzo Artiﬁcial Intelligence 249 2017 1946 treewidth bounded ﬁxed constant 234034 derive main result generalizing Corollary 36 arbitrary valuation structures Theorem 412 Let h 0 ﬁxed natural number Let R representation coalitional games let cid2 cid3N vcid4 CR game v valuation function independent disconnected members wrt graph G t wG h Let σ cid3G S α β x ycid4 valuation structure Then CSGval solved cid2 σ polynomial time wrt cid21ξ Rcid2cid21 cid21σ cid21 p Interestingly ﬂexibility CSP encoding allow easily generalize result handle constraints studied 58 Section 1 In order accommodate extension CSP instance associated game cid2 cid3N vcid4 Cmcn valuation structure σ sets P N positive negative constraints respectively obtained instance CSPcid2 σ cid3Var U Ccid4 deﬁned Section 421 follows First deﬁne U P set obtained U replacing constant origini ai N marked positive constraint p P We modify set variables substitution p implies p p θa j origin coalition including agents mapped θ Eventually θ substitution image contained U P denote unmarkθ substitution constants origin p θ consistent pair variables j ah domain θa j origin Moreover agent ai N p P denote θ p constant origin obtained stripping markings Second build set CP constraints follows For constraint S r C constraint S rP CP rP obtained including possible consistent marked tuples built tuples r Clearly properties CSPcid2 σ cid3Var U Ccid4 preserved transformation In particular assignment θ solution resulting CSP instance cid6unmarkθ σ feasible coalition structure cf Lemma 47 Lemma 48 p Eventually following groups constraints added CP C4 For p P p N CP contains constraint Cp p rp having agents p scope relation rp contains substitutions t t constant image marked p Note solution θ agent eventually mapped constant U P marking p taken P corresponding constraint C p forces formation coalition θ p covering p Hence p witnesses θi satisﬁes positive constraints p ai Moreover contains substitutions t C5 For n N n N CP contains constraint Cn n rn having agents n scope relation rn contains possible substitutions t n U P agent ai N ti n Note case care markings formed coalitions cover negative constraint p cid10 By putting derive assignment θ solution resulting CSP instance cid6unmarkθ σ feasible coalition structure cf Lemma 47 Lemma 48 coalition cid6unmarkθ covers positive constraint coalition cid6unmarkθ covering negative constraint Eventually constraints kind C4 C5 equipped 0 weight tuple t constraint form rP equipped weight associated tuple unmarkt original constraint r Therefore Lemma 49 trivially holds modiﬁed scenario The difference primal graph CSP longer coincide underlying agent graph Rather obtained agent graph adding edges associated novel constraints Hence derive CSGval constraints P N solved polynomial time valuation functions v independent disconnected members wrt graphs G GPN treewidth bounded ﬁxed natural number In particular GPN denote graph obtained adding G edge pair agents involved positive negative constraint Remark As pointed Introduction semantics set S pivotal agents recast terms set negative constraints ai j ai j S However resulting graph contain clique agents S obscuring intricacy setting Our results deal instead pivotal agents ﬁrstclass citizens set S inﬂuence treewidth underlying graph 5 Back applications Now established Theorem 412 turn applications Section 22 discussing com plexity structures having bounded treewidth The analysis comes simple corollary general result cases actually close tractability questions left open literature G Greco A Guzzo Artiﬁcial Intelligence 249 2017 1946 39 51 Multicut problems The problem identifying islands tractability multicut problem intensively studied literature number results derived exploiting structural properties graphs problem deﬁned For classes graphs G having bounded treewidth shown 8 problem tractable size set P sourceterminal pairs disconnected constant 42 The result prescribe restriction weights associated edges Instead deal unitary weights problem reduces ﬁnding multicut consisting minimum possible number edges know tractability holds instances G P graph derived G adding edge pair P bounded treewidth 37 Note result focuses unitary weights undirected graphs actually incomparable result 8 Indeed size P constant treewidth G P constant treewidth G However G P bounded treewidth size P constant It interesting point result 37 based encoding multicut problem monadic secondorder MSO formula structure G P exploiting generalization Courcelles Theorem 19 tailored optimization problems 1 Motivated fact resulting algorithm unpractical running time nonelementary terms number quantiﬁer alternations MSO formula direct solution approach proposed recently 55 However open far result 37 extended arbitrary weighted graphs11 Here close question providing following positive answer In proof note technical ingredient exploit connection multicut problem problem computing optimal coalitions structures pointed earlier literaturein particular Theorem 412 plays role Theorem 51 Let h 0 ﬁxed natural number On classes graphs G sourceterminal pairs P t wG P h multicut problem solved polynomial time Proof Recall Section 221 multicut problem reduced computing optimal coalition structure game cid3N v P cid4 Theorem B1 Appendix B formal correspondence Recall v P function v P C sum weights edges subgraph G P induced coalition C Therefore cid3N v P cid4 Cgg holds valuation function encoded graph game Then recall 69 valuation functions games Cgg independent disconnected members wrt underlying graphs So v P IDM function wrt G P apply Theorem 35 order conclude optimal coalition structure cid3N v P cid4 computed polynomial time cid3 52 Multiway cut kclustering problems Similarly multicut problem number structural tractability results multiway cut problems known picture completely clear The tractability problem classes graphs G trees established early nineties 16 However practical dynamic programming algorithm linear running time followed years later 18 In inﬂuential paper cut problems 21 claimed standard dynamic programming methods multicut problem remains tractable moving trees graphs having bounded treewidth However algorithm actually reported formal proof result reported subsequent literature Here claim 21 correct Theorem 52 Let h 0 ﬁxed natural number On classes graphs G t wG h multiway cut problem solved polynomial time Proof Recall Section 221 multiway cut problem reduced computing σmwoptimal coalition structure cid3N v mwcid4 Theorem B2 Appendix B formal correspondence Observe cid3N v mwcid4 encoded graph game v mwC sum weights edges subgraph G induced coalition C Moreover recall σmw cid3G T 1 0 1 0cid4 Given ingredients position applying Theorem 412 cid3N v mwcid4 σmw cid3 The encoding discussed kclustering problem Section 221 founds encoding multi way cut problem Indeed observed optimal kclustering computed coalition structure having maximum σRvalue cid3N v cccid4 σRoptimal coalition structures subset R N R k 11 In fact techniques paper adapted tractability weights small encoded logarithmic space 40 G Greco A Guzzo Artiﬁcial Intelligence 249 2017 1946 σR cid3G R 1 0 0 cid4 valuation structure solves problem ﬁnding multiway cut minimum weight R considered set terminals So polynomially subsets R considered applying Theorem 52 problem solvable polynomial time 53 Chromatic clustering We conclude analysis considering chromatic clustering problem Recall Section 22 problem reduced computing σchoptimal coalition structure game cid3N v chcid4 σch cid3GC C 1 0 0 cid4 v ch valuation function set nodes C N C C C ci v chC e Theorem B4 Appendix B Moreover recall GC graph colors viewed nodes edge added node N color C Then following established eEeC wci cid2 Theorem 53 Let h 0 ﬁxed natural number On classes graphs G sets C colors t wGC h chromatic clustering problem solved polynomial time Proof Similarly cases discussed given encoding proposed analyzed tractability chromatic clustering follows graphs GC having bounded treewidth provided v ch independent disconnected members So light Theorem 42 complete proof showing v ch encoded marginal contribution network M AGM GC Indeed network built follows For color ci C edge e b E include M rule b ci wci e rule included M It immediate check encoding correct AGM GC wlog assume isolated nodes G cid3 6 Stability issues valuation structures Computing optimal coalition structure cid6 generally applications agents collaborate environment Indeed fundamental problem coalitional games determine worth obtained forming structure cid6 subsequently distributed agents way stable This problem largely studied literature approaches proposed founding wellknown solution concepts core kernel bargaining set nucleolus Shapley value 53 In following shall focus core arguably inﬂuential considered stability concept shall position setting coalitional games equipped valuation structures In particular Section 61 formalize concept natural reasoning problems related Eventually Section 62 devoted analyze complexity problems usual intended goal identifying possibly large islands tractability 61 Solution concepts computational problems ai S xi Let cid2 cid3N vcid4 coalitional game N a1 A worth distribution cid2 simply viewed ndimensional payoff vector x Rn ith component denoted xi worth received agent ai 1 n For coalition S N xS hereinafter shorthand cid2 Let σ valuation structure cid2 assume agents organize σ feasible coalition structure cid6 Fσ cid2 According cid6 worth divided agents coalition C cid6 given valσ v C Therefore output game viewed pair cid6 x x Rn payoff vector eﬃcient wrt cid6 xC valσ v C holds C cid6 In following denote Eσ v cid6 shorty Eσ cid6 v understood set eﬃcient payoff vectors Note Eσ v cid6 contain inﬁnitely payoff vectors fundamental problem arises singling desirable ones The concept core goes work 28 formalized 32 Here consider natural generalization setting valuation structures taken account Intuitively pair cid6 x x Eσ v cid6 belongs core stable σ feasible coalition members receive higher payoff x leaving current coalition structure We refer notion12 coalition structure core cid2 wrt σ formally deﬁned set CScoreσ cid2 cid6 x cid6 CSσ cid2 x Eσ cid6 xC valσ C C Fσ cid2 The following property useful simplify reasoning concept13 12 Whenever σ cid3Gcid4 holds concept reduces notion core discussed instance 13242515 order deal restrictions imposed underlying interaction graph 13 The property wellknown games valuation structures extension setting straightforward instance inspecting results 15 G Greco A Guzzo Artiﬁcial Intelligence 249 2017 1946 41 Theorem 61 Let cid2 cid3N vcid4 coalitional game let σ valuation structure let cid6 x CScoreσ cid2 Then cid6 CSoptσ cid2 Moreover cid6 x CScoreσ cid2 σ optimal coalition structure cid6 CSoptσ cid2 cid2 cid3a1 a5 vcid4 coalitional game σ Example 62 Consider cid3AG M a3 a5 1 0 0 cid4 deﬁned Example 44 Example 46 respectively Moreover consider coalition struc ture cid6 a5 a1 a2 a3 a4 payoff vector x R5 x1 x2 x3 5 3 x4 x5 0 Note x5 val σ a5 va5 0 xa1 a2 a3 a4 x1 x2 x3 x4 val σ a1 a2 a3 a4 va1 a2 a3 a4 5 Hence x belongs set E σ cid6 payoff vectors eﬃcient wrt cid6 In fact cid6 x belongs CScore σ cid2 checked xC val σ C holds σ feasible coalition C Note Theorem 61 entails cid6 belongs CSopt σ cid2 Consider game cid2 cid3a1 a5 vcid4 valuation function v considered vC vC C N C a1 a2 a3 cid16 3 vC 2 remaining coalitions C Note modiﬁcation alter cid6 holds optimality cid6 belongs CSopt σ cid2 Moreover observe vector x eﬃcient wrt x1 x2 x3 x4 2 x5 0 Therefore vector simultaneously satisfy stability conditions required core In particular observe following set inequalities satisﬁable valuation structure x1 x2 x3 x4 2 x1 x2 val σ v a1 a2 x1 x3 val σ v a1 a3 x2 x3 val σ v a2 a3 x4 val σ v a4 val σ v a1 a2 va1 a2 2 val σ v a1 a3 va1 a3 2 val σ v a2 a3 va2 a3 2 val σ v a4 va4 0 Hence pair form cid6 x coalition structure core cid2 wrt σ More generally checked CScore σ cid2 Indeed follows Theorem 61 cid6 belongs CSopt σ cid2 cid2 62 Complexity analysis With concepts place state main reasoning computation problem shall consider subsequent analysis CSCoreFind Given pair cid2 σ compute element CScoreσ cid2 decide CScoreσ cid2 The problem easily seen intractable formally NPhard inherits results known hold coalitional games coalitional structures 15 Motivated bad news consider IDM functions evaluated wrt interaction graphs having bounded treewidth Hence results Section 41 shall hereinafter study CSCoreFind CSApproxCoreFind class CTWhmcn marginal contribution networks agent graphs treewidth h h ﬁxed constant To prove tractability class start analyzing complexity tasks playing key role computation corerelated questions First consider problem computing coalition getting maximum value possible coalitions This problem conceptually foundational compared coalition structure generation problem technically viewed kind special case Therefore following comes surprise Theorem 63 Let h 0 ﬁxed natural number Let cid2 cid3N vcid4 CTWhmcn let σ cid3G S α β x ycid4 valuation struc valσ C C Fσ cid2 feasible polynomial time ture Then computing σ feasible coalition C wrt cid21ξ mcncid2cid21 cid21σ cid21 valσ C Proof Based σ ﬁrst build polynomial time different settings 1 For ai S let σi cid3G S αi βi 0 0cid4 valuation structure αi resp βi function αiai αai resp βiai βai αia j 0 resp βia j 0 j S ai Let cid6 σi feasible coalition structure note valσi v cid6 valσi v Ci Ci coalition cid6 ai Ci In turn valσi v Ci coincides valσ v Ci construction σi In particular check Ci trivially σ feasible coalition On hand Ci σ feasible coalition build σi feasible coalition structure cid6 consisting Ci agents singleton coalitions Again valσi v cid6 valσ v Ci Therefore value σi optimal coalition structure coincides maximum possible value σ feasible coalition including agent ai explicitly remark Theorem 412 In following shall denote optimal value vc characterization vc computed polynomial time 2 For agent j N S let σ j cid3G S j α j β j 0 0cid4 valuation structure α jai β jai 0 ai S α ja j x β ja j y By exploiting line reasoning point 1 derive value σ j optimal coalition coincides maximum possible value σ feasible j In particular observe j coalition including agent j excluding agents S hereinafter denoted vc 42 G Greco A Guzzo Artiﬁcial Intelligence 249 2017 1946 pivotal agent original valuation structure aﬃne transformation determined parameters x y Instead j plays role pivotal agent σ j functions α j β j accordingly deﬁned guarantee correctness valuation Eventually remark vc j computed polynomial time characterization Theorem 412 Let C σ feasible coalition valσ v C cases First exist pivotal agent ai S ai C Otherwise C deriving vc agent j C deriving vc j σ feasible coalitions putting ingredients conclude valσ v C valσ v C Since values form vc valσ v C C Fσ cid2 let distinguish case apply construction 1 S case apply construction 2 j correspond valuations vc max max ai S vc max j NS vc j valσ v C In order conclude proof note left equation involves polynomiallymany values σ feasible coalition recall computed polynomial time Therefore valσ v C value attained overall computed polynomial time cid3 Let second task Let cid2 cid3N vcid4 coalitional game n N let σ valuation structure let ˆx Rn payoff vector For feasible coalition C Fσ cid2 deﬁne excess C ˆx cid2 wrt σ value eˆx C cid2 σ ˆxC valσ v C shortly denoted eˆx C cid2 σ clearly understood Intuitively measure satisfaction agents C receive payoff ˆxC Indeed agents C satisﬁed given payoff distribution like deviate ˆx eˆx C 0 The problem deciding minimum possible excess nonnegative studied literature classes games encoded marginal contribution networks In particular shown feasible polynomial time class CTWhmcn absence valuation structures ﬁxed natural number h 43 Based Theorem 63 extend result arbitrary valuation structures Theorem 64 Let h 0 ﬁxed natural number Let cid2 cid3N vcid4 CTWhmcn n N let σ cid3G S α β x ycid4 valuation cid2 σ eˆx C cid2 σ structure let ˆx Rn payoff vector Then computing σ feasible coalition C C Fσ cid2 feasible polynomial time wrt cid21ξ mcncid2cid21 cid21σ cid21 cid21ˆxcid21 eˆx C Proof Sketch Let ξ mcncid2 marginal contribution network encoding coalitional game cid2 For w consider marginal contribution network M w deﬁned follows For rule pattern value ξ mcncid2 M w includes rule pattern w value For agent ai N M w includes rule ai ˆxi No rule M w Note network M w induces valuation function v w v w C ˆxC w vC C Fσ cid2 The idea apply construction reported proof Theorem 63 valuation structure cid3G S 1 β 1 ycid4 valuation function v w w deﬁned follows When charge dealing case 1 agent ai S deﬁne w αai Instead deal 2 agent j N S deﬁne w x Then inspecting proof Theorem 63 derive case 1 vc coincides minimum excess computed coalition j coincides minimum excess computed coalition includes including agent ai case 2 vc j coincide agent j include agent S In particular note maximum values vc minimum excesses valuation functions opposite sign Eventually computing maximum value agents ai S j N S end minimum possible excess polynomial time cid3 vc Now ingredients place prove main result section We stress result given marginal contribution networks having bounded treewidth characterizations derived Section 41 actually holds IDM function wrt interaction graph having bounded treewidth Theorem 65 Let h 0 ﬁxed natural number Let cid2 cid3N vcid4 CTWhmcn let σ cid3G S α β x ycid4 valuation struc ture Then CSCoreFind solved cid2 σ polynomial time wrt cid21ξ Rcid2cid21 cid21σ cid21 Proof Let consider CSCoreFind We given game cid2 cid3N vcid4 CTWhmcn compute element CScoreσ cid2 decide set First compute σ optimal coalition structure cid6 CSoptσ cid2 feasible polynomial time Theorem 412 Because Theorem 61 CoreFind reduced computing payoff vector x xC valσ v C C cid6 xC valσ v C C Fσ cid2 decide vector kind exist Note x vector satisﬁes linear inequalities deﬁned N variables possibly exponentiallymany inequalities It wellknown kind solved polynomially steps step consists asking separation oracle given vector solution report inequality violated 63 In particular computation feasible polynomial time provided existence separation oracle invocations polynomial time In case oracle kind follows Given G Greco A Guzzo Artiﬁcial Intelligence 249 2017 1946 43 vector x trivially check xC valσ v C C cid6 If polynomiallymany equalities violated reported output Otherwise need check xC valσ v C C Fσ cid2 To getting minimum possible excess x possible feasible coalitions end compute σ feasible coalition C cid2 σ 0 inequality violated Note Theorem 64 task feasible polynomial time If ex C return cid6 x element core Otherwise ex C cid2 σ 0 know inequality xC violated x returned output oracle cid3 valσ v C 7 Conclusion The coalition structure generation problem reconsidered paper taking account constraints allowed coalitions deﬁned terms valuation structures A clear picture complexity issues arising setting depicted singling islands tractability based properties underlying valuation functions underlying interaction graphs Notably results formulated way independent speciﬁc scheme adopted represent valuations functions In particular hold given compact encoding A number concrete applications discussed Our work paves way investigations First interesting study kinds constraints likely occur realworld application domains addition associated pivotal agents interaction graphs With respect inspired constrained clustering methods 72 envisage general forms cannotlink constraints proﬁtably incorporated concept valuation structure order prescribe pivotal agent S incompatible proper subset S acurrently setting accommodates case incompatible remaining pivotal agents S Further extensions deﬁned deal apriori knowledge sizes coalitions allowed form 7 labeling mechanisms sophisticated discussed Section 24 inspired 1220 Orthogonally directions relevant extend analysis questions related worth distribution problems presence valuation structures solution concepts In paper focused core mainly dealt stability issues Other solution concepts proposed literature instance Shapley value look worth distribution problems taking account fairness issues In fact wellknown computing Shapley value intractable problem general formally Pcomplete However recent research evidenced classes games certain structural restrictions considered value computed polynomial time 383 An interesting question Shapley value retains desirable computational property IDM functions presence valuation structures Finally practical viewpoint natural avenue research embark implementation approaches exhibited single islands tractability conduct experimental activity assess scalability synthetic benchmarks realworld instances Acknowledgements We grateful anonymous referees useful suggestions helped improve quality paper The work supported project Ba2Know Business Analytics Know Service Innovation LAB No PON03PE_ 00001_1 funded Italian Ministry University Research MIUR project Smarter Solutions Big Data World S2BDW funded Italian Ministry Economic Development MISE programme PON Imprese e competitivitá 20142020 Appendix A Notation Table A1 reports notation consistently paper Appendix B Results Section 22 Theorem B1 Let E cid10 E set edges Then following properties hold multicut feasible coalition structure cid6 cid3N v P cid4 E cid10 e E C j cid6 e C j 1 2 If cid6 feasible coalition structure cid3N v P cid4 valcid6 0 E cid10 e E C j cid6 e C j 1 multicut 1 If E cid10 valcid6 cid2 cid2 cid2 cid2 eE ecid10Ecid10 wecid10 0 valcid6 eE ecid10Ecid10 wecid10 cid10 cid10 If e E Proof 1 Assume E That letting cid6 edge e C j 1 holds j 1 k e belongs multicut E cid10 e E C j cid6 e C j 1 Moreover cid6 exhaustively covers nodes N C1 Ck clearly holds E Ci C j holds pair distinct indices j 1 k Therefore cid6 feasible coalition structure cid3N v P cid4 multicut let C1 Ck connected components graph N E E cid10 44 G Greco A Guzzo Artiﬁcial Intelligence 249 2017 1946 Table A1 Notation paper Notation cid2 cid3N vcid4 C N G N E σ cid3G S α β x ycid4 Fσ cid2 valσ v C valσ C cid6 C1 Ck CSσ cid2 valσ v cid6 valσ cid6 optσ cid2 CSoptσ cid2 cid3Gcid4 K N c CR ξ Rcid2 Rξ Rcid2 C v cid21 cid21 t w gg mcn AGM CTWhmcn I cid3Var U Ccid4 CSPcid2 σ PGI Eσ v cid6 Eσ cid6 CScoreσ cid2 Description coalitional game coalition undirected graph agents N viewed nodes valuation structure set σ feasible coalitions cid2 σ value C wrt v shorthand valσ v C v clearly understood coalition structure C1 Ck Fσ cid2 set σ feasible coalition structures cid2 σ value cid6 wrt v shorthand valσ v cid6 v clearly understood maximum possible σ value CSσ cid2 set σ optimal coalition structures cid2 shorthand valuation structures cid3G α β x ycid4 complete graph N shorthand valuation structure cid3K N cid4 constant function mapping element c R class games encoded representation R encoding cid2 according R value C according v returned R function returning size encoding function returning treewidth graph graphgame encoding encoding marginal contribution networks agent graph marginal contribution network M restriction Cmcn agent graphs having treewidth h CSP instance CSP instance associated cid2 σ primal graph CSP instance I set eﬃcient vectors cid6 wrt v shorthand Eσ v cid6 v clearly understood coalition structure core cid2 wrt σ cid2 Moreover holds valcid6 k j1 v P C j v P C j sum weights edges subgraph G P induced C j In fact pair P disconnected E endpoints belong different components This entails v P C j sum weights edges subgraph G induced C j Hence valcid6 sum weights edges G belonging E ecid10Ecid10 wecid10 cid10 e E C j cid6 e C j 1 valcid6 0 By deﬁnition valuation function entails sourceterminal pair P endpoints belongs distinct coalitions cid6 That set E edges entirely covered coalition cid6 forms cid10 multicut In particular cid6 precisely coalition structure associated E according point 1 cid2 valcid6 2 Assume cid6 feasible coalition structure E Formally valcid6 eE cid2 cid2 cid2 cid10 cid10 cid10 eE ecid10Ecid10 wecid10 cid3 Theorem B2 Let E cid10 E set edges Then following properties hold 1 If E cid10 multiway cut σmwfeasible coalition structure cid6 cid3N v mwcid4 E cid2 cid2 cid10 e E C j cid6 e C j 2 If cid6 σmw feasible coalition structure cid3N v mwcid4 E cid2 cid10 e E C j cid6 e C j 1 multiway cut 1 valσmw cid6 eE cid2 ecid10Ecid10 wecid10 valσmw cid6 eE ecid10Ecid10 wecid10 cid10 multiway cut C1 Ck connected components graph N E E cid10 C j T 1 Proof 1 If E holds j 1 k Hence cid6 C1 Ck σmwfeasible coalition structure Eventually trivially cid10 e E C j cid6 e C j 1 valσmw cid6 eE E 2 If cid6 σmwfeasible coalition structure C j T 1 holds C j cid6 Therefore set E C j cid6 e C j 1 multiway cut Again deﬁnition valuation function valσmw cid6 cid2 cid10 e E cid2 eE ecid10Ecid10 wecid10 cid2 cid2 ecid10Ecid10 wecid10 cid3 Theorem B3 Let cid6 clustering Then following properties hold 1 If cid6 kclustering set R N R k cid6 σRfeasible coalition structure cid3N v cccid4 cid2 valσR cid6 Ci cid6 v cvCi 0 G Greco A Guzzo Artiﬁcial Intelligence 249 2017 1946 45 2 If set R N agents R k cid6 σRfeasible coalition structure cid3N v cccid4 valσR cid6 0 cid2 cid6 kclustering valσR cid6 Ci cid6 v ccCi cid2 Proof 1 Let cid6 kclustering Thus cid6 form C1 Ck C1 Ck N Ci C j pair distinct indices j For 1 k let ri agent Ci deﬁne R r1 rk Then cid6 σRfeasible coalition structure σR cid3G R 1 0 0 cid4 In particular observe subgraph induced Ci connected 1 k deﬁnition cluster Hence pivotal connectedness conditions hold Moreover valσR cid6 Ci cid6 v ccCi holds deﬁnition σR coalition cid6 include agent R 2 Assume cid6 σRfeasible coalition structure R k valσR cid6 0 Since R k cid6 k holds Moreover inequality strict valσR cid6 0 fact σR cid3G R 1 0 0 cid4 Therefore cid6 k Moreover cid6 kclustering connectedness condition holds coalitions σRfeasibility valσR cid6 Ci cid6 v ccCi cid3 cid2 Theorem B4 The following properties hold 1 If C1 c1 Ch ch chromatic partition cid6 C1 c1 Ch ch c cid2 cid2 σchfeasible coalition structure cid3N v chcid4 valσch cid6 Ci cid6 eEeCi wci e 2 If cid6 σchfeasible coalition structure cid3N v chcid4 valσch Ci cid16 Ci cid6 chromatic par cid10 C c1 ch valσcp cid6 titioning C1 c1 Ch ch cid6 C1 c1 Ch ch c cid2 cid10 c cid2 cid10 c cid10 C c1 ch Ci cid6 eEeCi wci e Proof 1 If C1 c1 Ch ch chromatic partition ci cid16 c j j 1 h cid16 j Therefore cid6 satisﬁes pivotal condition Moreover 1 h agent Ci connected ci GC Hence connectivity condition satisﬁed cid6 σchfeasible coalition structure Eventually coalition cid6 contain pivotal agent immediately valσcp cid6 2 If cid6 σchfeasible coalition structure valσcp Ci cid16 Ci cid6 cid6 includes coalition cid10 pivotal agents Thus chromatic partitioning C1 c1 Ch ch cid6 C1 c1 Ch ch c cid10 C c1 ch valσcp cid6 e cid3 c eEeCi wci e Ci cid6 wci cid2 cid2 cid2 cid2 Ci cid6 eEeCi References 1 S Arnborg J Lagergren D Seese Easy problems treedecomposable graphs J Algorithms 12 2 1991 308340 2 H Aziz B Keijzer Complexity coalition structure generation Proc AAMAS 11 2011 pp 191198 3 H Aziz B Keijzer Shapley meets Shapley Proc STACS14 2014 pp 99111 4 Y Bachrach P Kohli V Kolmogorov M Zadimoghaddam Optimal coalition structure generation cooperative graph games Proc AAAI13 2013 pp 8187 2014 pp 1320 5 Y Bachrach R Meir K Jung P Kohli Coalitional structure generation skill games Proc AAAI10 2010 pp 703708 6 N Bansal A Blum S Chawla Correlation clustering Mach Learn 56 13 2004 89113 7 S Basu I Davidson K Wagstaff Constrained Clustering Advances Algorithms Theory Applications 1st ed Chapman HallCRC 2008 8 C Bentz On complexity multicut problem bounded treewidth graphs digraphs Discrete Appl Math 156 10 2008 19081917 9 F Bistaffa A Farinelli J Cerquides J RodríguezAguilar S Ramchurn Anytime coalition structure generation synergy graphs Proc AAMAS14 10 HL Bodlaender Dynamic programming graphs bounded treewidth Proc ICALP88 1988 pp 105118 11 HL Bodlaender A lineartime algorithm ﬁnding treedecompositions small treewidth SIAM J Comput 25 6 1996 13051317 12 F Bonchi A Gionis F Gullo A Ukkonen Chromatic correlation clustering Proc KDD12 2012 pp 13211329 13 M Breton G Owen S Weber Strongly balanced cooperative games Int J Game Theory 20 4 1992 419427 14 G Chalkiadakis E Elkind M Wooldridge Computational aspects cooperative game theory Synth Lect Artif Intell Mach Learn 5 6 2011 1168 15 G Chalkiadakis G Greco E Markakis Characteristic function games restricted agent interactions corestability coalition structures Artif Intell 232 2016 76113 16 S Chopra MR Rao On multiway cut polyhedron Networks 21 1 1991 5189 17 V Conitzer T Sandholm Complexity constructing solutions core based synergies coalitions Artif Intell 170 67 2006 607619 18 MC Costa A Billionnet Multiway cut integer ﬂow problems trees Electron Notes Discrete Math 17 2004 105109 19 B Courcelle Graph rewriting algebraic logic approach Handbook Theoretical Computer Science Volume B Formal Models Semantics The MIT Press Cambridge MA USA 1990 pp 193242 20 PJ Cowans M Szummer A graphical model simultaneous partitioning labeling Proc AISTATS05 2005 pp 7380 21 E Dahlhaus DS Johnson CH Papadimitriou PD Seymour M Yannakakis The complexity multiterminal cuts SIAM J Comput 23 4 1994 864894 22 VD Dang NR Jennings Generating coalition structures ﬁnite bound optimal guarantees Proc AAMAS04 2004 pp 564571 23 R Dechter Constraint Processing Morgan Kaufmann Publishers Inc San Francisco CA USA 2003 24 G Demange Intermediate preferences stable coalition structures J Math Econ 23 1 1994 4558 25 G Demange On group stability hierarchies networks J Polit Econ 112 4 2004 754778 26 G Demange The strategy structure coalition formation games Games Econ Behav 65 1 2009 83104 27 X Deng CH Papadimitriou On complexity cooperative solution concepts Math Oper Res 19 2 1994 257266 28 FY Edgeworth Mathematical Psychics An Essay Mathematics Moral Sciences C Kegan Paul Co London 1881 29 E Elkind G Chalkiadakis NR Jennings Coalition structures weighted voting games Proc ECAI08 2008 pp 393397 30 E Elkind LA Goldberg PW Goldberg M Wooldridge On computational complexity weighted voting games Ann Math Artif Intell 56 2 2009 109131 46 G Greco A Guzzo Artiﬁcial Intelligence 249 2017 1946 2013 pp 138 31 E Elkind T Rahwan NR Jennings Computational coalition formation Multiagent Systems MIT Press 2013 pp 329380 32 DB Gillies Solutions general nonzerosum games Contributions Theory Games vol IV Ann Math Stud vol 40 Princeton University Press Princeton NJ USA 1959 pp 4785 33 I Giotis V Guruswami Correlation clustering ﬁxed number clusters Proc SODA06 2006 pp 11671176 34 G Gottlob G Greco Decomposing combinatorial auctions set packing problems J ACM 60 4 2013 2412439 35 G Gottlob G Greco N Leone F Scarcello Hypertree decompositions questions answers Proc PODS16 2016 pp 5774 36 G Gottlob G Greco F Scarcello Treewidth hypertree width Tractability Practical Approaches Hard Problems Cambridge University Press 37 G Gottlob ST Lee A logical approach multicut problems Inf Process Lett 103 4 2007 136141 38 G Greco F Lupia F Scarcello Structural tractability Shapley Banzhaf values allocation games Proc IJCAI15 2015 pp 547553 39 G Greco E Malizia L Palopoli F Scarcello On complexity core kernel bargaining set Artif Intell 175 1213 2011 18771910 40 G Greco F Scarcello Structural tractability constraint optimization Proc CP11 2011 pp 340355 41 G Greco F Scarcello Greedy strategies larger islands tractability conjunctive queries constraint satisfaction problems Inf Comput 252 2017 201220 Eur J Oper Res 186 2 2008 542553 42 J Guo F Hüffner E Kenar R Niedermeier J Uhlmann Complexity exact algorithms vertex multicut interval bounded treewidth graphs 43 S Ieong Y Shoham Marginal contribution nets compact representation scheme coalitional games Proc EC05 2005 pp 193202 44 DS Johnson A catalog complexity classes Handbook Theoretical Computer Science Algorithms Complexity vol A The MIT Press 45 E Kalai E Zemel On totally balanced games games ﬂow Discussion Paper 413 Center Mathematical Studies Economics Management Cambridge MA USA 1990 pp 67161 Science Northwestern University Evanston IL USA 1980 46 H Keinänen Simulated annealing multiagent coalition formation Proc KESAMSTA09 2009 pp 3039 47 J Kleinberg E Tardos Algorithm Design Addison Wesley Boston MA USA 2005 48 MW Krentel The complexity optimization problems Proc STOC86 1986 pp 6976 49 N Megiddo Computational complexity game theory approach cost allocation tree Math Oper Res 3 3 1978 189196 50 T Michalak J Sroka T Rahwan M Wooldridge P McBurney NR Jennings A distributed algorithm anytime coalition structure generation Proc 51 RB Myerson Graphs cooperation games Math Oper Res 2 3 1977 225229 52 N Ohta V Conitzer R Ichimura Y Sakurai A Iwasaki M Yokoo Coalition structure generation utilizing compact characteristic function representa AAMAS10 2010 pp 10071014 tions Proc CP09 2009 pp 623638 53 MJ Osborne A Rubinstein A Course Game Theory The MIT Press Cambridge MA USA 1994 54 CH Papadimitriou Computational Complexity Addison Wesley Reading MA USA 1994 55 R Pichler S Rümmele S Woltran Multicut algorithms tree decompositions Proc CIAC10 2010 pp 167179 56 T Rahwan NR Jennings An algorithm distributing coalitional value calculations cooperating agents Artif Intell 171 89 2007 535567 57 T Rahwan NR Jennings An improved dynamic programming algorithm coalition structure generation Proc AAMAS08 2008 pp 14171420 58 T Rahwan TP Michalak E Elkind P Faliszewski J Sroka M Wooldridge NR Jennings Constrained coalition formation Proc AAAI11 2011 pp 719725 59 T Rahwan TP Michalak M Wooldridge NR Jennings Coalition structure generation survey Artif Intell 229 2015 139174 60 T Rahwan SD Ramchurn NR Jennings A Giovannucci Anytime algorithm optimal coalition structure generation J Artif Intell Res 34 2009 521567 61 N Robertson P Seymour Graph minors III planar treewidth J Comb Theory Ser B 36 1 1984 4964 62 T Sandholm K Larson M Andersson O Shehory F Tohmé Coalition structure generation worst case guarantees Artif Intell 111 12 1999 209238 63 A Schrijver Theory Linear Integer Programming John Wiley Sons New York NY USA 1998 64 S Sen PS Dutta Searching optimal coalition structures Proc ICMAS00 2000 pp 287292 65 O Shehory S Kraus Methods task allocation agent coalition formation Artif Intell 101 12 1998 165200 66 S Ueda A Iwasaki M Yokoo MC Silaghi K Hirayama T Matsui Coalition structure generation based distributed constraint optimization 67 S Ueda M Kitaki A Iwasaki M Yokoo Concise characteristic function representations coalitional games based agent types Proc AA Proc AAAI10 2010 pp 197203 MAS11 2011 pp 12711272 68 V Vazirani Approximation Algorithms SpringerVerlag Inc New York NY USA 2001 69 T Voice M Polukarov NR Jennings Coalition structure generation graphs J Artif Intell Res 45 1 2012 165196 70 T Voice SD Ramchurn NR Jennings On coalition formation sparse synergies Proc AAMAS12 2012 pp 223230 71 J von Neumann O Morgenstern Theory Games Economic Behavior 3rd ed Princeton University Press Princeton NJ USA 1953 72 K Wagstaff C Cardie S Rogers S Schrödl Constrained kmeans clustering background knowledge Proc ICML01 2001 pp 577584