ELSEVIER Artificial Intelligence 8 1 1996 11 I 125 Artificial Intelligence Some pitfalls experimenters random SAT David G Mitchell Hector J Levesque 2 Department Computer Science University Toronto Toronto Ontario M5S IA4 Canada Received July 1994 revised April 1995 Abstract We consider use random CNF formulas evaluating performance SAT testing algorithms particular role phase transition phenomenon plays use properties formula Examples distributions prior designing experiment We expect field importance understanding increasing literature importance illustrate Keywords Satisfiability Random problems Phase transitions Experimental design 1 Introduction tasks problems reasoning Satisfiability performance especially generated CNF formulas testing relationship lies core computational SAT testing programs Not surprisingly close intelligence Randomly evaluating formula distribution In formulas sources test material region associated satisfiabletounsatisfiable number clauses examples literature experiments sufficient consideration given properties formulas In cases test formulas implicitly assumed artificial popular class test problems choice random investigation families distributions useful hard phase transition occurs increased Here concrete presenting suggested choosing validity 26 argued crucial formulas Corresponding author Email mitchellcstorontoedu Work carried Simon Fraser University Bumaby Canada supported Institute Robotics Intelligent Systems EBCOEPIC Graduate Scholarship Fellow Canadian Institute Advanced Research Supported grant Natural Sciences Engineering Research Council Canada 00043702961500 1996 Elsevier Science BV All rights reserved XSDlOOO43702 95000496 I12 DG Mitchell HJ LevesqueArtcial Intelligence 81 1996 I II125 challenging way hardness dependent particular parameter experimentation case Our examples based currently popular unstructured random formulas The value test materialeven sampled hard regioncan questioned grounds like real problems 51720 distributions appear challenging variety methods expect use continue Moreover available alternatives puzzletype problems crossword puzzles distributions priori greater validity Nonetheless classes structured random formulas likely popular Section 8 discuss implications examples distributions In Section 2 SAT testing algorithm formula distributions consideration Section 3 survey properties formulas Sections 47 examine individual experiments light know formulas Additional data presented needed In Section 8 summa rize 2 Materials methods We assume reader familiar problem SAT defined 121 The data analysis produced testing randomly generated SAT instances simple version DavisPutnam Procedure 81 Our procedure refer DP shown Fig 1 In figure w denotes CNF formula wp denotes formula results simplify w setting variable p true We assume variables ordered let uarsw denote set variables mentioned w minvarsw variable mentioned w DP essentially splitting variant DavisPutnam Procedure described 7 pure literal rule It uses heuristics unit propagation This simplest complete SAT testing procedure performs useful provides kind baseline performance related methods We count recursive DP equivalently simplification step We procedure DP w w return satisfiable w contains clause return unsatisable w contains unit clause 1 return DPwl let p minvarsw DP op satisfiable return satisfiable return DPw7p end DP Fig 1 The procedure DP DG Mitchell HJ LmesqueArtijcial Intelligence 81 1996 111125 113 report median number DP steps satisfying assignment report failure For distributions median number steps highly correlated mean mean median run times We report proportion formulas satisfiable Each point graph represents sample statistic based 5000 formulas We examine families random CNF formulas Each family parame ters number variables n number clauses M n distribution clauses n variables We constructed parameter c mn ratio clauses variables useful m The families fol lows l The widely studied fixed clause length family random kSAT Clauses selected uniformly random replacement set 2k nontrivial3 clauses length k defined n variables l The constant density distributions In simplest version clause constructed including 2n literals probability p function n Clause lengths binomially distributed expected length 2np It useful study formulas terms expected clause length k case set p k2n Since clauses unit clauses trivial clauses easy simplify out4 experimenters began variants certain clause types disallowed case expected clause length altered slightly rejection forbidden clause types In Section 4 consider case unit clauses permitted trivial clauses forbidden In Sections 3 5 consider case unit trivial clauses forbidden We version random kSAT E denote k expectation l Distributions clause lengths distributed uniformly fixed range k Z We distributions kl SAT 3 Patterns random SAT In section survey basic empirical properties random formulas reference following sections 31 Random kSAT The upper graph Fig 2 shows proportion random kSAT formulas n 25 variables satisfiable There curve clause length k E 2345 curve ratio clauses variables c varied l5 30 As shown small ratios formulas satisfiable high ratios unsatisfiable For k range c values proportion satisfiable formulas changes 1 0 The location trivial contains variable negation instances family probability 27 extending work Franc0 9 presented algorithm 1 E constant E 0 polynomial 3 A clause 4 Moreover Wu Tang solves expected time See 2221 114 DC Mitchell HJ LevesyueArtijicial Intelligence 81 1996 11 l125 PrSAT 1 71 DP Steps 00 10000 1000 100 10 0 5 10 15 20 25 30 Ratio Clauses Variables Fig 2 Median DP steps random kSAT varying c selected values k transition ratio values n analytically c 4758 bounded region varies k k occurs approximately The asymptotic region For k 3 currently known bounds location transition 41424 lo transition respectively distinguish k As expected yaxis necessitated dramatic median number DP steps required regions hard formulas 191 c 3003 test The lower graph Fig 2 shows increase formulas Note logarithmic peak k lines peak difficulty increasing region We curve near peak hard corresponding far transition qualitatively region small n relatively easier This easy region hard region sense Moving range ratios curve little ratio varied refer difficulty changes number DP steps 25 number plateau variables speaking DP assigns values variables guessing unit propagation We refer region region c 1 difficulty drops quickly decreasing When c increased region difficulty gradually decreases This general pattern larger k shown know holds large k left hard region backtracking region In region hard rigorous c shoulder occurs Roughly necessarily transition Random 2SAT Observe difficulty random 2SAT increases level plateau region begins decrease Random 2SAT Fig 2 c increased DG Mitchell HJ LevesqueArtcial Intelligence 81 I 996 11 l125 115 Table 1 DP performance random 2SAT c I I DP steps stepsn 25 19 076 50 31 074 15 55 073 100 74 074 125 150 175 200 92 074 110 073 128 013 146 073 225 I64 073 250 182 073 DP Steps 10000 1000 100 10 2 3 4 5 6 7 8 Ratio Clauses Variables Fig 3 DP steps random 3SAT selected values n sense hard region exhibit seen k larger 5 surprising 2SAT solvable time On m 11 Table 1 shows median DP steps ratio median DP steps n test random 2SAT c 1 n 250 At range median number steps smaller n grows faster n DP requires time O2 worst case random 2SAT data suggests linear average Location peak We usually interested performance increasing n particular n Fig 3 shows effect increasing n curves random 3 SAT The transition region narrower occurs smaller range c n increased The peak hardness DP occurs approximately point 40 formulas satisfiable shifts slightly left n increased correspondence shift point Since empirical tests measure difficulty particular algorithm given set problems expect location peak hardness somewhat proceduredependent Cheeseman et al 31 hypothesized phase transitions occur problems l Random 2SAT counterexamples present observation suggests revised version hypothesis I16 DC Mitcheli HJ LevesqueArtcial intelligence 81 19 111125 10 PrSAT 05 DP Steps 00 80 60 40 20 0 0 2 4 6 8 10 12 Ratio Clauses Variables Fig 4 Median DP steps random CRSAT varying c selected values k DP tends better satisfiable For example adding heuristic poorer unsatisfiable average performance subsets weighting satisfiable hardness random 3SAT DavisPutnam half instances satisfiable algorithms peak slightly different instances instances result peak right satisfiable peak Procedure near ratio appear 42126 changes c In 26 suggested weighted average performance ratios 32 Random ZkSAT Fig 4 shows proportion satisfiable formulas median DP steps testing l5 restrictions random EZSAT k E 2345 c varied random EkSAT n 25 variables random 2SAT identical 12 Because length distributions As random kSAT curves converge shoulder shape small c case c 2 k 3 easy plateau region hard region trailing difficulty right As fixed clause peaks transition points shift right increased k peak length formulas hardness increases k The significant difference formulas easier The random kSAT noted difference n lower ratios Another difference long clauses average clause clauses shorter transition lengths 5 increases increasing regions shifted somewhat lengths Since distributions average clause factor 100 clause length apparently transition region lowers DG Mitchell HJ LevesqueArtificial Intelligence 81 1996 11 l125 117 00 10000 r I I I I I I Hooker sSAT 1000 r _ 2SAT DP Steps l 1 I I _ I 1 _ _ _ __ I I I I I _ _ _ 100 F 10 0 1 2 3 4 5 6 7 Ratio Clauses Variables 8 Fig 5 Median DP steps formulas Hooker 33 kZSAT The general patterns shown occur kl SAT albeit added complexity additional parameter random kSAT special case kl SAT k I We content case presenting particular data needed Sections 4 6 4 No hard region In Section 31 noted random 2SAT exhibit hard region usual sense solved efficiently worst case In section consider experiments distributions NPcomplete sets formulas appear hard regions data suggests easy average random 2SAT As consequence conclude data experiments described provides evidence procedures effective nontrivial problems Hooker 171 compared performance resolutionbased procedure based cutting planes constant density formulas unit clauses allowed trivial clauses prohibited In case p set expected clause length 5 formulas generated c 2 n E 10203050 n 20 c E 1234632 We generated formulas distribution tested DP Fig 5 shows median DP steps 118 DG Mitchell HJ LevesqueArtijcial Intelligence RI I 996 1 II125 10 PrSAT 05 nn 1000 DP Steps 27SAT SSAT ZSAT 0 1 2 3 4 5 6 7 8 Ratio Clauses Variables Fig 6 Median DP steps 17 SAT 27SAT formulas labeled Hooker figure n 50 c varied l5 8 Corresponding curves random 3SAT random 2SAT n 50 included comparison There evidence hard region Hookers formulas median number DP steps test formulas 50 ratio tested c 50 We repeated experiment n 100 exactly pattern Hooker noted cutting plane algorithm required small number iterations solve problems resolution procedure performed poorly unable report completion times conditions Yet DPwhich expressed resolution strategy 151 required backtracking 3 backtracks average test consistently solves small fraction second Gallo Urbani 1 l compared performance enhancements DavisPutnam Procedure 17SAT We generated range formulas tested DP Fig 6 shows median DP steps proportion satisfiable 17 SAT formulas n 50 variables corresponding curves 27SAT random 2SAT random 3SAT The 17 SAT formulas exhibit essentially behavior random 2SAT usual shoulder pattern left evidence hard region We confirmed behavior n 1000 peak remains smaller random 2SAT Virtually backtracking required test formulas We conclude formula distributions 17SAT Hooker 171 harder average random 2SAT little use SAT algorithm evaluation DG Mitchell HJ LevesqueArticial Intelligence 81 1996 111125 119 5 Missing hard region We observed orders magnitude experimenters hard region trivial Section 3 random kSAT exhibit hard region In section formulas random kSAT formulas easier comparable distribution spite large size Gu 161 Kamath et al 181 evaluated procedures based local search testing large random 3SAT formulas respectively tested random E3SAT n E 50500 interior point programming Gu n E 505001000 generated upper graph Fig 7 Also shown 3SAT n 50 The experiments testing To confirm intuition plotted number backtracks large n formulas extremely easy 6 Kamath n 1000 cases c 2 We lOOO results curve random c 2 clearly fall left hard region requires guessing unit propagation lower graph Fig 7 The median c 2 1 II 500 0 n 1000 fairly median number backtracks comparison curve essentially peak difficulty Both Gu Kamath et al formulas shape left onefourth curve hundreds We generated tested random ElOSAT random ElOSAT Gu tested formulas values n 5000 c 10 Kamath et al formulas IZ 1000 c 32 We expected hard region occur high value substantial formulas c probably n 50 c varied 1 50 1000 samples point We include graph region appears c 8 c 8 upper graph Fig 7 The shoulder c 50 curve backtracking hard region 1000 formulas mean number required backtracks 1 We tested random ElOSAT formulas n 1000 variables c ranging 10 At c 10 curve median DP steps formulas passed shoulder region About 90 formulas c 10 required zero backtracks test 1000 formulas tested required At lower ratios fewer backtracks needed These formulas despite large trivial flat At c 50 evidence approaching tested satisfiable essentially ratio 35 test average test nearly formulas 6 Interaction parameters In 61 dAnjou colleagues performance demonstrate report tests variety random formulas Boltzmann Machine method SAT testing h Truth advertising Although vast majority formulas thousands formulas ate harder trivial compared number backtracks sized hard random SSAT formulas The harder formulas occur rarely expect similarly 131 studied apparently harder rarer formulas believe occur rarely n gets large distribution useful studies small sample sizes examples region These interesting section Gent Walsh required 0 1 2 backtracks mean 120 DC Mitchell HJ LevesqueArtcial Intelligence 8I 1996 111125 I I I n I ___ 100000 r 10000 1000 100 DP Steps DP Back tracks 0 1 2 3 4 5 Ratio Clauses Variables Fig 7 Median DP steps backtracks random 3SAT refer BM Their data presented evidence average number clauses We spite authors methodical manipulation data support distribution BM solves SAT length number variables regardless clause time nearly conclusion parameters linear k k E 2567 experiment repeated To run time BM independent clause size dAnjou et al tested random effect run time varying kSAT formulas fixed n m observed k The range In cases formulas m 25 clauses For value n n E 10152025 BM took essentially ratio time choices k The clausetovariable test sets range 1 c 25 They fall plateau region DP cf Fig 2 performed experiment DP instead BM effect k But know hard region k dramatic experiment design effect hardness m tests transition larger value chosen picked n 25 region m 250 c lo increasing DP steps results suspect For example k led dramatic decrease DP Just importantly To run dAnjou et al tested formulas 25 55 The average time BM independent number clauses 27SAT n 20 variables m varied time BM increased slightly m varied 25 formula DG Mitchell HJ LevesqueArtijcial Intelligence 81 1996 111125 121 55 variance increase substantially The range clausetovariable ratios experiment 125 275 As Fig 6 shows 27SAT exhibit easyhardeasy pattern number steps DP test formulas change significantly range ratios tested dAnjou et al Again performed experiment DP results We know performance DP affected number clauses To large extent general form volume Manipulation m detect easyhardeasy pattern range spans transition region Anomalous results occur uninformed choices For example varying m 130 160 experiment produce decrease difficulty increasing m Believing BM unaffected clause length number clauses dAnjou et al concluded demonstrate scaling run time varying n keeping clause length distribution m constant Thus support main claim tested formulas 27SAT n E 10152025303540 lOO case m 25 clauses The times BM solve problems function n fit closely linear curve Once range ratios tested 25 025 number variables increased 10 100 falls easy region cf Fig 6 If m fixed increasing n decreases c picking larger value m helped experiment For example repeated experiment DP m 65 n 10 c 65 testing hard region large n easy region n 40 c z 16 Our data suggests formula sets 6 harder random 2SAT experiments reported examples missing hard region discussed Section 5 However additional issues involved We dont know BM perform hard formulas results 6 artifact easy formulas unfortunate parameter choices indicative positive performance characteristics BM Increasing n m fixed leads small values c easy instances Increasing m leads large values c easy relative peak problems Moreover increasing k shifts hard area higher values c producing easy problems To generate hard formulas varying size requires n m varied time hard formulas result interaction parameters Similarly want change k obtain formulas relative hardness proportion satisfiable change m time More generally varying parameters necessarily experiment informative performance test procedure effects manipulations formulas extent understood The IOOvariable point suspect priori There 200 literals choose expect 115 literals 25 clause formula half literak wont mentioned 122 DG Mitchell HJ LevesqueArtijicial Intelligence RI 1996 I II125 Table 2 Locations tests Gallo Urbani 111 Test Variables Clauses Ratio 50 point Satisfiable Time s 1 10 50 50 486 7 03 2 20 100 50 455 5 12 3 30 140 467 445 2 51 4 40 170 425 440 6 135 5 50 200 40 436 8 327 7 Picking ratios When n fair understanding chosen distribution simple heuristic region safe ground typically experimentally simple knowing approximate k 3 In section consider common peak hardness hard region transition corresponds like test half formulas satisfiable In experiments vary parameter interactions region fairly easily For random LSAT ratio k setting m 425n location precisely determine experimenter track transition approach parameter adequate transition situation To begin consider experiment Gallo Urbani 111 performance SAT procedures compared sets random 3SAT formulas partial results shown number test formulas satisfiable Gallo Urbanis experimental places ratio 50 formulas satisfiable n m Table 2 The table gives parameter values lo time seconds Procedure Also shown decimal given values based large samples accurate implementation estimates DavisPutnam peak Gallo Urbani chose m based estimates half formulas satisfiable comparison known 50 ratios Table 2 shows small sample sizes We somewhat probably estimating know exactly experiment peaks procedure identical c procedures close If assume Table 2 shift somewhat peak somewhat peak crossing near data point Thus looking points gives overestimate growth time n looking points gives underestimate growth suggests true choices procedure DP experience Fig 8 shows median DP steps test random 3SAT hard region precisely defined increasing transition ratios 111 test exactly peak If reasonably n sense Although wider region gets narrower We claim hard region So matter close interested LX Mitchell HJ LevesqueArtificial Intelligence 81 1996 111125 123 n25 n50 DP Steps 16000 14000 12000 10000 8000 6000 4000 2000 0 Ratio Clauses Variables fig 8 Median DP steps random 3SAT selected values n But broadening left slope hard region hard improvements dramatic performance count region occur procedures distributions rapidly steeper n Further increased With n 75 shift c cent result factor lines Fig 8 difference effect pronounced increasing n Moreover transition estimate particular point transition curve cent expensive number steps taken shown vertical region narrower n increased finding accurate experimental task large n formulas The steep slope left hard region far transition region problem procedures DP case Likely candidates localsearchbased methods These considerable primary satisfiable test sets work success reported formulas near hard region having 23 Although performance local search good half formulas satisfiable writing know rigorous study procedures perform c increased transition formulas likely poorly 162325 Random 3SAT formulas righthand transition thousands variables region finding satisfying truth assignments success region A major difficulty evaluating procedures SAT testing program available search procedures sound incomplete solved satisfiable correct Since failure formulas given likely n increases measured sound complete local way know procedure times run times expected reported average capable testing hard formulas Since 124 DG Mitchell HJ LevesqueArtcial Intelligence 81 1996 111125 underestimate actual increase solution time n The narrowing transition region increasing n exacerbates problem large II error cent choice c substantial difference proportion formulas satisfiable difficulty formulas 8 Discussion Random formulas researchers empirically evaluate performance SAT testing programs The value studies depends careful selection formula distribution parameter values presented number examples literature illustrate The lesson summarized follows When random formulas extensive study distributions parameter space carried experiment designed results meaningful In case previously unused distribution family require extensive testing known distributions considerable care needed Simple heuristics picking parameter settings adequate range parameter values tested IZ establish peak difficulty This especially true local search methods incompleteness means knowledge behavior near transition region While argued easy point finger previous work light current state knowledge important lesson future work especially structured random distributions 20 workers scheduling constraint satisfaction Similar pitfalls expected nontrivial parameterized distribution random problems fact likely troublesome Suggestions alistically structured problem distributions generally parameters currently popular unstructured families effects parameter manipulation problem difficulty complex A understanding requires exami nation effects parameter combination parameters Understanding interactions parameters task taken lightly Watching implicit assumptions experimental designs essential We like stress examples particular importance random SAT The size number variables useful measure hardness cf Section 5 This important evaluating algorithm performance interested happens problem size increases Formulas 5000 variables 50000 clauses 500000 literals 161 sound impressively large distribution like called random loSAT solved easily simple procedure like DP backtrack average The second manipulating single parameter holding constant necessarily good indication parameter affects instance difficulty cf Section 6 This important distributions multiple parameters interaction effects far intuitively obvious DG Mitchell HJ LevesqueArtijicial Intelligence 81 1996 111125 125 References 1 I 1 B AspvaIl MF Plass RE Tarjan A lineartime algorithm testing truth certain quantified boolean formulas In5 Process Lt 8 3 1979 121123 12 1 M Chao J France Probabilistic analysis generalization unitclause literal selection heuristics k satisfiability problem Inform Sci 51 1990 2893 14 13 1 P Cheeseman B Kanefsky WM Taylor Where hard problems Proceedings IJCAl91 Sydney Australia 1991 14 I JM Crawford LD Auton Experimental results crossover point satisfiability problems Proceedings AAAl93 Washington DC 1993 2129 15 I JM Crawford AB Baker Experimental results application satisfiability algorithms scheduling problems Proceedings AAAl94 Seattle WA 1994 16 I A dAnjou M Gratis FJ Torrealdea MC Hemandez Solving satisfiability Boltzmann Machines IEEE Trans Pattern Anal Mach lntell 15 5 1993 17 1 M Davis G Logemann D Loveland A machine program theoremproving Commun ACM 5 1962 394397 18 1 M Davis H Putnam A computing procedure quantification theory J ACM 7 1960 201215 19 I J France On probabilistic performance algorithms satisfiability problem Inf Process Letf 23 1986 103106 101 A Frieze S Suen Analysis simple heuristics random instance kSAT Manuscript 1992 I I G Gallo G Urbani Algorithms testing satisfiability propositional formulae J Logic Program 7 1989 456 I I 12 I MR Garey DS Johnson Computers Intractability A Guide Theory ojNPCompleteness Freeman New York 1979 I 13 I 1P Gent T Walsh The hardest random SAT problems Proceedings K94 1994 14 I IP Gent T Walsh The SAT phase transition Proceedings ECAI94 Amsterdam 1994 1 I5 1 A Goldberg On complexity satisfiability problem Courant Computer Science Report No 16 New York University 1979 I 16 I J Gu Efficient local search largescale satisfiability problems SIGART Bull 3 I 1992 812 I I7 I JN Hooker Resolution vs cutting plane solution inference problems computational experience 0per Res Lett 7 I 1988 l7 I I8 I A Kamath NK Karmarkar KG Ramakrishnan MGC Resende Computational experience interior point algorithm satisfiability problem Integer Programming Combinatorial Optimization Mathematical Programming Society 1990 333349 I 191 A Kamath R Motwani K Palem P Spinis Tail bounds occupancy satistiability threshold conjecture Proceedings FOCS94 1994 I20 I K Konolige Ey hard difficult problems greedy algorithms Proceedings KR94 Bonn Germany 1994 374378 I 2 I I T Larrabee Y Tsuji Evidence satisfiability threshold random 3CNF formulas Tech Repott UCSCCRL9242 CRL University California Santa Cmz CA 1992 I 22 I I Purdom A survey average time analyses satisfiability aIgorithms 1 fn Process I3 4 1990 I23 I B Selman H Kautz B Cohen Noise strategies improving local search Proceedings AAAI94 Seattle WA 1994 337343 24 I B Selman S Kirkpatrick Critical behavior computational cost satisfiability testing Artif fnfell 81 1996 273295 volume I 25 I B Selman HJ levesque DG Mitchell A new method solving hard satistiability problems Proceedings AAAI92 San Jose CA 1992 I26 I B Selman DG Mitchell HJ Levesque Generating hard satisfiability problems Artif Intell 81 1996 1729 volume 127 I L Wu CY Tang Solving satistiability problem randomized approach Inf Process Letf 41 1992 187190