Artiﬁcial Intelligence 164 2005 121170 wwwelseviercomlocateartint A formal framework decentralised diagnosis large scale discrete event systems application telecommunication networks Yannick Pencolé MarieOdile Cordier b CSL The Australian National University ACT 0200 Australia b IRISAUniversité Rennes 1 Campus Beaulieu 35000 Rennes France Received 30 September 2004 accepted 2 January 2005 Available online 24 February 2005 Abstract We address problem diagnosing large discrete event systems Given ﬂow observations goal explain observations online identifying localising possi ble failures consequences Modelbased diagnosis approaches deal problem apart recent proposals require computation global model possible large discrete event systems perform line diagnosis The contribution paper description implementation formal framework online decentralised diagnosis systems framework based divide conquer principle require global model computation This paper ﬁnally describes use framework monitoring real telecommunication network 2005 Elsevier BV All rights reserved Keywords Modelbased diagnosis Discrete event systems Decentralised model Distributed artiﬁcial intelligence Telecommunication networks Fault propagation Corresponding author Email addresses YannickPencoleanueduau Y Pencolé cordieririsafr MO Cordier 00043702 matter 2005 Elsevier BV All rights reserved doi101016jartint200501002 122 Y Pencolé MO Cordier Artiﬁcial Intelligence 164 2005 121170 1 Introduction The problem deal supervision complex large discrete event systems telecommunication networks electricity distribution network generally speaking Immobots 29 Given supervision continuously receiving ob servations alarms sent components purpose help operators identify failures Two classical approaches monitoring systems knowledge based techniques directly associate diagnosis set symptoms example expert systems 17 chronicle recognition systems 79 modelbased techniques rely behavioural model 22 The main weakness ﬁrst ap proach lack genericity changes new components new connections new technologies new expertise acquired Therefore focus modelbased techniques known better suited kind expertisebased approaches A number modelbased approaches diagnosing discrete event systems proposed AI control engineering literature They cover continuousvariable systems quantisation represented discrete systems 15 dis crete nature systems communicating processes exchange messages alarms The majority approaches centralised approaches 152326 For stance diagnoser approach 26 consists compilation diagnostic information data structure called diagnoser maps observations failures online diag nosis The main drawback centralised approaches require explicitly build global model unrealistic large complex systems telecommunication networks The considered systems naturally distributed easier model systems decentralised way An approach diagnosing discrete event systems decentralised diagnosers 8 computation decentralised diagnoser based global model There exist methods relying decentralised model 26 offline solve diagnosis problem posteriori Recently need solving diagnosis problem online monitoringbased approach 1314 developed method mixes diagnoser approach 26 extended version decentralised model 2 computing online interesting parts centralised diagnoser computing global model This method problem systematically uses global states problem dealing large discrete event systems In paper propose formal framework providing approach relies decentralised model computes online diagnosis large discrete event systems Firstly propose formalism decentralised models based communicating au tomata This formalism allows model behaviours large discrete event systems modular way use decentralised algorithms thanks generic synchronisation operation Secondly deﬁne diagnosis problem inside framework propose algo rithm online diagnosis To online diagnosis efﬁciency key issue The idea split ﬂow observations temporal windows For temporal window compute diagnosis subsystem subsystem diagnosis Y Pencolé MO Cordier Artiﬁcial Intelligence 164 2005 121170 123 build diagnosis global diagnosis merging subsystem diagnoses The merging operation applied thanks original strategy dynami cally recognises efﬁcient way apply merging operation based observations current temporal window The paper organised follows We ﬁrst introduce type systems sider monitoring problem small example illustration paper Sections 2 3 In Section 4 present formalism based communicating automata represent decentralised way model synchronisation operation allows perform decentralised rea sonings subpart way Section 5 explains diagnostic task deﬁning observations diagnoses Section 6 formally present centralised diagnosis approach prove equivalence respect centralised proposed framework Section 7 focuses choices implementation decentralised diagnosis approach order apply approach online Firstly partial order reduction techniques shown wellsuited efﬁciently representing diag noses Secondly merging operation strategy taking account interactions subsystem diagnoses dynamically proved greatly improve efﬁciency global diagnosis computation In Section 8 incremental aspect diagnosis problem introduced shown essential context dynamical monitoring Section 9 presents results relying real case telecommunication network This study context MAGDA project1 demonstrates bene ﬁts decentralised approach Finally Section 10 presents related work Section 11 concludes paper discusses perspectives relying presented work 2 Monitoring large reactive discrete event systems 21 System characteristics A typical depicted Fig 1 components communicate help communication channels A component entity ﬁnite set internal states The eventdriven evolves occurrence events components An exogenous event event set Σexo event produced environment Due fact events instantaneous delay probability events produced environment occur time practi cally null following hypothesis Hypothesis 1 Two exogenous events occur time Such event trigger change state component During state change affected component produce communication events event set Σcom 1 RNRT project MAGDA funded French Ministère la Recherche partners project France Telecom RD Alcatel Ilog ParisNord University 124 Y Pencolé MO Cordier Artiﬁcial Intelligence 164 2005 121170 Fig 1 Reactive discrete event wards neighbourhood emitting messages communication channels produce observable events event set Σobs environment sys tem emitting observable messages The reception message communication channel communication event change internal state compo nent receives In case component affected event emit communication observable events A communication channel respects following assumption guarantees ﬁnite set states Hypothesis 2 A communication channel components bounded A communication channel type channel types queues especially considered like example instantaneous queue queue buffer emission message component reception message destination event ﬁrst ﬁrst queue FIFO queue bounded buffer messages veyed queue received order emitted queue loss messages queue reliable conveyed messages lost types problems saturation buffer loss occur rence exogenous event channel affects behaviour 22 Monitoring In order help human agent supervisor charge managing detecting failures deciding reconﬁgurationrepair actions supervision Y Pencolé MO Cordier Artiﬁcial Intelligence 164 2005 121170 125 needed task record observations supervised analyse order produce concise view state history supervisor 221 Observability Deﬁnition 1 Observation An observation reception given date super visor message sent component supervised Any observation corresponds emission observable message component The message observation supposed contain information component emitted follows supervisor knows component source observation Because large supervisor located supervised components In majority cases observation channel considered component emits observable messages supervisor As consequence emission observable message necessarily event reception message supervisor The observation set observation channels respects fol lowing hypothesis Hypothesis 3 The observation complete reliable efﬁcient The completeness observation means kind observable message exists observation channel convey kind message The reliability observation means observation channels loose mes sages Every message emitted components effectively received supervisor The efﬁciency means message observation channel conveyed efﬁciently message overtaking Consequently following assume ob servation channel instantaneous reliable FIFO bounded queue 222 Monitoring task The purpose monitoring task detect localise identify problems occur These problems physical equipment cable cut logical station rebooting logical connection Our purpose explain details happening supervisor agent needs know In following consider failure occurrence event considered pertinent supervisor sense wants trace occurrences event For failures considered systems automatic recovery procedures recovery events failures disappear intermittent failures A failure recovery event called permanent failure One main difﬁculties monitoring large discrete event systems occurrence primary failure component effects called secondary failures components As consequence occurrence failure com ponent communication channel cause occurrence secondary failures reception huge number observations supervisor There failure propagations time 126 Y Pencolé MO Cordier Artiﬁcial Intelligence 164 2005 121170 Fig 2 Failure propagations interferences interfere provide huge number possible observation sets depending way propagations interfere Moreover possible secondary failure occurs depending way different propagations interfere Because interfer ences need identify ﬁrst causes problem primary failures way interfere identify secondary failures The recovery events diagnosed interferences failure propagations Example 1 In Fig 2 different failure propagations presented The ﬁgures left single failure propagations inside composed com ponents f11 f21 primary failures occur respectively component 1 component 3 The consequences f11 occurrences secondary failures f12 f13 emissions observations o3 o2 The consequences f21 occurrence secondary failure f22 emission observations o3 o2 In ﬁgures right f11 f21 occur respective propagations interfere happen secondary failures For example f22 occurs failure f12 occur f11 occurred This nature f22 f12 instance f22 power machine f12 reboot machine power machine reboot power machine rebooting Another monitoring problem fact observations generally emitted failure occurs masked occurrence failure past The consequence masking phenomenon fact increases number failures occur observable consequences number possible explanations given set observations Example 2 In Fig 2 right f13 occurs component 3 observa tion emitted like ﬁgures The failure f21 masked observation o3 emitted f13 In example observe o3 o2 possible explanations The single propagations left multiple failure propagation right 3 Example This section describes small example supervised illustra tion different ideas presented paper Fig 3 In following example Y Pencolé MO Cordier Artiﬁcial Intelligence 164 2005 121170 127 Fig 3 Telecommunication network example supervision referred Toynet This composed data switches SW1 SW2 SW3 These switches charge emitting receiving data ring network Two switches SWi SWj communicate help connection cnij Each switch SWi managed control station CSi Here behaviour description supervised A switch transmits data connections west connection SW1 cn12 east connection SW1 cn31 A connection switches considered bidirectional 128 Y Pencolé MO Cordier Artiﬁcial Intelligence 164 2005 121170 communication channel This communication channel reliable affected cut failure If connection cut cutCnij SWi emits observable event example cn12 cut cutCn12 SW1 emits observable event SW1cn12 cn31 cut cutCn31 SW1 emits observable event SW1cn31 Then switch goes waiting mode If connection reestablished workCnij switch goes normal mode A switch break SW1brk case observable event mech anism informs supervision emission observable event SWidown Moreover control station CSi detects problem tries reinitialise switch SWi SWireboot After reinitialisation SWiendreboot switch operational emits observable event SWiok Two kinds failures happen control sta tion Firstly station hang CSioff recovers normal mode CSion When station recovers normal mode observable event CSiok emitted This observable event conveyed switch SWi observable event masked switch normal mode A station reboot CSireboot end reinitialisation CSiendreboot observable event CSiok emitted The communication channel control station switch considered reliable instantaneous As far supervision concerned switch connected observation channel In example sake simplicity observation chan nels instantaneous queues emission observable message switch observable event corresponds exactly reception message supervision observation 4 Decentralised model As said introduction decided use modelbased approaches recog nised better suited systems evolve new components new technologies Due great number components unrealistic rely global model systems This section explains model described decen tralised way means local models behaviours component communication channel generic synchronisation operation describes way local models interact The formalism model based formalism deﬁned 24 In article authors propose model component communicating automaton represents way messages received emitted set ports belonging component The model represented set communicating automata set links A link association output port port messages emitted input port port messages received deﬁnes synchronisation rules components emission reception message link synchronised2 From practical point view formalism intuitive allows model modular hierarchical way For sake 2 A link correspond communication channel previously described In formalism 24 communication channel represented like component See Section 42 details Y Pencolé MO Cordier Artiﬁcial Intelligence 164 2005 121170 129 Fig 4 Abstraction ports messages links simplicity loss generality3 present paper abstraction formalism In formalism notions port message link abstracted help notion event event reception emission message port If port linked port emission message output port reception message associated input port represented formalism communication event Fig 4 Although present abstracted version formalism sake simplicity practice use nonabstracted version beneﬁt modularity hierarchical way modelling 41 Model component A component ci receives kinds events 1 exogenous events Σ 2 communication events Σ nents Σ com_rcv Σcom exo events environment Σ exo Σexo com_rcv reception messages coming compo Hypothesis 4 A component ci receive different events Σ time exo Σ com_rcv A component emit kinds events 1 observable events Σ Σobs Σ obs 2 communication events Σ Σ com_emit Σcom obs emission messages observed supervision com_emit emission messages components Note 1 Because way abstraction deﬁned communication event involved components sender message receiver message Fig 4 3 The temporal aspects delays deﬁned 24 considered paper 130 Y Pencolé MO Cordier Artiﬁcial Intelligence 164 2005 121170 Fig 5 Model controlpart SW1 noted SW1ctl Deﬁnition 2 Model component The model component ci described communicating ﬁnite state machine rcv Σ emit Qi Ei Γi Σ rcv set received events Σ rcv emit set emitted events Σ rcv Σ Σ Σ Qi set component states Ei Qi Σ rcv 2Σ Σ emit emit emit Qi set transitions Σ exo Σ obs Σ Σ com_rcv com_emit t qcid7 note rcvt event Σ Note 2 For component transition q rcv triggers transition t emitt set events emitted t events emitt obst set observable events The model controlpart component SW1 noted SW1ctl depicted rcvtemitt qcid7 The failure exogenous events SW1brk Fig 5 transitions noted q SW1 begins break SW1reboot SW1 begins reboot SW1endreboot SW1 terminates reboot The received communication events CS1operational reception message control station operational chgCn12SW1 chgCn31SW1 reception message status connection changed Among emitted events observable ones SW1down SW1ok SW1cn31 SW1cn12 CS1ok There emitted communication event SW1toreboot emission message switch reboot 42 Model communication channel As said Section 21 components connected kinds bounded com munication channels In case channel instantaneous queue Y Pencolé MO Cordier Artiﬁcial Intelligence 164 2005 121170 131 components case emission reception message instantaneous case channel reliable need model behaviour channel In case proposal model communication chan nel like component communicating automaton Every emission message component c1 component c2 corresponds reception message communication channel c1 c2 reception message com ponent c2 corresponds emission message channel If failure occurs channel failure changes internal state channel disturb transmission messages components Example 3 In Toynet connection cnij considered component This component receive failure events cutCnij connection cut workCnij connection reestablished The communication channel control station switch considered component channel instantaneous reliable In following loss generality distinction com ponent communication channel model based communicating automaton The notation ci refer ith component channel notation Γi refer model ci 43 Model In subsection decentralised model Γ c1 cn behaviour component ci represented model Γi formally given Before deﬁning model supervised formally deﬁne model subsystems 431 Model subsystem ij 1 n A subsystem set k components γ ci1 cik k cid1 n Deﬁnition 3 Model subsystem The model subsystem γ ci1 cik set automata Γi1 Γik Based previous deﬁnition subsystem sets events introduced rcv set received events subsystem γ Σ γ cid1 cid2 cid3cid4cid1 cid2 Σ γ rcv cid2 ij rcv Σ cid3 Σ ij emit j 1k j 1k There types received events Σ γ rcv Σexo Σ γ γ Σ γ source component γ Σ γ exo cid2 Σ γ exo set exogenous events occur com_rcv set communication events received γ com_rcv cid2 Σ γ rcv Σ γ exo Σ γ emit set emitted events subsystem γ cid1 cid2 cid3cid4cid1 cid2 Σ γ emit cid2 Σ ij emit j 1k j 1k cid3 ij rcv Σ 132 Y Pencolé MO Cordier Artiﬁcial Intelligence 164 2005 121170 In set emitted events Σ γ emit included set Σ γ obs observable events emitted γ The emitted events observable correspond communication events components belong subsystem noted Σ γ com_emit Σ γ int set internal events subsystem γ cid3 cid3 cid1 cid2 cid1 cid2 Σ γ int cid2 Σ ij emit ij rcv Σ j 1k j 1k An internal event subsystem γ communication event associated compo nents subsystem belongs set emitted events ﬁrst component set received events second The set Σ γ partition events occurring γ emit Σ γ rcv Σ γ int 432 Synchronisation operation subsystem The model subsystem represents propagation failure events exogenous events inside subsystem events emitted components long subsystem It possible compute explicit behaviour subsystem thanks synchronisation operation applied component models Γi1 Γik subsystem The synchronisation operation based transition product 1 As 1 sake simplicity product deﬁnition null transitions noted e q systematically added state q communicating automaton q Such transition means component stay given state com ponents evolve asynchronism Given transitions behaviour subsystem exhaustively represented synchronised product subsystem ﬁnite asynchronous behaviours Deﬁnition 4 Free product The free product m communicating automata Ti Ii Oi Qi Ei 1 m communicating automaton I O Q E I I1 Im O O1 Om Q Q1 Qm set states E E1 Em set transitions q1 qm t1tm q cid7 1 q cid7 m q1 t1 q cid7 1 qm tm q cid7 m In following product noted cid9T1 Tmcid10 By deﬁnition cid10 j1 jm permutation product cid9T1 Tmcid10 isomorphic cid9Tj1 Tjm 1 m Deﬁnition 5 Synchronised transition Given Γi1 Γik γ transition q synchronised iff t qcid7 qi1 ti1 qcid7 i1 tik qcid7 ik qik model subsystem cid10 product cid9Γi1 Γik Y Pencolé MO Cordier Artiﬁcial Intelligence 164 2005 121170 133 tj null j i1 ik following conditions hold 1 tj j i1 ik rcvtj Σ γ rcv 2 cardtj j i1 ik rcvtj Σ γ exo cid1 1 3 j i1 ik tj null e emittj Σ γ b rcvtj Σ γ int l i1 ik e rcvtl int l i1 ik rcvtj emittl Condition 1 means synchronised transition q t qcid7 triggered set received events subsystem γ Condition 2 means events exogenous event Σ γ exo accordance Hypothesis 1 The conditions 3a t 3b synchronisation rules internal events inside γ occurring q t qcid7 internal event emitted automaton Γj γ qcid7 If q t qcid7 automaton Γl γ event appear received event Γl q viceversa These conditions represent propagation events subsystem γ A synchronised transition q t qcid7 associated sets events 1 Rcvt set received events triggers transition 2 Intt set internal events occur γ transition triggered 3 Emitt set emitted events emitted outside γ transition triggered Obst set observable events Note 3 In following synchronised transition q follows RcvtInttEmitt q cid7 q t qcid7 written Example 4 Fig 6 shows example synchronised transitions subsystem CS1 SW1ctl SW1cn Toynet The event SW1brk exogenous switch breaks When event occurs event SW1toreboot produced SW1ctl Fig 6 Synchronised transition subsystem CS1 SW1ctl SW1cn 134 Y Pencolé MO Cordier Artiﬁcial Intelligence 164 2005 121170 CS1 control station CS1 knows switch SW1 reboot An observable event SW1down emitted The connectionpart switch SW1 called SW1cn triggers null transition The transition right synchronisation transitions left Based notion synchronisation behaviour subsystem γ mally deﬁned follows Deﬁnition 6 Behaviour tem γ ci1 cik cid9Γi1 Γik set synchronised transitions E subsystem The explicit behaviour subsys ﬁnite state machine I O Qcid7 Ecid7 free product cid10 I O Q E Qcid7 Q set states Ecid7 E In following result synchronised product automata Γi1 Γik cid13 By extension denote explicit behaviour model γ noted cid13Γi1 Γik subsystem γ cid13γ cid13 Γi1 Γik By deﬁnition behaviour subsystem composed component ci communicating automaton Γi transition t automaton Γi respects conditions synchronised transition Rcvt rcvt Intt Emitt emitt Obst obst Γi cid13Γicid13 cid13cicid13 The behaviour cid13γ cid13 subsystem γ communicating automaton considered like model component Moreover subsystem deﬁned set components deﬁned set subsystems γ1 γm Modelling subsystem set component models set subsystem behaviours equivalent following property automata synchronisation Theorem 1 Let γ1 γ2 disjoint subsystems cid13γ1 γ2cid13 cid5 cid5cid13γ1cid13 cid13γ2cid13 cid5 cid5 Proof See Appendix A cid1 This property shows synchronisation associative commutative opera tion Considering partition set components deﬁnes subsystem γ partition element subsystem The behaviour cid13γ cid13 obtained synchronising behaviours subsystem partition deﬁnes In following use notion path subsystem deﬁned follows Deﬁnition 7 Transition path A transition path P subsystem γ sequence possi bly inﬁnite consecutive transitions cid13γ cid13 In following P denote length P P ﬁnite value Y Pencolé MO Cordier Artiﬁcial Intelligence 164 2005 121170 135 433 Decentralised model The Γ c1 cn particular subsystem This subsystem receives events environment emits observable events Here deﬁnition model Deﬁnition 8 Model The model Γ model subsys tem c1 cn modelled Γ1 Γn The behaviour Γ noted cid13Γ cid13 called global model By deﬁnition synchronised transition global model triggered exogenous event conditions 1 2 synchronised transition deﬁnition expresses conse quences event inside emission observable events change internal state Example 5 Toynet modelled set 12 components controlstation connection switches switches controlpart switch SWictl connectionpart switch SWicn The global model Toynet communi cating automaton contains 8000 states 76000 transitions 5 Diagnosis 51 Observable behaviour From model deﬁne observable behaviour subsystem γ Infor mally observable behaviour corresponds set sequences observable events subsystem emit supervision Here formal deﬁnition tm qm1 path tran Deﬁnition 9 Observable behaviour Given P q1 sitions cid13γ cid13 observable behaviour P noted Obsγ P partially ordered set observable events produced P The corresponding partial order relation deﬁned follows t1 cid6 cid7 1 P j 1 1 oj Obstj oi Obsti oj oi The observable behaviour subsystem γ set observable behaviours paths cid13γ cid13 By deﬁnition observable behaviour observable behaviour subsystem Γ Example 6 Fig 7 presents observable behaviour corresponding path P In example emission o2 o3 ordered The observable behaviour corresponds possible observable sequences o1o2o3o4 o1o3o2o4 136 Y Pencolé MO Cordier Artiﬁcial Intelligence 164 2005 121170 Fig 7 Observable behaviour path P 52 Observed behaviour An observation reception supervision message emitted observation channel Thus observation corresponds observable event The problem existence observation channels supervised supervision order reception messages supervision necessarily order emissions messages In words given sequence σγ received observations subsystem γ set emission orders possible depending nature number observation channels subsystem γ supervision In order deal problem solutions possible In ﬁrst set observation channels modelled supervised help commu nicating automata communication channels In case observable behaviour model corresponds exactly observed behaviour difference tween emission reception observation channels described inside model The problem solution size model dramatically increase The second solution consists guessing order emission online In case necessary model observation channels Given properties message propagation delays inside observation channel potential synchronisations observation channels possible deﬁne partial order relation observations ceived γ know possible orders emission γ In following solution considered Deﬁnition 10 Observed behaviour Given sequence σγ received observations subsystem γ observed behaviour Oγ σγ γ subsystem γ partially ordered set composed observations σγ partial order relation γ The partial order relation induced characteristics observation channels subsystem With help Hypothesis 3 consider subsystem γ composed component emitting observable events γ associated instantaneous bounded FIFO observation channel In case Oγ totally ordered Y Pencolé MO Cordier Artiﬁcial Intelligence 164 2005 121170 137 Fig 8 Observed behaviour Oγ Moreover partial order relation observations following properties given disjoint subsystems γ1 γ2 respective relations γ1 γ2 given relation γ1γ2 subsystem γ1 γ2 o o o o cid7 Oγ1 o γ1 o cid7 Oγ2 o γ2 o cid7 o γ1γ2 o cid7 o γ1γ2 o cid7 cid7 Some new orders deﬁned observations γ1 γ2 γ1γ2 expressing characteristics observation channels γ1 γ2 Example 7 Fig 8 depicts observed behaviour In example let consider sub γ observed help observation channels The observation channels convey observations o1 o2 channel 1 o3 o4 channel 2 The received sequence σγ o3o1o2o4 The observation channels FIFO o1 γ o2 o3 γ o4 Moreover know maximal propagation delay channel 1 d times t2 reception o2 t3 reception o3 0 cid1 t3 t2 d follows o3 γ o2 53 Deﬁnition diagnosis As said Section 222 diagnosis problem consists identifying failure events modelled exogenous events propagations modelled sets communica tion events explain observed behaviour Such failure propagation represented path transitions cid13Γ cid13 A path explains observed behaviour observable behaviour compatible observed behaviour This com patibility deﬁned operator cid17 partially ordered sets Deﬁnition 11 Given S1 E 1 S2 E 2 partially ordered sets joint set S1 cid17 S2 partially ordered set E 12 12 recursively deﬁned e1 e2 E e1 12 e2 cid2 e1 1 e2 e1 2 e2 cid9 cid8 e3 E e1 cid19 e3 cid19 e2 e1 12 e3 e3 12 e2 The joint set sets S1 S2 contains elements S1 S2 order relation restrictive Informally joint set partially ordered set linear 138 Y Pencolé MO Cordier Artiﬁcial Intelligence 164 2005 121170 Fig 9 Joint set Obsγ P cid17 Oγ extensions4 exactly correspond intersection linear extensions observable behaviour observed behaviour Example 8 Fig 9 depicts joint set Obsγ P Fig 7 Oγ Fig 8 Oγ brings new constraint Obsγ P o3 γ o2 joint set Obsγ P cid17 Oγ represents unique sequence o1o3o2o4 Such set exist Based relations 1 2 relation 12 deﬁned 1 2 relations example e1 1 e2 e2 2 e1 12 relation e1 12 e2 e2 12 e1 consequence relation 12 order relation antisymmetric In case deﬁne order relation 12 relations 1 2 said incompatible S1 cid17 S2 exist Example 9 If Fig 8 relation o4 γ o2 added o2 o4 Obsγ P Oγ Obsγ P Fig 7 incompatible With help operator formal deﬁnition diagnosis called global diagnosis Deﬁnition 12 Global diagnosis Given decentralised model Γ given OΓ observed behaviour global diagnosis OΓ set paths P cid13Γ cid13 explaining OΓ ObsΓ P cid17 OΓ exists This deﬁnition expresses fact diagnosis set behaviours constrained observations OΓ Each path diagnosis possible explanation ob servations This explanation contains sequence failure events potentially occurred propagations 54 Presentation result supervisor The diagnosis like deﬁned previous section contains complete necessary information understand happened In sense diagnosis seen database updated online However information complex given supervisor online When supervisor monitoring information needs list primary failures instance This 4 A linear extension called linearisation partially ordered set sequence elements set e1 e2 e1 e2 sequence Y Pencolé MO Cordier Artiﬁcial Intelligence 164 2005 121170 139 information abstraction complete diagnosis easily computed time Once supervisor wants deeply analyse reason particular failure occurred offline analysis query set behaviours explain failure For example MAGDA project Section 9 query implemented help graphical user interface representing topology supervised network This interface provides way browse behaviours related particular failure project topology presented interface supervisor able failure propagations directly representation topology supervised The implementation interface based simple searches graphs need use complex algorithms 55 Conclusion In framework supervision large discrete event systems diagnosis infor mation rich Not identiﬁcation failures needed propagations important explain emitted alarm This particularly true applications like supervision telecommunication net works As consequence diagnosis summarise propagation failures deﬁnition proposed diagnosis given dynamic This deﬁnition set sequences compared deﬁnitions given 26 Because computed diagnosis information rich ergonomic interface implemented order help supervisor The purpose interface extract pertinent information online analysis list failures offer possibility deeply analyse offline behaviours related diagnosed failures Using centralised approach like 2325 approach needs explicit computation global model cid13Γ cid13 827 problematic Because cid13Γ cid13 based Cartesian product size worst case exponential number components Computing global model contains components impossible common resources Thus centralised approach computing diagnosis impossible intractable size global model It reason propose approach relies component models require explicit computation global model cid13Γ cid13 6 Decentralised diagnosis approach The proposed decentralised approach based divide conquer principle Be cause computation diagnosis based global model impossible problem divided smaller diagnoses computed smaller models component models These diagnoses progressively merged obtain subsystem diagnoses ﬁnally global diagnosis 140 Y Pencolé MO Cordier Artiﬁcial Intelligence 164 2005 121170 61 Subsystem diagnosis The subsystem diagnosis deﬁnition generalisation global diagnosis deﬁni explain set tion The purpose subsystem diagnosis γ ci1 cik observations emitted γ model subsystem γ Deﬁnition 13 Subsystem diagnosis Given γ subsystem given Oγ observed haviour subsystem subsystem diagnosis γ Oγ set paths P cid13γ cid13 explaining Oγ Obsγ P cid17 Oγ exists Every path subsystem diagnosis provides explanation observations subsystem This explanation local words explanation account behaviour components belong γ Each explanation makes hypothesis message exchanged component belong γ possible By deﬁnition diagnosis subsystem Γ global diagnosis 62 Merging operation As said previous subsection subsystem diagnoses hypothesis message exchange possible subsystems The purpose merg ing operation check exchanges possible according global model This check consists synchronising path subsystem di agnosis path subsystem diagnoses The merging operation based Theorem 2 Before presenting theorem notion path synchronisation intro duced Given γ1 γ2 disjoint subsystems P1 P2 transition paths belonging cid13γ1cid13 cid13γ2cid13 respectively notation cid13P1 P2cid13 denote set paths resulting synchronisation P1 P2 Formally cid13P1 P2cid13 obtained ﬁrstly synchronising set transitions cid13γ1cid13 occur P1 set transitions cid13γ2cid13 occur P2 secondly extracting synchronised ﬁnite state machine set paths P transition P1 P2 triggered P order P1 P2 By construction path cid13P1 P2cid13 path cid13cid13γ1cid13 cid13γ2cid13cid13 cid13γ1 γ2cid13 Moreover set paths cid13P1 P2cid13 case paths P1 P2 synchronisable The notation extended set paths P1 Pm set disjoint subsystems γ1 γm cid13P1 Pmcid13 denote set paths resulting synchronisation paths Pi set paths obtained manner set cid13P1 P2cid13 Theorem 2 Given γ1 γ2 disjoint subsystems P γ1γ2 Oγ1γ2 P1 γ1 Oγ1 P2 γ2Oγ2 P cid13P1 P2cid13 Obsγ1γ2P cid17 Oγ1γ2 exists Y Pencolé MO Cordier Artiﬁcial Intelligence 164 2005 121170 141 Proof P1 γ1 Oγ1 P2 γ2 Oγ2 P1 cid13γ1cid13 P2 cid13γ2cid13 P cid13P1 P2cid13 P cid13γ1 γ2cid13 construction Obsγ1γ2P cid17 Oγ1γ2 exists P γ1γ2Oγ1γ2 P γ1γ2 Oγ1γ2 Obsγ1γ2P cid17 Oγ1γ2 exists By deﬁnition P path cid13γ1 γ2cid13 This path obtained synchronised product cid13cid13γ1cid13 cid13γ2cid13cid13 Theorem 1 paths P1 cid13γ1cid13 P2 cid13γ2cid13 P cid13P1 P2cid13 Suppose sake contradiction Obsγ1P1 cid17 Oγ1 exist Therefore P1 explains observations Oγ1 order incompatible order Oγ1 In words exist different observations o1 o2 o1 o2 Oγ1 o2 o1 Obsγ1P1 If o1 o2 Oγ1 o1 o2 Oγ1γ2 Deﬁnition 10 Moreover o2 o1 Obsγ1P1 o2 o1 Obsγ1γ2 P Deﬁnition 9 Consequently Obsγ1γ2 P cid17 Oγ1γ2 exist The existence Obsγ2P2 cid17 Oγ2 shown manner Finally existence Obsγ1γ2 P cid17 Oγ1γ2 implies existence Obsγ1 P1 cid17 Oγ1 Obsγ2 P2 cid17 Oγ2 P1 P2 respectively belong γ1 Oγ1 γ2 Oγ2 cid1 Corollary 1 Given γ1 γm set subsystems partition set components Γ P Γ OΓ cid10 cid12 mcid11 i1 Pi γi Oγi P cid13P1 Pmcid13 ObsΓ P cid17 OΓ exists Proof Because Theorem 2 P Γ OΓ P1l cid13 l i1 γi P cid13P1l Pl1mcid13 ObsΓ P cid17 OΓ exists Pl1m cid13 Ocid13 l i1 γi m il1 γi Ocid13 m il1 γi The result obtained applying recursively theorem P1l Pl1m noticing construction paths P2 P3 respectively belong cid13P4 P5cid13 cid13P6 P7cid13 path P1 belongs cid13P2 P3cid13 iff path P1 belongs cid13P4 P5 P6 P7cid13 cid1 63 Summary We deﬁned formal framework decentralised diagnosis approach Fig 10 The model Γ represented decentralised way set communicating automata Γ1 Γn synchronisation operation The idea compute diagnosis component ci corresponding basic sub systems based model Γi progressively merge results order obtain diagnoses bigger subsystems ﬁnally obtain global diagnosis Within 142 Y Pencolé MO Cordier Artiﬁcial Intelligence 164 2005 121170 Fig 10 Centraliseddecentralised approach framework fact synchronisation associative commutative operation guarantee merging subsystem diagnoses order result global diagnosis Corollary 1 7 Online diagnosis implementation This section presents implementation decentralised diagnosis approach based decentralised model In order online diagnosis approach algorithms efﬁcient based efﬁcient representation diagnoses Firstly partial order reduction techniques shown wellsuited efﬁciently rep resenting diagnoses Secondly merging operation strategy taking account interactions subsystem diagnoses dynamically presented 71 Diagnosis representation 711 Finite representation In framework diagnosis γ Oγ deﬁned set paths transitions cid13γ cid13 A path inﬁnite inﬁnite sequence silent transitions behaviour cid13γ cid13 sequences represented loops unobservable transitions Be cause merging operation ﬁnite representation diagnosis needed This representation based ﬁnite state machine represents inﬁnite silent se quences loops Here deﬁnition representation Let cid13γ cid13 I O Q E behaviour subsystem γ Let σγ ﬁnite ob servation sequence Oγ σγ γ corresponding observed behaviour Con tm qm1 sider transition path P γ Oγ P P q1 ti qi1 E 1 m Consider transition qi Q 1 P qi t1 ti1 qi subpath P q1 qi state qi qi represented state qﬁnite γ ob γ preﬁx sequence σγ Obsγ Pi cid17 Oi served behaviour σ γ ti qi1 P Pi q1 qi Obsγ Pi cid17 Oi γ γ σ γ Oi t1 Y Pencolé MO Cordier Artiﬁcial Intelligence 164 2005 121170 143 qi1 Obsγ Pi1 cid17 Oi1 γ exists Obsγ P cid17 Oγ exists deﬁ expresses fact state qi possible current state cid13γ cid13 γ The state qi1 associated ti qi1 represented exists Such set Obsγ Pi cid17 Oi nition qﬁnite explanation observed behaviour Oi state qﬁnite i1 qﬁnite Let Qﬁnite set states qﬁnite deﬁned path γ Oγ construction Qﬁnite ﬁnite set Qﬁnite Q P rOγ P rOγ set par tially ordered sets containing subset elements Oγ Let Eﬁnite set tran sitions qﬁnite i1 deﬁned path γ Oγ Eﬁnite ﬁnite construction Qﬁnite Eﬁnite deﬁne ﬁnite representation diagnosis γ Oγ The transition qi ti qﬁnite i1 ti qﬁnite γ Deﬁnition 14 Finite representation Let cid13γ cid13 I O Q E behaviour sub γ ﬁnite representation γ Oγ ﬁnite state machine ﬁnite Oγ I O Qﬁnite Eﬁnite Qﬁnite Eﬁnite respectively set states transi tions deﬁned γ The diagnosis γ Oγ represented ﬁnite Oγ Fig 11 The states qﬁnite Qﬁnite qﬁnite q called initial states diagnosis Accord ing observations subsystem γ states q emission observable event The states qﬁnite Qﬁnite qﬁnite q O O Oγ called ﬁnal states diagnosis According observations subsystem γ states q γ Nevertheless representation problem size Each path ﬁnite Oγ rep resents path diagnosis sequence events Because distributed nature diagnosed systems lot events failure events occur concurrent way dealing sequences means enumerating sequences failure event f1 occurs independently event f2 f2 occurs f1 From diagnosis point view f1 f2 independent occur important know order It reason reduced representation diagnosis introduced This reduction based partial order reduction method 18 γ 712 Partial order reduction In following summary partial order reduction theory given For details 51618 We action transition label behaviour cid13γ cid13 set cid13γ cid13 actions noted Aγ We note enq set actions triggered state q cid13γ cid13 Deﬁnition 15 Independence Two actions t1 t2 Aγ independent cid13γ cid13 I O Q E iff q Q t1 t2 enq 1 t1 enqcid7 q 2 qcid7 qcid7cid7 qcid7cid7cid7 q t2 qcid7 E t2 qcid7 t1 qcid7cid7 E q t1 qcid7cid7cid7 t2 qcid7cid7 E 144 Y Pencolé MO Cordier Artiﬁcial Intelligence 164 2005 121170 Fig 11 Subsystem diagnosis represented ﬁnite Oγ CS1ok SW1cn12 SW1cn12 γ Oγ γ Cn12 SW1cn SW1ctl CS1 Intuitively actions independent occurrence affect occurrence condition 1 Moreover order actions occur change state occurrences condition 2 Y Pencolé MO Cordier Artiﬁcial Intelligence 164 2005 121170 145 Deﬁnition 16 Dependence relation A dependence relation D reﬂexive symmetric binary relation t1 t2 D t1 t2 independent This relation induces equivalence relation ﬁnite sequences actions Given ﬁnite sequences v w actions Acid6 γ v equivalent w according lation D iff exists set sequences u0 v u0 w 0 n 1 ui ut1t2 ˆu ui1 ut2t1 ˆu u ˆu Acid6 γ t1 t2 D Example 10 Given v u0 t1t2t3t4t5t6 w u3 t2t1t3t5t6t4 t1 t2 t4 t5 t4 t6 D u0 t1t2t3t4t5t6 u1 t2t1t3t4t5t6 t1 t2 permutation u2 t2t1t3t5t4t6 t4 t5 permutation u3 t2t1t3t5t6t4 t4 t6 permutation v equivalent w according D This equivalence relation extended inﬁnite sequences Given inﬁnite se γ v w equivalent iff ﬁnite preﬁx sequence vcid7 v quences v w Acid6 exists ﬁnite preﬁx sequence wcid7 w wcid7 equivalent vcid7 vice versa This extended relation ﬁnite inﬁnite cases called partially ordered relation This relation noted D Deﬁnition 17 Trace Given dependence relation D trace equivalence class sequences deﬁned relation D Thus trace represents set sequences Each sequence class obtained simply swapping order adjacent independent actions If s sequence note sD corresponding trace s included 713 Reduced representation The principle reduced diagnosis representation following The diagnosis represent set action sequences idea sequence trace represented given diagnosis In order dependence rela tion Dγ transition labels cid13γ cid13 deﬁned This relation dependence labels Before giving deﬁnition Dγ notations introduced Given t Aγ Et cid2 Rcvt Emitt Intt set events occur γ t triggered Given subsystem γ cid7 disjoint γ Cγ cid7 t cid2 ci γ cid7Et Σ cid19 rcv set components directly affected transition t γ cid7 cid19 Et Σ emit Deﬁnition 18 Relation Dγ Given t1 t2 Aγ t1 t2 Dγ iff following conditions holds 146 Y Pencolé MO Cordier Artiﬁcial Intelligence 164 2005 121170 1 CΓ γ t1 cid19 CΓ γ t2 cid19 2 Cγ t1 Cγ t2 cid19 3 Obst1 cid19 CΓ γ t1 cid19 Obst2 cid19 CΓ γ t2 cid19 Obst1 cid19 Obst2 CΓ γ t1 cid19 CΓ γ t2 cid19 Intuitively relation Dγ describes criteria dependence tran sition labels t1 t2 Condition 1 says t1 t2 affect components Γ γ dependent fault propagations unknown γ Condition 2 says t1 t2 dependent affect common components γ Condition 3 observability t1 t2 From diagnosis point view t1 t2 pendent observable future synchronisations observable transitions subsystems set emitted observations Because relation Dγ relation based events computation depend number states transitions γ efﬁcient As consequence detect online pair actions t1 t2 belongs Dγ Theorem 3 The relation Dγ dependence relation Proof By deﬁnition Dγ symmetric reﬂexive Now prove t1 t2 Dγ t1 t2 independent Deﬁnition 15 Let q denote state cid13γ cid13 t1 t2 transitions t1 t2 enq Condition 1 Suppose q t2 qcid7 transition cid13γ cid13 Because t1 t2 Dγ fol lows Cγ t1 Cγ t2 t1 affects components γ different components affected t2 If t2 triggered q states components affected t1 unchanged Therefore t1 enqcid7 Condition 2 Because Cγ t1 Cγ t2 t1 affects components γ different components affected t2 Thus order activation t1 t2 change ﬁnal state cid1 Remark 1 The relation Dγ unique dependence relation There accurate dependence relations Nevertheless advantage Dγ low cost checking dependency actions check based communication events require deeper expensive online analysis model Given dependence relation Dγ reduced representation diagnosis γ deﬁned follows Deﬁnition 19 Reduced representation The reduced representation diagnosis γ Oγ ﬁnite state machine red γ Oγ I O Qcid7 Ecid7 ﬁnite Oγ I O Q E γ Qcid7 Q set states Y Pencolé MO Cordier Artiﬁcial Intelligence 164 2005 121170 147 Ecid7 E set transitions trace t1 tmDγ ﬁnite initial state ﬁnal state represented transition path q0 q1 qm1 tm qm red γ Oγ γ Oγ t1 Remark 2 There reduced representations diagnosis fact sequence trace good candidate representing trace The notions initial states ﬁnal states reduced representation deﬁned manner ﬁnite representation Section 711 The set ﬁnal states explicitly represent set current states subsystem ﬁnite representation However set current states implicitly represented ﬁnal state representing set current states γ equivalent according dependence relation This implicit way representation true case initial states Fig 12 presents reduced representation diagnosis Fig 11 The transi tion t1 CS1off t2 CS1reboot independent t3 cutCn12 t4 workCn12 We t1 t3 t2 t3 t1 t4 t2 t4 Dγ Each path initial state ﬁnal state represents trace events 72 Subsystem diagnosis computation The ﬁrst step decentralised diagnosis approach consists computing set n subsystem diagnoses n components ci This computation consists exploring model Γi order compute traces explain observations Oci This exploration possible tractable size Γi automaton problem subsystem diagnosis computation solved centralised diagnosis approach Moreover assume observation channel component supervision instantaneous bounded FIFO queue Section 221 follows computation account problem observation overtaking inside channel Depending components observable case subsystem diagnosis isomorphic model component computation needed In order efﬁcient possible use diagnoser approach 25 This data struc ture transition transition labelled observations state contains precompilation diagnosis information improves diagnosis computation online More details approach 1921 73 Merging algorithm This section presents merging operation diagnoses red γ1 Oγ2 order compute red Oγ1 red Oγ1γ2 Algorithm 1 The proposed algo γ2 rithm inspired algorithm proposed 18 consists ﬁnding runs deadlock program checking independences actions avoid state explosion problem search The proposed algorithm decentralised version previous algorithm updated solve diagnosis problems γ1γ2 148 Y Pencolé MO Cordier Artiﬁcial Intelligence 164 2005 121170 Fig 12 A reduced representation diagnosis Fig 11 Y Pencolé MO Cordier Artiﬁcial Intelligence 164 2005 121170 149 Algorithm 1 Merging operation O1 red γ2 1 red γ1 1 q0 O2 Oγ1γ2 O1 q0 2 red γ2 2 sleepX0 exploredX0 unreliableX0 O2 initial states traces VisitStateX0 PropagateFixedStatestraces X StatesOf traces StatusX cid19 ﬁxed RemoveX traces end 1 Inputs red γ1 2 Given q0 3 X0 q0 4 5 6 7 end 8 red 9 end 10 Output red γ1γ2 Oγ1γ2 red γ1γ2 Oγ1γ2 traces γ1γ2 Oγ1γ2 t RemovetransX exploredX exploredX t Xcid7 TargetX t newSleep sleepX exploredX unreliableX dependentt visitedXcid7 exploredXcid7 unreliableXcid7 sleepXcid7 newSleep openXcid7 true paths paths VisitStateXcid7 11 Function VisitStateX 12 visitedX true 13 transX GiveTransitionsFromX sleepX 14 transX cid19 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 t sleepXcid7 t newSleep exploredXcid7 unreliableXcid7 openXcid7 end statusXcid7 possible ﬁxed openXcid7 transXcid7 transXcid7 sleepXcid7 end sleepXcid7 sleepXcid7 newSleep openXcid7 true paths paths VisitStateXcid7 paths paths X openXcid7 unreliableXcid7 unreliableXcid7 t end statusX cid19 ﬁxed t Xcid7 statusXcid7 possible ﬁxed statusX statusXcid7 statusX possible end 31 32 33 34 35 37 38 39 end 40 IsFinalX statusX ﬁxed end 41 openX false 42 return paths end end 150 Y Pencolé MO Cordier Artiﬁcial Intelligence 164 2005 121170 The merging operation purposes 1 interaction validation events γ1 γ2 diagnosed diagnoses red γ1 Oγ1 red γ2 Oγ2 checked 2 reduced diagnosis computation result merging operation reduced representation diagnosis γ1 γ2 In order assure 1 merging operation check trace set paths diagnosis trace synchronised trace diagnosis Section 62 In order assure 2 merged path represent trace cid13γ1 γ2cid13 according dependence relation Dγ1γ2 The merging operation assures 2 help following property Proposition 1 Given γ γ cid7 disjoint subsystems given t1 t2 Aγ actions cid13γ cid13 t1 t2 Dγ t cid7 1 t cid7 2 Aγ cid7 cid8 t1 t cid7 1 Aγ γ cid7 t2 t cid7 2 Aγ γ cid7 cid9 cid8 t1 t cid7 1 t2 t cid9 cid7 2 Dγ γ cid7 In words deﬁned relation Dγ guarantees independent actions t1 t2 cid13γ cid13 couple actions cid13γ γ cid7cid13 based actions t1 t2 independent This property guaranteed deﬁnition Dγ Deﬁnition 18 If t1 t2 Dγ means actions t1 t2 interact actions γ cid7 associated null events γ cid7 So way t1 t2 enabled subsystem γ γ cid7 change independent On hand couples t1 t2 Dγ associated actions t cid7 2 γ cid7 t1 t cid7 2 independent γ γ cid7 1 t2 t cid7 1 t cid7 Thanks Proposition 1 merging operation retest independent ac Oγ2 It detect new independent actions tions computed red γ1 subsystem γ1 γ2 compute red Oγ1 red γ2 γ1γ2 Oγ1γ2 O1 red γ2 The algorithm depthﬁrst search algorithm based search space deﬁned cid9red O2cid10 Algorithm 1 Each explored state X built ﬂy γ1 synchronising transitions red O2 This synchronisation γ1 1 qcid7 GiveTransitionsFrom line 13 Formally given notations q1 q2 2 function GiveTransitionsFromX X q1 q2 O12 deﬁned set transition labels t tt1t2 qcid7 O1 red γ2 1 q1 Indγ1 O12 t1 qcid7 1 Ocid7 1 red γ1 O1 Indγ1 O12 partially ordered set induced O12 contains observations O12 emitted γ1 2 q2 Indγ2 O12 t2 qcid7 2 Ocid7 2 red γ2 O2 Indγ2 O12 partially ordered set induced O12 contains observations O12 emitted γ2 3 q1 q2 t qcid7 1 qcid7 2 cid13γ1 γ2cid13 Y Pencolé MO Cordier Artiﬁcial Intelligence 164 2005 121170 151 4 exists O cid7γ1γ2 12 Obsγ1γ2 P q1 q2 P transition path q0 subset Oγ1γ2 o1 o2 O 1 q0 cid7γ1γ2 12 cid7γ1γ2 t qcid7 12 2 q1 q2 cid13γ1 γ2cid13 O 2 cid17 O 1 qcid7 exists cid7γ1γ2 12 iff o1 o2 Oγ1γ2 o1 o2 O cid7γ1γ2 12 Conditions 1 2 mean transition label t effectively results product transition red γ1 O1 transition red γ2 O2 Condition 3 means result synchronisation effectively belongs haviour γ1 γ2 Condition 4 means t observable behaviour compatible t qcid7 1 qcid7 observations explain If conditions 1 2 3 4 hold q1 q2 2 t necessarily belongs path diagnosis γ1γ2 Oγ1γ2 q1 q2 O12 qcid7 1 qcid7 γ1γ2 Every explored state X associated data structures 12 potential candidate belonging red Oγ1γ2 2 Ocid7 exploredX set actions explored state X sleepX set actions avoid exploring X unreliableX set actions avoided statusX ﬁxed X belongs path represents trace possible X belong path represents trace depend status successors X statusX initialised value different ﬁxed possible visitedX true iff X explored openX true iff X explored The computation sleep set based independence property actions The set dependentt line 17 set actions dependent t cid13γ1 γ2cid13 given relation Dγ1γ2 actions The principle algorithm explore actions sleepX line 13 An action t sleepX t explored predecessor Xcid7 X actions Xcid7 X independent t If trace exists t X trace computed exploring t Xcid7 details 18 In line 21 cycle detected search old sleep set contains action new state revisited traces lost A state X ﬁxed X guaranteed belong trace red γ1γ2 Oγ1γ2 There exist cases ﬁxing state X 1 IsFinalX true line 40 algorithm detected path X0 X representative trace Given X q O12 IsFinalX deﬁned IsFinalX O12 Oγ1γ2 cid8 q t cid7 q cid7 cid13γ1 γ2cid13 Obsγ1γ2q t cid7 q cid7 cid19 cid9 In words X ﬁnal explain observations exists behaviour q cid13γ1 γ2cid13 observable 2 A successor X ﬁxed line 34 152 Y Pencolé MO Cordier Artiﬁcial Intelligence 164 2005 121170 γ1γ2 The set paths contains set transitions represents traces X ﬁnal states red Oγ1γ2 Once X0 visited line 4 traces contains traces X0 ﬁnal states red Oγ1γ2 Because cycles states traces ﬁxed possible In order know states ﬁnally ﬁxed successors traces ﬁxed status PropagateFixedStates charge ﬁxing states line 4 Some states stay possible status belong cycles traces eliminated lines 57 γ1γ2 In following merging operation implemented Algorithm 1 noted cid25 red γ1γ2 Oγ1γ2 red γ1 Oγ1 cid25 red γ2 Oγ2 As said Remark 2 reduced representations diagnosis Due fact cid25 based search statespace result different depending order merging Nevertheless results different reduced representation diagnosis With cid25 guarantee result set traces given order merging subsystem diagnoses 74 Merging strategy The merging operation based Cartesian product subsystem diagnoses As consequence operation inefﬁcient carefully In order efﬁcient possible idea apply merging operation necessary It reason merging strategy needed This merging strategy based criteria deﬁned subsystem diagnoses merge In section consider reduced representation diagnosis sake clarity diagnosis notations simpliﬁed γi refer red γi Oγi 741 Deﬁnitions Each subsystem diagnosis γi contains traces claim diagnosed com ponents γi interacted components sending receiving events γj set events γi supposed belonging Σint We note Iγi sent received components γj according subsystem diagno sis γi Deﬁnition 20 Inconsistent traces A trace diagnosis γi inconsistent iff exists transition trace representative assumes emission reception event e Iγi γi γj e Iγj A diagnosis γi claim event e belongs Iγi γj γj claim e Iγj γi Traces γi claim occurrence e said incon sistent participate global diagnosis immediately discarded diagnosis In following purged diagnosis γi set traces γi inconsistent traces eliminated note cid7 γi Y Pencolé MO Cordier Artiﬁcial Intelligence 164 2005 121170 153 Deﬁnition 21 Matchable subsystems γi γj matchable subsystems iff Iγi γj Iγj γi cid19 From deﬁnition deduced γi γj matchable iff purged γi cid19 In follow γi Iγi diagnoses Icid7 γi ing γi γj kmatchable subsystems iff matchable Icid7 γi k γi The purpose strategy detect compute subsystem diagnoses claim γj Icid7 γj γj Icid7 γj γi Iγi γj Iγj γj Iγj interaction subsystems Deﬁnition 22 Independent diagnosis A subsystem diagnosis γ independent iff Iγ Γ γ In independent diagnosis trace complete explanation observations consider subsystem set observations impossible ﬁnd explanation subsystem interacted subsystems Every trace independent diagnosis shows observation disjoint subsystem caused reaction subsystem If independent diagnosis detected useless perform merging operation set interactions check Therefore global diagnosis totally easily represented set independent diagnoses diagnosis based subsystem disjoined In worst case independent diagnosis global diagnosis 742 Principles algorithm To improve efﬁciency merging operation apply following princi ples Algorithm 2 based previous deﬁnitions 1 Detecting eliminating inconsistent traces Inconsistent traces uselessly increase cost merging operation The ﬁrst principle consists detecting elimi nating performing merging operation lines 512 Given diagnosis γi current diagnoses set events sources inconsistent traces determined elimination performed order ﬁnally obtain purged diagnosis cid7 γi 2 Giving priority matchable subsystems The merging diagnoses al lows eliminate traces checking interactions claimed Thus merging diagnoses claim interaction respec tive components interesting second principle consists avoiding useless computation giving priority matchable subsystems Thus second stage algorithm consists computation sets kInterγi lines 1417 Each element kInterγi couple γj Icid7 γj meaning γi γj γi γj The merging strategy builds partition kmatchable k Icid7 γi diagnoses ChoosePartition line 20 154 Y Pencolé MO Cordier Artiﬁcial Intelligence 164 2005 121170 diagnoses selected diagnoses set exchanged events claimed diag noses big possible Once partition diagnoses chosen diagnoses element partition elements contain diagnoses merged line 21 operation parallel way A new set diagnoses obtained diagnosis associated element partition The set possible exchanged events updated according new diagnoses set Then algorithm iteratively proceeds eliminating new inconsistent traces new diagnoses set building best new partition diagnoses merging The stage algorithm produces set independent diagnoses The traces diagnosis resulted set participate global trace In words global diagnosis explic itly built applying new merging operations set trace independent diagnosis synchronisable trace independent diagnosis Algorithm 2 Merging strategy γi cid7 γi Iγi γi γj Iγj ElimInconsTracescid7 γi end ReplaceD γi cid7 γi cid7 γi j 1 l j cid19 We note D γ1 γl 1Inconsistent trace elimination 1 l 1 Input Decentralised model Γ1 Γn c1 cn 2 Input Subsystem diagnoses ci 1 n 3 D ci 1 n 4 5 6 7 8 9 10 11 12 13 14 15 16 17 M kInterγi 1 l 18 19 20 21 22 end 23 M cid19 24 The set D set independent diagnoses 25 Output D 3Applying merging operation πD ChoosePartitionD M cid25 cid7 D cid7 γj γi end 2Looking matchable subsystems 1 l kInterγi γj Icid7 γi πD cid7 γi γj Icid7 γi M cid19 γj cid19 πD cid7 γi cid7 γi cid7 γj end Y Pencolé MO Cordier Artiﬁcial Intelligence 164 2005 121170 155 8 Incrementality In online diagnosis approaches purpose follow observed behaviour provide diagnosis possible Given time t1 diagnosis provided interesting account diagnosis order provide diagnosis time t2 t1 t2 given new set observations occur t1 t2 This section focuses topic The idea propose incremental diagnosis algorithm extending updating diagnosis time t1 order compute diag nosis time t2 efﬁciently possible This problematic called incremental diagnosis 20 81 Principles difﬁculties Incremental diagnosis based basic concepts Deﬁnition 23 Breakpoint A breakpoint tj date supervision clock Deﬁnition 24 Temporal window A temporal window Wj delay secutive breakpoints tj tj 1 The ﬂow observations belongs set consecutive temporal windows Wj j 1 m Fig 13 Given temporal window Wj set received observations Wj noted following OWj set observations received Wj noted Oj 1 The incremental diagnosis problem computing diagnosis j explaining observations Oj given diagnosis j 1 explains Oj 1 observations OWj Fig 13 Temporal windows breakpoints 156 Y Pencolé MO Cordier Artiﬁcial Intelligence 164 2005 121170 As mentioned supervision receives ﬂow observations temporal window Wj The problem delays emission messages observation channels receptions supervision Fig 13 Consequently messages emitted Wj received Wj Another problematic consequence end Wj guarantee supervision received observations diagnosis In fact messages received emitted received messages situation possible unreceived messages conveyed observation channels important delays transmission The choice temporal windows fundamental The update di agnosis j 1 strongly depends nature chosen temporal window Wj In following subsections incremental algorithms discussed based properties chosen temporal windows 82 Sound temporal windows In approach solution consists choosing sound temporal windows Deﬁnition 25 Sound window A breakpoint tj sound iff message emitted tj received tj A temporal window Wj sound iff tj tj 1 sound A sound breakpoint interesting guarantees set messages emitted point effectively received supervisor Fig 14 In words sound breakpoint guarantees o Oj 1 ocid7 Oj Oj 1 o ocid7 As consequence update diagnosis j 1 taking account observations Oj based ﬁnal states A sound breakpoint detected taking account properties obser vation channels date reception observation supervisor For instance Fig 14 Sound breakpoint Y Pencolé MO Cordier Artiﬁcial Intelligence 164 2005 121170 157 knowing maximum delay Dmax message propagation inside observation channels sound breakpoint tj detected ﬁrst observation breakpoint received supervision time t t tj Dmax Fig 14 In following algorithm computes update diagnosis presented Algorithm 3 Algorithm 3 Incremental diagnosis sound temporal windows 1 Input BSWj 1 2 Input OWj 3 1 n 4 5 end 6 γ1 γp initialci ExtractStatesBSWj 1 ci ApplyMergingStrategyc1 initialc1 O Wj cn BSWj 1 cn initialcn O 7 Output Wj γ1 γp 8 Output BSWj FinalStatesγ1 γp BSWj 1 Wj c1 The notation BSWj represents belief state system5 Such belief state rep resents set global states observations OWj Given BSWj 1 set initialck corresponding possible initial states component ck breakpoint tj computed extracting BSWj 1 Then diagnosis Wj ck explaining observations emitted ck received Wj noted O ck Wj states initialck computed diagnosis noted ck initialck O ck Then merging operation applied set independent diagnoses computed This merging operation applied according strategy deﬁned Section 742 depends current belief state BSWj 1 Once diagnosis Wj computed observations Oj explained extract new set diagnoses new belief state BSWj temporal window Once diagnosis Wj computed observations Oj explained Nev ertheless diagnosis j totally computed The explanation OWj invalidated traces Wj 1 impossible ﬁnd explanation new observations given ﬁnal state Wj 1 j 1 In order explicitly obtain j given j 1 Wj eliminate j 1 traces future Wj append Wj new j 1 20 details This operation reﬁnement operation noted So j j 1 Wj From practical point view Wj interesting information context moni toring supervising agent wants know happened Thus 5 The computation belief state topic paper For efﬁciency purposes representation symbolic uses binary decision diagrams 4 158 Y Pencolé MO Cordier Artiﬁcial Intelligence 164 2005 121170 applying reﬁnement operation online diagnosis necessary Reﬁne ment operation required deeper analysis diagnosis performed operation applied offline Section 54 83 General case In treated example derives real application Section 9 hy pothesis sound windows applied loss generality In application alarms instantaneously emitted received problem occur A problem causes large packet alarms given time easy deﬁne sound temporal window surrounds packet So algorithm previously deﬁned solve problem Nevertheless theory sound windows exist section describes general case given temporal windows arbitrarily chosen 20 details The purpose incremental diagnosis provide diagnosis given temporal window method general case account kinds observations 1 observations effectively received 2 observations emitted received If Algorithm 3 unsound temporal window explanations result ing diagnosis missing In fact merging operation assumes emission message observation channels effectively received explanations require emission observable events received computed In worst case possible explanations given set observations based fact messages observation channels case algorithm 3 unable provide explanation In general case order provide diagnosis temporal window unreceived messages guessed observations supposed uncertain 12 In context new diagnosis structure deﬁned allows represent traces hypothesis emitted received observations This structure called extended diagnosis Basically extended diagnosis representation diagnosis extended diagnosis state X formed couple q O O contain unreceived observations explained The set ﬁnal states extended diagnosis corresponds ex Wj O The computation ext composed states q O OWj tended belief state BS extended diagnosis needs following hypothesis Hypothesis 5 Every observation channel component supervision bounded known number capacity In fact size channel unknown extended diagnosis guess unknown number unreceived observations The incremental diagnosis algorithm case unsound temporal window ob tained replacing Algorithm 3 use diagnoses resp belief states use Y Pencolé MO Cordier Artiﬁcial Intelligence 164 2005 121170 159 extended diagnoses resp extended belief states There main differences One difference computation initialck sets line 4 Instead extracting states ck state previous extended belief state extract subset interesting states ones compatible new set received observations observations supposed received effectively received The second difference computation Wj extended diagnoses components line 6 For ck observations O ck explained previous temporal window follows necessary secondly assumptions possible unreceived observations end Wj order achieve extended diagnosis computation As far reﬁnement operation concerned operator j ext j 1 ext Wj ext 84 Relation diagnosis extended diagnosis With help extended diagnosis notion possible provide diag nosis temporal window The extended diagnosis assures explanation missing In fact deﬁnition extended diagnosis represents set explanations explain received observations set possible unreceived ob servations If explanation received observations require assumptions unreceived observations explanation contained ex tended diagnosis As consequence easily shown breakpoint tj j j ext Moreover guarantee given temporal window Wj breakpoint tj 1 sound assumption unreceived events required In case shown j j ext This especially case tj 1 date supervised stops working 9 Experimental results For testing approach model telecommunication network coming project MAGDA This model based real SDH network Synchro nous Data Hierarchy deﬁned collaboration academic industrial partners MAGDA project 91 SDH network The studied network ring 4 ADM multiplexers ADM Add Drop Multi plexer Fig 15 Each multiplexer located different town area Ile 160 Y Pencolé MO Cordier Artiﬁcial Intelligence 164 2005 121170 Fig 15 Topology SDH network ring 4 ADMs Fig 16 Montrouge add drop multiplexer France Aubervilliers Gentilly Montrouge St Ouen Whereas Aubervilliers ADM transmits data Gentilly St Ouen vice versa ADMs connec tions clients network PDH STM1 connections This network managed help managed objects deﬁned SDH norms Each object corresponds functionality multiplexer Fig 16 presents 23 managed objects associated multiplexer Montrouge These objects account SDH protocol hierarchical SPI Synchronous Physical Interface LOP Low Order Path Globally network composed 72 managed objects object behaviour modelled communicating automaton global Y Pencolé MO Cordier Artiﬁcial Intelligence 164 2005 121170 161 Fig 17 Montrouge model component au3CTP centralised model explicitly built free product automata 56 1047 states Each managed object emit alarms detects problem It emit alarms receives messages managed objects In particular object ADM x detects problem emits message objects ADMs y z y z neighbours x Fig 17 shows model describes au3CTP component Montrouge site The problems occur com ponent modelled AisFail AisBack problem alarm indication signal LopFail LopBack loss pointer Such problems occur sites component detects problems reception messages msTTP neighbour auAIS auAISclrd auAISinhib This information propagated tu12CTP help events like tuAIS tuAISclrd The observations emitted component bold Dbled Disabled Ebled Enabled auAIS LOP 92 Results During MAGDA project 8 scenarios faults deﬁned A scenario sists set failures occur network set alarms observed reaction failures These scenarios deﬁned order characterise typical faulty situations particular scenarios contain multiple faults masking 162 Y Pencolé MO Cordier Artiﬁcial Intelligence 164 2005 121170 phenomena scenarios S5 S8 We experimented approach diagnosing scenario set alarms diagnostic tool DDyp 21 For experi ments considered set observed alarms corresponds sound temporal window 921 Results merging strategy Table 1 presents time computation needed diagnosing different scenarios use unique machine Pentium III 1 Ghz computation subsystem diagnoses global diagnosis parallel computation experiments better comparisons 21 details parallel computations Based set received alarms scenario approach ﬁnds failures deﬁned scenario ﬁnds failure scenarios explain observations In order strategy propose fundamental decentralised ap proach Table 1 presents comparison results 4 different strategies The ﬁrst strategy computed help Algorithm 2 The second strategy ﬁrst merging order nonmatchable diagnoses merged The strategy consists merging like strategy 1 eliminating incompatible traces merging The fourth strategy like strat egy 2 eliminating incompatible traces merging Strategy 1 shows online diagnosis computation possible SDH network dealing typical diagnosis situation single multiple failures Strategy 2 shows choice merging ordering important account inter actions subsystem diagnoses For better comparisons strategy 2 merges diagnoses strategy 1 different order Therefore strategy 2 deﬁned according strategy 1 In practice care interactions strategy unable determine independent diagnoses time computation strongly increase Table 1 Diagnosed scenarios different strategies merging Scenarios S1 Laser failure St Ouen S2 AU3 failure Aubervilliers S3 Laser failure Gentilly S4 RS failure Aubervilliers S5 Multiple failures S3 S4 S6 BER failure Aubervilliers S7 RS failure Gentilly S8 Multiple failures S6 S7 Observed alarms Strategy 1 Strategy 2 Strategy 3 Strategy 4 24 4 26 14 36 11 14 21 3 s 590 ms 4 s 200 ms 16s 540 ms 5 mn 1 s 300 ms 1 s 300 ms 1 mn 53 s 5 mn 1 s 780 ms 1 s 910 ms 5 mn 1 s 600 ms 2 s 30 ms 49 s 5 mn 5 mn 2 s 620 ms 5 s 500 ms 5 s 430 ms 3 mn 45 s 1s 780 ms 2 s 320 ms 24 s 240 ms 57 s 440 ms 1s 480 ms 1s 700 ms 2 mn 55 s 5 mn 1 s 830 ms 3s 90 ms 3 s 30 ms 5 mn Y Pencolé MO Cordier Artiﬁcial Intelligence 164 2005 121170 163 result strategy diagnosis Strategy 3 shows elimination traces priori big impact performance merging operation Strategy 4 timeconsuming The merging diagnoses matchable corresponds Cartesian product Moreover incompatible traces uselessly computed invalidated merging diagnoses future steps Strategy 4 shows trajectory elimination good ordering strategy cumulative beneﬁt effects merging operation 922 Characteristics computed diagnoses Table 2 presents characteristics computed diagnoses strategy 1 scenarios deﬁned Table 1 The characteristics following Involved comps max maximal number components involved fault propagation Indep diagnoses number independent diagnoses Red states max number states biggest independent reduced diagnosis Red trans max number transitions biggest independent reduced diagno sis States max number states biggest independent unreduced diagnosis fol lowed reduction rate Trans max number transitions biggest independent unreduced diagnosis followed reduction rate Strategy 1 overhead overhead time needed Strategy 1 compute diagnoses reduction The ﬁrst signiﬁcant result Table 2 fact analysed scenario diag nosis able detect independent diagnoses This fact propagation failure generally involve subpart biggest involved subsystem composed 40 components 72 scenario 5 parts behaving independently occurrence diagnosed failures The second result presented Table 2 reduction diagnoses Strategy 1 applied merge diagnoses reduction techniques order analyse Table 2 Diagnosis characteristics comparison reducedunreduced representations Scenarios Involved comps max Indep diagnoses max Red states Red trans max States max Trans max Strategy 1 overhead S1 S2 S3 S4 S5 S6 S7 S8 36 23 28 40 40 36 28 36 26 28 27 29 25 27 27 25 81 3 10 15 36 19 6 17 82 2 10 14 36 18 5 16 21061 60987 34 0 20 30 7 8163 3874 3557 18 6277 19081 51593 76 0 2934 1 933 8 3551 4560 1154 5370 164 Y Pencolé MO Cordier Artiﬁcial Intelligence 164 2005 121170 impact reduction diagnoses The reduction percentages important set components high degree concurrency inde pendent behaviours detected dependence relation Moreover merging reduced diagnoses efﬁcient merging nonreduced ones The main reasons ﬁrstly merge unreduced diagnoses needs explore bigger statespace secondly computation dependence relation efﬁcient It results overhead reducing neglectable 93 Complexity discussion Results efﬁciency merging operation presented relying real complex large The merging operation efﬁcient example beneﬁts different approaches combined wellsuited In section informal discussion complexity merging operation presented Firstly merging operation based divide conquer paradigm exploits efﬁciency In case paradigm efﬁcient set behaviours diag nosed locally usually small compared number possible local behaviours This fact true diagnosed good observability properties lot differ ent observation types unobservable components temporal windows small Moreover good observability properties expect global diagnosis exponentially smaller global behaviour The second reason merging operation efﬁciency strategy The purpose strategy minimise computations avoiding merging independent di agnoses complex Cartesian product useless The representation global diagnosis thanks set independent diagnoses exponentially smaller relatively number independent diagnoses representation global diagnosis unique ﬁnitestate machine In large systems independent diagnoses exist failure usually propagate consequences components subpart The reason efﬁciency use partial order techniques Those tech niques wellknown modelchecking exponentially reduce complexity space search algorithm good cases A good case lot indepen dent events typically case systems consider The partialorder techniques efﬁcient tradeoff detected independent events search complexity algorithm detect independences In case independence detected local incremental manner merging operation detection algorithm constant consequently create overhead merging algorithm 10 Related work There works propose framework decentralised diagnosis discrete event systems In 8 authors propose monitoring based fact supervised observed set sensors The framework consists Y Pencolé MO Cordier Artiﬁcial Intelligence 164 2005 121170 165 set diagnosers 2526 diagnoser aiming explaining observations site When observation occurs sensor corresponding diagnoser updates diagnosis Because diagnoser computed global model diagnosis proposed diagnoser global diagnosis The merge operation consists exchanging messages diagnosers order consensus diagnosis proposed diagnoser This approach wellsuited monitoring diagnoser approach efﬁcient Nevertheless approach large discrete event systems possible impossibility computing global model The authors 2 propose framework diagnosis active systems In framework based communicating ﬁnite state machines communication chan nels diagnosis computation consists unfolding set automata given set observations The purpose approach compute global diagnosis called active space automaton giving explanations The main difference work efﬁciency approach active space approach offline technique set observations considered complete incremental diagnosis problem efﬁciency method crucial To compute global diagnosis authors propose modular reconstruction based topology ﬁrstly building subsystem diagnoses secondly merging set diagnoses hierarchical manner 3 The merging strategy propose based idea Nevertheless main difference merging strategy reconstruction plan builds cases global diagnosis No reduction techniques compute efﬁcient representation global diagnosis modular reconstruction manage fact subsystems independent diagnosed behaviours merging useless This work extended integrating synchro nous asynchronous behaviours model framework polymorphic systems 14 Very recently 13 new technique called Continuous Diagnosis proposed order extend active approach monitoring purposes In approach authors propose mix diagnoser approach wellsuited monitoring active space approach wellsuited diagnosing large scale discreteevent systems The main idea compute online model state ﬁnitestate machine called monitor currently gives diagnosis failure localisation In tinuous diagnosis approach temporal windows consist observation supposed sound like classical diagnoser approach 2526 Given tempo ral window belief state augmented diagnosis information represented current state monitor When observation occurs computation consists searching observable transitions model match observation com puting unobservable behaviour occur reception observation called silent closure paper This approach assumes global unobservable behaviour occuring observation computable online Our merging strategy help partial reduction techniques contribute increase efﬁciency silent closure computation Another set works proposed monitor stochastic systems The idea consists probability order compute set preferred explanations 166 Y Pencolé MO Cordier Artiﬁcial Intelligence 164 2005 121170 likely explanations generally set explanations As example Livingstone project 28 modeled set transition systems global probability distribution rules triggering transitions modeled In framework purpose compute belief state set likely states monitoring sequence observations This work extended 11 compute likely behaviours called trajectories cited paper A recent approach proposed 10 The framework based set sto chastic diagnoser agents charge computing likely local diagnoses set global observations An agent knows behaviour subsys tem The merging operation implemented message exchanges agents order check diagnosis interactions check result likely In framework idea compute global diagnosis local diagnoses checked order compute failure propagation computation needed association local diagnosis In framework local diagnoses obtained projecting set independent diagnoses given subsystem The approaches based stochastic systems efﬁcient subset complete diagnosis computed problems Firstly probability information necessary difﬁcult acquire real application expertise generally poor automatic training methods Secondly likely explanations sequence obser vations necessary interesting ones occurrence failure generally unlikely Finally monitoring inefﬁcient fact likely explanation temporal window unlikely window backtrack necessary 11 Conclusion perspectives In paper propose framework online diagnosis large scale discrete event systems Dealing large discrete event systems implies use global model impossible The proposed formal framework allows model large discrete event systems modular way Moreover thanks properties synchronisation oper ation associativity commutativity decentralised reasoning performed following divide conquer paradigm Given framework propose online decentralised diagnosis approach Because emits observations subsystems divide di agnosis problem diagnosis subproblems based set subsystems Then diagnoses established merge operation based synchronisation op eration necessary obtain global diagnosis The purpose merge operation build missing information global model interaction checking In order online diagnosis operation efﬁcient For reason sev eral ideas developed paper Firstly diagnosis representation efﬁcient Representation problem efﬁciency concurrency Our proposal use partial order reduction techniques solve problem The second point proposal merging strategy This strategy dynamically computes efﬁcient way merge diagnoses The basic idea dynamically recognise diagnostic problems Y Pencolé MO Cordier Artiﬁcial Intelligence 164 2005 121170 167 independent beneﬁt dynamic independence This recognition result priori analysis usually literature analysis based observed interactions provides accurate results Finally context monitoring efﬁcient means incremen tal To achieve deﬁne incremental diagnosis problem takes advantage diagnosis previously computed compute new diagnosis given new ﬂow observations This framework implemented monitoring telecommunication net works 21 integrated validated context MAGDA project The purpose project provide complete supervision chain modeling ergonomic view failure propagations supervisor The presented framework proposes way model large discrete event provide online complete diagnosis The diagnosis exhaustive presented ways supervisor agent depending needs online analysis deep offline analysis given time The studied network real case promising results study reported paper The perspective work numerous Firstly described framework solve diagnosability problem Previous works problem needs com putation global model known algorithm dealing large scale discrete event systems One challenge propose solution problem inside proposed framework Another problem deal reconﬁguration systems In problem diagnosis deal observations line evolution connection reconﬁguration case telecommunication networks Finally framework extended model large scale autonomous systems mixing diagnosis planning approaches 28 Acknowledgements We thank anonymous reviewers fruitful comments Appendix A Proof Theorem 1 Theorem 1 Let γ1 γ2 disjoint subsystems cid13γ1 γ2cid13 cid5 cid5cid13γ1cid13 cid13γ2cid13 cid5 cid5 Proof Let γ1 γ2 denote disjoint subsystems Γi1 Γik Γj1 Γjl respective component sets γ1 γ2 The behaviour subsystem γ1 γ2 ﬁnite state machine cid13γ1 γ2cid13 I O Q E included free product cid9Γi1 Γik Γj1 Γjl cid10 cid13γ1cid13 included free product cid9Γi1 Γik uct cid9Γj1 Γjl cid10 cid13γ2cid13 included free prod cid10 Therefore behaviour subsystem composed automata 168 Y Pencolé MO Cordier Artiﬁcial Intelligence 164 2005 121170 cid13γ1cid13 cid13γ2cid13 deﬁnition ﬁnite state machine I cid7 Ocid7 Qcid7 Ecid7 included free product cid9Γi1 Γik Γj1 Γjl cid10 cid14 cid15 cid10 cid9Γj1 Γjl cid10 Consequently I I cid7 O Ocid7 cid9Γi1 Γik cid16 Q Q cid7 Qp pi1ikj1jl To prove result sufﬁces E Ecid7 Ecid7 E E set synchronised transitions cid9Γi1 Γik Γj1 Γjl set synchronised transitions cid9Γi1 Γik Γj1 Γjl product transitions cid13γ1cid13 cid13γ2cid13 Therefore Ecid7 necessarily contained E cid10 Ecid7 cid10 resulting E Ecid7 Every transition T E follows tj1 q tik q ti1 q T qi1 qik qj1 cid7 ik cid7 i1 qjl tjl q cid7 jl cid7 j1 transition cid9Γi1 Γik cid10 qj1 tj1 qcid7 j1 qi1 tjl qcid7 jl qik tik qcid7 ti1 qcid7 ik i1 transition cid9Γj1 Γjl cid10 The transition T synchronised If qjl tj j i1ik tj j j1jl null deﬁnition corresponding transitions cid9Γi1 Γik cid10 synchronised T Ecid7 cid10 cid9Γj1 Γjl Otherwise cardtj j i1 ik j1 jl rcvtj Σ γ1γ2 exo cid1 1 Con sequently obtain cid8cid6 cid8cid6 card tj j i1 ik rcvtj Σ γ1 exo tj j j1 jl rcvtj Σ γ2 exo For nonnull tj j i1 ik j1 jl cid1 1 cid1 1 card cid7cid9 cid7cid9 1 e emittj Σ γ1γ2 2 rcvtj Σ γ1γ2 r i1 ik j1 jl e rcvtr int r i1 ik j1 jl rcvtj emittr int If j i1 ik 1 obtain int r i1 ik j1 jl e rcvtr e emittj Σ γ1 Because γ1 γ2 disjoint Σ γ1 Σ γ1 int e emittj Σ γ1 cid13 rj1jl rcvtr Finally 1 int r i1 ik e rcvtr Using way reasoning property 2 implies rcvtj Σ γ1 Finally know int r i1 ik rcvtj emittr j i1 ik j1 jl rcvtj Σ γ1γ2 rcv Two cases hold int contain events subsystem γ2 cid6 cid6cid6 Y Pencolé MO Cordier Artiﬁcial Intelligence 164 2005 121170 169 1 If j i1 ik j i1 ik rcvtj Σ γ1 rcv 2 If j i1 ik suppose sake contradiction j i1 ik rcvtj Σ γ1 int With help cid6 cid6cid6 follows transition tj j i1ik represents cyclic instantaneous propagation events γ1 impossible cause Hypothesis 4 j i1 ik rcvtj Σ γ1 rcv tik qcid7 Therefore qi1 ik tjl qcid7 cid13γ1cid13 The fact qj1 synchronised transition belongs jl cid13γ2cid13 shown manner The transition T Ecid7 result cid1 ti1 qcid7 i1 tj1 qcid7 j1 synchronised transition belongs qik qjl References 1 A Arnold Transition systems concurrent processes G Mirkowska H Rasiowa Eds Mathematical Problems Computation Theory Banach Center Warsaw 1987 pp 921 2 P Baroni G Lamperti P Pogliano M Zanella Diagnosis large active systems Artiﬁcial Intelligence 110 1999 135183 3 P Baroni G Lamperti P Pogliano M Zanella Diagnosis class distributed discreteevent systems IEEE Trans Systems Man Cybernet A 30 6 2000 731752 4 RE Bryant Graphbased algorithms Boolean function manipulation IEEE Trans Comput 35 8 1986 677691 5 EM Clarke O Grumberg D Peled Model Checking MIT Press Cambridge MA 1999 6 L Console C Picardi M Ribaudo Process algebra systems diagnosis Artiﬁcial Intelligence 142 2002 1951 7 MO Cordier C Dousson Alarm driven monitoring based chronicles Proceedings Safe process2000 Budapest Hungary 2000 pp 286291 8 R Debouk S Lafortune D Teneketzis Coordinated decentralized protocols failure diagnosis discrete event systems J DiscreteEvent Dynamic Syst 10 12 2000 3386 9 C Dousson P Gaborit M Ghallab Situation recognition representation algorithms Proceedings International Joint Conference Artiﬁcial Intelligence IJCAI93 Chambéry France 1993 pp 166 172 10 E Fabre A Benveniste C Jard Distributed diagnosis large discrete event dynamic systems Pro ceedings IFAC World Congress Barcelona Spain 2002 11 J Kurien PP Nayak Back future consistencybased trajectory tracking Proceedings AAAIIAAI 2000 pp 370377 12 G Lamperti M Zanella Diagnosis discreteevent systems uncertain temporal observations Artiﬁ cial Intelligence 137 12 2002 91163 13 G Lamperti M Zanella Continuous diagnosis discreteevent systems Proceedings Interna tional Workshop Principles Diagnosis DX03 Washington DC 2003 pp 105111 14 G Lamperti M Zanella Diagnosis Active Systems Kluwer Academic Dordrecht 2003 15 J Lunze Discreteevent modelling diagnosis quantized dynamical systems Proceedings International Workshop Principles Diagnosis DX99 Loch Awe United Kingdom 1999 pp 147 154 16 A Mazurkiewicz Basic notions trace theory JW Bakker WP Roever G Rozenberg Eds Proceedings SchoolWorkshop Linear Time Branching Time Partial Order Logics Models Concurrency Lecture Notes Computer Science vol 354 Springer New York 1988 pp 364397 17 D Niebur Expert systems power control western Europe Proceedings IEEE Sym posium Intelligent Control Philadelphia USA 1990 pp 112119 170 Y Pencolé MO Cordier Artiﬁcial Intelligence 164 2005 121170 18 D Peled All model checking representatives C Courcoubetis Ed ComputerAided Veriﬁcation Lecture Notes Computer Science vol 697 Springer New York 1993 pp 409423 19 Y Pencolé Decentralized diagnoser approach application telecommunication networks Proceedings International Workshop Principles Diagnosis DX00 Morelia Mexico 2000 pp 185192 20 Y Pencolé MO Cordier L Rozé Incremental decentralized diagnosis approach supervision telecommunication network Proceedings International Workshop Principles Diagnosis DX01 San Sicario Italy 2001 pp 151158 21 Y Pencolé MO Cordier L Rozé A decentralized modelbased diagnostic tool complex systems Internat J Artiﬁcial Intelligence Tools 11 3 2002 327346 22 M Riese Diagnosis extended ﬁnite automata dynamic constraint satisfaction problem Proceed ings International Workshop Principles Diagnosis DX93 Aberystwyth United Kingdom 1993 pp 6073 23 L Rozé MO Cordier Diagnosing discrete event systems An experiment telecommunication networks Proceedings Workshop Discrete Event Systems WODES98 Cagliari Italy 1998 pp 130 137 24 L Rozé MO Cordier Diagnosing discreteevent systems extending diagnoser approach deal telecommunication networks J DiscreteEvent Dynamic Syst 12 1 2002 4381 errata 14 1 2004 131 25 M Sampath R Sengupta S Lafortune K Sinnamohideen D Teneketzis Diagnosability discrete event IEEE Trans Automatic Control 40 9 1995 15551575 26 M Sampath R Sengupta S Lafortune K Sinnamohideen D Teneketzis Active diagnosis discrete event systems IEEE Trans Automatic Control 43 7 1998 908929 27 R Sengupta Diagnosis communication distributed systems Proceedings Workshop Discrete Event Systems WODES98 Cagliari Italy 1998 pp 144151 28 BC Williams PP Nayak A modelbased approach reactive selfconﬁguring systems Proceedings AAAI96 Portland OR 1996 pp 971978 29 BC Williams PP Nayak Immobile robotsAI new millenium AI Magazine 17 3 1996 1734