Available online wwwsciencedirectcom R Artiﬁcial Intelligence 155 2004 147182 wwwelseviercomlocateartint Hierarchical modelbased diagnosis based structural abstraction Luca Chittaro Roberto Ranon Department Mathematics Computer Science University Udine delle Scienze 206 33100 Udine Italy Received 9 December 2002 received revised form 20 June 2003 Abstract Abstraction advocated main remedies computational complexity modelbased diagnosis However seminal work published early nineties little research devoted topic In paper consider types abstraction commonly diagnosis structural abstraction investigating theoretical practical point view First provide new formalization structural abstraction generalizes extends previous ones Then present new different techniques model based diagnosis automatically derive easiertodiagnose versions hierarchical diagnosis problem basis available observations The proposed techniques formulated extensions wellknown Mozetics algorithm I Mozetic Hierarchical diagnosis WHL Console J Kleer Eds Readings ModelBased Diagnosis Morgan Kaufmann San Mateo CA 1992 pp 354372 experimentally contrasted evaluate obtained efﬁciency gains 2003 Elsevier BV All rights reserved Keywords Modelbased diagnosis Abstraction Hierarchical reasoning 1 Introduction In decade ModelBased Diagnosis MBD 46918 active area research Artiﬁcial Intelligence led signiﬁcant industrial projects 162022 Corresponding author Email addresses chittarodimiuniudit L Chittaro ranondimiuniudit R Ranon 00043702 matter 2003 Elsevier BV All rights reserved doi101016jartint200306003 148 L Chittaro R Ranon Artiﬁcial Intelligence 155 2004 147182 Computational complexity multiple fault diagnosis wellknown problems needs tackled order deploy realworld applications MBD Since late eighties researchers 10121419 advocated abstraction main remedies problem The proposed approaches typically hierarchical represent problem multiple levels isolate faults level time starting abstract possible level results level focus reasoning detailed levels reducing overall computational cost diagnosis Two kind abstractions commonly employed MBD structural abstraction 5 10 aggregates components different levels structural behavioral abstraction 121419 applies simpliﬁcation operators different levels behavioral moving quantitative qualitative values describing functioning components In paper build seminal work abstraction MBD investigate structural abstraction theoretical practical point view First provide new logical formalization structural abstraction generalizes extends previous ones 11419 Our proposal builds wellknown consistency based theory diagnosis 8 general framework semantic theory abstraction 15 representation abstraction ﬁrstorder theories Unlike previous formalizations structural abstraction proposal allows represent components multiple behavioral modes valves Thus employed wider class physical systems Moreover proposed formalization allows easily prove properties structural abstraction useful diagnostic reasoning Second present new techniques hierarchical modelbased diagnosis able automatically derive easiertodiagnose versions given diagnosis problem basis available observations The goal research simply abstraction diagnosis good abstraction situation hand context choose Indeed limit effectiveness current approaches hierarchical diagnosis fact single preset hierarchical representation employed regardless currently available diagnostic information In cases leads suboptimal counterproductive results terms efﬁciency detailed examples illustrated paper Unfortunately abstractions usually manually engineered building suitable abstract representation diagnostic scenario viable solution We tackle problem idea automatically tailoring existing multilevel abstraction hierarchy come design particular problem hand The techniques called REARRANGE BOTTOMUP developed purpose based different strategies easily combined sum respective advantages build seminal work hierarchical diagnosis Mozetic 14 presented extensions approach L Chittaro R Ranon Artiﬁcial Intelligence 155 2004 147182 149 To evaluate efﬁciency gains obtained present detailed experimental evaluation set different hydraulic systems considering original Mozetics approach techniques isolation techniques combination The techniques presented paper general easily adopted modelbased approach follows widely adopted consistencybased paradigm The paper illustrates algorithms implement proposed techniques allow interested readers easily include experiment systems Finally work builds previous approaches proposed domain FlowBased Functional Models 317 generally context structural abstraction 2 This paper extends improves directions particular proposes proper theoretical framework formalization structural abstraction mentioned discusses detailed examples hierarchical represen tation regardless currently available diagnostic information limit eliminate efﬁciency gains abstraction reﬁnes REARRANGE technique proposes new technique hierarchical diagnosis BOTTOMUP technique presents detailed experimental comparison proposed techniques reference approach Mozetic The paper structured follows Section 2 summarizes background work build Section 3 deﬁnes formalization structural abstraction diagnosis illustrates properties discussing related work Section 4 considers problem diagnostic reasoning structural abstraction illustrating state art proposing methods improve automatically tailoring existing abstractions situation hand ﬁnally illustrating experimental activity carried Section 5 concludes paper presenting possibilities work 2 Background In section brieﬂy illustrate aspects consistencybased theory diagnosis 8 semantic theory abstraction 15 relevant illustrate work add minor extensions Moreover clarify concepts introducing detailed examples taken hydraulic domain followed paper 21 Representing diagnosis problems Following 8 diagnosis problem D language L deﬁned triple SD OBS COMPS SD OBS ﬁrstorder theories language L representing description observations respectively COMPS subset object constants L names components 150 L Chittaro R Ranon Artiﬁcial Intelligence 155 2004 147182 In order explicitly separate structural knowledge components connected behavioral knowledge components behave divide SD following way SD CD BD Γ BD behavioral description represents behavior components CD compositional description represents structure Γ represents general knowledge hydraulic laws speciﬁc considered system1 Deﬁnition 1 behavioral description component The behavioral description component c denoted BDc diagnosis problem D set sentences form cid1 mc σc cid5zc cid2 Tcc cid5zc Tcc cid5zc component type predicate c cid5zc lists ports component m predicate identifying behavioral modes c σc cid5zc ﬁrstorder formula free variables cid5zc describing behavioral mode m c respect ports The behavior component represented set ﬁrstorder sentences corresponding normal faulty behavior deﬁned predicate component ports Deﬁnition 2 behavioral description The behavioral description BD diagnosis problem D union behavioral descriptions components COMPS Deﬁnition 3 compositional description The compositional description CD diagnosis problem D SD OBS COMPS ﬁrstorder sentence form cid3 cid4 cid5 T S cid5zS z1 z2 zn Tcc cid5zc cCOMPS S systems variable cid5zS appears tuples cid5zc c COMPS variables tuples z1 z2 zn The righthand compositional description CD contains component type predicate component A connection components 1 A similar separation structural behavioral knowledge proposed 1 Here extend components multiple behavioral modes L Chittaro R Ranon Artiﬁcial Intelligence 155 2004 147182 151 represented variable connected ports belonging ﬁrst component second The left hand CD composed component type predicate lists component ports connect components connect component systems environment In general assume observations taken components ports We adopt following standard deﬁnitions employed consistencybased diagnosis Given diagnosis problem D candidate C formula assigns component D behavioral modes partial candidate formula assigning behavioral mode components D A partial candidate C partial diagnosis logically consistent SD OBS assignment I values ports I SD OBS C In case I model D similarly D inconsistent models To solve diagnosis problem ﬁnd diagnoses compact characterization kernel diagnoses described 8 Finally use notation CANDSD B B COMPS denote set partial candidates diagnosis problem D built components set B The cardinality CANDSD COMPS depends cardinality COMPS number possible behavioral modes deﬁned components BD If component ci diagnosis problem Mi possible behavioral modes cid6 cid6CANDSD COMPS cid6 cid6 cid7 Mi ci COMPS resulting number candidates exponential COMPS Considering simplest case component behavioral modes ok faulty number candidates 2n n number components More realistic cases modes lead larger cardinalities Example 1 The simple hydraulic depicted Fig 1 called hydraulic case study hcs hereinafter contains 11 components volumetric pump pm delivering constant ﬂow equal FK pipes p1 p2 p3 p4 p5 p6 valves v1 v2 threeway nodes n1 n2 The ports t1 t13 connecting components sv1 sv2 allowing set stateopen closedof valves v1 v2 respectively We suppose component ok behavioral mode represents normal behavior The considered faults external leaks denoted predicate leak affect pumps pipes valves stuckatclosed stuckatopen faults denoted predicates stuckC stuckO respectively affect valves low high delivered ﬂowrates denoted predicates loF hiF affect pumps The behavioral descriptions components given Table 1 For simplicity suppose threeway nodes faulty normal behavioral mode Moreover consider component types threeway nodes intended input outputs called twoOut threeway nodes intended inputs output called twoIn 152 L Chittaro R Ranon Artiﬁcial Intelligence 155 2004 147182 Fig 1 Layout hydraulic case study component names shown bold Table 1 Behavioral descriptions components hcs Component pump Type predicate pumpx pipe valve pipex valvex s threeway node twoOutx out1 out2 twoInx in1 in2 Behavioral modes okx FK leakx loFx FK hiFx FK okx leakx okx s closed 0 s open leakx stuckOx s closed 0 stuckCx s open 0 okx out1 out2 okx in1 in2 The compositional description CD hcs following formula cid1 cid8 hcs t1 t13 sv1 sv2 hydSystem cid9 t2 t12 pump pm t1 t2 pipep1 t2 t3 twoOutn1 t3 t4 t5 pipep2 t4 t6 pipep3 t5 t7 valvev1 sv1 t6 t8 valvev2 sv2 t7 t9 pipep4 t8 t10 pipep5 t9 t11 twoInn2 t10 t11 t12 pipep6 t12 t13 cid2 Finally CANDSD COMPS 4 26 42 4096 L Chittaro R Ranon Artiﬁcial Intelligence 155 2004 147182 153 22 Representing abstraction We adopt semantic theory abstraction 15 viewing abstractions model level mappings From perspective abstracting theory twostep process ﬁrst abstracts intended domain model builds abstract theory capture abstracted domain model Although theories purposes 11 theory adopt advantage explicitly representing motivation choices given abstraction More formally given U0 U1 sets sentences2 languages L0 L1 abstraction mapping π function maps models base theory U0 corresponding interpretations abstract language L1 π ModelsU0 InterpretationsL1 Given model M0 U0 π builds interpretation πM0 L1 deﬁning formula π free variable x1 deﬁnes abstract universe nary relation R L1 formula πR L0 n free variables x1 xn deﬁnes R Given model M0 U0 πR deﬁnes nary relation M0 The denotation R πM0 πR restricted universe πM0 similar formulas specify denotation abstract object function constants 15 details U1 abstraction U0 given abstraction mapping π U1 captures abstract models respect π U0 This captured deﬁnition model increasing MI abstractions Deﬁnition 4 model increasing abstraction Let U0 U1 sets sentences languages L0 L1 respectively Let π ModelsU0 InterpretationsL1 abstraction mapping U1 Model Increasing MI Abstraction U0 respect π written U1 π U0 model M0 U0 πM0 model U1 MI abstractions cover common model level abstractions taking union set predicates 15 examples MI abstractions Example 2 Consider behavioral description valve given Example 1 Suppose want build abstract description want represent fault modes instead faultyO covers faults open state faultyC covers faults closed state cid8 valve cid8 valve x s x s cid1 cid1 cid9 cid9 faultyOx s open 0 faultyCx s closed cid20 0 cid20 0 cid2 cid2 2 We adopt convention greater subscript indicate abstract simpler theory 154 L Chittaro R Ranon Artiﬁcial Intelligence 155 2004 147182 The abstraction mapping adopt denotation predicate faultyOx union denotations predicates leak restricted cases s open stuckC denotation predicate faultyCx union denotations predicates leak restricted cases s closed stuckO Example 1 cid9 cid8 faultyOx π s open leakx stuckCx cid9 faultyCx π s closed leakx stuckOx Other kind abstractions MI useful reasoning viewed MI abstractions conjunction simplifying assumptions 15 U1 MI abstraction U0 simplifying assumption A theory UA U0 UA consistent A U1 MI abstraction UA A We interested following properties MI abstractions 15 details Proposition 1 Let U1 MI abstraction U0 If U1 inconsistent U0 inconsistent Proposition 1 implies prove inconsistency base theory sufﬁces prove inconsistency potentially simpler MI abstraction theory general converse hold Proposition 2 Let U1 MI abstraction U0 V1 MI abstraction V0 interpretation mapping π Then U1 V1 MI abstraction U0 V0 π Proposition 2 implies MI abstractions compositional allowing build abstract theories composing knowledge different sources 3 Formalizing structural abstraction In section propose formalization concept structural abstraction diagnosis We deﬁne structural abstraction diagnosis problem D abstract diagnosis problem components new supercomponents representing aggregation set connected components D ii components D involved aggregations Following approach semantic theory abstraction ﬁrst deﬁne proper interpretation mapping interpretation mapping encodes aggregation structure behavior components model level deﬁne structural abstraction diagnosis problem respect interpretation mapping As structural abstraction MI abstraction This allow formalize correspondence solutions diagnosis problem solutions structural abstraction This correspondence basis exploitation structural abstraction diagnostic reasoning At end section include comparison previous formalizations structural abstraction highlight relations improvements L Chittaro R Ranon Artiﬁcial Intelligence 155 2004 147182 155 31 Informal deﬁnitions assumptions Suppose given diagnosis problem D0 want build abstract version D1 single supercomponent called sc replaces set AGGR connected components D0 A ﬁrst desirable requirement parts D0 refer components AGGR remain identical D1 Thus general want COMPS1 composed sc components COMPS0 belong AGGR behavioral descriptions BD1 D1 composed behavioral descriptions D0 components belong AGGR behavioral description sc provided compositional description CD1 D1 connects components belong AGGR connected CD0 D0 OBS1 contains observations OBS0 refer components belong AGGR Moreover want deﬁne relation representation sc representation components AGGR exploited diagnosis knowing sc faulty way want hypotheses faults subcomponents We break requirement parts separately consider behavioral description structural description observations With respect behavioral description want behavioral mode sc correspond precisely abstraction set combinations behavioral modes subcomponents This denotes fact real systems know supercomponent checking subcomponents composing behaviors cid10 xAGGR mix mi The fact components AGGR behaving certain way expressed formula proper mode behavioral description x partial candidate components AGGR The set possible combinations behaviors components belonging AGGR set CANDSD0 AGGR We create number sets partial candidates BM1 BMl partition set CANDSD0 AGGR way BMi corresponds behavioral mode supercomponent supercomponent certain behavioral mode subcomponents behave consistently partial candidates corresponding BMi set From structural point view supercomponent supposed replace components AGGR ports supercomponent ports components AGGR connect components AGGR ports cid5zsc subsystem compositional description T sc cid5zsc cid4 cAGGR Tcc cid5zc 156 L Chittaro R Ranon Artiﬁcial Intelligence 155 2004 147182 T type supercomponent sc The ports internal subsystem aggregated neglected abstraction Finally internal ports subsystem aggregated present D1 observations concerning included OBS1 32 Formal deﬁnitions We formally express illustrated requirements semantic theory Nayak Levy interpretation mappings perform aggregation model level We begin deﬁning basic structural abstraction aggregates set connected components supercomponent consider general case aggregations performed The following deﬁnition characterizes interpretation mappings structural abstraction Deﬁnition 5 interpretation mapping structural abstraction Let D0 SD0 OBS0 COMPS0 diagnosis problem language L0 Let SA cid21AGGR BM1 BMkcid22 tuple nonempty sets AGGR COMPS0 AGGR k sets BMi partition set CANDSD0 AGGR Let L1 language deﬁne abstract diagnosis problem L1 includes sc supercomponent result aggregation components AGGR Tsc type predicate m1 mk predicates identifying behavioral modes Let πSA ModelsD0 InterpretationsL1 interpretation mapping πSA x1 x1 π interpretation mapping structural abstraction D0 Tscsc cid5zsc πSA w1 wn cid11 misc cid5z πSA pcBMi case πSA identity function pc 1 k cAGGR Tcc cid5zc cid10 The interpretation mapping πSA change domains operates3 real numbers ﬂows hydraulic domain binary quantities electronic systems The ﬁrst requirement states denotation type predicate sc restriction abstract universe compositional description subsystem aggregated This establishes link supercomponent underlying structure The second requirement states denotation given behavioral mode sc restriction abstract universe disjunction partial candidates contained 3 Changing require behavioral abstraction L Chittaro R Ranon Artiﬁcial Intelligence 155 2004 147182 157 corresponding BM set This establishes link set partial candidates subcomponents behavioral mode supercomponent abstracts Finally requirement says denotation object change parts D0 involved aggregation remain As notice interpretation mapping encodes deﬁnition sets AGGR BM1 BMk choices makes performing structural abstraction diagnosis problem Given deﬁnition deﬁne basic structural abstraction diagnosis problem Deﬁnition 6 structural abstraction diagnosis problembasic case Let D0 SD0 OBS0 COMPS0 D1 SD1 OBS1 COMPS1 diagnosis problems language L0 L1 respectively πSA ModelsD0 InterpretationsL1 interpretation mapping structural abstraction D0 D1 basic structural abstraction D0 respect πSA COMPS1 COMPS0 AGGR sc CD1 T S cid5zs z1 znTscsc cid5zsc cid10 c AGGR Tcc cid5zc type declarations components belonging AGGR CD0 cid12 BD1 BD0 OBS1 contains observations OBS0 refer ports present cAGGR BDc BDsc D1 This deﬁnition speciﬁes formulas D1 constructed D1 contains sc components D0 involved aggregation The abstract compositional description CD1 obtained simply removing CD0 predicates refer components AGGR introducing predicate sc Those ports internal subsystem AGGR included D1 The abstract behavioral description BD1 contains behavioral descriptions BD0 components AGGR behavioral description sc The behavioral description sc satisfy adopted interpretation mapping πSA relation behavioral modes BMi sets encoded πSA Finally OBS1 simply subset OBS0 omitting observations concerning ports present D1 Example 3 Consider diagnosis problem illustrated Example 1 suppose want build structural abstraction aggregating components pm p1 single supercomponent sc AGGR pm p1 We deﬁne sets BM1 BMk correspond behavioral modes sc Since behavioral modes pump behavioral modes pipe possible partial candidates pm p1 group following sets cid13 cid13 BM1 BM2 cid14 ok pm okp1 ok pm leakp1 leak pm okp1 leak pm leakp1 loF pm leakp1 hiF pm leakp1 cid14 158 L Chittaro R Ranon Artiﬁcial Intelligence 155 2004 147182 cid13 cid13 BM3 BM4 loF pm okp1 hiF pm okp1 cid14 cid14 The ﬁrst set represents normal behavior second set represents situations leak fourth sets correspond situations p1 normal pm delivering wrong ﬂow low high respectively The sets abstracted behavioral modes supercomponent called ok leak loF hiF respectively By Deﬁnition 5 construct interpretation mapping π oksc π BM1 leaksc π BM2 loFsc π BM3 hiFsc π BM4 cid9 cid8 sc t1 t3 TYPE π t2 cid1 pump pm t1 t2 pipep1 t2 t3 cid2 In resulting abstract diagnosis problem COMPS sc n1 p2 p3 v1 v2 p4 p5 n2 p6 behavioral description given Example 1 behavioral descriptions pm p1 omitted behavioral description sc added Given adopted interpretation mapping type pump assigned sc Finally abstract compositional description cid9 cid8 hcs t1 t13 sv1 sv2 hydSystem cid1 pumpsc t1 t3 twoOutn1 t3 t4 t5 pipep2 t4 t6 pipep3 t5 t7 valvev1 sv1 t6 t8 valvev2 sv2 t7 t9 pipep4 t8 t10 pipep5 t9 t11 twoInn2 t10 t11 t12 pipep6 t12 t13 t3 t12 cid2 We deﬁne general case structural abstraction basic structural abstractions applied order obtain desired level structural complexity Deﬁnition 7 structural abstractiongeneral case Let D0 diagnosis problem D1 D2 basic structural abstractions D0 D1 interpretation mappings πA πB respectively Then D2 structural abstraction D0 interpretation mapping πB πA Typically want directly abstract components component wants different structural abstractions example able choose proper level reasoning situation hand This usually accomplished building multilevel hierarchy structural abstrac tions list diagnosis problems representing dif ferent level ﬁrst level hierarchy detailed levels hierarchy structural abstraction previous L Chittaro R Ranon Artiﬁcial Intelligence 155 2004 147182 159 Deﬁnition 8 multilevel hierarchy structural abstractions A multilevel hierarchy structural abstractions H ordered set q diagnosis problems SDi OBSi COMPSi 0 q 1 j j 0 q 2 Dj 1 structural ab straction Dj respect interpretation mapping πj Example 4 A multilevel hierarchy structural abstractions organized levels hcs shown Fig 2 For level ﬁgure illustrates layout components ports highlights components aggregated In particular level 1 aggregated pipe p2 valve v1 valve sc1 pipe p3 valve v2 valve sc2 Both aggregations exploit similar interpretation mapping case sc1 interpretation mapping π omit deﬁnitions BMi sets derived righthand following sentences oksc1 π okp2 okv1 leaksc1 π leakp2 leakv1 stuckOsc1 π okp2 stuckOv1 stuckCsc1 π okp2 stuckCv1 TYPEsc1 sv1 t4 t8 π t6 pipep2 t4 t6 valvev1 t6 t8 In case sc2 interpretation mapping involved components p3 v2 In level 2 aggregated valve sc1 pipe p4 valve sc3 valve sc2 pipe p5 valve sc4 Both aggregations performed interpretation mapping analogous ones previous level In level 3 aggregated valves sc3 sc4 threeway nodes n1 n2 sc5 valve ports setting state sc5 closed sv1 sv2 set closed component type predicate valve2 Its behavioral description follows cid8 x s1 s2 cid9 cid1 valve2 okx s1 closed s2 closed 0 s1 open s2 open cid1 cid9 cid2 cid8 x s1 s2 cid8 x s1 s2 cid9 valve2 valve2 cid1 leakx stuckOx s1 closed s2 closed 0 cid9 cid8 x s1 s2 valve2 cid1 stuckCx s1 open s2 open 0 cid2 cid2 cid2 In level 4 aggregated pm p1 pump sc6 interpretation mapping analogous Example 3 sc5 p6 sc7 valve ports state sc5 Finally level 5 aggregated sc6 sc7 sc8 basically pump ports sv1 sv2 setting state delivers constant ﬂow equal FK port set open delivers ﬂow 160 L Chittaro R Ranon Artiﬁcial Intelligence 155 2004 147182 Fig 2 A hierarchy structural abstractions hcs 6 levels 33 Properties structural abstractions In section examine properties structural abstractions useful diagnosis In particular given diagnosis problem D0 structural abstraction D1 L Chittaro R Ranon Artiﬁcial Intelligence 155 2004 147182 161 ﬁrst deﬁne reﬁnement candidate D1 candidate D0 makes consistent predictions detailed level Then prove structural abstractions MI abstractions consequently properties illustrated Section 2 Using properties prove candidate structural abstraction diagnosis problem D diagnosis reﬁnements diagnoses D Deﬁnition 9 reﬁnement candidate Let D0 D1 diagnosis problems languages L0 L1 respectively D1 structural abstraction D0 respect interpretation mapping π Let AGGR set components D0 aggregated let sc COMPS1 supercomponent Let C1 P C mscsc candidate D1 PC partial candidate components set COMPS1 sc A candidate C0 D0 called reﬁnement C1 cid10 C0 mscsc π cAGGR mcc PC cid10 cAGGR mcc possibly disjunction partial candidates components belonging AGGR The idea candidate reﬁnements contain behavioral modes assignments components involved abstraction behavioral mode m supercomponent substituted reﬁnement partial candidate abstracted m Note deﬁnition structural abstraction candidate abstract diagnosis problem reﬁnement BMi sets partition set partial candidates partial candidate abstracted behavioral mode supercomponent The following theorem states structural abstraction MI abstraction Theorem 3 Let D0 D1 diagnosis problems languages L0 L1 respectively D1 structural abstraction D0 respect interpretation mapping π Then D1 π D0 D1 MI abstraction D0 respect π Proof outline Consider model D0 assignment I values ports D0 candidate C0 D0 I SD0 OBS0 C0 We πI model D1 candidate C1 D1 πI SD1 OBS1 C1 1 2 By deﬁnition structural abstraction πI OBS1 restrictions I OBS0 respectively assign value ports present D0 D1 Thus πI SD0 OBS1 C0 3 One substitute SD0 SD1 3 denotation CD0 CD1 BD0 BD1 considered restriction I Then C1 C0 162 L Chittaro R Ranon Artiﬁcial Intelligence 155 2004 147182 reﬁnements The partial candidate contained C1 assigns mode components shared D0 D1 πI model restriction involve components observations aggregated Finally deﬁnition reﬁnement πI model partial candidate contained C1 assigns mode aggregations components D0 Since structural abstractions MI prove following relation candidate abstract diagnosis problem reﬁnements Theorem 4 Let D0 D1 diagnosis problems languages L0 L1 respectively D1 structural abstraction D0 respect interpretation mapping π Let C1 candidate D1 diagnosis Then reﬁnement C0 C1 diagnosis D0 Proof Since C1 diagnosis C1 SD1 OBS1 inconsistent Moreover D1 structural abstraction D0 SD1 π SD0 OBS1 π OBS0 Finally C1 π C0 hypothesis By compositionality MI abstractions write C1 SD1 OBS1 π C0 SD0 OBS0 Since C1 SD1 OBS1 inconsistent property 1 C0 SD0 OBS0 inconsistent C0 diagnosis This theorem allows exclude possible solutions diagnosis problem D reﬁnement impossible diagnosis The advantage eliminating candidate potentially simpler abstract diagnosis problem possibly rule candidates original diagnosis problem On hand ﬁnd abstract candidate diagnosis guarantee reﬁnements diagnoses shown following example Example 5 Consider diagnosis problem hcs given Example 1 Suppose observations specifying ﬂow port t2 greater zero FK In structural abstraction given Example 3 port t2 present candidate oksc okn1 okp2 okp3 okv1 okv2 okp4 okp5 okn2 okp6 diagnosis abstract diagnosis problem reﬁnement ok pm okp1 okn1 okp2 okp3 okv1 okv2 okp4 okp5 okn2 okp6 diagnosis considered situation explained pm delivering low ﬂow L Chittaro R Ranon Artiﬁcial Intelligence 155 2004 147182 163 34 Some remarks aggregation components cid15 In general aggregating set components c1 ck component sc number behavioral modes sc worst N i1k Mi Mi number behavioral modes component ci The motivation principle combination behavioral modes subcomponents represented distinct behavioral mode supercomponent In case complexity reduction want obtain abstraction vanishes number supercomponent modes considered N exactly number partial candidates involving subcomponents number candidates remains equal detailed diagnosis problem Therefore needs ﬁnd suitable aggregations components able reduce complexity reasoning In cases aggregations easily combinations behavioral modes subcomponents distinguishable terms values supercomponent ports naturally combined behavioral mode In Example 3 combinations subcomponent modes hiﬂow pm leakp1 ok pm leakp1 predict different values port t3 In ﬁrst case ﬂow t3 greater FK second case FK However sentences predict input ﬂow sc greater output ﬂow abstracted leak mode However easy aggregations possible systems case possible solution forget combination modes abstraction This solution adopted example combination modes yields complex behavior In situations structural abstraction MI model forgotten combination behaviors corresponding model abstract diagnosis problem However viewed structural abstraction simplifying assumption forgotten combination modes occur This taken account diagnostic reasoning consider cases simplifying assumption holds abstract diagnosis problem simplifying assumption hold detailed diagnosis problem The union solutions cases solution original diagnosis problem 35 Related work Formalizations structural abstraction proposed Struss 19 Mozetic 14 recently Autio Reiter 1 Genesereth 10 probably ﬁrst advocate use structural abstraction way reduce computational cost modelbased diagnosis recognize loss information lead undiagnosability abstract representation 164 L Chittaro R Ranon Artiﬁcial Intelligence 155 2004 147182 In 14 structural abstraction addressed follows The representation constituted mapping m state normal faulty corresponding inputoutput observations4 m x y x state normal state y tuple inputoutput observations The reﬁnementabstraction operators allow start mapping m representing derive abstract mapping mcid27 representing To relate representations needs function h maps states m states mcid27 inputoutput values m mcid27 That hxcid27 x maps state x m state xcid27 mcid27 vice versa function hycid27 y maps inputoutput values y m inputoutput values ycid27 mcid27 vice versa When composed components c1 cn representation deﬁned composition mappings following way mx y c1x1 z1 cnxn zn c1 cn mappings deﬁne relation states components inputoutput observations One aggregate components c1 ck representation supercomponent c obtain following simpler representation mcid27xcid27 ycid27 cxc zc ck1xk1 zk1 cnxn zn By repeated applications abstraction operators obtain multilevel hierarchy representations different level To ensure correctness diagnostic reasoning guaranteed diagnoses impossible abstract level impossible detailed level This requirement formulated Mozetic terms global consistency condition satisﬁed different levels given adjacent levels hierarchy m detailed mcid27 abstract consistency condition expressed cid8 cid9 x ymx y 1 hxcid27 xcid27 ycid27 mcid27xcid27 ycid27 hxcid27 x hycid27 y 1 x xcid27 4 guarantees 14 detailed discussion given detailed mapping m state x abstraction xcid27 mapped inputoutput values y corresponding abstract ycid27 x maps y state x possible inputoutputs y abstractions xcid27 ycid27 x y respectively xcid27 map ycid27 4 We repeat original notation 14 Note letters m c different meanings adopted rest paper L Chittaro R Ranon Artiﬁcial Intelligence 155 2004 147182 165 Our deﬁnition structural abstraction shown Theorem 4 satisﬁes consistency condition Our deﬁnition slightly stronger sense detailed representation abstracted Mozetics deﬁnition allows incompleteness abstraction process faulty modes abstracted However discussed previous section introduce possibility simplifying assumptions As consequence consistency condition approach needs checked derived abstract level enforced abstraction process interpretation mapping aggregation satisfy Deﬁnition 5 In words deﬁnition clearly states rules aggregation follow order guarantee consistency condition Mozetics formalization consistency condition veriﬁed globally level In 19 structural abstraction viewed possible model relations called reﬁnement Reﬁnement deﬁnes structural abstraction diagnosis problems follows Suppose formula okc represents correct behavioral mode supercomponent sc formulae okc1 okck represent correct behavioral modes subcomponents c1 ck respectively Then oksc theory describing supercomponents behavior structural abstraction okc1 okck theories describing subcomponents behavior okc1 okck oksc expresses assumption If parts work correctly entire This formalization deal components multiple behavioral modes applicable diagnosis problems Moreover formalization characterizes behavioral descriptions supercomponent dealing representational changes structure brought structural abstraction Our formalization seen extension proposed Struss represents normal behavior components requirement abstraction mapping oksc π cid4 okci ci AGGR deﬁnition structural abstraction given Struss formalized semantic theory abstraction In approach proposed 1 hierarchical representation composed multiple descriptions different level structural component hierarchy represented tree nodes corresponding components level More precisely leaves components belonging detailed description interior nodes abstract components obtained successive aggregations starting primitive components The component hierarchy represents structural abstractions performed order build hierarchical representation Autio Reiter 1 consider components multiple behavioral modes diagnostic theories behavioral description consists correct behavior components 166 L Chittaro R Ranon Artiﬁcial Intelligence 155 2004 147182 Fig 3 Layout circuit inverters A SDcid27 COMPScid27 deﬁned structural abstraction SD COMPS component c COMPScid27 exists SDc COMPSc components components COMPS subsystems properly connected form compositional description SD COMPS It required structural abstraction set subcomponents c1 cm supercomponent c satisfy following assumptions supercomponent c abnormal subcomponents c1 cm abnormal okc okc1 okcm supercomponent normal subcomponents normal okc okc1 okcm These assumptions referred Autio Reiter abnormality axioms The ﬁrst abnormality axiom equivalent deﬁnition Struss discussed The second abnormality axiom poses problems situations fault masking fault compensation For example consider wellknown logic circuit shown Fig 3 composed inverters I1 I2 Suppose measurements report A 1 B 1 C 1 indicating inverters faulty stuck 1 We aggregate inverters single component I input A output C shown ﬁgure By looking I consider normal associated observations symptoms happens faults inverters I1 I2 mask By applying second abnormality axiom conclude I1 I2 normal true Thus fault masking occurs second abnormality axiom result wrong conclusions We critique second abnormality axiom commonsense point view It says works correctly parts expert use assumption focus reasoning ﬁrst evident faults remove consider subtle faults Finally Autio Reiter prove structural abstraction formalization sound sense diagnosis D involving supercomponent c corresponding diagnosis c substituted subcomponents They prove structural abstraction complete sense possibility ruling valid diagnoses reasoning abstract levels shown circuit example This limitation reasoning means exclude impossible diagnoses reasoning abstract level order ﬁnd possible diagnoses reason detailed representation available L Chittaro R Ranon Artiﬁcial Intelligence 155 2004 147182 167 4 Reasoning structural abstraction In section examine problem diagnostic reasoning structural abstraction First consider wellknown Mozetics approach 14 hierarchical diagnosis apply multilevel hierarchies structural abstractions Then analyze efﬁciency Mozetics approach good expect In general originates fact hierarchical representation regardless currently available observations Finally propose novel approaches case structural abstraction overcome problem obtained improvements experimental evaluation performed cases 41 A formalization Mozetics algorithm multilevel hierarchies structural abstractions In following provide procedural formulation Mozetics approach consistencybased diagnosis problems clearly separating main activities performed abstraction observations fault diagnosis Our formalization Mozetics algorithm called Hierarchical Diagnosis HD remaining paper The key idea HD apply principle plain onelevel diagnostic strategy multilevel hierarchical representation The strategy applied level time starting abstract possible level proceeding lower ones diagnoses level reduce number possible diagnoses lower levels In formalization input given HD multilevel hierarchy q diagnosis problems Di SDi OBSi COMPSi 0 q 1 For simplicity input observa tions given detailed level5 We assume functions Abstract Detailed depend abstractions employed build multilevel hierarchy available Abstract OBSj OBSj 1 j 0 q 2 corresponds Mozetics abstract predicate mapping observations level j observations level j 1 Detailed Cj 1 Cj j 0 q 2 corresponds Mozetics detailed predicate mapping candidate level j 1 reﬁnements level j We formalize HD Fig 4 dividing separate procedures The ﬁrst AbstractObservations associates available observations proper abstract levels hierarchical representation Then second TopDown diagnosis performs diagnosis 5 Giving observations level hierarchy straightforward need slightly modify AbstractObservations procedure Fig 4 mapping observations performed upwards downwards 168 L Chittaro R Ranon Artiﬁcial Intelligence 155 2004 147182 Procedure AbstractObservations l 0 q number levels hierarchical representation WHILE l q 1 OBSl cid20 DO OBSl1 AbstractOBSl l l 1 ENDWHILE IF OBSl THEN CLO l 1 Procedure TopDownDiagnosis l CLO Candl candidates level l WHILE l cid1 0 DO Diagl VerifyDl Candl CandNAl candidates level l abstraction IF l CLO THEN Diagl Diagl VerifyDl CandNAl IF l 0 THEN Candl1 DetailedDiagl l l 1 ENDWHILE HIERARCHICAL DIAGNOSIS AbstractObservations TopdownDiagnosis Fig 4 The HD algorithm Mozetics algorithm multilevel hierarchies consistencybased diagnosis problems Statements comments executed structural abstractions simplifying assumptions In particular AbstractObservations takes input initially available observations OBS0 refer level 0 hierarchical representation applying Abstract function determines available observations level 1 The function repeatedly applied derive observations levels level available observations reached levels considered The number Coarsest Level Observations hereinafter CLO stored variable CLO Levels CLO 0 considered procedure Topdown Diagnosis following way First diagnoses consistent observations current level determined function Verify corresponding verify predicate Mozetics original formulation Verify takes diagnosis problem Dl current level set Candl contains possible diagnoses current level level CLO candidates considered returns elements Candl diagnoses C Candl SDl OBSl C consistent6 After Verify function applied Diagl stores diagnoses current level 6 It noted assumption implementation function exploit generateandtest method GDElike reasoner 79 modelbased diagnosis techniques L Chittaro R Ranon Artiﬁcial Intelligence 155 2004 147182 169 Second l greater zero current level detailed algorithm applies function Detailed obtained diagnoses order derive detailed versions level l 1 possible diagnoses level l 1 After level 0 considered TopDownDiagnosis procedure ends ﬁnal diagnoses variable Diag0 If candidates currently considered level abstraction previously considered abstract levels simplifying assumptions considered current level ﬁrst time In case execute statements provided comments Fig 4 way algorithm applies second time Verify procedure considering candidates abstraction stored variable CandNAl possible diagnoses All diagnoses detailed candidates level The correctness completeness algorithm rely consistency conditions discussed previous section Since structural abstraction satisﬁes apply HD multilevel hierarchy structural abstractions having check consistency condition By taking advantage smaller search space abstract levels cases HD able outperform diagnostic reasoning applied detailed level From theoretical point view speed achieved ideal case exponential 14 Experimental testing performed Mozetic reported medical example involving fourlevel qualitative representation heart speed factor 20 onelevel diagnosis Our experimental results HD conﬁrm similar improvements average case illustrated Section 44 42 Some remarks efﬁciency HD In section use examples efﬁciency HD depends chosen multilevel hierarchical representation actual observations given input Example 6 Using sixlevel hierarchical representation hcs illustrated Example 4 Fig 2 suppose following observation available ﬂow port t7 value different expected Using chosen multilevel representation observation abstracted level 1 t7 present level Hence end execution AbstractObservations procedure CLO 0 Since diagnosis started level 0 efﬁciency HD similar slightly worse extra reasoning activities AbstractObservations procedure direct diagnosis detailed representation Note different multilevel representation obtain better results HD Example 6 Consider alternative sixlevel representation hcs differs illustrated Fig 2 levels 1 2 level 1 sc2 obtained aggregating v2 p5 sc2 instead p3 v2 level 2 sc4 obtained 170 L Chittaro R Ranon Artiﬁcial Intelligence 155 2004 147182 aggregating p3 sc2 instead sc2 p5 In case observation Example 6 abstracted level 1 diagnosis start abstract problem CLO 1 Example 7 Using sixlevel hierarchical representation hcs illustrated Example 4 Fig 2 suppose following observations available ﬂow port closed Using chosen t6 0 valve v1 expected closed sv1 multilevel representation observation t6 abstracted level 1 observation sv1 abstracted level 5 Hence CLO equal 5 Unfortunately level observation sv1 allows exclude candidates v1 stuck open Then reasoning levels 4 3 2 1 allow exclude candidates At levels diagnostic reasoning consider lot candidates useful results hierarchical algorithm counterproductive terms efﬁciency More generally situations heavily limit effectiveness HD following algorithm use abstract levels potentially lot candidates excluded little effort observations available Example 6 shows given observations available abstract levels diagnosis performed In case diagnosing levels scarcely effective reducing candidate space counterproductive resulting loss efﬁciency Example 7 shows With structural abstraction component aggregated observations refer unavailable upper levels Therefore avoid mentioned situations build multilevel representation way relevant diagnostic information current observations kept possible available abstract levels diagnosability abstract levels preserved In principle implies set observable ports build different multilevel representation guarantee efﬁcient hierarchical reasoning However building new hierarchical representation hand possible diagnostic scenario viable approach multilevel representations hard build possibly readily available coming design Moreover general automatic methods building multilevel representations available heavily dependent particular domain 313 In position measurement sensors known change think building multilevel representation sensors position guide abstraction process choosing aggregations way abstract levels observation available However solution applicable ii sensors return measurements broken chosen hierarchical representation L Chittaro R Ranon Artiﬁcial Intelligence 155 2004 147182 171 effective anymore abstract levels sufﬁcient observations available In research aim building optimal multilevel hierarchy given set observations instead consider chosen multilevel hierarchical representation aim preserving diagnosability abstract levels situations given observations allow HD effective 43 Extensions Mozetics approach In following propose extensions HD tackle problems highlighted previous section More speciﬁcally extensions called REARRANGE presented Section 432 BOTTOMUP presented Section 433 The idea extensions tailor existing multilevel hierarchical representation order obtain efﬁcient diagnosis current observations purpose extension uses different strategy Our approach exploit speciﬁc domain knowledge limited particular domain Moreover extensions easily combined order sum respective advantages Both extensions exploit additional data structure called structural tree presented section 431 The structural tree We associate multilevel hierarchical representation built structural abstrac tions H data structure STH called structural tree In structural tree node represents component level H sons node correspond sub components In following given tree T use function rootT obvious meaning node n T function sonsn returns set sons Given multilevel hierarchical representation diagnostic problem H SDi OBSi COMPSi 0 q 1 structural tree STH built follows ﬁrst component c COMPS0 leaf c created aggregation AGGR COMPSi sc COMPSi1 c AGGR added node tree node sc created sonssc AGGR The root STH associated component represents rootSTH c COMPSq1 In general abstract level component representing In case derivation procedure outlined derive tree forest In remaining paper assume abstract level contains component However multilevel hierarchies true represented structural tree simply adding additional abstract level component representing having 172 L Chittaro R Ranon Artiﬁcial Intelligence 155 2004 147182 behavioral mode abstracts candidates original abstract level Obviously newly added level bring efﬁciency advantage Since node c STH component c COMPSi 1 q 1 associate theory SDc SDi observations OBSc OBSi OBSc possibly The ST multilevel hierarchical representation H derive new levels H aggregations employed H The following proposition deﬁnes conditions set nodes ST characterizes diagnosis problem considered Proposition 5 Given multilevel hierarchical representation H set S nodes belonging STH node set descendants ancestors included set descendants nodes set include leaves characterizes diagnosis problem considered COMPS S The resulting diagnosis problem easily built retrieving H nec essary behavioral descriptions observations deriving proper compositional description simple conjunction type predicates chosen components needed instances type predicates taken compositional descriptions diagnosis problems H Example 8 Consider multilevel hierarchical representation hcs shown Fig 2 Fig 5 shows structural tree The diagnosis problem components sc6 n1 sc3 sc2 p5 n2 p6 multilevel representation diagnosis problem hcs Fig 5 Structural tree hcs derived multilevel hierarchical representation Fig 2 L Chittaro R Ranon Artiﬁcial Intelligence 155 2004 147182 173 432 The REARRANGE extension Mozetics approach The extension presented section dynamically determines multilevel hierarchi cal representation suited diagnose speciﬁc situation described current obser vations The derived multilevel hierarchical representation built rearranging levels given hierarchical representation H reasoning corresponding STH available observations The idea improve HD able fully exploit hierarchical representation providing new tailored hierarchical representation consisting levels original hierarchical representation contain observations levels considered HD ii additional abstract levels present original hierarchy observations coarsest level considered HD We example additional levels built little effort Consider scenario presented Example 6 diagnosis started level 0 contains 11 components An hypothetical diagnosis problem let Better components sc6 n1 sc3 p3 v2 n2 p5 p6 abstract level 0 observations ﬂow t7 expected The search space Better smaller diagnosis problem level 0 4096 possible candidates Better 512 possible candidates HD start Better diagnosis problem available given hierarchical representation level observations level 0 We derive Better properly selecting nodes structural tree Fig 5 The structural tree highlights aggregations hierarchical representation regardless order performed One derive Better selecting set nodes structural tree represent ii observations present level HD starts iii abstract possible This starting set nodes corresponds HD starting level try substitute parent provided observation lost Each possible substitution derives new level requirements imposed Proposition 5 satisﬁed process searching abstract levels repeated We implemented strategy extension HD REARRANGE More speciﬁcally additional activity building new levels performed AbstractObservations TopDownDiagnosis procedures shown Fig 6 The added Rearrange procedure operates follows observation available level CLO calculated HD associated corresponding nodes STH obtaining OBSn sets possible new levels abstract CLO added levels H available observations deriving new multilevel hierarchical representation H cid27 These new levels built 1 considering components current level initially CLO assigned set NodesToCheck 174 L Chittaro R Ranon Artiﬁcial Intelligence 155 2004 147182 Procedure HIERARCHICALDIAGNOSIS AbstractObservations Rearrange Topdowndiagnosis Procedure Rearrange IF CLO g 1 THEN H cid27 levels H 0 CLO FOR node n STH referred OBSCLO OBSn va v OBSCLO port n NodesToCheck COMPSCLO WHILE NodesToCheck cid20 DO n ﬁrstNodesToCheck c fathern IF sonsc COMPSCLO CLO CLO 1 COMPSCLO COMPSCLO1 sonsc c ADD new level numbered CLO components COMPSCLO H cid27 NodesToCheck COMPSCLO ssonsc OBSs OBSc THEN cid12 ELSE NodesToCheck NodesToCheck sonsc ENDIF ENDWHILE ENDIF Fig 6 The REARRANGE extension HD 2 ﬁnding subset NodesToCheck contains sons node c STH observations associated sons exactly observations associated c substituting sons father lose observation 3 set components exist algorithm stops add H cid27 new level obtained current level substituting sons c c The newly added level diagnosis problem considered satisﬁes requirements Proposition 5 Since required observation lost substitution newly derived level contains exactly observations starting Then point 2 considering newly added level current After execution Rearrange procedure abstract level derived new level diagnosis started Note Abstract Observations able reach abstract Rearrange procedure reasoning process identical HD The computational cost Rearrange procedure polynomial number nodes structural tree newly generated level worst nodes level examined examination consists testing node H level L Chittaro R Ranon Artiﬁcial Intelligence 155 2004 147182 175 Table 2 Levels employed HD HD REARRANGE R Example 9 The columns indicate corresponding approach able exploit level topdown diagnosis Level Components 3 2 1 0 sc6 n1 sc3 p3 v2 p5 n2 p6 8 pm p1 n1 sc3 p3 v2 p5 n2 p6 9 pm p1 n1 p3 sc1 v2 p4 p5 n2 p6 10 pm p1 n1 p3 p2 v1 v2 p4 p5 n2 p6 11 Candidates 512 1024 2048 4096 HD yes R yes yes yes yes father observations associated father sons sons belong current level We reconsider previously illustrated examples RE ARRANGE extension behaves Example 9 Considering observations given hcs Example 6 ﬂow port t7 expected CLO original multilevel hierarchy level 0 The Rearrange procedure able derive ﬁrst level 1 components pm p1 n1 sc1 p3 v2 p4 p5 n2 p6 p2 v1 aggregated sc1 losing observations Then level 2 derived components pm p1 n1 sc3 p3 v2 p5 n2 p6 sc1 p4 aggregated sc3 losing observations Finally abstract level diagnosis start derived components sc6 n1 sc3 p3 v2 p5 n2 p6 pm p1 aggregated sc6 losing observations The number candidates associated candidates levels shown Table 2 Example 10 Considering observations given hcs Example 7 ﬂow port t6 0 valve v1 expected closed abstractions observations proceeds level 5 Rearrange procedure executed CLO abstract level hierarchy diagnostic reasoning proceeds exactly HD 433 The BOTTOMUP extension Mozetics approach In section propose different strategy uses available observations reduce complexity hierarchical diagnosis This second extension called BOTTOM UP tries exploit given level observations available detailed levels forgotten abstraction process The additional diagnostic information derived eliminate impossible diagnoses reducing computational cost reasoning detailed levels We example strategy works Consider scenario presented Example 7 diagnosis started HD level 5 The information available closed allows eliminate candidates levels 5 4 3 2 1 sv1 open However stuckO fault valve v1 easily detectable level 0 sv1 ﬂow input valve greater zero running diagnose procedure separately considers observed components p2 v1 Thus behavioral modes valve v1 exception stuckO removed behavioral description 176 L Chittaro R Ranon Artiﬁcial Intelligence 155 2004 147182 Moreover ok mode excluded v1 remove behavioral modes abstractions ok supercomponents In way exclude oksc1 oksc3 oksc5 oksc7 oksc8 As result reasoning starts level 5 know normal The BOTTOMUP strategy extends HD executing abstraction observa tions reasoning activity considers observed nodes ST removes behavioral representation associated node mode consistent associated observations Moreover additional reasoning activity performed ST fashion diagnostic conclusions reached subcomponents reused considering node particular mode m component c abstracts set partial candidates BM subcomponents c partial candidates BM previously removed remove m observations associated c isolation allow The BOTTOMUP extension HD illustrated Fig 7 The new activities performed Bottomup procedure 1 building list recorded variable NodesToCheck observed nodes structural tree ancestors nodes visited increasing level order node visited sons visited 1 node c list consider mode m behavioral description BDc try eliminate m following way ﬁrst check m actually abstraction previously eliminated partial candidates subcomponents c determine function Detailed Procedure HIERARCHICALDIAGNOSIS AbstractObservations Bottomup TopDownDiagnosis Procedure Bottomup IF CLO cid20 0 THEN NodesToCheck FOR node n STH referred OBS0 NodesToCheck NodesToCheck n ancestorsn order NodesToCheck increasing level WHILE NodesToCheck cid20 DO n ﬁrstNodesToCheck FOR mode m n IF Detailedmn OBSn cid20 VerifyBDn OBSn n mn THEN remove m BDn remove n NodesToCheck ENDWHILE ENDIF Fig 7 The BOTTOMUP extension Mozetics algorithm L Chittaro R Ranon Artiﬁcial Intelligence 155 2004 147182 177 deﬁned previously partial candidates abstracted m result set previous reasoning sons c eliminated candidates remove m behavioral description c Detailedmc function Verify deﬁned previously check consistency candidate mc observations c OBSc behavioral description c BDc If Verify return partial candidate mc mode m consistent observations removed behavioral description c The computational cost Bottomup procedure characterized follows At worst nodes ST considered For node solve diagnosis problem component requires verify small number modes requires propagation values Note modes supercomponent require veriﬁcation possible reﬁnements excluded reasoning subcomponents However worst case scenario computational complexity Bottomup procedure characterized sum costs required diagnose node ST isolation We reconsider previously illustrated examples BOTTOMUP extension behaves Example 11 Considering observations given hcs Example 6 ﬂow port t7 expected CLO original multilevel hierarchy level 0 Since abstract level observations level 0 Bottomup procedure executed reasoning proceeds exactly HD Example 12 Considering observations given hcs Example 7 ﬂow port t6 0 valve v1 expected closed level 5 CLO The Bottom procedure considers following nodes increasing level order p2 v1 sc1 sc3 sc5 sc7 sc8 Diagnosing p2 allow remove behavioral modes diagnosing v1 allows remove ok stuckC behavioral modes leak possible know output v1 Reasoning proceeds sc1 Since ok stuckC modes abstract situations son v1 respectively ok stuckC remove modes sc1 closed Then diagnosing sc1 remaining modes available observation sv1 allow remove The levels HD BOTTOMUP Table 3 Levels corresponding number candidates employed HD BOTTOMUP Example 12 Level Number candidates HD Number candidates BOTTOMUP 5 4 3 2 1 0 6 16 64 256 1024 4096 5 8 32 64 256 1024 178 L Chittaro R Ranon Artiﬁcial Intelligence 155 2004 147182 Procedure HIERARCHICALDIAGNOSIS AbstractObservations Rearrange Bottomup Topdowndiagnosis Fig 8 The COMBINED extension Mozetics algorithm extension associated number components considered shown Table 3 The algorithms exploit levels BOTTOMUP able reduce number candidates considered level 434 Combining strategies The proposed extensions HD combined following way ﬁrst tailored structural representation built Rearrange procedure Bottomup procedure performed The procedure implements strategies COMBINED shown Fig 8 By running procedure previously analyzed diagnostic examples obtains advantages described previous sections 44 Experimental evaluation In section experimental activity carried evaluate proposed algorithms We compared HD extended versions REARRANGE BOTTOMUP COMBINED All algorithms implemented SWI Prolog 21 run PowerPC G3 400 Mhz Apple iMac DV LinuxPPC 2000 operating The Verify procedure algorithms implemented generateandtest algorithm procedure considers possible candidate veriﬁes consistency description observations Obviously efﬁcient implementation Verify function advantage giving worst case scenario exact size considered portion search space diagnostic reasoning strategy tested The TopDown Diagnosis AbstractObservations procedures algorithm The experimental comparison algorithms performed diagnosis problems different sizes We considered hydraulic systems composed volumetric pumps pipes valves nway nodes sources sinks The considered systems differed layout number components ports More precisely simplest hcs 11 components 13 ports complex Heavy Fuel Oil Transfer System HFOTS 27 components 25 ports modern container ship The layout functioning HFOTS described 3 For hydraulic considered possible sets observations Each set composed minimum observation maximum Nobs observations Nobs trunc04 o L Chittaro R Ranon Artiﬁcial Intelligence 155 2004 147182 179 o number ports considered systems 10 ports set composed minimum maximum observations The justiﬁcation choice twofold ﬁrst observations problem difﬁcult typical case needs use abstraction second observations realworld systems sensors costly andor unreliable Each test generated ﬁrst randomly choosing number m observations Nobs assigning random value m observables randomly selected available ones Each generated test ﬁrst checked order ensure solution diagnosed algorithms For algorithm execution recorded total time spent measured seconds total number candidates considered veriﬁcation Fig 9 illustrates average time obtained considering 1000 diagnostic scenarios considered hydraulic All extensions perform better HD particular REARRANGE signiﬁcantly efﬁcient size considered increases This fact number components increases REARRANGE possibilities deriving additional levels diagnosis BOTTOMUP obtains small improvements respect HD hypothesized improvements obtained COMBINED better REARRANGE BOTTOMUP As algorithm average time high small increases number components This fact adopted generate test diagnostic strategy We consider experimentation complex considered systems HFOTS Our detailed representation HFOTS composed pump 6 valves 10 pipes 1 threeway node 2 fourway nodes 3 ﬁveway nodes 2985984 possible candidates Moreover 43 ports number observations ranged 1 10 We built hierarchy structural Fig 9 Comparison hydraulic systems different number components 180 L Chittaro R Ranon Artiﬁcial Intelligence 155 2004 147182 Table 4 Number candidates veriﬁed HFOTS considering 1000 diagnostic scenarios Candidates Average Maximum Minimum HD 238878 2985984 240 REARRANGE BOTTOMUP COMBINED 117529 947327 240 172372 2985984 180 89234 732183 180 Table 5 Time seconds spent diagnose HFOTS considering 1000 diagnostic scenarios Time Average Maximum Minimum HD 1274 12742 213 REARRANGE BOTTOMUP COMBINED 651 3264 215 1073 9376 174 496 2823 177 abstractions HFOTS organized 15 levels abstract level contains component representing HFOTS Table 4 lists average maximum minimum number candidates veriﬁed algorithm Considering average number candidates value obtained extensions 49 REARRANGE 72 BOTTOMUP 37 COMBINED value obtained HD The values maximum number candidates explained follows In cases HD veriﬁes candidates level 0 illustrated previously happens possible abstract available observations upper levels For reason BOTTOMUP exhibits worst case identical HD The value REARRANGE shows extension reasons level able exploit hierarchical reasoning considered scenarios The value COMBINED shows combining extensions able reduce maximum number veriﬁed candidates considered scenarios The minimum values candidates considered refer situations hierarchy fully exploited HD REARRANGE obtain result BOTTOMUP COMBINED able case slightly reduce number candidates veriﬁed Table 5 takes consideration time spent algorithm considered tests HFOTS The average values extensions perform better HD HFOTS In particular values obtained extensions respectively 52 REARRANGE 77 BOTTOMUP 39 COMBINED value obtained HD Experimental evaluation HFOTS showed number observations increases performance gains REARRANGE HD decrease BOTTOMUP increase This explained follows As number observations increases likely observations abstracted coarser levels cases performance REARRANGE slightly better HD On hand likely BOTTOMUP able exclude candidates bottomup reasoning signiﬁcantly improve performance HD L Chittaro R Ranon Artiﬁcial Intelligence 155 2004 147182 181 5 Conclusions This paper considered structural abstraction context modelbased diagnosis presented formalization proposed automated approach problem obtaining effective structural abstractions abstractions effective reducing computational effort required situation hand The effectiveness proposed algorithms shown experimental comparison cited literature Mozetics algorithm 14 In following outline limitations experimental activity directions improvements First performed experimental evaluation needs extended considering domains electronics especially considering realworld systems Moreover experimental evaluation needs scaled systems hundreds thousands components In general reason suspect general advantages hierarchical reasoning introduced extensions scale considerably size Nevertheless experimental activity needed better evaluate advantages proposed techniques realworld situations Second experimental evaluation performed generateandtest approach diagnosis single level caused generally high running times Although choice taken exact size considered portion search space interesting consider efﬁcient approaches diagnosis GDE approach This allow precisely establish performance gains obtained realworld diagnostic applications Finally noted tailoring hierarchical representation performed proposed algorithms optimal criteria tailoring hierarchical representation tried In current formalization REARRANGE extension tries derive abstract levels losing available observations Another possible criteria allow losing observations exchange abstract levels The choice observations abstract levels taken considering discriminating power observation described 9 References 1 K Autio R Reiter Structural abstraction modelbased diagnosis Proceedings Thirteenth European Conference Artiﬁcial Intelligence ECAI98 Brighton UK Wiley New York 1998 pp 269 273 2 L Chittaro R Ranon Hierarchical diagnosis guided observations Proceedings IJCAI2001 Seattle WA Morgan Kaufmann San Mateo CA 2001 pp 573578 3 L Chittaro R Ranon A Soldati Introducing deviations multiple abstraction levels functional diagnosis ﬂuid transfer systems Artiﬁcial Intelligence Engineering 12 1998 355373 4 L Console P Torasso A spectrum logical deﬁnitions modelbased diagnosis WHL Console J Kleer Eds Readings ModelBased Diagnosis Morgan Kaufmann San Mateo CA 1992 pp 7887 5 R Davis Diagnostic reasoning based structure behavior Artiﬁcial Intelligence 24 1984 347410 6 R Davis W Hamscher Modelbased reasoning troubleshooting WHL Console J Kleer Eds Readings ModelBased Diagnosis Morgan Kaufmann San Mateo CA 1992 pp 324 182 L Chittaro R Ranon Artiﬁcial Intelligence 155 2004 147182 7 J Kleer Diagnosis behavioral modes Proceedings IJCAI89 Detroit MI Morgan Kaufmann San Mateo CA 1989 pp 104109 8 J Kleer AK Mackworth R Reiter Characterizing diagnoses systems Artiﬁcial Intelligence 56 1992 197222 9 J Kleer BC Williams Diagnosing multiple faults Artiﬁcial Intelligence 32 1987 97130 10 M Genesereth The use design descriptions automated diagnosis Artiﬁcial Intelligence 24 1984 411436 11 F Giunchiglia T Walsh A theory abstraction Artiﬁcial Intelligence 57 23 1992 323389 12 WC Hamscher Modeling digital circuits troubleshooting Artiﬁcial Intelligence 51 1991 223271 13 J Mauss M Sachenbacher Conﬂictdriven diagnosis relational aggregations Proceedings Tenth International Workshop Principles Diagnosis DX99 Loch Awe Scotland 1999 pp 174183 14 I Mozetic Hierarchical diagnosis WHL Console J Kleer Eds Readings ModelBased Diagnosis Morgan Kaufmann San Mateo CA 1992 pp 354372 15 PP Nayak AY Levy A semantic theory abstractions Proceedings IJCAI95 Montreal QB Morgan Kaufmann San Mateo CA 1995 pp 196203 16 CJ Price NS Taylor Multiple fault diagnosis fmea Proceedings AAAI97 Providence RI AAAI Press 1997 pp 10521057 17 R Ranon The closure properties functional ﬂowbased approaches relevance diagnosis Proceedings Thirteenth European Conference Artiﬁcial Intelligence ECAI98 Brighton UK Wiley New York 1998 pp 289290 18 R Reiter A theory diagnosis ﬁrst principles WHL Console J Kleer Eds Readings ModelBased Diagnosis Morgan Kaufmann San Mateo CA 1992 pp 2948 19 P Struss Whats sd theory diagnosis WHL Console J Kleer Eds Readings ModelBased Diagnosis Morgan Kaufmann San Mateo CA 1992 pp 419449 20 M Stumptner F Wotawa Guesteditorial special issue industrial applications modelbased reasoning AI Comm 13 2 21 Swi prolog University Amsterdam httpwwwswiprologorg 22 L TravéMassuyés T Escobet R Milne Modelbased diagnosability sensor placement application frame 6 gas turbine subsystem Proceedings IJCAI2001 Seattle WA Morgan Kaufmann San Mateo CA 2001 pp 551556