Artificial Intelligence 87 1996 145I 86 Artificial Intelligence Planning second principles Jana Koehler Depariment Computer Science Albert Ludwigs University Am Flughafen 17 D791 10 Freiburg Germany Received June 1994 revised June 1995 Abstract Planning second principles reusing modifying plans way improving efficiency planning systems In paper study general framework deductive planning develop logical formalization planning second principles relies systematic decomposition planning process Deductive inference processes clearly defined semantics formalize subtasks second principles planner address Plan modification comprises matching adaptation tasks based deductive approach yielding provably correct modified plans Description logics introduced query languages plan libraries leads novel efficient solution indexing problem casebased reasoning Apart sequential plans approach enables planner reuse modify complex plans containing control structures like conditionals loops 1 Introduction actions tries construct specified preconditions A Planning principles generates plans scratch The planner set available respect invariable nature planning process time If planner planning problem words unable processes inspects plan desired goal limitation principles planners receives exactly In drawn previous planning planning operations benefit experience repeat exactly achieves Approaches planning second principles try overcome modifying generated plans From limitation scratch reusing previously planning Email koehlerinformatikunifreiburgde 00043702961500 Copyright 1996 Elsevier Science BV All rights reserved SSDlOOO4370295001131 complexity case 44 easier reasonable theory point view WC hope prove efficiency gains worst reuse plans comprises computationally subtasks plan generation But reuse existing plans practical applications generating new The current state art comprises variety approaches tackle problems planning cognitive point view Ccf 1341 summary framework STRIPSbased In deductive cl 2 I 2854 framework present formal approach frame retrieval candidate plans librari problem second principles makes commitments application domains We formalize work including plan modication reuse process formalisms logical particular planning approaches unique planning Plan modification based deductive modified plans It comprises planning problem task rettirzg reused plan plan modification discuss plans order determine inference processes yield provably correct subtasks First task matching old new new requirements As new issue reuse refitting control structures occurring differences Secondly accommodate similarities like case analyses loops introduce qualitatively new problems library propose hybrid knowledge As plan planning logic description languages abstraction linking query arc introduced use leads welldefined oretical practical properties develop efficient complete 44 1 guaranteed problem logic In approach description large knowledge bases case retrieval update procedures In particular description representation formalism logics libraries Their possess logics enable matching problem solve planning approximation algorithms retrieve plans library Finally formal framework allows prove important properties ness completeness provides developed integrated PHI planner implemented underlying foundation S like correct inference procedures Besides approach plan reuse MRL The paper organized follows We begin Section 2 summary second principles fourphase model foundation MRL The section contains short introduction logical formalisms short overview PHI planner Section 3 deductive planning planning The introduces model supports temporal view task specific view second principles planning theoretical basis process A logical MRL described sections Sections 4 6 subsequent inference procedures working plan library Section 5 devoted deductive Section 7 review related work propose systematic categorization principles design decisions underlying main properties MRL light categorization second principles planners We summarize phase provides presented Finally plan modification formalization approach MKL stands modification reuse 111 logic J KoehlerAriijicial Intelligence 87 1996 145186 147 2 Formal preliminaries Deductive planning longstanding variant artificial origins QA3 formal plan specifications specified condition cf 37 p 141 Usually form 181 To generate plans deductively performed construct proves existence state requires constructively constructive intelligence planning proofs meet true condition prove plan specifications plan vs0 Ja 32 Qsoazl SO denotes planvariable initial state argument input parameter z_ representing plan term constructed 371 Two properties deductive planners particularly interesting studying plan second principles First plans provably correct Once provided particular application domain actions leads sound plan solves ning correct axiomatization performed work Preserving ensure planning problem hand property plan modification deductive planner generates plans reordering adding actions real challengehow guaranteed domain removing Secondly deductive planning closely like ifthenelse loops While origins Plans viewed programs consequently structures generate complex plans deductive planning trol structures plans The retrieval modification loops challenge going address related program right synthesis contain control rare classical planners systems able generate plans containing conditionals A deductive planning systemlike complexity means controlling search space enormous For deductive planner way plans constructed correctly guess appropriate mechanisms The difficulty Many sacrifice soundness ignoring complexity inference task led temporary decide classical planning search controlling instantiations inferences automatically This planvariables certain rules apply abandonment classical planners developed underlying systemis faced difficult problem logic involves enabling provide logical deductive formulae techniques order reduce search frame ramification problems solution allow efficient Recently deductive planning logics devised 8471 On hand new ways controlling planning ative representation automatically giving completeness play important seen renaissance On hand planning frame problem carefully deductive planner deductive declar plans implies tactics tactics developed inspired tactical theorem proving tractability As demonstrate plan modification order purchase role implementing 112446 Tactics support 853 The use tactics constructed proving plan specification control knowledge inference In practice guide use tllustrate planning The examples going perform plan generation plan taken PHI planner PHI designed recognition software systems It provides logicbased kernel develop intelligent help systems supporting users PHI UNIX mail domain objects software A prototype like messuges mailboxes manipulated like read delete save second principles language environments tasks command application actions logical The uses socalled language formalism The logic LLP reflects specific requirements planning lying planning language environments ementary like loops conditionals complex user actions level logical formalism For example statements application 8 J command basic actions occur plans el control structures language Furthermore available 34 defined operators allows LLP 21 The logicul luttguageftir pluntting LLP temporal 49 tempo logic intervalbased semantics combines LLP modal logic programs tures czo logic temporal formalisms logics proposed appropriate programs plans 15401 Plans decomposed periods intervals subplans actions The framework terized properties time 351 Intervalbased behavior smaller successively intervals provide convenient charac initial final values variables intervals timing details State transitions introducing quantitative relating fea The basis LLP sorted firstorder locul variables usual logics 0 tzexr 0 following shortly review correspond language equality It distinguishes value vary state state global variables programming modal operators In logical variables Local variables borrowed program variables LLP provides 0 binary modal operator main properties LLP introduced chop 81 2 I I Syntax semantics A state T pair CT CT CT g valuation assigning domain elements local variables gf state CT Note command values local variables change state state Function predicate symbols nonempty intervals The length interval w defined vary time An interval w W denotes set rigid finite infinite interpretation sequence states executed indicates crorrl Jwl wy n w infinite 12 uoo1 U Observe 11 0 iff w u0 sittgletotz containing state Intuitively number states interval contains length interval represent number possible state transitions The immediate accessibility intervals defined subinterval relationship R J KoehlerArtijicial Intelligence 87 1996 145186 149 WRW iff waq wTI The relation R serial length zero successor R denotes composition defined partial function set intervals W VW Zw w R w hold interval reflexive closure R The transitive wow W aa w infinite rn_uul w cr_lc w UnVn J Global variables interpreted mapping domain elements valua interval w particular tion function The value local variable given value modalfree formulae propositional w kz ext takes command constants iff It initial state interval The satisfiability defined classical firstorder false true respectively The specialpurpose term argument denotes 0 For modal operators define interpretation relation b ex logic F T denote predicate executed action w 04 iff w I Q w E W w R w wO iff wkIforsomewEWwithwRw wCI iff wQforallwEWwithwRw wII iff therearewwEW w finite w 4 w bI withwwow For example OF holds interval w iff w length 0 singleton More length w iff w n states iff w generally n I A formula 4 A OF A OOF 0 Cl holds interval 0123 0F holds 4 holds OCl holds subinterval subinterval aeat 1 CTU 19 holds subintervals g n 2 212 Plans plan specijkations LLP Certain types formulae LLP viewed plans plan specifications Definition 1 Let t command formulae Plans formulae form 2 term E atomic formula 5 I consistent plan ext e tb whiledobod Currently PHI uses extended class plan formulae comprising abstractions formulae plans examples execute action For purpose paper restrict nonlinear plans contain temporal class plan The conditional The operator F C 14 stands formula defined following axiom 3 E 41 A 7s 4 I 1 s CJ od ifcthencwhilecdood The atomic actions available mail They axiomatized Changes state caused executing local variables represent For example mailbox oxJ axiomatization reads planner elementary commands UNIX logics change values action reflected programming like assignment statements mailboxes domain consideration deletecommand deletes message x Jr openag mbox T A delereag msg x mbox F A exdeletex mbox 3 0 deleteJlag msg x mbox T The state mailbox requires represented help jugs As precondition open_jag yields mailbox mOox open truur T message x deleted value false deletecommand deleteflag value yields action sets deleteflag message x mailbox mbou value frrde state In general PHI uses general proof process The axiom instantiated secondorder schemata effects frame conditions leads representational solution frame problem action axiom schemata axiom schemata As effect necessary 8 1 F Definition 2 Plan specitications universally quantilied LLP formulae form Plan A precorzditiotzs t 0 goal carried initial state preconditions Plan state achieved satisfying goal Plan plan formula Plan meets specification generated constructively iff Plan prmditiot true proving Ogoal metalogical variable hold standing plan specification Plan specification formulae obey syntactic described modal operator free tirstorder tion disjunction limited described formulae containing conjunction limited form implication form implication restrictions Preconditions formula containing negation conjunc universal quantification Goals like 0 q5 A V nested operators universal quantification To complete recursive defnition extra semantic condition IS necessary amounts smallest tixpoint construction IS2 I example Since application formula r restricted valid plan formula containing structure operational view definition sufficient A Constants begin capital letters whtle variables arc written lower case 5 The reader note difference hooletrn constants T F assigned values local variables rritiontr constants T F formulae OOF example J KoehlerArtijkial Intelligence 87 1996 145186 151 Let consider specifications example plans paper The specification planning problem message m mailbox mybox As preconditions assume mybox opened message m deleted 1 specifies read delete mailbox open_jGg mybox T A deleteag msg m mybox F 0 readagmsgmmybox T A 0 delete_agmsg m mybox T 1 SPI specifies temporary goals help nested operators achieved point necessarily message simple sequence containing read deleted The plan Pl solving type delete actions end It requires specification goals Pl extypemmybox exdeletemmybox In second specification 2 goals specified 1 formulated conjunctive goal 2 Planp2 A delete_jlag msg x mbox F 0 readagmsgxmbox T A defete_Jagmsgx mbox T state mailbox As precondition know message deleted available plan P2 contain case analysis state message x read deleted closed open message x read know open closed Thus information mailbox mailbox mbox If mailbox If mailbox deleted open P2 openag mbox T ex emptyaction ex type x mbox ex delete x mbox ex open mbox The specification 3 specifies iterative plan reading messages sender goals contains mailbox mbox The specification preconditions Joe universally quantified formulae 3 Planp3 A open_jlagmbox T A Vx sender msg x mbox Joe delete_ag msg x mbox F f 0 Vx sender msg x mbox Joe readag msg x mbox T A delete_ag msg x mbox T The plan P3 solves specification contains loop length mailbox 2 I The LLP sequent ccr1culus All deductive inferences performed sequent calculus devel oped LLF Sequent calculi possess advantages making deductive planning efficient They support compositional proof guidance tactics allow 121 The calculus contains different kinds sequent natural problem decomposition rules rules standard S4 calculus example given 55 LLP specific rules rules handle instantiate planvariables modal operators chop planning example specific Definition 3 A sequent I d It valid iff models M B E 3 ordered pair I 3 finite sets formulae written B M k A A E r M In order derivation axioms prove formula sequent calculus theorem prover tree formula applying sequent rules ends tries set leaves formula follows Definition 4 A sequent sequent conclusion rule consists upper sequent conclusion A sequent rule correct iff premise premise implies LLP specific rules example chup_composition rule 41 I 42 2 41 42 1 2 chop_cowlpositinrl sometimed_to_rlext rule I joFd rud sotietittls_tolxt Definition 5 An axiom sequent form 1 A A d antecedent succedent contain common formula A general introduction sequent cnlculi rn lS5 1 J KoehlerArtijicial Intelligence 87 1996 145186 153 If sequent derivation formula terminate formulae set comprising axioms derivation stating validity subformula proof formula failed But tree contains axioms leaves subtree partial proof 22 Description logics identification A main problem planning second principles reusable plan This achieved matching given plan specification stored plan library As logical descriptions Therefore appropriate formula set plan specification seen plan specifications hope partial best match The main formalism idea LLP target formalism represent abstracted plan specifications As partial match exact match efficient matching source formalism target formalism plan specifications easily reduced complex shift source comparing algorithm formulae This approach uses concept description logics called representation terminological abstract knowledge Furthermore logics target formalism ideal introduce description retrieval problem efficient solution logics query languages plan libraries formalizing lead novel clussijkution task With description logics indexing problem casebased reasoning 22 I Syntax semantics inference logics comprise family logical languages different degrees In subset Description expressivity following define language restricted representation wellknown 21 It considered 501 CLASSIC services different computational complexity7 sufficient logics ACC expressivity plan specifications 9 KRZS abstracted description blocks The basic building concepts roles denote subsets objects application domain 27 binary relationships D connecting objects domain J_ denotes respectively The concept T denotes specify set Concepts properties defined object satisfy intensionally belong terms descriptions concept Definition 6 Let C D syntactical variables R role names The following concept descriptions concept descriptions formed R RI C n D conjunction C LJ D disjunction C negation 3RC existential RI o R2 role compositionrole role restriction chain 7 For good introduction description logics example 14 11 Besides construction help terminological axioms complex concepts new concept descriptions defined Definition terminological axiom 7 Let A concept D concept description A G D Primitive concepts concepts arc contained left sides termino considered terminology logical axioms They remain undefined basic terms concept descriptions built The formal model theoretic semantics description domain D interpretation objects role denotes set object pairs These sets called extensions concepts roles concept descriptions Concepts denote subset logics uses set objects Definition 8 An interpretation Z consists domain V extension mapping binary function concept A subset I A ID role R relation E R 2 The terminological necessary relationships relationships concept descriptions extensions deter Definition Y Let C set concept symbols R set role symbols I arbitrary set function C 2F R 2pXD E extension function iff following equations hold ET V l5Ll li fCfl D C nED EICu DI EC LJEr EC VECI El 3RC _r t 23 1 exists y 5 P xy t ER _Y E EC I R o R2 xy E 73 cxlsta t P sz F ER zy ERz The interpretation terminological axiom equation EA E D Definition nonempty 10 A concept extension E C 1 n c hatisfiablc denoted consistent iff J KoehlerArtijicial Intelligence 87 1996 145186 155 222 Subsumption classification The main inference procedure provided terminological systems subsumption determines concept description general Definition 11 Let 7 terminology C Cl D iff C C D holds models 1 C D concepts D subsumes C 7 The computation subsumption relationships Since intend formalize set concept descrip retrieval classification runs grounding called classication tions task interested polynomial rithm operators concept description Due 421 completeness admissible expressions ties Giving completeness detect existing algorithm subsumption order relations problematic complete efficient subsumption time depending inherent number concept intractability algo forming subsumption obtain algorithm confine concept descriptions subset desired proper incorrect behavior retrieval inability application lead Existing solutions library This lead undesirable overhead computational reuse best available plan result needless modification abstracted second principles planning growth plan Uncontrolled effort specifica library occur Identical incomplete subsumption algorithm tions added unable Consequently recognize library equivalence concept descriptions restricted socalled admissible concepts conjunctive normal form sound complete polynomialtime algorithm exists subsumption Definition 12 Let R composition primitive components concept atom Concept primitive roles role chain C terms form 3RC JR4 called primitive Definition 13 A consistent concept descriptions components concept description D admissible di di restricted disjunction iff D conjunction primitive steps unnecessary language subsumption Restricting normalization relevant terminology computation definition concepts restricted logic Primitive subsumption subsumption components The following algorithm primitive terminological admissible concept descriptions makes usual expansion In general case expressive descriptions form transformed start Defined concepts expanded normal axioms This step necessary admissible given In fact admissible normal form concept concepts define subset propositional terms treated atomic units rule set taken 171 defines sound complete computation admissible concepts runs polynomial time 3 A fourphase model second principles planning Reasoning second principles proceeds basic cycle problem inpt phases activation previous consider fourth final phase cycle updates memory second principles planner solutionsadaptation cf 481 Besides 1 Phi determinatiorl The current plan specification input plandetermination specification description represents retrieval process starts mapping LLP formula search key plan library phase Taking concept The plan library contains collection ofplan errfries extracted previously problem solution problems A plan entry provides comprehensive solved planning planning initial goal states plan generated solution extracted represented position index information problem describing information plan generation process Each plan entry possesses index concept description The position plan entry determined subsumption specification hierarchy Retrieval classifies current search key subsumption returns set reuse candidates Ranking heuristics applied best candidate hierarchy indices order determine attempts prove sufficient reused plan specification reused plan specification current plan specification formula S formula Sold If attempt current means old planning problem solve current planning problem This means If constructed A plan skeleton provides entry point current subplans achieving open achieve The plan skeleton keeps II Plan interpretation Plan interpretation logical consequence succeeds solving reused plan solves Snew directly modification attempt fails plan skeleton search space possible plans planning problem subgoals actions reused plan variables appropriately current plan specification It represents contain placeholders instantiated object parameters reusable plan determined necessary reused plan incomplete interpretation taken unable solution J KoehlerArtijicial Intelligence 87 1996 145186 157 PLAN GENERATOR plan specification plan t current Dlan soscification 1 PLAN LIBRARY I I LGGERPRETATION I1 reused sbification I woof attemm plan skeieton Fig 1 Architecture MRL III Plan refitting The phase completes plan skeleton interleaved planner plan refitting control structures plan skeleton process plan verification generative planning Similar work successively correct plan help generative reuses subplans process actions final plan During selects subgoal construct plan skeleton deleted added reordered IK Planlibrary update Planning second principles terminates planlibrary update current plan spec sources information new plan entry constructed ification extracted The plan entry library The modified plan available related plan generated modifying proof tree constructed existing plan information result plan refitting current search key serves index plan subsequent planning processes The fourphase model describes IIII necessary guished authors denote temporal view reuse process The phases generate plan reusing existing They distin retrieval matching adaptation phases cf 221 The fourth phase comprises formalization plan refitting tttodijicatiorr groups library provide phases phases basis maintenance perform similar phases I IV plan plan library The tasks Operations plan interpretation II III work plan specifications summarized Fig I shows architecture MRL The comprises modules implements phase second principles planning 31 Firtttmlizittg phi tttodijcfttiott The input plan modification current plan specification formula S form Plan A pwcw 0 qtulu plan specification formula Sold reuse candidate form stands plan formula want determine reusing The planvariable Plan existing plan plan variable Planld Plan modification answer question POld meets s nelS formula PJ available correct instantiation PII A prenrw t 0 ROE true In case Pj reused meet new requirements sufficient conditions Instead directly proving plan specifications immediately validity formula refitted according Theorem 14 This means new plan specification theory Ax solving solving S As contains given domain sufficient domain constraints Since plan specifications Ax Sold pt S proving sufficient according Theorem 15 formula logical consequence old old planning problem plan POld set action axiom schemata contain formal descriptions initial goal states goals relations preconditions Theorem 15 Ax b SOId Sv f This means prove satisfied current initial state preconditions required old plan goals achieved old plan An example domain conant fhc mail domain formula Vx 1 cl_uzlhor F deleteug mg x ndbrx F 1 ic closed mailbox contain deleted messages J KoehlerArtifkial Intelligence 87 1996 145186 159 sufficient state specifications hold know currently required goals If relationships initial goal Potd 1s applicable m pre Pj achieves goals required The validity theorems gOa easily demonstrated sequent proof Ax Sold t ew We start initial sequent Ax Pold A pld 0 aId Pold A Penew 0 Ww instantiated reused plan formula Ap rules logical connectives A f sides sequent planvariables plying sequent leads following la Ax Poldpew lb Ax PoldPew wd9 0 go4 lc Ax Poldnew proof tasks Potd Ogd 0 gOld 0 w Sequent la common required Theorem Axprenew goa goal logical axiom antecedent lc formula Sequents lb succedent contain lead subproof 1 b lc valid plan Pj tasks 15 Of course sequents proved satisfied current plan specification initial tautology state But seldom hold sense trying prove The reader wonder makes sense prove relations validity Pj A prenew f particular cases goals possible principle We decided instead directly proving easier For preconditions preconditions 0 goalnew Both approaches subproofs formulae simple involving perform firstorder proof This allows use complete proof tactics run polynomial length formulae Directly proving split plan formula goV4 shown prenew This requires formulae frame axioms follow subplan application goals requires additional correct sequent subformulae complicated instantiated plan specification way subgoals P old current preconditions rules splitting plan proof tasks involving structure formula means syntactic time relative The reader note analogue syntactically different plan specifications plans represented terms usual deductive planning goal state specifications plan terms occur additional arguments Theorem 15 obtained In case planvariables 32 Formulizing library retrieval update In principle way plan modification A plan solving determined achieves inference procedures working plan library formalized problem initial state current planning current current goals finding candidate applicable proving conditions sufficient The sequent proof Appendix A 160 J KoehlerArticial Intelligence 87 1996 145186 goals But apart complexity problems encounter preconditions restrictive search process retrieve solutions A failed proof tell plans best candidate plan modification Research casebased reasoning proposes solve problem computing lo Partial matches computed designate conditions 34 p 201 A preindexing technique indices case cases identifies privileged case library Usually order retrieval matching problem indices restricted called partial matches labels useful set features vectors propositional tractable inferences organize cases atoms There disadvantages al I observed representation flattens indexing schemes restrict case library discrimination inference relation retrieval algorithm impossible prove preindexing partial matching As Anderson et retrieval indexing based fixed vocabulary hinders flexibility feature vectors Besides treelike structure usually represented cases simple network 131 Finally partial matches require relaxation clear semantics rarely given soundness involve relational To overcome description indexing interpreted easily investigated basic inference procedure algorithm Soundness guarantees search criterion Completeness matching graph structures formulae 9 concept descriptions limitations developed novel solution logics As main advantage description language sets atoms Simple logics offer feature vectors functional labeled logics indices compared formal retrieved candi matching candidates algorithm decides ef available As advantage case libraries indexed instead problem based description mom expressive representation replaced logical scriptions As shown directed multigraphs Subsumption formalizes The formal properties matcher properties subsumption date meets ensures retrieval set The complexity subsumption ficient retrieval algorithm general tree structure problem resolved set features Finally logical identified formulae help encoding representation scheme w The encoding concept descriptions The formal basis w model theoretic semantics logics In firstorder step LLP plan specification formula method described formula firstorder replaced abstracted formuia equivalently 33 The resulting formula lattice structure provided subsumption defined mapping LLP formulae preindexing advance cases plan specification indexing vocabulary translated firstorder computed proving hierarchy Instead scheme 291 Definition 16 Given abstraction 4 iff firstorder formulae CJ abs 4 formula abs 4 See 34 1 summary state art m casebased reasoning See 44 1 complexity theoretic analysis matching problem J KoehlerArtijicial Intelligence 87 1996 145186 161 holds models M For example proposition A abstraction A A B The result abstraction formula sublanguage firstorder logic translated concept description preserving equivalence Here exploit fact description logics seen sublanguages firstorder logic lo A desirable property encoding schemes socalled monotonicity property Definition 17 Given plan specification formulae Sold S respective encoding concepts w Sold w S encoding scheme w satisfies monotonicity property iff This means plan specification S new logical consequence plan specification Id domain axiomatization Ax o S subsume o Id In words encoding scheme preserves existing subset relationship set models plan specification formulae subset relationship extensions concept descriptions The monotonicity property ensures existing solutions plan library complete subsumption algorithm The abstraction formulae encoding guarantees exact match computed subsumption algorithm corresponds partial match original formulae To compute abstraction define set abstraction rules form C abs b replace formula q5 weaker formula ubs 4 Examples abstraction rules A A B A Vx p x 3x p x An analysis abstraction rules allows draw conclusions degree partial matches Furthermore different sets abstraction rules different degrees partial matches performed retrieval algorithm Finally encoding scheme provides formalization reasoning approximation The retrieval algorithm approximates relationship logical consequence plan specifications computing subsumption encoding concept scriptions Fig 2 summarizes formal framework It bases planning second principles deductive inference processes Plan modification formalized proving sufficient conditions preconditions goals underlying planning logic A formal ization inference procedures working plan library obtained computing approximation description logic The idea exploiting relationships preconditions goals approaches Hanks Weld 2 1 write retrieval takes problems initial goal conditions finds plan library plan worked circumstances similar posed current problem The basic approach described Hammond 191 past plan memory satisfies important goals possible Plan modification formalized Kambhampati 162 J KoelderArtficiul lrtellience 87 1996 145186 ______ I Hendler speccatintzs Fig_ 2 The logxl frarwwork liar planning second principles 2X relies marking dijfkrences initial goal state I In remaining theoretical foundation second principles theoretical properties procedures provable paper formal welldefined implementation planner MRL We obtain predictable framework inference procedures behavior efficiency inference like soundness completeness serves 4 Efficient retrieval candidate plans In order illustrate use description logics indexing query languages return plan P2 solving Sp2 example plans introduced Section 2 Assume let P2 openag mbox 7 eu emptyaction ex mail mbux extypex mbox exdeletex mbox generated stored plan library second principles reusing plans Pl P3 PI extypemmybox exdeietemmyboxI 1 P3 nl II lengthf mbox sendermsgn mbux Joe PA type n mbox ex delete n inbox ex emptyaction II n I od Plan determination candidates guide planning process P2 candidates question Pl P3 appropriate answer J KoehlerArfificial Intelligence 87 1996 145186 163 reveals look plans preferred A closer common cf framed formula Apart plans differ mainly structures human experts Pl add case analysis plan P3 remove loop order P2 subplan control difficult problem It means obvious plan work contain The comparison complex structures sequential The identification Pl P3 appropriate reusable plans requires abstraction specific objects occurring subgoal states temporary universally quantified goals The basic effects actions cause mailboxs specifications features abstraction process These requirements preserved defining specifications particular concepts encoding scheme w MRL map LLP plan description logic changed accomplished 41 An example encoding scheme The definition particular encoding representation choice particular description application formalism domain In order map LLP plan specifications scheme depends factors plan specifications logic plans abstraction perform Abstraction rules corresponding different universal goals accomplished forms abstraction rule concept descriptions use types want Vxpx 3xpx Abstraction specific objects implemented rule pA 3 Px For example applying 3ssendermsgxmbox straction impression rule sendermsgx mbox Joe leads specific sender mail Ab temporal information slightly complicated To reader formula s abstracts temporal abstraction process consider formula 0 readzg msg m mybox T A 0 deleteag msg m mybox T 1 The goal temporal abstraction abstract ordering subgoal states In nested operators specify ordering A simple example rule accomplishes formula desired abstraction Such modal formula equivalently relational translation method Ohlbach translated firstorder 45 The translation formula following adds additional representing accessibility predicate Local variables fluents equipped interval argument u 331 Another abstraction eliminate obtain LLP translated WI 2 interval variables introduced translation additional predicates relation intervals language object unary functions rule applied In example readag msg m mybos 111 1 J 7 1 clelete_zg rlzsg 111 flJXH W T The result abstraction process firstorder disjunction Each literal mapped conjunction existential mapped fl U respectively role restriction form 3RC 3R4 A V formula containing primitive negation component type The structure term like read_ugmsg m mbox WI reflected function mybox interval x mailbox The binary takes mailbox com position roles The unary function msg type abstracted binary relation integer arguments irlteger 4 message mailbox x indicated returns integer Thus relations mailbox x integer0 integer x message The unary function readBag type message boolean formula reud_ugnzsgm mybox 1 T obtain binary relation type messagex boolean Consequently concept description position binary abstracted composition interval mailbox abstract mailbox message function 3 mailbox o position o message o read_flagTRUE After encoding process completed conjunctive computed Of course complete concept description grows exponentially formula gorithm concepts reasons pragmatic encoding process index In cases tasks involve sets atomic subgoals costly instead computing computational length But remember conjunctive normal compute normal times normal form effort operation al subsumption form Nevertheless form classification normalization necessary planning The encoding fications Sp 1 scheme w MRL leads following encodings speci 0 pwh 1 3 mailbox o open_flagTRUE 11 7 mailbox o position o message o deiete_flagFALSE w goc 3 mailbox o position o message o read_flagTRUE fl 3 mailbox 0 position o message o delete_flagTRUE w veh 3 mailbox o position o message o delete_flagFALSE goal 3 mailbox 0 position o message o read_flagTRUEfl 3 mailbox o position o message o delete_flagTRUE J KoehlerArtial Intelligence 87 1996 1451U6 165 oQvesP2 3 mailbox o open_flagTRUEfl 3 mailbox o position o message o senderlSENDER 3 mailbox o position o message o delete_flagFALSE wgoals 3 mailbox o position o message o senderENDER u 3 mailbox o position o message o delete_flagTRUE n 3 mailbox o position o message o senderTSENDERu 3 mailbox o position o message o read_flagTRUE The expressiveness admissible concepts sufficient represent different adequately The reader note property generalize schemes defined encoding domains require intractable abstractions use expressive concept In situation completeness leading languages formulae The general simplified idea description logics query languages mail domain application In cases perform widely applicable Given logical description case logical possible map concept description Nevertheless logical interesting concept descriptions research logical development creative process weaker encoding formulae subject formula interpreted schemes mapping Its mechanization case libraries formula remaining tractable sublanguage subsumption The encoding scheme MRL satisfies retrieval 17 Thus algorithm inverse monotonicity property formulated monotonicity guaranteed solu existing property hold general A new approximation The retrieval algorithm plan specifications comparing library certainty provide solution reflects reasoning relationship extends computed set candidates Definition tions Note plan retrieved planning approximates abstractions Thereby problem This 42 Weakening retrieval The retrieval algorithm takes encoding preconditions plan specification testing order determine position subsumption goals current hierarchy By set subsumed plan specifications fications possible specification subsumes plan library In situation second principles planner determined The plans meet speci encoded current If plan returned faced decision concept directly reusable plan contained reuse candidates reuse attempts plan scratch weaken criterion modified retrieval accept reuse candidate 166 J KoelderArrificiu Inrcllience 87 I 996 45I86 BOTTOM Fig 3 The example library modification The principal problem anticipate principles makes sense effort retrieval modification effort planning scratch Unfortunately start retrieval However practical experiments costly searching plans efficiency considerations generating scratch modified second lower plan retrieval practical decision impossible demonstrated decide modifying 22301 Weakening effort Planning Retrieval based classification offers criterion classify according principle ways goals preconditions weaken search wPnew WPrld JQPI L 4 case retrieval searches In preconditions satisfied retrieval searches achieve currently plan required goals applicable plan achieving current current current goals accepting initial state In case initial state Fig 3 shows small example library obtained plan specifications consideration Obviously wSpz subsumes concept rectly reusable plan retrieved Therefore weaker retrieval algorithm searching wpreld sumed ogals Classification candidate classification w di activated subsumes pre wgoad sub wgoals wSpl encoded preconditions encoded goals successful plan Pl attached holds Therefore fails retrieving w goa retrieval I2 In working weak demonstrate requires plans applicable control structures plan modification improve order good restriction implement possible approaches retrieval efficiency Here discuss possibilities order retrieval based classification works MRL applies weak retrieval preconditions current initial state heuristic reduce refitting effort J KoehlerArtificial Intelligence 87 1996 145186 167 activated reuse candidate Since strong represent current planning current goals know preconditions initial state Thus plan refitting start described retrieval problem Sp2 We expect failed know solution satisfied Section 5 Pl achieve current 43 Ranking plans Only candidate plan retrieved plan consideration candidates Consequently best But general retrieval determine ranking needed candidates library appropriate example reuse order determine The subsumption hierarchy rank candidates computing best candidate shortest path ranking heuristics modification effort respectively shortest path distance directed acyclic graph provides easy way current concept description The If candidates optimization graph approximate w S applicable ranking candidates goals eliminated initial state Strong retrieval returns plans supposed achieve current goals This implies candidate set contain plans achieve superfluous goals goals currently unnecessary Actions attempts achieving Thus optimizing optimization effort candidate number atomic eliminated subgoals current reflects minimal number primitive plan specification plan actions smallest number If candidates selected best reuse candidate sent plan modification ranking value selected arbitrarily candidate plan The heuristic estimates achieved candidate plan required candidate plan Therefore number superfluous reused plan making based estimation eliminated number It assumes receive actions u S The heuristic compares Definition 18 Let u Id ld strong retrieval dates o goa The set primitive cardinality set PC components occur usually denoted P C wgoals encoding current goal wgoafs concept C denoted P C The retrieved indices candidates encoding goals candi The optimization effort candidate defined OPTwgoalsold IPgoa 1 P lwgo 1 I The ranking heuristic selects plan needing minimal optimization effort Weak retrieval returns candidate plans supposed desired goals initial state achieve didate modified Consequently candidate retrieval set computing wgoafs approximates w goals achieved candidate cf 291 heuristic expect applicable estimates modify effort intersection wgoals_ number current atomic sub 168 J KoehlerAriJicrul ltttellipxce R7 1996 145186 strong retrieval search applicable plan reaching current goals fails activates plan modification T lower bound V 1 fails Activation Plan Generator 1 Fig 4 Interaction tirst second principles planning Furthermore ranking heuristic verifies ranking value best candidate exceeds lower bound wgols contained heuristic subgoals candidates In situation plan determination PHI planner assumes If candidate rejected activated best candidate aeves receives ranking value exceeds requires wgoa If condition half primitive components ranking satisfied half current atomic lower bound effort estimated expensive modification reports failure planning scratch The ranking heuristics guide Fig 4 principles Interaction planning second 5 Correct modification complex plans provably correct As introduced based deductive lead modified phases computes plan skeleton secondly plan rejitting completes inference processes Section 3 proceeds Plan modification plans First plarz interpretation plan skeleton correct plan meets current specification In following apply formal approach plan modification defined Section 3 example consideration MRL discuss deductive plan modification 5 I Plari interpretation Plan interpretation The current plan specification receives sources input plan generated J KoehlerArtijicial Intelligence 87 1996 145186 169 ii The best reusable plan determination phase identify plan library specification It takes plan specifications tries prove required relations preconditions goals Ax b prenew t weold Ax k Ogoalld Ogoal In example proving applicability reused plan Pl current initial state specified SE requires proof sequent 1 deletesflag msg x mbox F open_agmybox T A deleteagmsgm mybox E Starting point goal proof sequent 2 0 reudagmsgmmybox T A 0 deZeteug msg m mybox T I 0 read_agmsgxmbox T A deleteug msg x mbox T 1 2 In following discuss sequent proofs performed proof tactics plan interpretation 311 The tactics run polynomial time length input formula On hand enables plan interpretation eficiently compute entry point search space plans On hand implies tactic incomplete sense compute maximal plan skeleton shown PSPACEhard problem 441 The precondition proof example sequent simple sim ple syntactic structure formulae The rule successfully applied sequent 1 rule rA I3 The rule splits sequent 1 sequents 3 4 deleteflagmsgxmbox F open_jIagmybox T deleteagmsgxmbox F delete__agmsgmmybox E 3 4 While sequent 3 reduced axiom sequent 4 closed In order obtain leads axiom substitution xmmboxmybox appropriate instantiation reused plan variables reused specification td substituted terms occur current specification Furthermore different variables mapped different terms substitutions injective Injectivity required safe condition ensuring proper instantiation reuse candidate computed proof The reader I3 A survey sequent rules paper Appendix B I70 J KoelderArtcid fturllirrrce X7 1996 45X6 note instantiation possible quantifier universally quantified universal quantifiers rules variables rules arc applied Plan specification proving Soid S sequents sequent proof implicitly sequent calculus remove formulae guess prover implemented appropriate instantiation Of course instantiation lead proof sequent The restrictions pose instantiations leaf sequents ensure instantiations help quantifier delayed know instantiation unacceptable overhead Therefore introduced resulting appropriate computed computational rules Sequents 3 4 arc lcaves derivation applicable Since leaves axiom proof reused plans preconditions tree rules tactic valid When trying sequent cope rules prove reused plan achieves current goals prover following additionally sonzetinzes operators uses 2 CIB LIB t _I 2 OB OB E A recursively The proof proceeds order compare temporary temporary followed rule r 0 obtains sequent subgoal states goal 5 operators subgoal state specified First tactic applies goal specifications god 2 sequent rule IO reud_ffug msg 111 nzybar 7 15 0 delete_ug msg 02 nybox 7 I raud_fug mg nlOox T A dekreg msg x nzboxj T 5 Now rule A applied 7 sequent 5 followed rule tA leads sequents 6 rrud_zg tnsg m mybox T 0 deleteg msg tn mybox T reud_ugmsg x nzbox T 6 I4 Eigenvanable condition I occur concluaiun rd J KoehlerArtijicial Intelligence 87 I 996 145186 171 read_ag msg m mybox T 0 delete_ag msg m mybox T deletelagmsg x mbox T 7 6 closed Sequent current subgoal read_Jag msg x mbox T successfully proved The proceeds sequent 0 operator help rule IO 7 removes 8 xmmboxmybox leads sequent substitution remaining deLeteag msg m mybox T 0 8 8 subgoal The reason failure remaining requires reused goal specification 7 disap The formula deleteflag msg x mbox T succedent sequent occur scope 0 operator Thus pears sequent obvious tactic fails proving state current goal specification achieved Of course deleting message preserves effect message read reused plan reads message deletes leads message read deleted But way final state derive completion formula This motivation Section 6 fact original plan specification subgoals requires process plan specification subgoals described achieved formulae 52 Plan refitting Proof tactics designed decision procedures leaves obtained proof possible falsifying valuation Two situations possible termination proof tactic sequent calculus If tactic result considered tree assumed terminate In addition proof A proof tree constructed leaves tree set logical axioms formula proved original valid formula follows In case original This assumption safe condition ensuring plan modification ii No proof tree possible counterexample tactics incomplete Remember case formula proof tactic failed formula Assuming plan refitting Thereby respect The proof current plan specification tactics guarantee invalid ensures prevents atomic formulae The falsifying valuation makes All old atomic goals example assumption tree constructed soundness proof tactic terminates failure invalid formula valid correctness plan verified reuse plans provably correct formulae false These achieved reused plan example Pl falsified goals interpreted current goals 1 true atomic Sm valued example current goals leaves counterexample tree contain 17 J KoehlerArrjicul lnrellipwce 87 I 996 145186 _ All atomic formulae describing true old preconditions falsified preconditions example Pl hold current example interpreted preconditions currenf preconditions initial state example 1 2 false These reused plan Plan Pl modified constructing possible currently xm mboxmybox prove preconditions required goals First reused plan computed plan interpretation leading plan skeleton satisfied achieves instantiated substitutions Pl type n mbox delere r mbox refitting concludes Plan open_gmbux current goal delete_ugmsgxmbox achieved subgoal T required Pl hold failed proofs instantiated initial 1 T achieved precondition state Furthermore Pl deleteag msg m mybox 7 contained structed exdeletem mybox superfluous occurs axiom obtained goal proof Thus plan sequent 6 action current position concludes refitting achieving removed subgoal plan skeleton This analysis result plan interpretation leads following modification operations performed instantiated plan Pl A planvariable Plant introduced reused plan It repre sents subplan achieving missing precondition openug mbox T ii The superJIuous action exdelete x mbox removed iii A planvariable subplan representing open subgoal plan skeleton deleteag msg x mbox T introduced skeleton planvariable specification analyzed help PHI planner In order added plan skeleton determine position current goal state The planvariable current plan specification Spz instantiated prelimi nary plan skeleton Pl It serves starting point plan refitting Pl Plan ex type x mbox 1 SP2 Plan extypexmbox deletezgmsgxmbox F OLreadJlagnzsgxnlbox TA deletejag msg x mbox T In step subplan replace Plan generated Plan refitting applies rule effectintro 7 2 introduces missing precondition open_ag msg mbox T J KoehlerArtijicial Intelligence 87 1996 145186 173 new subgoal goalnew pe Planl 0 tgoaL A OF Apre pre Plan Ogd effect_inrro pre Plan Plan2 OgoaE subplan specifications It obtains action ex typex mbox taken instantiated computed plan Plan generated frame conditions 9 10 Plan instantiated plan skeleton The precondition pre deleteflagmsgxmbox FPlanl 3 0 openJlagmsgmbox T A OF A pre preextypexmbox 0 read_agmsgxmbox TA deleteag msg x mbox T 9 101 specification 9 domain leads conditional axiomatization achieves rule ifintro 7 plan required goal instantiate given precondition Plan refitting applies The proof subplan atomic action available planvariable Plan case analysis pre cord PlanA PlanB 0 goal pre Plan Vgoal ifintro example In openagmbox conditional T plan interpretation cond instantiated failed prove missing precondition Plan1 openjlagmbox T Plan3 Plan4 Applying rule ifsplitting 71 pre cond PlanA 0 goal pre lcond PlanB 0 goal preif cond PlanA PlanB Ogoal ifsplitting sequent 9 plan refitting obtains following subplan specifications deleteagmsg n mbox F open_agmbox T Plan3 0 openag mbox T A OF A pre deleteagmsgxmbox E yopenJEagmbox T Plan4 0 openg mbox T A OF A pre 11 12 Plan3 instantiated action ex emptyaction desired subgoal holds initial state lcen_Jumbnr T sequent 12 equivalent The formula opetr_Jlagmailbox exopetzttzbox F opens Plan4 instantiated action mailbox starts mail session formula instance Vttzuilbox opetzag muilbox F CY opetz mailbox 0 opetz_fIag mailbox 71 With following conditional plan obtained instantiation Plant Plan opetzjiug ttzbox T er emptyaction ex open ttzbox Now precondition pre sequent IO instantiated formula defeteagmsg x mbox F A opetr_Jag mbox 7 specifcation The proof subplan IO proceeds interleaved process plan generation plan verification A tactic ordering conjunctive goals activated 71 decides subgoal deleteag msg x mbox T deleting message destroys reading rule 171 possibility isolated help effectsplit read_jagrtzsgx mbox T subsequently The subgoal subgoal achieve pre PlanA 0 gor I OF ApreI pre PlanB 0 goal pre PIann Plana 0 goall A goal21 eRectsplit composition This rule requires sequential tirst planvariable second planvariable Plan2 planvariable single atomic action extypex mbox specification withdrawn plan refitting sets Plan subplan subplatz achieving effectintro represents introduced represents planvariables achieving split subgoal subgoals But instantiated remaining rule IO Thus instantiation Plans Plane We obtain subplan specifications I3 14 opetzagttzsgmbox T A rfelerezg nzsg x rtzbox F Plans 0 read_zg nzsg A mbox T I 0 F I pre pre Plan6 0 deleteg msg x tdmr T 13 14 The subgoal proven plan extyper mbox variable Plans readag ttzsgi x mbon T sequent Consequently action interpretation 13 successfully achieving subgoal reused instantiation plan skeleton plan J KoehlerArtijicial Intelligence 87 1996 145186 175 openagmsgmbox T A deleteagmsgxmbox F extypexmbox Oread__agmsgxmbox TAOFApre 15 The instantiation sequent 14 instantiated successfully verified plan refitting The precondition pre open_jlag msg mbox T A delete_ag msg x mbox F precondition survives execution type action openag msg mbox T A deleteag msg x mbox F Plan6 0 deleteag msg x mbox T 16 isolates 16 failed prove Plan refitting concludes Sequent pretation tiation relies planning instantiates successfully instantiated structed plan refitting The result sequential plan Pl open subgoal deleteagmsgx mbox T plan inter reused plan provides instan action exdelete x mbox desired plan P2 obtained reusing correct proof plan specification remaining planvariable Plan6 With planvariables scratch It generates P2 openjlag mbox T ex emptyaction ex open mbox extypexmbox exdeletexmbox 5 The planning process benefits reuse plan Pl situations When conditional second principles control structure introduced case analysis performed subgoal read_agmsg x mbox T addressed planning goal knows formula reuses action planning achieved instantiation When second principles candidate plan The search space planning dynamically restricted cases generative according 43 reuse candidate I5 A maximal results leads speed second principles planner compared planner possible complexity refitting action plan subsequently demonstrates maximal 43 p 14401 instance action determine efficiently reintroduced possible reusable plan skeleton plan generation overhead plan original ex delete x mbox This time polynomial skeleton starts extend instance ex delete m mybox eliminated plan leads In example The example demonstrated plan MRL generation conditional plan reusing sequential reuse modify plans containing able correctly I5 A summary results empirical study 130321 176 J KoehlerArtid tntel1ipxce 87 1996 145186 structures Usually control simple example Refitting plans large number atomic actions nested control structures involve deduction plans complex shown steps 53 Reuse corztrol structures The reuse modification occur approaches plans control structures restricting problems plans comprises operations modification addition reordering atomic actions The modification complex plans raises question decisions bc new sequential plans The deletion control structures Two main like instantiation leads qualitatively extended operations sequential Are control structures reused rercu Are structures sequential subplans reused occur scope control ii Are control structures introduced modification strategy required refitting process VYSUS Are control structures plan containing control structures introduced current planning problem requires second principles planner help application Here plans generated The treatment control structures carefully working consideration decisions application domain The MRL provides active help users software environments meet exactly structures reused restricted way implemented introduced planning problem An unrestricted Reused control modified plan preserved generation plan containing users goals guaranteed structures requires specific requirements reuse component PHI planner provide plans required control MRL They current plan skeleton 51 This means requires control structures reuse control structures lead following problems simple possible Therefore correspond requirements current planning situation This result example case analysis makes execution plan complicated test conditional analysis problem introduced requires generate conditional performed execution overcomplicated plans For time Thus case plan skeleton current planning plan _ Plans achieve unintended reused plan removing optimizing generate optimal plans plan Superfluous control structures ative plan achieves particular goal objects satisfying precondition sideeffects Plan refitting makes attempts superfluous actions able arbitrary render problem worse For example iter usually harder generating principle reused satisfy reader think reusing plan achieving example files directory x This achieves Without attempts optimizing iterative control structure drastic harmful sideeffect goal objects As goal delete directory x superfluous goal delete file xps reused plan removing achieved J KoehlerArtijicial Intelligence 87 1996 145186 111 Planning Logic Description Logic Update Plan Library construction new plan entry encoding abstracted plan specification Plan Retrieval Plan Retrieval best ranked plan fotwarded plan modification Fig 5 Plan entries plan library Restricting reuse control structures MRL way coping problems Further research necessary order identify solutions 6 Updating plan library The plan library updated dynamically MRL Fig 5 summarizes logic planning structure based subsumption concept descriptions information successfully information hybrid repre logic The description hierarchy serve solved extracted abstract class planning represented planning library index index implemen In current problems problem led plan This information plan specification library indexing sentation library based description logic provides encoded plan specifications represented indices plan entries A plan entry contains planning plan planning process logic A plan entry retrieved linked Each application specifications tation plan entry abstract class planning problems entries solved modifying encoded equivalent library Planning plan stored plan index represents domain Several plan entries linked problems belonging inserted plan entry concept descriptions represented index This avoids redundant abstract class stored comefirst serve basis instance The starts A new plan entry initial plan added library library containing following conditions indices reusable plan planner generate plan principles reused plan modified updated The plan library plan directly solves current planning problem index current planning problem library contained library 17x I KrhlerArrttrI lrrwllipwcr X7 1996 145186 Let continue example Section 5 According abovementioned conditions sources information plan library updated reused plan modified Three available construction plan entry current plan specification modified plan meets specilication proof tree constructed plan refitting ii iii The index plan entry computed plan determination The computation current plan specification understand plan This means necessary plan achieve sideeffects completed added plan entry By completion weakest preconditions preconditions plan goals added plan specification strongest goals plan specification eliminated To determine weakest preconditions strongest goals plan planning analyzed In particular led plan process applied cnuditiorrs action process ification position plan library change caused altered subsumption relationships Section 2 If completion encoding plan spec proof investigated They specify achieves leads changed plan specification repeated different necessary pre concept description result action axiom schemata effects formula In example consideration completion plan specification 2 leads disjunctive precondition plan help ifintro reflecting rule complete case analysis introduced Planp A deleteag nlsg s 172170x F A qerrag Inbox T V deleteag msg x mbox F A openflag mbox F 0 readagmsgx Inbox T A deleteag msg x mbox 1 T An explicit representation possible preconditions plan P2 supports iden tification applicable encoding precondition formula subplans necessary logically equivalent planinterpretation conjunctive normal originally phase A recomputation form completed specified precondition l A major plan entry comprises information extracted proof tree leading plan relation sequential subplans occurring conditional plans weakest pre conditions extraction sequential body plans occurring _ relation atomic actions In order relate sequential analyzed applications led conditional atomic goals achieved plan subplans weakest preconditions proof tree rule intro Section 5 In example plan refitting plan iterative plans J KoehlerArtijicial Intelligence 87 1996 145186 179 Plan open_jag mbox T ex emptyaction ex open mbox plan explicitly sequential preceding preconditions cation preconditions Consequently branch l6 formula Now plan ex type x mbox exdelete n mbox Two possible plan specifi plan resulting completed sequential sequential belongs represented related subplan ex emptyaction ex type x mbox ex delete x mbox related preconditions deleteag msg x mbox F A open_jlag mbox T sequential subplan resulting branch e_xopenmbox extypexmbox exdeletexmbox related preconditions deleteag msg x mbox F A open_jlag mbox E Plan refitting relies furthermore information help old subgoal plan subgoals When current atomic relationship atomic subgoal successfully tries application action axiom schemata For order achieve old subgoal plan refitting interpretation instances achieve atomic goals extracted atomic actions proved reuse current subgoal The action leaves proof tree resulting example plan following relationships stored plan entry action subplan achieved ex maiZ mbox achieves open_ag mbox T ex type x mbox achieves readJEag x mbox T exdeletex mbox achieves deleteagmsgx mbox T The construction completed systematic plan entry internal designators Joe existentially quantified variables sortpreserving abstraction renaming variables like sender constants Finally plan ples plan entry related It available library index uniquely determines subsequent planning position second princi 7 Related work The implementation second principles planner based formal introduced Section 3 requires design decisions specify planning framework I6 The emptyaction subplan pleteness understandability normally example eliminated It shown sakeness com second principles proceeds decisions underlying MRL relate In section discuss approaches important Meta level versus object level proceed metu level object second principles level previously generated plans directly Planning On object planning provide recycle knowledge extracted previous planning processes experience form planning problem This means basis planning tactics heuristics strategies reused level solve current process represents planning second principles Reuse metu level means plans objects planning The commitment particular planner levels fundamental design decision A commitment systems PRIAR 1271 CHEF leads 391 GRASSHOPPER adaptive reactive systems based learning I361 object level leads casebased planners reuse meta level PRODIGY 19 J SPA 2 I A commitment techniques MRL proceeds mainly object level reused plan refitting relies reuse stored plans supplied information case analyses performed example Metalevel knowledge preconditions Section 5 Skeletal plun rejinement versus jlexible modijication When planning order construct skeletal plan rejinement Skeletal plan refinement second principles proceeds object level plans modified implemented desired plan Plan modification 14 jexible modiution computes appropriate groundlevel abstract skeleton The admissible modification 2 1261 operator occurring restricted tracking occur The modified plan obtained instance skeleton hierarchical proceed instantiation instantiation steps operations Flexible modification implemented MRL admits variety operations plans like deletion addition operators control structures Skeletal refinement occurs fully proved situation instantiation plan modification logical consequence MRL current plan specification success In library plan solve current planning problem reused plan specification restricted easytocompute substitutions Trarlsformation bused versus gerferutiorl bused The modification plan help transformations 61938 extending principles planner ability modify plans 212554 Transformationbased failure hierarchy resolved activating approaches execute plan simulated environment Failures classified proof plan This approach rules completeness hard achieve I7 Further problems related soundness termination failures transformation failure hierarchy requires prediction available possible transformations As example incompleteness proof CHEF 20 1 J KoehlerArtificial intelligence 87 1996 145186 181 Transformations transformations makes transformed difficult ensure plan sound resolving failure introduce failures process loop transformation solves current planning problem To overcome PRIAR planner possibility principles planner possesses problems generationbased 251 The proof completeness approach introduced plan modification respect trivial plan modification Soundness termination rely plan generation fallback easy ensure underlying properties The modification plan MRL proceeds generation based MRL computes plan reusable The extension skeleton completion interacts generative skeleton sends plan refitting PHI planner The plan skeleton preserves assumed modification The correctness modified plan sound Planning knowledge plan refitting dynamically correct plan requires flexible operations add delete reorder operators control structures represented plan skeleton guides deductive plan refitting completes control structures actions skeleton ensures search space constrains MRL complete respect plan generation The plan incomplete planner plan refitting fall sense use tactics makes underlying LLP theorem prover incomplete Conservative versus nonconservative A desirable property plan modification conservatism means original plan 281 Minimal modification produce PSPACEhard Therefore minimally modifying preserve maximal number applicable operators 43 shows computation In order ensure efficiency plan modification process example proof tactics plan interpretation plan plan implies plan skeleton A critical analysis conservatism maximal plan skeletons including MRL nonconservative rely polynomial run search space possible polynomial plans explicit Hanks Weld 21 I This entry point guaranteed best best approximation It open approximable maximal problem hint negative results constant result approximations time compute entry point algorithm compute efficiently applicable subplan similar problems ratio Recent implemented systems 451 The plan library Recently representation plans based terminological approaches extend description representational representation primitives knowledge represen logics actions systems tation new applicationoriented plans led One extension reasoning simulates solves implements The situations RAT plans inferences execution plans verifies 231 based KRZS underlying description 31 RAT logic particular applicability tasks temporal projection An application description logics tasks plan recognition developed TREX 56 Plans form disjunctive actions TREX contain conditions iterations nondeterminism The plan library static dynamic retrieves typical plans The library A dynamic plan MRL A static library comprises plans reuse lifetime adds new plan entries library grows MRL starts library incrementally userpredefined add new plans library polynomial The main advantage time This contrasts description retrieve reasonable logic query language lies novel solution similar past cases cf S4 p 1031 Furthermore schemes based discrimination plan library indexing problem theoretically properties retrieval algorithm For time retrieval guarantees approaches limited bounded indexing plan libraries based MRL wellfounded solutions restricted resources lattice structure provided suhsunzption hierarchy overcomes problems occurring indexing networks On hand discrimination fail networks cope conjunctions discrimination For example given goal state containing developed computes subsets subgoals cardinality atomic subgoals input This means n set input concept descriptions subgoals reflected II 1 n 2 takes takes power set 2 1 Retrieval based sets algorithms working input set growing retrieval algorithm retrieval faced exponentially avoids problems existing literals On searches plan covering complex plan specifications worst case retrieval algorithm II atomic subgoals restricted subsumption hand If fails relationships II subgoals indexing hierarchy networks S4 8 Conclusion We presented logicbased relies systematic decomposition phase model Deductive phase The formal model makes commitments plans planning situations inference processes clearly defined semantics approach planning second principles planning process help formalize nature particular planning implementational formalism details independent application domains Plan modification ples planner reuse plans containing Reusable plans retrieved tion logic query lattice structure retrieval guaranteed language existing solutions yields provably correct moditied plans enables second princi iterations updated plan library descrip library The plan library indexed basing formalized KLONElike dynamically control structures classifier like conditionals The formal Furthermore ness completeness framework led implemented contrast heuristic approaches predictable behavior like correct theoretical properties efficiency inference procedures proved J KoehlerArtijicial Intelligence 87 1996 145186 183 Acknowledgements This work supported German Ministry Research contract ITW 9000 8 PHI project PHI group Mathias Bauer Susanne Biundo Dietmar Dengler BMFT members Gabriele Paul indebted HansErgen detailed comments helping I Wolfgang Wahlster advice support Bernhard Nebel reviewers Ohlbach work fruitful discussions Furthermore draft version The anonymous revision paper commenting I want Technology thank Appendix A Proofs theorems Theorem 14 Pold meets S ifAx Id S Proof We prove following sequent An Pold Aild Wld Pold Pew Yw A1 planvariables We start applying rule I applied sequent rule r leads sequent instantiated reused plan formula Pold A2 To sequent leading sequents A3 A4 Ax Pold A PWmv 0 goalold 0 Qkv A21 A3 A4 Sequents apply A3 A4 expanded We start sequent A3 rule IA followed rA obtain sequents A5 A6 Ax Pold Pmv Ax Pold7phew Pold 3 0 dmv preold 0 mw To sequent A4 rule IA applied leading sequent A7 Ax3 PoldPrew7 0 goalold 0 wew A5 46 A7 The original sequent proved succedent contain common sequents A7 A6 lead subproofs iff sequents axioms A5 formula This holds sequent antecedent immediately Ax prenew pold Ax 0 goalold 0 goalnew Cl 184 J XolrlerArttjrucd Inellqww X7 I YY6 145186 Appendix B Summary sequent rules I A3 I BA I A A B A rA pre Plan Plan2 Ogoal pre Plan Ogoal reyuence_ussunzption pre Plan 0 goal A OF nprel pre Plan2 s OgoaLl pre Plan Plan2 0 goal A goal21 pre Plan 0 I godnew A OF Aprej pre Plan2 Ogoal pre Plan Plan 3 Ogoal eflectsplit effect_intro pre cord PlanA PlanB Qgoal pre Plan Ogoal ljfntro pre cond PlanA goal pre Tcolzd PlanB Ogoal pre cond Plan A PlanB 0 goal lfsplittirig References 1 I W Anderson J Hendler M Evetf B Kettler Massively parallel matching knowledge structures Il Kitano J Hendler eds Mnssive forctllel Artijiciul Intellipznce MIT Press Cambridge MA 1994 5371 2 1 E Baader B Hollunder KRIS knowledge representation inference SIGART Bull 2 2 1991 815 3 I F Baader B Hollunder B Nebel HJ Protitlich E Franconi An empirical analysis optimization techniques terminological representation systems making KRIS Proceedings 3rd Internutiwutl Conference Principles Knowledr Representation und Recmming Cambridge MA 1992 270281 J KoehlerAriificial Intelligence 87 1996 145186 185 4 C Backstrom Finding C Backstrom constrained plans optimal parallel executions E Sandewall eds Current Trends AI Planning 10s Press Amsterdam 5 1 M Bauer S Biundo D Dengler J Koehler G Paul PHIa logicbased harder thought 1994 tool intelligent help systems Proceedings IJCAI93 Chambety 161 M Beetz D McDermott Improving 1993 460466 robot plans execution Proceedings 2nd fnternational Conference Artificial Intelligence Planning Systems 1994 712 7 S Biundo D Dengler The logical language planning UP Research Rept German Research Center Artificial Intelligence Saarbriicken 1996 8 S Biundo D Dengler J Koehler Deductive planning plan reuse command language environment Proceedings ECAI92 Vienna 1992 628632 91 A Borgida P PatelSchneider A semantics complete algorithm subsumption CLASSIC description logic J Artif Intell Res 1 1994 277308 IO R Brachmann H Levesque The tractability subsumption frame based description languages Proceedings AAAI84 Austin TX 1984 3437 111 R Constable Implementing Mathematics Nuprl Proof Development System Prentice Hall Englewood Cliffs NJ 1986 1 121 D Dengler An adaptive deductive planning Proceedings ECAI94 Amsterdam 1994 610614 131 E Feigenbaum The simulation natural learning behavior E Feigenbaum J Feldman eds Computers Thought McGrawHill New York 1963 141 P Friedland Y Iwasaki The concept implementation skeletal plans J Automated Reasoning 1 1985 161208 15 D Gabbay Declarative H Barringer Altrinchham Lecture Notes Computer Science 398 Springer New York 1989 402450 systems A Pnueli eds Proceedings Colloquium Temporal Logic Specification logic imperative past imperative future executable temporal 161 J Gallier Logic Computer Science Foundations Automatic Theorem Proving Wiley New York 1987 1171 R Givan D McAllester New results local inference Proceedings 3rd International Conference Principles Knowledge Representation Reasoning Cambridge MA 1992 403 412 relations theorem proving 181 C Green Application DC 1969 219239 191 K Hammond Explaining 201 S Hanks D Weld The systematic plan adaptor formal foundation casebased planning Tech Computer Science Engineering University Washington Seattle repairing plans fail Arttf Intell 45 1990 173228 Proceedings IJCAI69 Washington problem solving Rept 920904 Department WA 1992 211 S Hanks D Weld Systematic adaptation casebased planning Proceedings 1st fnternational Conference Artificial Intelligence Planning Systems 1992 96105 122 I S Hanks D Weld A domainindependent algorithm plan adaptation J Artif Intell Res 2 1995 319360 1231 J Heinsohn D Kudenko B Nebel HJ Profitlich terminological logics Logic Users Workshop KITReport 95 TU Berlin 199 I C Peltason K Luck C Kindermann Integration action eds Proceedings Terminological representation 24 M Heisel W Reif W Stephan Tactical theorem proving program verification Lecture Notes Proceedings Artificial Jh International Conference Automated Deduction Kaiserslautem Intelligence 449 Springer Berlin 1990 117 I3 1 1251 S Kambhampati Flexible reuse modification hierarchical planning validationstructurebased approach PhD thesis MD 207 4234 I 1 Center Automation Research Computer Vision Labomtory University Maryland College Park MD 1989 261 S Kambhampati A theory plan modification 1271 S Kambhampati Proceedings AAAI90 Boston MA 1990 176182 J Hendler Control refitting plan reuse Proceedings NCAI89 Detroit MI 1989 943949 28 S Kambhampati J Hendler A validationstructurebased theory plan modification reuse Arttf Intell 55 1992 193258 1341 1351 1361 I371 1381 I01 1401 141 I 1421 1431 1441 1451 1461 186 I KoehlrrArtjicrcl lrtrellrrtcr X7 I 996 IJSIX6 129 1 J Koehler An application terminological logics IO casebased reasoning Proceedings 4th fntenrcttionul Crmference ou Princples Knowledge Representation Reasoning Bonn 1994 351362 I30 1 J Koehler Avoiding pitfalls u casebased planning Proceedings 2nd Internutiontrl Cortference Arttcitrl Intelligence Pknning Systentr 1994 104 109 13 I J Koehler Correct modification complex plans Proceedings ECAI94 Amsterdam 1994 60 609 132 1 J Koehler Flexible plan reuse formal framework Trends A Pkrnning 10s Press Amsterdam 1994 C BiickstrGm E Sandewall eds Current I7 I 184 J Koehler R Treinen Constraint deduction intervalbased temporal logic M Fisher trnd Ternporul Logic Lecture Notes Artificial Intelligence 897 R Owen eds Executuhle Mod IO3 I 17 Springer Berlin 1995 J Kolodner CuwBased Reawrritsq Morgan Kaufman Los Altos CA 1993 E Krtiger Temjorcrl Logic Pmratxv C Leckie 1 Zuckerman An Springer Heidelberg 1987 learning search control Iroceedings IJCAI93 Chambery inductive approach 1993 I I OO I 105 rules planning Z Manna R Waldinger A theory plans M Georgeff A Lansky eds Reusotting crhout ktiwts nrrd Pktts Proceedings 1986 Winklrop Morgan Kaufmann Los Altos CA 1987 I I45 D McDermott Planning acting Cognit Sci 2 1978 71109 S Minton Quantitative results concerning utility explanationbased learning Proceedings AAA88 St Paul MN 1988 564569 B Moszkowski Z Manna Reasoning interval temporal logic E Clarke D Kozen eds Proceedings Conjrence Ingicx Proyrnnrv Lecture Notes Computer Science 164 Springer New York 198 B Nebel Reawnrttq Rerion tt Hybrid Rrpresentution SyVems Lecture Notes Artificial Intelligence 422 Springer Berlin 1990 B Nebel Terminological reasoning inherently intractable Artj ltrtrll 43 1990 235249 8 Nebel J Koehler Plan modification versus plan generation complexitytheoretic perspective Proceedings IJCAI93 Chambery I993 I436 I44 I B Nebel J Koehler Plan reuse versus plan generation theoretical empirical analysis Art hztell 76 1995 427454 HJ Ohlbach Semanticsbased translation methods Ir modal logics J hqrc Contput 1 I99 1 69 I 77s L Paulson Jsabelle 700 theorem provers l Odifredi ed Logic ctnd Chputer Science Academic Press New York 1990 R Reiter Proving properties states sgtuation calculus Artif Intell 64 1993 33735 I 1471 I48 C Riesbeck R Schank I49 1 R Rosner A Pnueli A choppy nsi CuruBawd Rectsorrin Lawrence Erlbaum Hillsdale NJ 1989 logic Proceedings Swttposiunr nn Logic Cotnputer Scirrrw Cambridge MA I986 SO M SchmidtSchauB G Smolku Attributive concept descriptions complements Arti Intell 48 1991 l26 5 I B Selman Nearoptimal plans tractability reactivity Proceedings 4th fnterrmtinnal Cotzfhrence art P rtncip1er Knowledge Reprewntation ctud Reasoning Bonn 1994 52 I529 152 W Stephan S Biundo Multilevel refinement planning intervalbased temporal logic Procerdins 7th Portuguese Cotzference WI Articictl Intclligenre Lecture Notes Artificial Jntelligence 990 Springer Berlin 1995 483387 I53 1 I Traverse A Cimatti L Spalazzi Beyond single planning paradigm introspective planning Proceedings ECAI92 Vienna 1 54 I M Veloso Pkannin culd tktnting 1992 643647 hy Armhicrtl Retrsonirrg Lecture Notes Artificial Intelligence 886 Springer Berlin I994 1 155 1 L Wallen Autonutted Deduction 156 I R Weida D Litman Subsumption tt Nottrrrsicul Dqtcx MIT Press Cambridge 1989 recognition heterogeneous constraint networks Proceedings Tenth IEEE Conference Artcial Itttelligence ir Applications 1994