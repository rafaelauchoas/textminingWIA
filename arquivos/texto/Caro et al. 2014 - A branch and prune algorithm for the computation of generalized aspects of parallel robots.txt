Artiﬁcial Intelligence 211 2014 3450 Contents lists available ScienceDirect Artiﬁcial Intelligence wwwelseviercomlocateartint A branch prune algorithm computation generalized aspects parallel robots S Caro D Chablat A Goldsztejn b D Ishii c C Jermann d CNRS IRCCyN Nantes France b CNRS LINA UMR6241 Nantes France c Tokyo Institute Technology Tokyo Japan d Université Nantes LINA UMR6241 Nantes France r t c l e n f o b s t r c t Article history Received 18 April 2013 Received revised form 6 February 2014 Accepted 8 February 2014 Available online 18 February 2014 Keywords Numerical constraints Parallel robots Singularities Generalized aspects Parallel robots enjoy enhanced mechanical characteristics contrasted complicated design In particular parallel singularities poses robots uncontrollable damaged conﬁgurations The computation connected components set nonsingular reachable conﬁgurations called generalized aspects key issue design This paper introduces new method based numerical constraint programming compute certiﬁed enclosure generalized aspects Though method allow counting number rigorously constructs inner approximations nonsingular workspace allow commanding parallel robots safely It provides lowerbound exact number generalized aspects It ﬁrst general method able handle parallel robot theory computational complexity currently restricts usage robots degrees freedom Finally constraint programming paradigm relies makes possible consider additional constraints collision avoidance making suitable practical considerations 2014 Elsevier BV All rights reserved 1 Introduction Mechanical manipulators commonly called robots widely industry automatize tasks They mechanical assemblies rigid links connected mobile joints Some joints actuated allow commanding robot operating link called endeffector platform One key characteristic robot reachable workspace informally deﬁned set poses endeffector reach Indeed size deﬁnes scope operational trajectories robot perform The workspace computed set possible command inputs kinematic model robot equations relating commands pose coordinates The size referred degrees freedom DOF robot Robots comply serial parallel possibly hybrid assembly links connected series parallel Parallel robots 12 present advantages respect serial ones They naturally stiffer leading better accuracy larger loads allow high speed motions These advantages contrasted This paper invited revision paper ﬁrst published 18th International Conference Principles Practice Constraint Programming CP 2012 Corresponding author httpdxdoiorg101016jartint201402001 00043702 2014 Elsevier BV All rights reserved S Caro et al Artiﬁcial Intelligence 211 2014 3450 35 complicated design yields diﬃculties computation analysis workspace First pose robots endeffector reached actuated joint commands correspond different working modes conversely input command lead poses endeffector correspond different assembly modes Second parallel robots generally parallel singularities 3 speciﬁc conﬁgurations uncontrollable damaged One central issue designing parallel robots compute nonsingular workspace corresponding commands robot safely operated This amounts computing connected components set nonsingular conﬁgurations called generalized aspect 4 This computation certiﬁed terms nonsingularity connectivity order guarantee safe operations Few frameworks provide certiﬁcations algebraic computations interval analysis Algebraic methods general expensive apply polynomial systems Still cylindrical algebraic decomposition 5 connectivity analysis limited robots 2 DOFs Though generalized aspects mathematical objects general computed exactly numerical meth ods interval analysis allows rigorous computation approximation It 6 robots having single solution inverse kinematic problem Though limited method tackle important classes robots like Stewart platform A quadtree certiﬁcation nonsingularity built 7 planar robots 2 DOFs This method extended higher dimensional robots requires priori separation working modes ad hoc inequalities certiﬁed respect connectivity Finally works 89 propose algorithms based interval analysis analyze connectivity set deﬁned inequalities constraints extended equality constraints In particular developments presented present paper extend intervalbased path plan ning method proposed 8 sets deﬁned inequality constraints manifolds deﬁned equality disequality inequality constraints In paper propose branch prune algorithm incorporating certiﬁcation solutions nectivity This allows fully automated certiﬁed computation connected sets nonsingular conﬁgurations CSNCs certiﬁed approximations generalized aspects model arbitrary parallel robots including robots multiple solutions direct inverse kinematic problems requiring priori study separate working modes Though proposed method allow counting number CSNCs rigorously constructs ner approximations nonsingular workspace allow commanding parallel robots safely Although important practice accurate costly connectivity analysis proposed enables separating nonconnected CSNCs providing lowerbound exact number generalized aspects The algorithm applicable robots arbitrary number DOF complexity computations currently restricts application robots DOFs It ﬂexible naturally account additional constraints arm collisions obstacle avoidance joint limits It ﬁrst method able handle large class robots problem computing connected sets nonsingular conﬁgurations Its main limitation performances combinatorial explosion number computed boxes dimension problem prescribed computational precision As consequence applied planar robots moment A motivating example presented Section 2 followed preliminaries numerical constraint program ming robotics Section 3 The proposed algorithm certiﬁed singularity free connected components computation presented Section 4 Finally experiments planar robots 2 3 degrees freedom presented Section 5 Notations Boldface letters denote vectors Thus fx 0 denotes equations f vector variables x f 1x1 xn 0 fkx1 xn 0 The Jacobian matrix fx respect subset x variables x noted Fxcid3 x Interval variables denoted bracketed symbols x x x x R x cid2 x cid2 x Hence x interval vector box A ai j interval matrix IR denotes set intervals IRn set ndimensional boxes For interval x denote widx x x width intx x R x x x interior midx x x2 midpoint These notations extended interval vectors cid3 2 Motivating example Description Consider simple PRRP1 planar robot depicted Fig 1 left involves prismatic joints gray rectangles sliding perpendicular directions These prismatic joints connected rigid bars black lines linked revolute joints circles allow free rotations rigid bars The lengths prismatic joints respectively denoted x q endeffector pose x horizontal direction command q corresponding height vertical direction Fig 1 left shows generic conﬁguration robot Note symmetric negative pose x associated command q typical parallel robots From conﬁguration vertical change q induces unique corresponding horizontal change x conﬁguration nonsingular Fig 1 right shows singular conﬁgurations In plain green pose robots main rigid bar horizontal increasing decreasing command q entails decrease x In dashed red pose 1 In robotics manipulators typically named according sequence joints P stands prismatic joint R stands revolute joint actuated joints underlined 36 S Caro et al Artiﬁcial Intelligence 211 2014 3450 Fig 1 The PRRP generic pose left singular poses right For interpretation references color ﬁgure reader referred web version article Fig 2 The PRRP kinematic model solutions set left computed paving right For interpretation references color ﬁgure reader referred web version article robots main rigid bar vertical increasing decreasing command q entails vertical motion endeffector impossible robot architecture potential damage robot The green conﬁguration amounts serial singularity restricts robot mobility damaging red conﬁguration parallel singularity damage robot Kinematic model The coordinates revolute joints respectively q x b b architecture parameters corresponding lengths horizontal vertical small rigid bars Then main oblique rigid bar enforces distance points equal length l architecture parameter Hence kinematic model robot deﬁned follows x a2 q b2 l2 1 cid2 The solution set model circle center b radius l depicted Fig 2 left The direct kinematic problem l2 q b2 q b l b l solution consists computing x knowing q leading solutions Similarly inverse kinematic problem consists computing q knowing x leading solutions b l2 x a2 provided x l l solution It noteworthy simple robot representative general case parallel robots solutions direct inverse kinematic problems It typical singularities It serial singularities solution set vertical tangent leftmost rightmost green points left hand graphic Fig 2 parallel singularities solution set horizontal tangent topmost bottommost red points left hand graphic Fig 2 These singularities split solution set singularity free connected components quarters circle robot generalized aspects We determine nonsingular workspace robot projecting aspect x component lines paving Fig 2 right cid2 Certiﬁed approximation generalized aspects This paper uses numerical constraint programming order compute certiﬁcation subsets different aspects called connected sets nonsingular conﬁgurations CSNC follow ing The standard branch prune algorithm adapted way solving robot kinematic model nonsingularity constraints leads enclosure depicted right hand graphic Fig 2 Each solution box certiﬁably crossed single aspect covers box projection x subspace pair neighbor solution boxes certiﬁed share common solution Therefore connected components A1 A2 A3 A4 com puted boxes shown right hand graphic Fig 2 allow separating aspects provide projection inner approximations nonsingular workspace robot S Caro et al Artiﬁcial Intelligence 211 2014 3450 37 Algorithm 1 Branch prune Input NCSP cid5v v ccid6 precision cid2 0 Output pair sets boxes U S 1 L v S U 2 L cid9 3 v ExtractL v Prunecv v cid9 4 5 6 7 8 9 10 11 12 Provecv S S v widv cid2 L L Branchv U U v end end 13 14 end 15 return U S 3 Preliminaries 31 Numerical constraint programming Numerical constraint solving inherits principles methods discrete constraint solving 10 interval anal ysis 11 Indeed variable domains continuous subsets R impossible enumerate possible assignments numeric constraint solvers resorts interval computations As result use socalled interval ex tension f IRn IR function f Rn R involved constraint IRn f f 311 Numerical constraint satisfaction problems A numerical constraint satisfaction problem NCSP deﬁned triple cid5v v ccid6 consists vector variables v v 1 vn initial domain form box v v 1 vn IRn constraint cv fv 0 gv cid3 0 f Rn Re g Rn Ri conjunction e equations inequal ities A solution NCSP assignment variables v v satisﬁes constraints The solution set Σ NCSP region initial domain satisﬁes constraints Σv v v cv 312 The branch prune algorithm The branch prune algorithm 12 standard complete solving method NCSPs It takes problem input outputs sets boxes called respectively undecided boxes stored inside U solution boxes stored inside S It interleaves refutation phase called prune eliminates inconsistent assignments box exploration phase called branch divides box subboxes searched recursively prescribed precision cid2 reached Algorithm 1 shows generic description scheme It involves subroutines Extract extraction box processed Prunec reduction domains based refutation assignments satisfy subset constraint c Provec certiﬁcation box contains solutions constraint c speciﬁc semantic problem dependent Branch division processed box subboxes processed Each instantiated depending problem solved The procedure Prunec obviously depends type constraint problem characteristics problem The procedures Extract Branch allow deﬁning search strategy breadthﬁrst depthﬁrst tuned differently respect problem The procedure Provec actually deﬁnes aim branch prune A box Provec succeeds called solution box Being solution box different meaning depending considered problem question asked For instance question ﬁnd real solutions wellconstrained equations generally implement solution existence uniqueness theorem Miranda Brouwer interval Newton 13 guarantees solution box contains unique real solution hand question compute solution set conjunction inequality constraints usually implement universal solution test guarantees real assignment solution box solution NCSP 38 S Caro et al Artiﬁcial Intelligence 211 2014 3450 32 Parallel robots singularities generalized aspects As illustrated Section 2 kinematic model parallel robot expressed equations relating endeffector pose x commands q fx q 0 2 A solution x q called conﬁguration solution set Σ called conﬁguration manifold lies conﬁguration space called posecommand product space The subspace restricted pose parameters x resp command parameters q known workspace resp jointspace The projection Σx resp Σq solution set Σ called robot reachable workspace resp reachable jointspace In paper restrict typical architectures satisfy dim x dim q dim f n underactuated manipulators Then implicit function theorem equations deﬁnes local bijection x q provided Jacobian matrices Fxx q Fqx q nonsingular The conﬁgurations x q satisfy regularity conditions called singularities respectively parallel serial Fxx q Fqx q singular These algebraic singularity characterizations correspond horizontal vertical tangents kinematic manifold described Section 2 A key issue robotics control robot avoiding singularities particular reaching parallel singu larity dramatically damage robot This leads deﬁnition generalized aspects 4 maximal sets nonsingular conﬁgurations x q connected Σ crossing singularity More formally set nonsin gular conﬁgurations robot cid3 Σ x q Rn Rn fx q 0 det Fxx q cid9 0 det Fqx q cid9 0 cid4 3 This corresponds quarters circle left hand graphic Fig 2 singularities green red points removed As illustrated diagram Σ generally connected components2 Formally generalized aspects robots deﬁned connected components 3 For given generalized aspect A projection Ax maximal singularityfree region robot reachable workspace Knowing regions allows roboticists safely plan robot motions Any poses Ax connected singularityfree path In addition study aspects provides important information robot characteristics x q x q different commands yield pose robot said cuspidal 16 Cuspidal robots change assembly mode crossing singularities yielding extra ﬂexibility usage Finally computation aspects allows roboticists informed choices designing robot given task cid3 exist aspect A q cid9 q cid3 4 Description method The proposed method generalized aspect computation relies solving following NCSP solutions nonsingular conﬁgurations robot cid7 x q cid5 x q cid6 fx q 0 det Fxx q cid9 0 det Fqx q cid9 0 cid8 4 Let Σx q solution set NCSP Our method computes set boxes partly covering solution set This set boxes partitioned subsets represent fully certiﬁed approximations aspects considered robot terms solution existence connectedness solution set The computed boxes satisfy speciﬁc properties stated Section 41 The corresponding branch prune instantiation described Section 42 Finally connections output boxes certiﬁed described Section 43 connected component analysis described Section 44 41 From NCSP model generalized aspects computation We aim computing ﬁnite set boxes S IRn IRn undirected links N 2subsets S satisfying following properties P1 x q S x x unique q q fx q 0 P2 x q S x x q q det Fxx q cid9 0 det Fqx q cid9 0 P3 x q x cid3 N x q x q x cid3 fx q 0 cid3 q cid3 q Property P1 allows deﬁning x q S function κxq x q associates unique command q κxqx given position x solution inverse kinematic problem locally deﬁned inside x q 2 The connected components 14 set subsets connected maximal respect inclusion They deﬁne unique partition set Since Jacobian f rank nonsingular conﬁgurations Σ manifold In case connectedness equivalent pathconnectedness 15 matches requirement path planning S Caro et al Artiﬁcial Intelligence 211 2014 3450 39 Property P2 proves singularity box Furthermore allows applying Implicit Function Theorem prove κxq differentiable continuous inside x Therefore given box x q S solution set restricted box cid6 cid7 x q Σ cid3cid6 cid7 x κxqx cid4 x x proved connected singularity free subset generalized aspect These properties entail particular Σ x q connected manifold subset single aspect x included inside reachable workspace They satisﬁed motivating example output shown Fig 2 right Remark given box x q S position x x corresponding command κxqx easily computed Newton iterations applied fx 0 initial iterate q q q midq Property P3 basically entails Σx q Σx cid3 q cid3 connected subsets aspect Finally assuming Sk S connected component undirected graph S N solution set 5 6 cid9 Σ xqSk cid7 cid6 x q fully certiﬁed belong single generalized aspect Hence ﬁnal output process sets boxes Sk certiﬁed enclose connected set nonsingular conﬁgurations CSNC As mentioned previously certiﬁed approximations CSNCs central importance practical robot design usage purposes 42 Instantiaton branch prune algorithm The main speciﬁcity proposed branch prune algorithm lies solution test Provec function ensure desired properties The pruning branching steps use standard operators tuned appropriately depending considered robot Details provided 421 Solution test The Provec function Algorithm 1 return true properties P1 P2 veriﬁed The related proving existence solution performed parametric Newton operator described following paragraph The requires checking regularity interval matrices described paragraph Existence proof The standard way prove box x q satisﬁes Property P1 use parametric interval Newton existence test 1719 Using HansenSengupta 13 version interval Newton following sequence computed cid11 cid10 q0 q cid11 cid10 qk1 H cid6cid10 cid11cid7 cid11 cid10 qk 7 qk H HansenSengupta operator applied fx q 0 depends variables q square equations interval parameters As soon cid9 qk1 intqk veriﬁed interval Newton operators properties entail x x q q fx q 0 8 box x qk1 proved satisfy Property P1 However Algorithm 1 bisect domain q insuring convergence separating different commands associated pose3 test fails practice situations This issue overcome 19 restricted context constraints form x fq computing qk1 Hqk 7 removing intersection qk order allow inﬂating shifting qk1 neces sary4 As result HansenSengupta operator acts rigorous local search routine allowing sequence converge aimed solution set An inﬂation factor τ applied HansenSengupta operator ease strict inclusion test iteration Hence computation qk1 follows cid11 cid10 qk cid10 mid qk cid11 cid6cid10 cid11 cid10 mid qk qk cid11cid7 τ cid11 cid10 qk1 H cid6cid10 cid11cid7 9 qk Then condition cid9 qk1 int qk implies Property P1 likely succeed soon x q small close nonsingular solution eventually happens thanks bisection process A typical value inﬂation factor τ 101 accurately tuned badly conditioned problems case usual robots 3 In 17 problems unique solution parameter value tackled bisecting variable domains directly parametric existence test 7 4 This intervalNewton driven inﬂation technique global optimization prove feasibility approximate feasible points It instance implemented Intlab 20 function verifynlss It 18 context sensitivity analysis 21 numerical constraint based method dedicated projection manifold 40 S Caro et al Artiﬁcial Intelligence 211 2014 3450 In order satisfy regularity constraints Property P2 interval evaluation Jacobian Fx Regularity test Fq box x q regular Testing regularity interval matrices NPhard suﬃcient conditions usually instead Here use strong regularity square interval matrix A consists checking C A strongly diagonally dominant C usually chosen approximate inverse midpoint A 13 422 Pruning The considered constraints types A n equalities disequalities Since generally allow pruning context numerical CSPs considered pruning In context Prunec function implemented standard AC3like ﬁxedpoint propagation contracting operators enforces local consistencies like Hull 2223 Box consistencies 2224 allows inexpensive refutation nonsolution Moreover stronger consistency achieved intervalNewton based operator Those operators readily apply square systems equations adapted constrained systems equations This detailed Section 421 operators allow proving existence solutions 423 Search strategy The standard search strategy NCSPs applies appropriately context We use deep ﬁrst search strategy Extract function adequate avoids risk ﬁlling memory unlike breadthﬁrst search largestﬁrst search approach The Branch function typically selects variable roundrobin manner domains selected cyclically splits corresponding interval midpoint domain split halves 43 Computing certifying links The computation N links satisfy Property P3 steps 1 Maintain neighborhood graph R M R L S U set boxes produced algorithm deﬁned graph boxes R share common point 2 Compute certiﬁed neighborhood graph S N N M 2 S set links certiﬁed boxes satisfy Property P3 S N generally strict subset M 2 Indeed certiﬁed boxes nonempty intersection contain different components Σ Note R M S N play similar roles G 8 431 Maintaining neighborhood graph cid3 q Two boxes x q x cid3 q cid3 neighbors share common point x q cid3 cid9 The neighborhood links M maintained branch prune computation After current box x pruned line 4 Algorithm 1 neighbors updated accordingly lost neighbors boxes produced splitting current box line 9 Algorithm 1 inherit neighbors current box neighbors One delicate point managing neighborhood comes fact pose command parameters angles domains restricted single period π π periodicity parameters taken account Boxes neighbors share common point modulo 2π periodic dimensions 432 Certifying connectivity neighbors S The links M 2 certiﬁed boxes checked satisfy P3 It happen neighbor boxes share common point satisfying kinematic relation f 0 cover portion disjoint close aspects Asserting neighborhood Property P3 requires certiﬁcation procedure For pair neighbor certiﬁed boxes x q x cid10 cid3 q S cid3 M 2 cid6 cid6 x f cid3 q cid11cid7 verify cid7 q q q 0 cid10 x 10 mid cid11cid7 cid6 cid3 implies Σx q Σx connected proves Σx q Σx cid3 q cid3 belong aspect cid3 q cid3 cid9 Since union connected sets nonempty intersection Using certiﬁcation procedure described Section 42 allows proving Eq 10 Finally N deﬁned subset S M 2 pairs satisfy 10 obviously satisfy Property P1 Property P2 Property P3 44 Connected components computation We present ways compute connected sets nonsingular conﬁgurations CSNCs graphs R M S N S Caro et al Artiﬁcial Intelligence 211 2014 3450 41 Fig 3 Singular singularity 441 Simple CSNCs construction The ﬁrst simply consists computing connected components Si Ni graph S N standard algo rithm graph connected component computation 25 This leads partition S Si Si covering single aspect considered robot However certiﬁed information disconnectedness different components The major portion large aspect covered single CSNC instability proving process close singular regions implies small spurious CSNCs appear boundaries Together fact small aspects covered certiﬁed boxes reason number computed CSNCs related exact number aspects robot For practical considerations spurious CSNCs eliminated measure size All computed CSNCs ordered decreasing number constituting boxes The largest ratio number constituting boxes consecutive CSNCs order computed separation relevant spurious components Though heuristic Section 5 ﬁltering process allows retrieving signiﬁcant CSNCs fact corre spond exact aspects robots known 442 CSNCs construction separation The second approach complex provides information term connectedness The main computed CSNCs proved actually separated different determinant signs disconnected R M However happen generalized aspects separable numerically conditions illustrated following example Example Consider manifold Σ x R3 x2 1 x1x2 cid9 0 It 4 connected components x2 3 1 illustrated left hand graphic Fig 3 However components connected inﬁnitely close making separation impossible box classiﬁcation respect sign x1x2 Note situation generic By slightly perturbing separating equation Σ x R3 x2 1 x1x2 cid9 001 1 depicted right hand Fig 3 obtain connected components separated sign x1x2 001 x2 2 x2 3 x2 2 The undecidable status illustrated previous example actually generic robots As soon determinants det Fxx q det Fqx q formally factored Jacobians diagonal case determinant product diagonal entries aspects turn non separable signs determinants In order overcome diﬃculty exploiting structure determinants mandatory When possible factor product det Fxx q det Fqx q d1x q dpx q instead recording sign det Fxx q det Fqx q box record sign dix q For possible s s1 sp 1 1p deﬁne Rs Ms R M subgraphs R M boxes satisfy sup sidix q cid3 0 Rs contains boxes interval evaluations dix q signs compatible s Then 1 Is Rs Ms Finally compute connected compute connected components Rs components Rs containing certiﬁed boxes links denote S s j j 1 J si J si cid3 0 J si equal zero Rs contains certiﬁed box link N subgraph Rs S Ms Ms Ms Ms j N s 42 S Caro et al Artiﬁcial Intelligence 211 2014 3450 Fig 4 Considered robot architectures Obviously boxes different Rs Ms Rs icid3 Ms cid3 cid3 icid3 contain solutions belong aspect cid3 card 1 Is J si 0 cid4 11 Therefore cid12 s11p lower bound number aspect On hand mentioned previous subsection expect S s j N s j contain numerous spurious CSNCs instability proving process close singular regions The heuristic ﬁltering isolate largest CSNCs practical 5 Experiments We present experiments planar robots respectively 2 3 degrees freedom yielding respectively ﬁguration manifold dimension 2 3 embedded conﬁguration space dimension 4 6 Although dimensions low represent real challenges methods certify admissibility connectivity 51 Implementation We implemented proposed method described Section 4 Realpaver library 26 C specializing classes different routines branch prune algorithm Given NCSP models robot pre scribed precision cid2 implementation outputs certiﬁed boxes grouped certiﬁed connected components explained Section 4 Hence count number output boxes number certiﬁed connected set nonsingular conﬁgurations CSNCs extracted The experiments run 34 GHz Intel Xeon processor 16 GB RAM 52 Robot models Robot RPRPR resp RRRRR represented inFig 4 resp Fig 4b It arms connecting anchor point A B endeffector P composed revolute joint prismatic resp revolute joint revolute joint sequence The endeffector P lies shared extremal revolute joint described 2D point x1 x2 20 202 The prismatic resp initial revolute joint arm actuated allowing vary arms lengths resp angles The arm lengths resp angles considered command q1 q2 2 6 4 9 resp π π 2 robot Using architecture parameters deﬁned 27 resp 4 kinematic equations respectively S Caro et al Artiﬁcial Intelligence 211 2014 3450 43 Table 1 Experimental results aspects precision boxes boxesﬁltered CSNCs CSNCsﬁltered CSNCsseparated time s PRRP 4 01 38 28 4 4 4 0003 RPRPR 2 01 2176 1444 4 2 2 036 RRRRR 10 01 69 612 53 062 1767 10 10 38 3RPR 2 03 13 564 854 5 833 951 44 220 2 2 12 700 3RRR unknown 0008 11 870 068 5 841 193 56 269 25 25 10 700 0 q2 1 x2 x2 1 2 x1 92 x2 2 q2 2 0 x1 8 cos q12 x2 8 sin q12 25 0 x1 9 5 cos q22 x2 5 sin q22 64 0 Robot 3RPR resp 3RRR represented Fig 4c resp Fig 4d It arms connecting anchor point A1 A2 A3 endeffector P composed revolute joint prismatic resp revolute joint revolute joint sequence The endeffector triangular platform vertices attached extremal revolute joints arms The pose parameters x1 x2 x3 represent coordinates x1 x2 50 502 vertex platform angle x3 π π basis horizontal axis The prismatic resp initial revolute joint arm actuated allowing vary arm lengths resp angles The arm lengths resp angles considered command q1 q2 q3 10 323 resp π π 3 robot Using architecture parameters deﬁned 28 resp 27 kinematic equations 0 x2 2 q2 1 x2 1 x1 17 cos x3 1592 x2 17 sin x32 q2 2 cid6 cid7 2 x1 208 cosx3 08822 0 x2 208 sinx3 08822 10 cid6 cid7 2 q2 3 0 respectively x1 10 10 cos q12 x2 10 10 sin q12 100 0 x1 10 cos x3 10 10 cos q22 x2 10 sin x3 10 10 sin q22 100 0 cid6 2 x1 10 2 cosx3 π 4 10 cos q3 2 sinx3 π 4 10 10 sin q3 x2 10 cid6 cid7 cid7 2 100 0 Due computational complexity method added extra constraint x3 0 model robot 3RRR ﬁxing orientation platform This constraint virtually reduces dimension problem 5 instead 6 making tractable reasonable time method Results integrate additional constraint denote modiﬁed robot 3RRR following 521 History applications planar parallel robots study We ﬁnd studies planar parallel robots study practical applications literature The RPRPR robot called bipod robot socalled hexapod machine tools widespread 29 famous GoughStewart platforms commonly met ﬂightsimulators 30 Thebipod robot design Micromat Hexa industrial machine developed IWU Chemnitz design CMW300 industrial robot developed Compagnie Mécanique des Vosges France 31 The RRRRR robot usually called ﬁvebar mechanism research papers illustrative example simplicity interesting kinematic properties similar spatial robots working assembly modes 4 ii error analysis assembly conditions 3233 iii generalized aspects 34 iv trajectory planning 35 There exist prototypes RRRRR robot Dexterous TwinArm Robot DexTAR developed Prof Bonev team 36 A reference book kinematics static analysis stiffness 3DOF planar parallel robots composed revolute andor prismatic joints published Duffy 37 There studies robots 3RPR planar parallel robots extensively studied 2 synthesis kinematic singularity analysis workspace analysis 3RRR planar parallel robots studied 3840 Some prototypes based architecture 3RRR planar parallel robot developed NaVARo actuation modes thanks transmissions clutches additional parallelogram linkages 41 44 S Caro et al Artiﬁcial Intelligence 211 2014 3450 Fig 5 Number boxes connected component Each bar corresponding CSNC shows number contained boxes ordered largest ﬁrst The rightmost bar histogram corresponds largest CSNC ﬁltered heuristic 53 Computation CSNCs Table 1 provides ﬁgures computations Its columns represent different robots consider Line pects provides theoretically established number aspects robot provided 27428 value unknown 3RRR robot Line precision gives prescribed precision cid2 computation Lines boxes CSNCs respectively number boxes number connected sets nonsingular conﬁgurations returned method Line time gives overall computational time seconds method including connected com ponents computation connectivity certiﬁcation Note timing contain time taken ﬁltering spurious CSNCs Despite coarse precisions number output boxes large dimension search space paving The number CSNCs smaller match theoretically known number aspects PRRP simple implying numerous disjoint CSNCs fact belong aspect As explained Section 44 numerical instability kinematic equations robots vicinity aspect boundaries singularities robot Indeed regions numerical certiﬁcation process operate homogeneously resulting disconnected subsets certiﬁed boxes separated noncertiﬁed boxes noncertiﬁed links These spurious CSNCs practical use robotics represent small negligible regions reachable workspace close singularities safely operate For practical considerations ﬁlter explained Section 441 Applying heuristic practical postprocess number obtained CSNCs reported Line CSNCsﬁltered inTable 1 reaches theoretically known number aspects cases robots considered Line boxesﬁltered Table 1 shows total number boxes ﬁltering heuristic retained ﬁltering dashed lines represent computed Fig 5 illustrates number boxes CSNCs heuristic thresholds number boxes largest spurious ﬁltered CSNC right dashed line Line CSNCsseparated gives lower bounds number aspects computed method described Section 442 These results indicate assumption correct considered robots major aspect covered single large CSNC The retained CSNCs projected x subspace depicted Figs 6 75 They graphically correspond aspects robots theoretically known 277428 Note red boxes enclose singularity curves cross aspects projection workspace course cross conﬁguration space boxes computed proved certify Property P2 The computation requires quickly growing time space respect prescribed precision cid2 parameter controls explosion number spurious components boxes boundaries aspects We need tweak eﬃcient reliable aspect determination For ﬁrst robots precision cid2 01 gave precise results compute precisely CSNCs corresponding known aspects ﬁltering spurious components For 3RPR use coarser precision cid2 03 avoid getting memory Still suﬃcient compute precise CSNCs approximating known aspects robot In computation 3RRR threshold regular spurious components clear robots improved precision cid2 0008 Nevertheless largest CSNCs practical usage context robotics deciding 5 Figures available httpwwwuedainfowasedaacjpishiipubaspects S Caro et al Artiﬁcial Intelligence 211 2014 3450 45 Fig 6 Computed 3D workspace 3RPR ﬁltering First ﬁgure shows undecided boxes cover surface workspace Second ﬁgures computed CSNCs corresponding aspects For interpretation references color ﬁgure reader referred web version article small CSNCs spurious critical According ﬁltering criterion selected 25 largest ones depicted Fig 7 54 Handling additional constraints In process robot design properties veriﬁed addition aspect identiﬁcation In framework properties handled simply adding constraints robots models intrinsic strength NCSPs based method respect methods based formal computations In following investigate impact recurrent issues robotics Selfcollisions different robot links joint limits collision obstacles inside workspace We use RRRRR robot illustrative example The considered additional constraints inequality constraints More precisely formulated conjunctions andor disjunctions inequalities Therefore involved pruning proving solution boxes proved fully satisfy additional constraints addition properties P1 P2 P3 deﬁned page 5 Note additional constraints expressions trivial contractor simply uses interval evaluations check box contains solution 541 Arm collisions First avoid collisions arms RRRRR robot The required additional constraint consists enforcing collision pair links For arbitrary pair links T U V W T U V W respective endpoints nonintersection mathematically expressed λ 0 1 μ 0 1 λ T 1 λU cid9 μ V 1 μW One constraint imposed pair links robot Inner outer tests constraint easily derived Link collisions happen fulldimensional regions workspace Indeed links intersect given pose intersect neighbor poses intersecting extremities Hence link collisions constraints deﬁne colliding regions removed computed CSNCs Fig 8 illustrates facts Fig 8a presents CSNCs previously obtained RRRRR robot Fig 7b Fig 8b shows component reduced considering link collisions presents poses explain reduction Pose P 1 induces link colli sion remains collisionfree CSNC Pose P 2 previously belonged CSNC belong collisionfree CSNC induces link collision The fulldimensional regions corresponding collision collision free conﬁgurations separated boundary corresponds tangential collisions They depicted blue contrast red boundaries represent singularities robot Note like singularities collision boundaries overlap collisionfree components projection 2D workspace paving computed 4D conﬁguration space Results depicted Fig 9 We set precision 001 better visualization collision boundaries cruder precision suﬃcient obtain collisionfree CSNCs As previous experiment obtain CSNCs collision free They correspond collisionfree subregions CSNCs obtained previously Note previously obtained components remain unaffected additional constraint collisionfree As Fig 8 blue boxes ﬁgure represent collision boundaries end point link comes touch link 542 Joint limits In second experiment compute CSNCs considering joint limits inherent real mecha nisms Limits range actuated joints easily enforced setting corresponding domains Instead consider cid3 joint limits nonactuated joints In RRRRR robot consists limiting angle links A inside interval θ θ This equivalent conjunction following twosided inequality constraints P P B cid3 θ cid2 cos 1 cid5u vcid6 cid18ucid18cid18vcid18 cid2 θ 46 S Caro et al Artiﬁcial Intelligence 211 2014 3450 Fig 7 Projections 2D workspace computed CSNCs ﬁltering Green boxes certiﬁed red black boxes undecided satisfy Properties P1 P2 respectively For interpretation references color ﬁgure legend reader referred web version article S Caro et al Artiﬁcial Intelligence 211 2014 3450 47 Fig 8 Aspect decomposition RRRRR respect additional constraints For interpretation references color ﬁgure reader referred web version article θ cid2 sin 1 vcid6 cid5u cid18ucid18cid18vcid18 cid2 θ u P A cid3 v P B cid3 u u2 u1 cid5 cid6 scalar product As link collisions constraint remove regions computed CSNCs Fig 8c presents joint limited CSNCs RRRRR robot resulting original CSNC depicted Fig 8a angle endeffector P limited π 2 π 2 It presents poses Pose P 1 consistent joint limit remains original jointlimited CSNC Pose P 2 belong original CSNC belong computed jointlimited CSNC pose joint limit respected Blue boxes represent joint limit boundaries limited joint angle π 2 π 2 The jointlimited CSNCs depicted Fig 10 We jointlimited CSNCs ﬁrst sixth original CSNCs Fig 7b split joint limit constraint 48 S Caro et al Artiﬁcial Intelligence 211 2014 3450 Fig 9 Computed CSNCs RRRRR taking account link collisions For interpretation references color ﬁgure reader referred web version article Fig 10 Computed CSNCs RRRRR limited angle For interpretation references color ﬁgure reader referred web version article 543 Collision obstacles The experiment takes account collision robot links obstacle workspace We assume circular obstacle centered point C radius R For link T U robot collisionfreeness described constraint dist2C T U cid3 R2 cid6 cid7 C T U dist2 cid5C T C T cid6 cid5C U C U cid6 cid5C T C T cid6 cid5U T CT cid62 cid5U T U T cid6 cid5U T C T cid6 0 cid5T U C U cid6 0 Again obstacle avoidance constraint yields collision regions collisionfree regions aspects Fig 8d presents collisionfree CSNCs RRRRR robot resulting CSNC depicted Fig 8a circular obstacle black located C 45 0 radius R 1 avoided It presents poses Pose P 1 induces collision obstacle remains collisionfree CSNC Pose P 2 belong original CSNC belong collisionfree CSNCs pose link overlaps obstacle Again blue boxes represent boundaries collisionfree collision regions The collisionfree CSNCs depicted Fig 11 We collisionfree CSNCs ﬁrst sec ond sixth seventh eighth original CSNCs Fig 7b split parts respectively S Caro et al Artiﬁcial Intelligence 211 2014 3450 49 6 Conclusion Fig 11 Computed CSNCs RRRRR circular obstacle The computation aspects connected components nonsingular conﬁgurations critical task design analysis parallel robots The proposed algorithm uses numerical constraint programming fully certify computation It worth noting ﬁrst algorithm automatically handles large class kinematic models fully certifying conﬁgurations existence nonsingularity connectivity The restriction algorithm computational complexity exponential respect number degrees freedom robot The presented experiments reported sharp approximations aspects realistic models Large connected sets nonsingular conﬁgurations particularly suitable path planning computed wellknown planar robots degrees freedom number matches exact number aspects The challenging 3RRR planar parallel robot number aspects open question remains reach com plexity computation obtained promising results given orientation movingplatform Tackling robot complex spatial ones certainly require deﬁnition stronger dedicated operators probably change computing paradigm parallelepipeds 42 instead boxes Finally experiments shown proposed method computes approximations aspects wellknown robots rigorously counting aspects challenge address future basis method Acknowledgements This work partially funded French agency ANR project SIROPA PSIROB06_174445 JSPS KAKENHI 233810 The experiments supported Prof Kazunori Ueda Waseda University Tokyo References 1 X Kong C Gosselin Type Synthesis Parallel Mechanisms Springer 2007 50 S Caro et al Artiﬁcial Intelligence 211 2014 3450 2 JP Merlet Parallel Robots Kluwer Dordrecht 2000 3 S Amine M TaleMasouleh S Caro P Wenger C Gosselin Singularity conditions 3T1R parallel manipulators identical limb structures ASME J Mech Robot 4 1 2012 011011101101111 4 D Chablat P Wenger Working modes aspects fully parallel manipulators International Conference Robotics Automation vol 3 1998 pp 19641969 5 D Chablat G Moroz P Wenger Uniqueness domains non singular assembly mode changing trajectories International Conference Robotics Automation 2011 pp 39463951 6 JP Merlet A formalnumerical approach robust inworkspace singularity detection IEEE Trans Robot 23 3 2007 393402 7 D Chablat Joint space workspace analysis twodof closedchain manipulator Proc ROMANSY 18 Robot Design Dynamics Control Springer 2010 pp 8190 8 L Jaulin Path planning intervals graphs Reliab Comput 7 1 2001 115 9 N Delanoue L Jaulin B Cottenceau Guaranteeing homotopy type set deﬁned nonlinear inequalities Reliab Comput 13 5 2007 381398 httpdxdoiorg101007s1115500790438 10 U Montanari Networks constraints Fundamentals properties applications picture processing Inf Sci 7 2 1974 95132 11 R Moore Interval Analysis PrenticeHall 1966 12 P Van Hentenryck D Mcallester D Kapur Solving polynomial systems branch prune approach SIAM J Numer Anal 34 1997 797827 13 A Neumaier Interval Methods Systems Equations Cambridge University Press 1990 14 J Munkres Topology PrenticeHall 2000 15 J Lee Introduction Topological Manifolds Grad Texts Math Springer 2010 16 P Wenger Cuspidal noncuspidal robot manipulators Robotica 25 6 2007 717724 17 A Goldsztejn A branch prune algorithm approximation nonlinear AEsolution sets Proc ACM SAC 2006 2006 pp 16501654 18 A Goldsztejn Sensitivity analysis ﬁxed point interval iteration Tech rep hal00339377 CNRSHAL 2008 19 A Goldsztejn L Jaulin Inner approximation range vectorvalued functions Reliab Comput 14 2010 123 20 S Rump INTLAB INTerval LABoratory T Csendes Ed Developments Reliable Computing Kluwer Academic Publishers 1999 pp 77104 21 D Ishii A Goldsztejn C Jermann Intervalbased projection method underconstrained numerical systems Constraints 17 4 2012 432460 22 F Benhamou F Goualard L Granvilliers JF Puget Revising hull box consistency Proc International Conference Logic Programming 1999 pp 230244 23 O Lhomme Consistency techniques numeric CSPs Proc IJCAI 1993 1993 pp 232238 24 A Goldsztejn F Goualard Box consistency adaptive shaving Proc ACM SAC 2010 2010 pp 20492054 25 J Hopcroft R Tarjan Algorithm 447 eﬃcient algorithms graph manipulation Commun ACM 16 6 1973 372378 26 L Granvilliers F Benhamou Algorithm 852 Realpaver interval solver constraint satisfaction techniques ACM Trans Math Softw 32 1 2006 138156 27 D Chablat Domaines dunicité et parcourabilité pour les manipulateurs pleinement parallèles PhD thesis École Centrale Nantes 1998 28 M Coste A simple proof generic 3RPR manipulators aspects Tech rep Institut Recherche Mathématique Rennes IRMAR 2010 29 P Zou Kinematic analysis biglide parallel grinder J Mater Process Technol 138 13 2003 461463 30 L Du Plessis J Snyman Design optimum operation reconﬁgurable planar GoughStewart machining platform 3rd Chemnitzer Parallelkine matik Seminar 2002 pp 729749 31 P Wenger C Gosselin B Maillé Comparative study serial parallel mechanism topologies machine tool Int Workshop Parallel Kinematic Machines 1999 pp 2335 32 N Binaud P Cardou S Caro P Wenger Kinematic sensitivity robotic manipulators joint clearances Proceedings ASME Design Engineering Technical Conferences Montreal QC Canada 2010 33 G Wu S Bai J Kepler S Caro Error modeling experimental validation planar 3PPR parallel manipulator joint clearances ASME J Mech Robot 4 2012 041008104100812 34 S Caro P Wenger D Chablat Nonsingular assembly mode changing trajectories 6DOF parallel robot Proceedings ASME 2012 Interna tional Design Engineering Technical Conferences Computers Information Engineering Conference IDETCCIE Chicago Illinois USA 2012 35 C Barnard S Briot S Caro Trajectory generation high speed pick place robots Proceedings ASME 2012 11th Biennial Conference Engineering Systems Design Analysis ESDA 2012 Nantes France 2012 36 A Joubair M Slamani IA Bonev Kinematic calibration ﬁvebar planar parallel robot working modes Robot ComputIntegr Manuf 29 4 2013 1525 37 J Duffy Statics Kinematics Applications Robotics Cambridge University Press New York 1996 38 K Hunt Structural kinematics parallel actuated robot arms J Mech Transm Autom Des 105 4 1983 705712 39 C Gosselin Kinematic analysis optimization programming parallel robotic manipulators PhD thesis McGill University Montreal 1988 40 M Husty On workspace planar threelegged platforms World Automation Congress vol 3 1996 pp 339344 41 N Rakotomanga D Chablat S Caro Performance planar parallel mechanism variable actuation Advances Robot Kinematics 2008 pp 311320 42 A Goldsztejn L Granvilliers A new framework sharp eﬃcient resolution NCSP manifolds solutions Constraints 15 2 2010 190212