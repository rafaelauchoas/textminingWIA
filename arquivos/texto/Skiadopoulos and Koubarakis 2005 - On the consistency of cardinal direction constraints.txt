Artiﬁcial Intelligence 163 2005 91135 wwwelseviercomlocateartint On consistency cardinal direction constraints Spiros Skiadopoulos Manolis Koubarakis b Knowledge Database Systems Laboratory School Electrical Computer Engineering National Technical University Athens Zographou 157 73 Athens Greece b Intelligent Systems Laboratory Department Electronic Computer Engineering Technical University Crete Chania 731 00 Crete Greece Received 3 December 2003 accepted 18 October 2004 Available online 15 December 2004 Abstract We present formal model qualitative spatial reasoning cardinal directions utilizing ordinate Then study problem checking consistency set cardinal direction constraints We introduce ﬁrst algorithm problem prove correctness analyze computational complexity Utilizing algorithm prove consistency checking set basic nondisjunctive cardinal direction constraints performed On5 time We consistency checking set unrestricted disjunctive nondisjunctive cardinal direction constraints NPcomplete Finally brieﬂy discuss extension basic model outline algorithm consistency checking problem extension 2004 Elsevier BV All rights reserved Keywords Cardinal direction relations Spatial constraints Consistency checking Qualitative spatial reasoning This greatly revised extended version paper appears Proc CP02 Lecture Notes Comput Sci vol 2470 Springer Berlin 2002 pp 341355 Corresponding author Email addresses spirosdblabecentuagr S Skiadopoulos manolisintelligencetucgr M Koubarakis URLs httpwwwdblabecentuagrspiros S Skiadopoulos httpwwwintelligencetucgrmanolis M Koubarakis 00043702 matter 2004 Elsevier BV All rights reserved doi101016jartint200410010 92 S Skiadopoulos M Koubarakis Artiﬁcial Intelligence 163 2005 91135 1 Introduction Qualitative spatial reasoning received lot attention areas Geographic Information Systems 1315 Artiﬁcial Intelligence 6813293638 Databases 32 Multimedia 44 Qualitative spatial reasoning problems recently posed straint satisfaction problems solved traditional algorithms pathconsistency 38 One important problems area identiﬁcation useful tractable classes spatial constraints study efﬁcient algorithms consistency checking minimal network computation 38 Several kinds useful spatial constraints studied far topological constraints 5612133638 cardi nal direction constraints 172541 qualitative distance constraints 1448 In paper concentrate cardinal direction constraints 172532 Cardinal di rection constraints regions space placed relative utilizing coordinate region north region b Currently model Goyal Egenhofer 1617 Skiadopoulos Koubarakis 4042 ex pressive models qualitative reasoning cardinal directions The model present paper closely related model signiﬁcant differ ence The model 16174042 basically deals extended regions connected connected boundaries approach allows regions disconnected holes The regions consider common Geography Multimedia Image Databases 4744 For example countries separations islands ex claves external territories holes enclaves 7 We study problem checking consistency given set cardinal direc tion constraints model Checking consistency set constraints model spatial information fundamental problem received lot attention literature 253238 Algorithms consistency checking immediate use situations including Propagating relations detecting inconsistencies given set spatial relations 2538 Preprocessing spatial queries inconsistent queries detected search space pruned 31 The technical contributions paper summarized follows 1 We present formal model qualitative reasoning cardinal directions This model related model 16174042 currently expres sive models qualitative reasoning cardinal directions The proposed model formally deﬁnes cardinal direction relations extended regions discon nected holes The deﬁnition cardinal direction relation uses types constraints order constraints b setunion constraints a1 a2 2 We use formal framework study problem checking consistency given set cardinal direction constraints proposed model We present ﬁrst algorithm problem prove correctness The algorithm interesting nontrivial step avoid explicitly obvious S Skiadopoulos M Koubarakis Artiﬁcial Intelligence 163 2005 91135 93 computational costly setunion constraints resulting deﬁnition cardinal direction relations 3 We present analysis computational complexity consistency checking problem cardinal direction constraints We aforementioned problem given set basic nondisjunctive cardinal direction constraints n vari ables solved On5 time Moreover prove checking consistency set unrestricted disjunctive nondisjunctive cardinal direction straints NPcomplete 4 Finally consider consistency checking problem set cardinal direction constraints expressed interesting extension basic model outline algorithm task This extension considers extended regions points lines The rest paper organized follows In Section 2 survey related work Section 3 presents cardinal direction relations constraints model In Sec tion 4 discuss consistency checking set basic cardinal direction constraints expressed model Section 3 present ﬁrst algorithm task Sec tion 5 studies computational complexity consistency checking problem basic unrestricted sets cardinal directions constraints In Section 6 outline algorithms consistency checking interesting extension basic cardinal direction model completed Finally Section 7 offers conclusions proposes future directions 2 Related work Qualitative spatial reasoning forms important commonsense reasoning required building successful intelligent systems 10 Most researchers qualitative spatial reasoning dealt main classes spatial information topological directional distance Topological constraints boundaries interiors exteriors regions relate 56123638 For instance b regions includes b externally connects b topological constraints Directional orientation constraints regions placed relative 113 151725324041 For instance north b southeast b directional constraints Finally distance constraints relative distance regions 1448 For stance far b close b distance constraints In paper concentrate cardinal direction constraints 17253240 Earlier qualitative models cardinal direction relations approximate spatial region repre sentative point commonly centroid representative box commonly minimum bounding box 141520252932 Depending particular spatial conﬁguration approximations crude 1617 Thus expressing direction relations approximations mis leading contradictory related observations 283445 For instance respect pointbased approximation Spain northeast Portugal Most people agree northeast accurately relation Spain Portu 94 S Skiadopoulos M Koubarakis Artiﬁcial Intelligence 163 2005 91135 Fig 1 Problems point minimum bounding box approximations gal map Fig 1a Similar examples common geography Consider direction relation Ireland UK Fig 1b Summarizing demand formulation model expresses direction relations extended objects overcomes limitations pointbased boxbased approximation models With problem mind Goyal Egenhofer 1617 Skiadopoulos Koubarakis 4042 presented model express cardinal direction lation region respect region b approximating b minimum bounding box exact shape Informally model divides space reference region b minimum bounding box areas records areas primary region falls Fig 1c This gives direction relation primary reference region Relations model clearly expressive point boxbased models The model 1740 deals connected regions connected boundary The model present Section 3 variation original model 1740 allows regions disconnected holes Such regions common Geography Multimedia Image Data bases 4744 For instance UK separated territories Northern Ireland Great Britain Fig 1b The consistency checking problem studied classes spatial constraints For instance consistency checking examined great extent topological constraints 1938 pointbased direction constraints 25 boxbased direction constraints 320 Apart form spatial relations consistency checking studied qualitative relations For example Nebel Bürckert 30 consider problem 13 interval relations Allen 2 van Beek 46 relations point algebra Typically cases consistency checking problem posed constraint satisfaction problem solved traditional algorithms like path consistency 38 For qualitative spatial temporal models checking consistency set constraints pathconsistency method based composition Unfortunately case cardinal direction relations studied paper composition decide consistency 42 In following section ﬁrst formally deﬁne cardinal direction constraints present direct algorithm checks consistency given set cardinal direction constraints S Skiadopoulos M Koubarakis Artiﬁcial Intelligence 163 2005 91135 95 3 A formal model cardinal direction information We consider Euclidean space R2 Regions deﬁned nonempty bounded sets points R2 Let region The projection region xaxis denoted Πx deﬁned set xcoordinates points Similarly deﬁne projection region yaxis denoted Πya The projection xaxis yaxis disconnected region general bounded set real numbers If region connected projection xaxis respectively yaxis forms single interval xaxis respectively yaxis A real number m R lower bound set real numbers I iff m cid1 x x I If lower bound I greater lower bound I called greatest lower bound inﬁmum denoted inf I Similarly deﬁne upper bound supremum set real numbers I denoted supI 26 The inﬁmum supremum set real numbers called endpoints For clarity denote greatest lower bound projection region xaxis inf Πx infxa Similarly supx infya supya shortcuts supΠxa inf Πy supΠy respectively Let region We box iff rectangular region formed straight lines x c1 x c2 y c3 y c4 c1 c2 c3 c4 real constants c1 cid1 c2 c3 cid1 c4 Moreover iff c1 c2 c3 c4 hold nontrivial box A box trivial point vertical line segment horizontal line segment The minimum bounding box region denoted mbba box formed straight lines x infxa x supxa y infy y supya Fig 2 Ob viously projections xaxis respectively yaxis region minimum bounding box endpoints We consider paper following types regions Regions homeomorphic closed unit disk set x y x2 y2 cid1 1 The set regions denoted REG Regions REG closed nected connected boundaries deﬁnitions 927 Class REG excludes Fig 2 A region bounding box 96 S Skiadopoulos M Koubarakis Artiﬁcial Intelligence 163 2005 91135 disconnected regions regions holes points lines regions emanating lines Connected regions previously studied 173542 Regions REG model variety complexity geographic entities 7 Thus extend class REG order accommodate disconnected regions regions holes The set regions denoted REG A region belongs set REG iff exists ﬁnite set regions a1 REG a1 set REG contains regions formed ﬁnite union regions REG Set REG natural extension REG useful model possibly disconnected land parcels countries Geographic Information Systems 71214 areas image containing similar chromatic arrangements 4 Notice results Sections 4 5 6 affected consider regions homeomorphic open unit disk 35 The class regions consider extension covers arbitrary shapes R2 Regions R2 regions REG points lines regions emanating lines In Fig 3 regions b1 b2 b3 REG REG region b b1 b2 b3 REG REG Notice region b disconnected hole Fig 4 presents regions REG REG Points Fig 4a lines Fig 4b regions emanating lines Figs 4cd homeomorphic closed unit disk All regions Fig 4 naturally R2 In rest section deﬁne model expresses cardinal direction lations regions REG Then Sections 4 5 study problem checking consistency given set cardinal direction constraint model The aforementioned problem regions R2 discussed Section 6 The following straightforward proposition expresses important property regions REG Fig 3 Regions Fig 4 Regions REG S Skiadopoulos M Koubarakis Artiﬁcial Intelligence 163 2005 91135 97 Fig 5 Reference tiles relations Proposition 1 If REG mbba nontrivial box Equivalently following inequalities hold infx supxa infy supya Let consider arbitrary regions b REG Let region related region b cardinal direction relation north b Region b called reference region region relation described region called primary region region relation described 17 The axes forming minimum bounding box reference region b divide space 9 tiles Fig 5a The peripheral tiles correspond cardinal direction relations south southwest west northwest north northeast east southeast These tiles denoted Sb SWb W b NWb Nb NEb Eb SEb respectively The central area corresponds regions minimum bounding box denoted Bb By deﬁnition tiles includes parts axes forming Notice tiles closed tiles Bb unbounded union 9 tiles R2 distinct tiles disjoint interiors share point boundaries instance W b Bb share leftside minimum bounding box b If primary region included settheoretic sense tile Sb refer ence region b Fig 5b south b write S b Similarly deﬁne southwest SW west W northwest NW north N northeast NE east E southeast SE bounding box B relations Notice despite fact tiles common boundaries determine tile reference region b given primary region REG falls class REG include points lines This points lines tiles W B time excluding regions domain REG achieve disjointness relations If primary region lies partly area NEb partly area Eb reference region b Fig 5c partly northeast partly east b write NEE b The general deﬁnition cardinal direction relation framework follows 98 S Skiadopoulos M Koubarakis Artiﬁcial Intelligence 163 2005 91135 Deﬁnition 1 A basic cardinal direction relation expression R1 Rk 1 cid1 k cid1 9 ii R1 Rk B S SW W NW N NE E SE iii Ri cid4 Rj j 1 cid1 j cid1 k cid4 j A basic cardinal direction relation R1 Rk called singletile k 1 called multitile Example 1 The following basic cardinal direction relations S NEE BSSWW NWNESE The ﬁrst relation singletile multitile Regions involved relations shown Figs 5b 5c 5d respectively In order avoid confusion write singletile elements cardinal direction relation according following order B S SW W NW N NE E SE Thus write BSW instead W BS SBW We avoid settheoretic notation basic relation reserve disjunctive ones section The readers aware basic relation BSW refer B S W tiles 31 Deﬁning basic cardinal direction relations formally Let ﬁrst start formally deﬁning singletile cardinal direction relations model Deﬁnition 2 Let b regions REG Relations B S SW W NW N NE E SE deﬁned follows B b S b SW b W b NW b N b NE b E b SE b iff iff iff iff iff iff iff iff iff infxb cid1 infx supx cid1 supxb infyb cid1 infy supy cid1 supyb infxb cid1 infx supx cid1 supxb supya cid1 infyb supx cid1 infx b supya cid1 infy b supx cid1 infx b infy b cid1 infya supy cid1 supyb supx cid1 infx b supyb cid1 infy supx cid1 supxb supy b cid1 infya infxb cid1 infxa supx b cid1 infxa supyb cid1 infy supx b cid1 infxa infy b cid1 infya supy cid1 supyb supy cid1 infy b supxb cid1 infx Using singletile relations setunion deﬁne multitile ones For instance relation NEE Fig 6a relation BSSWW NWNESE Fig 6b deﬁned follows S Skiadopoulos M Koubarakis Artiﬁcial Intelligence 163 2005 91135 99 Fig 6 Relations component variables NEE b BSSWW NWNSEE b iff iff exist regions a1 a2 REG a1 a2 a1 NE b a2 E b exist regions a1 a8 REG a1 a2 a3 a4 a5 a6 a7 a8 a1 B b a2 S b a3 SW b a4 W b a5 NW b a6 N b a7 SE b a8 E b In general multitile cardinal direction relation deﬁned follows Deﬁnition 3 Let b regions REG For 2 cid1 k cid1 9 R1 Rk b holds iff exist regions a1 ak REG a1 R1 b ak Rk b a1 ak cid3 cid1 cid2 9 9 i1 The variables a1 ak equivalence deﬁnes basic cardinal direction relation called component variables corresponding vari able Notice j 1 cid1 j cid1 k cid4 j regions ai aj disjoint interiors share points boundaries Fig 6 The set basic cardinal direction relations model contains 511 el ements We use D denote set Relations D jointly exhaustive pairwise disjoint Elements D represent deﬁnite information car dinal directions N b Notice difference model presented section proposal 1742 deals connected regions REG Our approach accommodates wider set region regions REG allows regions disconnected holes As result 511 relations model 1742 218 This enables express natural spatial arrangements SW b SN b possible 1742 Using 511 relations D basis deﬁne powerset 2D D contains 2511 relations Elements 2D called cardinal direction relations represent deﬁnite indeﬁnite information cardinal directions S W b denotes region south west region b S b W b Notice difference basic cardinal direction relation SW disjunc tive cardinal direction relation S W Expression SW b denotes region lies partly Sb partly W b tile b deﬁnite information On hand expression 100 S Skiadopoulos M Koubarakis Artiﬁcial Intelligence 163 2005 91135 Fig 7 Constraints SW b S W b Fig 8 Members invN S W b denotes region lies entirely Sb W b tile b For instance spatial conﬁgurations Fig 7 regions b Fig 7a satisfy relation SW Relation S W satisﬁed regions b Figs 7b 7c satisﬁed respective regions Fig 7a Deﬁnition 4 Let R 2D The inverse relation R denoted invR cardi nal direction relation satisﬁes following For arbitrary regions b REG constraint invR b holds iff b R holds Let consider regions b assume R b holds R basic relation Then relation invR necessarily basic cardinal direction relation disjunction basic relations For instance N b possible b SESSW b SES b SSW b S Fig 8 Therefore invN SSWSE SSW SES S In words relative position regions b cardinal direction relations need specify relation respect b relation b respect Summarizing relative position regions b given pair R1 R2 R1 R2 cardinal directions R1 b b R2 R1 disjunct invR2 R2 disjunct invR1 An algorithm computing inverse relation discussed end Section 4 In previous line work studied composition problem cardinal direc tion relations 4042 In following sections study consistency checking S Skiadopoulos M Koubarakis Artiﬁcial Intelligence 163 2005 91135 101 given set cardinal direction constraints present algorithm task Let ﬁrst formally deﬁne cardinal direction constraints Deﬁnition 5 A cardinal direction constraint formula R b b variables ranging regions REG R cardinal direction relation set 2D Moreover cardinal direction constraint called singletile respectively multitile basic R singletile respectively multitile basic cardinal direction relation Obviously basic cardinal direction constraint nondisjunctive general cardinal direction constraint disjunctive nondisjunctive Example 2 The following cardinal direction constraints a1 S b1 a2 NEE b2 a3 B S b3 The constraint a1 S b1 singletile The constraint a2 NEE b2 multitile The ﬁrst constraints basic nondisjunctive Deﬁnition 6 Let C set cardinal direction constraints variables a1 The solution set C denoted SolC deﬁned cid4 α1 αn α1 αn REG constraints C satisﬁed assigning α1 a1 αn cid5 Each member SolC called solution C A set cardinal direction constraints called consistent iff solution set nonempty In paper interested special kinds order constraints deﬁned Deﬁnition 7 An order constraint formula following forms infx infx b infy infy b supx supxb supy supyb infxa supx b infya supy b b variables ranging regions REG operator set cid1 cid2 The order constraints express possible relations endpoints projections x yaxis regions b Deﬁnition 8 A set order constraints called canonical iff includes constraints infxa supxa infy supya region variable referenced set Deﬁnition 9 Let O canonical set order constraints region variables a1 The solution set O denoted SolO set ntuples α1 αn REG n 102 S Skiadopoulos M Koubarakis Artiﬁcial Intelligence 163 2005 91135 constraints O satisﬁed assigning infx αi infxai infy αi infyai supx αi supx ai supy αi supy ai 1 cid1 cid1 n As cardinal direction constraints set order constraints called consistent iff solution set nonempty In paper use letters Latin alphabet b c r denote variables letters Greek alphabet α β γ ρ denote values respective variable similarly Deﬁnition 9 Let consider following proposition Proposition 2 Let O canonical set order constraints region variables a1 Set O solution α1 αn REGn iff solution β1 βn β1 βn nontrivial boxes Proof If Obvious Only Let α1 αn REGn solution O In deﬁnition solution O Deﬁnition 9 interested endpoints projections x yaxis regions α1 αn Notice regions α1 αn endpoints bounding boxes mbbα1 mbbαn follows cid2 cid3 mbbα1 mbbαn solution O cid1 Using Proposition 2 assume loss generality α1 αn solution canonical set order constraints O variables a1 α1 αn nontrivial boxes Proposition 2 useful Section 4 proof Theorem 3 4 Consistency basic cardinal direction constraints We consider consistency checking problem given set cardinal direction constraints involving basic relations present algorithm solving In 4042 studied composition operator cardinal direction relations shown use composition decide consistency deﬁned Deﬁnition 6 As result section use composition way Let ﬁrst consider Deﬁnition 3 deﬁnes cardinal direction relations The iff deﬁnitions Deﬁnition 3 map set arbitrary basic cardinal direction constraints C set S consisting following types constraints singletile cardinal direction constraints setunion constraints form r r1 rn r r1 rn variables representing regions REG S Skiadopoulos M Koubarakis Artiﬁcial Intelligence 163 2005 91135 103 If algorithm deciding consistency sets like S use solve consistency problem Given unavailability algorithm velop ﬁrst principles Algorithm CONSISTENCY checks C equivalently S consistent CONSISTENCY long algorithm nontrivial step avoid having deal setunion constraints S To check consistency given set basic cardinal direction constraints C variables a1 Algorithm CONSISTENCY proceeds follows 1 Initially Algorithm CONSISTENCY uses Algorithm TRANSFORM Fig 10 translate cardinal direction constraints C order constraints Algorithm TRANSFORM considers constraint C turn maps singletile cardinal direction constraints deﬁnition set order constraints O Set O contains order straints involving projections x yaxis region variables a1 component variables correspond a1 To achieve mapping Algorithm TRANSFORM uses Deﬁnitions 2 3 Section 31 Moreover algo rithm introduces set O additional order constraints implied cardinal direction constraint consideration These constraints discussed Sec tion 41 2 Then Algorithm CONSISTENCY ﬁnds solution set order constraints O solution serves purpose To end use algorithms 1146 If lution O exists assigns nontrivial boxes region variables a1 component variables correspond a1 Proposition 2 Using solution second step algorithm constructs maximal solution enlarg ing appropriately regions correspond component variables regions a1 Section 42 This solution called maximal sense enlargement results assignment solution O The construction maximal solution necessary order perform step algorithm 3 The ﬁrst steps Algorithm CONSISTENCY considered constraint set C singletile cardinal direction constraints deﬁnition discussion beginning Section 4 This ﬁnal step algorithm deals setunion constraints correspond constraint C Currently exist efﬁcient algorithm handling theories consisting set constraints order constraints Thus step map setunion constraint complex expression involving order constraints Then prove solve consistency problem check derived complex expres sion satisﬁed maximal solution Step 2 This checking efﬁciently performed Algorithm GLOBALCHECKCONSTRAINTNTB Section 43 This step interesting avoids computational costly setunion straints Let steps Algorithm CONSISTENCY Throughout pre sentation use set constraints C following example illustrate details algorithm 104 S Skiadopoulos M Koubarakis Artiﬁcial Intelligence 163 2005 91135 Fig 9 Illustration Example 3 Example 3 Let C following set basic cardinal direction constraints region variables a1 a2 a3 C a1 BNE a2 a1 BSW a3 a2 SW a3 In Figs 9a 9b 9c illustrate regions satisfy constraints a1 BNE a2 a1 BSW a3 a2 SW a3 respectively Unfortunately exist assignment satisﬁes constraints set C In words set C inconsistent To consider Fig 9d The ﬁrst constraint C forces region a1 shaped like light grey region Fig 9d second forces region a1 shaped like dark grey region Now let consider circled area I Fig 3d Constraint a1 BNE a2 requires region I belong a1 constraint a1 BSW a3 requires region I belongs a1 resulting inconsistency 41 Step 1Algorithm TRANSFORM Let C set basic cardinal direction constraints region variables a1 The ﬁrst step Algorithm CONSISTENCY uses Algorithm TRANSFORM Fig 10 translate set C set order constraints O Set O contains order constraints involving pro jections x yaxis region variables a1 component variables correspond a1 For constraint input set C Algorithm TRANS FORM repeats Steps T1T4 Let consider arbitrary constraint ai R1 Rk aj C In Step T1 Algorithm TRANSFORM consult deﬁnition constraint ai R1 Rk aj Section 31 introduce order constraints encoding singletile cardinal direc tion relations reference region aj component variables corresponding primary region ai More speciﬁcally Step T1 distinguishes cases 1 If k 1 ai R1 Rk aj singletile constraint Step T1 introduces corresponding equivalent order constraints Deﬁnition 2 2 If k 1 ai R1 Rk aj multitile constraint Step T1 introduces new region variables aj ik denote component variables corresponding variable ai constraint ai R1 Rk aj Deﬁnition 3 Then Step T1 introduces order constraints equivalent singletile constraints aj ik Rk aj sulting Deﬁnition 2 i1 R1 aj aj i1 aj S Skiadopoulos M Koubarakis Artiﬁcial Intelligence 163 2005 91135 105 Algorithm TRANSFORM Input A set basic cardinal direction constraints C variables a1 Output A set O order constraints involving variables a1 component variables corresponding a1 Method O For constraint ai R1 Rk aj C Do Step T1 If k 1 Then Introduce constraints deﬁnitions Section 31 Add O order constraints deﬁning singletile cardinal direction constraint ai R1 aj use deﬁnitions Section 31 ElseIf k 1 Then Introduce new region variables aj For t 1 To k Do i1 aj ik These component variables corresponding ai Add O order constraints deﬁning singletile cardinal direction constraint aj Rt aj use deﬁnitions Section 31 EndFor EndIf Enforce regions ai aj aj Step T2 For region variable r ai aj aj i1 aj ik Do O O infx r supx r infy r supy r i1 aj ik REG EndFor Enforce regions aj Step T3 For region variable r aj i1 aj ik Do i1 aj ik subregions ai O O infx ai cid1 infx r supx r cid1 supx ai infy ai cid1 infy r supy r cid1 supy ai EndFor Step T4 Strictest relation ai aj If k 1 Then If Else If If Else If If Else If If Else If Then O O supx aj cid1 infx ai R1 Rk NE E SE Then O O infx aj cid1 infx ai R1 Rk NE E SE N B S R1 Rk NW W SW Then O O supx ai cid1 infx aj R1 Rk NW W SW N B S Then O O supx ai cid1 supx aj Then O O supy aj cid1 infy ai R1 Rk NW N NE R1 Rk NW N NE W B E Then O O infy aj cid1 infy ai Then O O supy ai cid1 infy aj R1 Rk SW S SE Then O O supy ai cid1 supy aj R1 Rk SW S SE W B E EndIf EndFor Return O Fig 10 Algorithm TRANSFORM 106 S Skiadopoulos M Koubarakis Artiﬁcial Intelligence 163 2005 91135 Example 4 Let continue set C a1 BNE a2 a1 BSW a3 a2 SW a3 Example 3 Let O input Algorithm TRANSFORM This algorithm consid ers constraint a1 BNE a2 ﬁrst Step T1 introduces component variables1 d1 d2 d3 representing subregions a1 d1 B a2 d2 N a2 d3 E a2 hold Then deﬁnitions relations B N E consulted Step T1 adds O following order constraints Fig 9a Constraint d1 B a2 Constraint d2 N a2 Constraint d3 E a2 infx a2 cid1 infx d1 supx d1 cid1 supx a2 infy a2 cid1 infy d1 supy d1 cid1 supy a2 infx a2 cid1 infx d2 supx d2 cid1 supx a2 supya2 cid1 infyd2 supxa2 cid1 infxd3 infy a2 cid1 infyd3 supyd3 cid1 supy a2 Then Step T1 considers constraint a1 BSW a3 introduces component variables e1 e2 e3 representing subregions a1 e1 B a3 e2 S a3 e3 W a3 hold Then Step T1 adds O following order constraints Fig 9b Constraint e1 B a3 Constraint e2 S a3 Constraint e3 W a3 infxa3 cid1 infxe1 supx e1 cid1 supxa3 infya3 cid1 infye1 supy e1 cid1 supya3 infxa3 cid1 infxe2 supx e2 cid1 supxa3 supy e2 cid1 infya3 supx e3 cid1 infxa3 infy a3 cid1 infye3 supy e3 cid1 supy a3 Finally Step T1 considers constraint a2 SW a3 adds O following order straints Fig 9c Constraint a2 SW a3 supxa2 cid1 infx a3 supy a2 cid1 infy a3 In Step T2 Algorithm TRANSFORM introduce regions ai aj com ponent variables aj ik corresponding ai obvious order constraints relating endpoints projections Proposition 1 These constraints set order constraints O canonical i1 aj Example 5 Let continue set C Example 3 The constraints set C expressed region variables a1 a2 a3 Moreover Step T1 Algorithm TRANS FORM introduced region variables d1 d2 d3 e1 e2 e3 representing component vari ables corresponding a1 Example 4 Thus region variable r a1 a2 a3 d1 d2 d3 e1 e2 e3 Step T2 Algorithm TRANSFORM adds O fol lowing constraint Fig 9 infx r supx r infyr supy r 1 Algorithm TRANSFORM introduces component variables a2 sions variables denoted d1 d2 d3 respectively 11 a2 12 a2 13 In order simplify expres S Skiadopoulos M Koubarakis Artiﬁcial Intelligence 163 2005 91135 107 Step T3 Algorithm TRANSFORM deals component variables aj i1 aj ik corresponding variable ai The fact variable r component variable representing subregion ai implies following constraints hold infx ai cid1 infxr infy ai cid1 infyr supxr cid1 supxai supyr cid1 supyai The constraints introduced Step T3 component variables aj corresponding region variable ai i1 aj ik Example 6 Let continue set C Example 3 Notice regions d1 d2 d3 e1 e2 e3 subregions a1 Thus region variable r d1 d2 d3 e1 e2 e3 Step T3 adds O following constraints Fig 9 infx a1 cid1 infx r infy a1 cid1 infy r supxr cid1 supx a1 supyr cid1 supxa1 Given constraint ai R aj constraints introduced Steps T1 T2 T3 Algo rithm TRANSFORM establish relations component variables corresponding ai b region variables ai aj Unfortunately R multitile cardinal direction relation constraints establish strictest possible order relation endpoints projections regions ai aj x yaxis implied deﬁnitions Section 31 For instance consider regions a1 a2 Fig 9a For regions constraints infxa2 cid1 infxa1 infya2 cid1 infya1 hold These straints introduced Steps T1 T2 T3 implied constraints introduced steps Examples 4 5 6 Step T4 Algorithm TRANSFORM examines multitiles constraints given set C introduces additional order constraints establish aforementioned strictest relation endpoints projections regions ai aj x yaxis Using simple case analysis verify need consider 8 possible cases These cases correspond checking constraint ai R1 Rk aj C set relations R1 Rk subset following sets NE E SE NW W SW NW N NE SW S SE NE E SE N B S NW W SW N B S NW N NE W B E SW S SE W B E For example set relations R1 Rk subset NE E SE constraint supxaj cid1 infx ai introduced O ﬁrst If statement Step T4 primary region denoted ai included region deﬁned tiles NEaj Eaj SEaj reference region denoted aj Fig 11a On hand set relations R1 Rk 108 S Skiadopoulos M Koubarakis Artiﬁcial Intelligence 163 2005 91135 Fig 11 Example constraints introduced Step T4 Algorithm TRANSFORM subset NE E SE N B S ﬁrst ElseIf statement Step T4 adds following constraint O Fig 11b infx aj cid1 infxai Similar comments order statements Step T4 Example 7 Let continue set C Example 3 consider constraint a1 BNE a2 We notice relations B N E members NE E SE N B S NW N NE W B E As result Step T4 adds O following constraints Fig 9a infx a2 cid1 infx a1 infya2 cid1 infy a1 When consider constraint a1 BSW a3 notice relations B S W mem bers NW W SW N B S SW S SE W B E Thus Step T4 adds O following constraints Fig 9b supxa1 cid1 supx a3 supy a1 cid1 supya3 42 Step 2maximal solution The second step Algorithm CONSISTENCY checks consistency set order constraints O produced Algorithm TRANSFORM To end use algorithms 1146 It follows discussion Section 41 constraints introduced set O Step 1 logically implied spatial conﬁguration expressed cardinal direction constraints original set C Thus set O inconsistent set C inconsistent Algorithm CONSISTENCY exits returning Inconsistent Let assume solution O exists Such solution assigns nontrivial boxes Proposition 2 region variables set C corresponding component variables Let consider following example Example 8 Let continue set C Example 3 In Examples 47 Algorithm TRANSFORM map C set order constraints O S Skiadopoulos M Koubarakis Artiﬁcial Intelligence 163 2005 91135 109 Fig 12 Solutions O Set O consistent For instance solution O constructed assign region variables a1 a2 a3 d1 d2 d3 e1 e2 e3 nontrivial boxes α1 α2 α3 δ1 δ2 δ3 ε1 ε2 ε3 depicted Fig 12a respectively It easy verify regions Fig 12a satisfy constraints O introduced Examples 47 We extend boxes δ1 δ2 δ3 ε1 ε2 ε3 directions touch line closer ones forming boxes α1 α2 For instance extend δ1 west touch vertical line y infx α1 east touch vertical line y supx α2 Fig 12b illustrates idea regions δ1 δ2 δ3 ε1 ε2 ε3 corners δ2 δ3 curved regions overlap regions ε3 ε2 respectively Now notice new regions satisfy constraints O The following lemma captures observation Example 8 generality Lemma 1 Let O output Algorithm TRANSFORM called set cardinal direction constraints C variables a1 For variable ai 1 cid1 cid1 n let ai1 ail component variables corresponding ai generated Algorithm TRANSFORM considering constraints ai R1 Rk aj 1 cid1 j cid1 n 1 cid1 k cid1 9 Let s0 solution O Let αi αj αi1 αil nontrivial boxes s0 assigns region variables ai aj ai1 ail respectively Then new solution v0 O constructed follows For constraint ai R1 Rk aj C consider component variable aim 1 cid1 m cid1 l turn max If αim B αj holds perform following substitutions cid4 infxαi infxαj cid4 supxαi supx αj min cid5 cid4 infyαi infyαj cid5 cid4 supyαi supy αj infx αim supxαim infy αim supyαim cid5 cid5 max min cid5 cid5 cid5 cid5 110 S Skiadopoulos M Koubarakis Artiﬁcial Intelligence 163 2005 91135 If αim S αj holds perform following substitutions cid4 infx αim supxαim infy αim max min infxαi infxαj cid4 supxαi supx αj cid5 cid5 infyαi supyαim min cid4 supyαi infyαj cid5 If αim SW αj holds perform following substitutions cid4 supxαi infxαj cid4 supyαi infyαj infxαi infyαi supxαim supyαim infx αim infy αim min min If αim W αj holds perform following substitutions cid4 supxαi infxαj min infx αim infy αim supyαim infxαi max supxαim cid5 cid4 infyαi infyαj cid5 cid4 supyαi supy αj min If αim NW αj holds perform following substitutions cid4 supxαi infxαj min infx αim infy αim infxαi max supxαim cid5 cid4 infyαi supy αj supy αim supyαi If αim N αj holds perform following substitutions cid4 infxαi infxαj cid4 supxαi supx αj infyαi supy αj infx αim supxαim infy αim min cid4 cid5 cid5 cid5 max max supy αim If αim NE αj holds perform following substitutions cid4 infxαi supx αj cid4 infyαi supy αj infx αim infy αim max max cid5 cid5 supx αim supy αim If αim E αj holds perform following substitutions cid4 infxαi supx αj cid5 cid4 infyαi infyαj cid5 cid4 supyαi supy αj infx αim infy αim supyαim max max min cid5 supx αim supy αi supxαi supyαi supxαi If αim SE αj holds perform following substitutions cid4 infxαi supx αj supyαim infx αim infy αim infyαi max min cid5 supx αim cid4 supyαi infyαj supxαi cid5 Proof See Appendix A cid1 S Skiadopoulos M Koubarakis Artiﬁcial Intelligence 163 2005 91135 111 Example 9 Let continue set C Example 3 let O output Al gorithm TRANSFORM input set C In Example 8 seen regions Figs 12a 12b form solutions set O We verify regions Fig 12b formed applying regions Fig 12a substitutions Lemma 1 For stance consider component δ1 corresponding region α1 Fig 12a notice δ1 B α2 holds Region δ1 Fig 12b results performing following substitutions infx δ1 supxδ1 infy δ1 supyδ1 cid4 infxα1 max infxα1 infxα2 cid4 supxα2 min supx α1 supx α2 cid5 cid4 infyα1 max infyα1 infyα2 cid5 cid4 supyα2 min supy α1 supy α2 cid5 cid5 Deﬁnition 10 Let C set basic cardinal direction constraints O set returned Algorithm TRANSFORM called input C A solution v0 O called maximal iff v0 affected substitutions Lemma 1 Example 10 Continuing set O Example 9 notice regions Fig 12b form maximal solution O Using Deﬁnition 10 Lemma 1 prove following theorem Theorem 1 Let C set basic cardinal direction relations O set returned Algorithm TRANSFORM called input C Set O consistent iff maximal solution Proof If Obvious Only If O consistent follows solution s0 Applying substitutions Lemma 1 s0 form maximal solution O cid1 43 Step 3the nontrivial box constraint At beginning Section 4 explained transform given set cardinal direction constraints C set S containing singletile cardinal direction constraints setunion constraints Up point Algorithm CONSISTENCY dealt order constraints produced Algorithm TRANSFORM These order constraints encode singletile cardinal direction constraints envisaged set S Step T1 Algorithm TRANSFORM useful constraints Steps T2T4 It time introduce special constraint capturing essential facts following setunion constraints set S Let assume Cai c1 cm contains constraints input set C region ai primary region Let c1 ai R1 1 cm ai Rm 1 R1 k1 Rm aj1 ajm 112 S Skiadopoulos M Koubarakis Artiﬁcial Intelligence 163 2005 91135 Rm cardinal direction relations aj1 ajm Rm 1 R1 R1 k1 1 region variables set C i1 a1 ik1 Let S1 a1 sets component variables i1 ikm corresponding ai constraints c1 cm respectively According deﬁnitions Section 31 set S contain following setunion constraints Sm ai a1 i1 ai i1 a1 ik1 ikm Let consider arbitrary component variable s S1 Sm The setunion constraints imply important relationship component variable s component variables sets S1 Sm This relationship described setunion constraints unfortunately straightforwardly mapped order constraints Lemma 2 expresses conditions captures relations following setunion constraints These relations established minimum bounding boxes regions expressed order constraints Lemma 2 Let region REG Let S1 Sm ﬁnite sets subregions 1 Every region Si 1 cid1 cid1 n REG r Si r REG 2 The union members Si 1 cid1 cid1 n region r cid6 rS1 cid6 r rSm Then following constraint holds NonTrivial Box Constraint NTB For s S1 Sm exists tuple s1 sm S1 Sm mbbs mbbs1 mbbsm non trivial box Proof We use induction m For m 1 Constraint NTB trivially holds For m 2 Constraint NTB holds By contradiction let assume exists region s S1 mbbs mbbs1 mbbs2 trivial box s1 S1 s2 S2 case s S2 similar Since s s1 S1 assumption holds s1 S1 choose s1 s Then subregions s2 S2 mbbs mbbs2 point vertical line segment horizontal line segment Fig 13a Since region union regions S2 r holds follows region points interior area covered minimum bounding box region s interior region s This contradicts initial assumption region s subregion rS2 cid7 Let assume Constraint NTB holds m µ 1 S Skiadopoulos M Koubarakis Artiﬁcial Intelligence 163 2005 91135 113 Constraint NTBµ1 For s S1 Sµ1 exists tuple s1 sµ1 S1 Sµ1 mbbs mbbs1 mbbsµ1 nontrivial box We prove constraint holds m µ Constraint NTBµ For s S1 Sµ exists tuple s1 sµ S1 Sµ mbbs mbbs1 mbbsµ nontrivial box We ﬁrst prove Constraint NTBµ holds s S1 Sµ1 Since Con straint NTBµ1 holds exist regions s1 sµ1 S1 Sµ1 mbbσ mbbs1 mbbsµ1 nontrivial box Fig 13b It easy matter Sµ divides subregions subregion sµ Sµ mbbσ mbbs1 mbbsµ1 mbbsµ nontrivial box Fig 13c Similarly prove Constraint NTBµ holds s Sµ concludes proof cid1 Example 11 Let consider regions α1 α2 α3 α4 Fig 14 For regions α1 SSW α2 α1 NWNNE α3 α1 SSWW α4 Let Σ1 δ1 δ2 Σ2 ε1 ε2 ε3 Σ3 ζ1 ζ2 ζ3 set components corresponding a1 constraints α1 SSW α2 α1 NWNNE α3 α1 SSWW α4 respectively Fig 13 Region subregions Fig 14 Example Constraint NTB 114 S Skiadopoulos M Koubarakis Artiﬁcial Intelligence 163 2005 91135 Observing Fig 14 hard Constraint NTB holds For instance component s δ1 S1 exists region s1 S1 δ1 region s2 S2 ε1 region s3 S3 ζ1 mbbs mbbs1 mbbs2 mbbs3 nontrivial box corresponding bounding boxes depicted Fig 14 Constraint NTB requires intersection m 1 nontrivial boxes s s1 sm nontrivial box This condition mapped order constraints For instance given nontrivial boxes b intersection c b box deﬁned follows infx c max infy c max cid4 infx infx b cid4 infy infy b cid5 cid5 supxc min supyc min cid4 supx supxb cid4 supy supyb cid5 cid5 Box c nontrivial iff infx c supx c infy c supyc Proposition 1 Lemma 2 important provides method Constraint NTB map setunion constraints deﬁnition cardinal direction relation Deﬁnition 3 order constraints Therefore solution given set cardinal direction constraints satisfy order constraint introduced Algorithm TRANSFORM order constraints correspond Constraint NTB Since constraints enforced Step 1 Algorithm CONSISTENCY point wonder solve consistency problem sufﬁces introduce expressions enforce Constraint NTB Indeed correct unfortunately results inefﬁcient algorithm Let brieﬂy discuss why2 Constraint NTB equivalently written follows cid9 cid8 cid10 cid2 mbbs mbbs1 mbbsm sS1Sm s1smS1Sm cid3 nontrivial box cid11 Notice m On St cid1 9 1 cid1 t cid1 m hold The expression contains S1 Sm On conjunctions containing disjunction S1 Sm O9n disjuncts Thus order enforce Constraint NTB write solve expression exponential size initial problem Summarizing enforcing Constraint NTB inefﬁcient procedure We vestigate problem checking given assignment satisﬁes Constraint NTB As later section solution problem help tackle sistency checking problem Let Σ1 Σm sets regions representing components given region α In order check Σ1 Σm satisfy Constraint NTB use Algorithm CHECKCONSTRAINTNTB Fig 15 For component variable s Σ1 Σm algorithm checks exists tuple s1 sm Σ1 Σm mbbs mbbs1 mbbsm nontrivial box To end utilizes sets Q Qcid11 Initially Q contains component variable s Then algorithm considers set component variables Σ cid11 Σ1 Σm turn Let suppose algorithm processed sets Σ1 Σµ1 1 cid1 µ 1 m In case set Q contains nontrivial boxes form s σ1 σµ1 2 The interested reader referred 3943 information approach S Skiadopoulos M Koubarakis Artiﬁcial Intelligence 163 2005 91135 115 Algorithm CHECKCONSTRAINTNTB Input Sets component variables Σ1 Σm correspond certain region variable Output True sets Σ1 Σm satisfy Constraint NTB False Method For s Σ1 Σm Q s For Σ cid11 Qcid11 For scid11 Σ1 Σm Do Σ cid11 q Q Do If mbbscid11 mbbq nontrivial box Then Qcid11 Qcid11 mbbscid11 mbbq EndFor If Qcid11 Then Return False Q Qcid11 EndFor EndFor Return True Fig 15 Algorithm CHECKCONSTRAINTNTB σi Σi Then algorithm considers component variables Σµ non trivial boxes Q Algorithm CHECKCONSTRAINTNTB ﬁnds regions scid11 Σµ q Q scid11 q nontrivial box puts new set Qcid11 In words set Qcid11 contains nontrivial boxes form s σ1 σµ σi Σi Hence Qcid11 Constraint NTB violated Algorithm CHECKCONSTRAINTNTB turns Inconsistent Otherwise Qcid11 assigned Q algorithm continues remaining sets nontrivial boxes Σµ1 Σm correspond variable Theorem 2 Let Σ1 Σm sets regions representing components given gion Algorithm CHECKCONSTRAINTNTB correctly decides Σ1 Σm satisfy Constraint NTB Proof Let σ Σ1 Σm We verify discussion Al gorithm CHECKCONSTRAINTNTB processed sets Σ1 Σµ 1 cid1 µ cid1 m set Q tains tuples s1 sµ Σ1 Σµ mbbσ mbbs1 mbbsµ nontrivial box Therefore algorithm returns False set Σµ1 means mbbσ mbbs1 mbbsµ1 nontrivial box sµ1 Σµ1 Constraint NTB satisﬁed If Algorithm CHECKCONSTRAINTNTB returns True Constraint NTB satisﬁed set Q nonempty contains tuples s1 sm Σ1 Σm mbbσ mbbs1 mbbsm nontrivial box cid1 Example 12 Let continue Example 11 For sets Σ1 δ1 δ2 Σ2 ε1 ε2 ε3 Σ3 ζ1 ζ2 ζ3 Constraint NTB holds Fig 14 It hard verify Algorithm CHECKCONSTRAINTNTB returns True called input sets Σ1 Σ2 Σ3 116 S Skiadopoulos M Koubarakis Artiﬁcial Intelligence 163 2005 91135 Algorithm GLOBALCHECKCONSTRAINTNTB Input A maximal solution v0 set O produced Algorithm TRANSFORM input set C cardinal direction constraints variables a1 Output True assignment v0 satisﬁes Constraint NTB False Method For region variable a1 Do Let S1 Sm sets component variables introduced Algorithm TRANSFORM corresponding Let Σ1 Σm sets boxes v0 assigns sets S1 Sm respectively If CHECKCONSTRAINTNTBΣ1 Σm returns False Then Return False EndFor Return True Fig 16 Algorithm GLOBALCHECKCONSTRAINTNTB As example let consider sets Σ1 δ1 δ2 δ3 Σ2 ε1 ε2 ε3 Ex ample 8 Fig 12 For sets Algorithm CHECKCONSTRAINTNTB returns False Constraint NTB satisﬁed The step Algorithm CONSISTENCY uses Algorithm GLOBALCHECKCON STRAINTNTB check maximal solution v0 set O produced Step 2 Algorithm CONSISTENCY satisﬁes Constraint NTB Algorithm GLOBALCHECKCON STRAINTNTB considers variable a1 referenced set C forms sets component variables S1 Sm correspond variable Notice sets introduced ﬁrst step Algorithm CONSISTENCY Algorithm TRANSFORM Let Σ1 Σm sets boxes v0 assigns sets component variables S1 Sm respectively Algorithm GLOBALCHECKCONSTRAINTNTB calls Algorithm CHECKCONSTRAINTNTB check Σ1 Σm satisfy Constraint NTB Here ﬁnish detailed discussion ﬁnal step Algorithm CONSIS TENCY The following section summarizes presents complete example Algorithm CONSISTENCY 44 Summary In Sections 41 42 43 presented steps Algorithm CONSISTENCY This algorithm takes input set basic cardinal direction constraints C variables a1 returns Consistent C consistent returns In consistent Let brieﬂy summarize steps Algorithm CONSISTENCY Fig 17 In ﬁrst step Algorithm CONSISTENCY calls Algorithm TRANSFORM Let O output Algorithm TRANSFORM Set O contains order constraints involving projections x yaxis region variables a1 component variables correspond a1 Section 41 The second step Algorithm CONSISTENCY uses Algorithm CSPAN 46 ﬁnd solution s0 set O If solution exists O C inconsistent Algorithm CONSISTENCY exits returning Inconsistent Otherwise Algorithm CON S Skiadopoulos M Koubarakis Artiﬁcial Intelligence 163 2005 91135 117 Algorithm CONSISTENCY Input A set basic cardinal direction constraints C variables a1 Output Consistent C consistent Inconsistent Method Map basic cardinal directions constraints C set order Step 1 constraints O O TRANSFORMC Find maximal solution v0 O Step 2 Find solution s0 O Algorithm CSPAN 46 If CSPAN returns Inconsistent Then Return Inconsistent Find maximal solution v0 O s0 Lemma 1 Check maximal solution v0 satisﬁes Constraint NTB Step 3 If GLOBALCHECKCONSTRAINTNTBv0 returns False Then Return Inconsis tent Return Consistent Fig 17 Algorithm CONSISTENCY SISTENCY applies Lemma 1 s0 derive maximal solution v0 O Section 42 In step Algorithm CONSISTENCY considers Constraint NTB If solution v0 satisﬁes Constraint NTB Algorithm CONSISTENCY exits returning Inconsistent This checking performed Algorithm GLOBALCHECKCON STRAINTNTB Section 43 The steps Algorithm CONSISTENCY based following theorem Theorem 3 Let C set basic cardinal direction relations O set returned Algorithm TRANSFORM called input C Set C consistent iff following conditions hold 1 Set O maximal solution u0 2 Solution u0 satisﬁes Constraint NTB Proof See Appendix B An illustration structure proof presented Fig 18 The fact O consistent iff maximal solution proven Theorem 1 lower left Fig 18 To prove C consistent maximal solution O satisﬁes Constraint NTB ifpart Theorem 3 use Lemmata 1 2 Finally prove ifpart use values assignment maximal solution O fact satisﬁes Constraint NTB construct regions satisfy cardinal direction constraints C cid1 The following theorem establishes correctness Algorithm CONSISTENCY 118 S Skiadopoulos M Koubarakis Artiﬁcial Intelligence 163 2005 91135 Fig 18 Summary proof Theorem 3 Theorem 4 Let C set basic cardinal direction constraints Algorithm CONSIS TENCY correctly decides C consistent Proof The correctness Algorithm CONSISTENCY follows discussion Theorem 3 cid1 Let example Algorithm CONSISTENCY operation Example 13 Let consider constraint set C a1 BNE a2 a1 BSW a3 a2 SW a3 Example 3 examine steps Algorithm CONSISTENCY input set C In ﬁrst step Algorithm CONSISTENCY calls Algorithm TRANSFORM produce set O The order constraints O presented Examples 47 The second step Algorithm CONSISTENCY uses Algorithm CSPAN check consistency ﬁnd solution set O Set O consistent solution depicted Fig 12a Then Algorithm CONSISTENCY applies Lemma 1 construct max imal solution O The maximal solution solution O corresponds Fig 12a presented Fig 12b Examples 810 In step Algorithm CONSISTENCY calls Algorithm CHECKCONSTRAINT NTB check maximal solution second step satisﬁes Constraint NTB Using Fig 12 Constraint NTB hold Thus Algorithm CONSISTENCY exits Step 3 returning Inconsistent Example 12 Algorithm CONSISTENCY interesting right com pute transitivity table basic cardinal direction relations deﬁned Section 3 For pair basic cardinal direction constraints R1 b b R2 c basic cardinal direction S Skiadopoulos M Koubarakis Artiﬁcial Intelligence 163 2005 91135 119 relation R3 satisﬁes cardinal direction constraint R3 c constraint set R1 b b R2 c R3 c consistent direct algorithm task discussed 42 Similarly Algorithm CONSISTENCY calculate inverse given basic cardinal direction relation For basic cardinal direction constraints R1 b basic cardinal direction relation R2 satisﬁes cardinal direction constraint b R2 constraint set R1 b b R2 consistent 5 Complexity consistency checking In section study computational complexity consistency checking problem cardinal direction constraints Section 51 studies aforementioned problem basic cardinal direction constraints nondisjunctive Section 52 considers problem generality studies unrestricted cardinal direction constraints disjunctive nondisjunctive 51 Consistency basic cardinal direction constraints In Section 4 presented Algorithm CONSISTENCY decides consistency given set basic cardinal direction constraints The following theorem calculates time complexity Algorithm CONSISTENCY Theorem 5 Deciding consistency set basic cardinal direction constraints n region variables Algorithm CONSISTENCY On5 time Proof Let input Algorithm CONSISTENCY set C basic cardinal direction constraints n region variables The number constraints C On2 The ﬁrst step Algorithm CONSISTENCY calls Algorithm TRANSFORM input set C The algorithm considers constraint C turn returns set order constraints O Algorithm TRANSFORM introduces 9 new variables time Step T1 executed Hence total number region variables On2 Steps T1T3 Algorithm TRANSFORM add O On2 order constraints Summarizing Algorithm TRANSFORM runs On2 time returns set O containing On2 order constraints On2 variables In second step Algorithm CONSISTENCY ﬁnds maximal solution set O This Algorithm CSPAN 46 Algorithm CSPAN decides consistency set order constraints k variables Ok2 time Thus Algorithm CSPAN 46 ﬁnd solution set O On4 time Then Algorithm CONSISTENCY applies Lemma 1 This performed On time Summarizing second step Algorithm CONSISTENCY On4 time The step Algorithm CONSISTENCY uses Algorithms GLOBALCHECKCON STRAINTNTB Fig 16 CHECKCONSTRAINTNTB Fig 15 check Con straint NTB satisﬁed The algorithm uses set Q We ﬁrst need measure size set Q For given variable ai 1 cid1 cid1 n set C contains On constraints form ai R aj Now ai participates On constraints C follows region 120 S Skiadopoulos M Koubarakis Artiﬁcial Intelligence 163 2005 91135 represented variable ai divided On horizontal On vertical lines Thus ai divided On2 pieces Now notice set Q contain members possible pieces ai size Q On2 In order check Constraint NTB satisﬁed Algorithm CONSISTENCY calls Algorithm GLOBALCHECKCONSTRAINTNTB turn calls On times Algorithm CHECKCONSTRAINTNTB The algorithm performs nested loops The outer loop executed On times Both inner loops performed On3 times Thus checking Constraint NTB satisﬁed On5 time Summarizing complexity Algorithm CONSISTENCY On5 cid1 52 Consistency arbitrary cardinal direction constraints We turn attention consistency checking problem set unre stricted cardinal direction relations expressed model Section 3 set includes disjunctive nondisjunctive cardinal direction constraints Theorem 6 Deciding consistency set cardinal direction constraints NP complete Proof Let C set cardinal direction constraints Deciding consistency C easily seen NP A nondeterministic algorithm ﬁrst constructs new set Ccid11 follows For cardinal direction constraint R1 Rm b C algorithm guesses basic cardinal direction relation Ri R1 Rm adds constraints Ri b 1 cid1 cid1 m set Ccid11 Then nondeterministic algorithm checks new set Ccid11 consistent This Algorithm CONSISTENCY On5 Theorem 5 To prove NPhardness use reduction 3SAT 33 We construct equiv alent respect consistency mapping 3SAT formula set cardinal direction constraints In construction map literal 3SAT region vari able clause 3SAT set cardinal direction constraints This proof borrows ideas proof appears 47 like use center region It differentiates way use relations auxiliary regions Similarly 47 need region o denotes center Fig 19 Regions fall west o correspond false values regions fall east o correspond true values For literal p 3SAT formula negation p create pair regions sp sp These regions related center o region epp follows epp BW E o sp W E o sp BW BE epp sp BW BE epp sp W E o sp W E sp Intuitively use region epp ensure regions sp sp true false Fig 20 For instance region sp falls area A1 Fig 20 p false constraints guarantee region sp falls area A2 p true S Skiadopoulos M Koubarakis Artiﬁcial Intelligence 163 2005 91135 121 Fig 19 Region o denotes center Fig 20 Region epp use Then clause p q r create following constraints sp W E sq sq W E sr sr W E sp The constraints ensure regions sp sq sr disjoint Moreover intro duce following constraints apqr W o apqr BW bpqr bpqr BW E o sp E BW BE apqr sq E BW BE apqr sr E BW BE apqr sp W E BE bpqr sq W E BE bpqr sr W E BE bpqr The key encoding clauses regions sp sq sr allowed false area A1 Fig 20 Therefore region lie true area A2 Fig 20 corresponding literal true For instance sp sq false area constraints force sr true area Fig 21 To conclude proof note encoding performed time polynomial length formula It follows discussion 3SAT formula consistent iff encoding cardinal direction constraints consistent Moreover 3SAT NPcomplete follows checking consistency set cardinal direction constraints NPcomplete cid1 122 S Skiadopoulos M Koubarakis Artiﬁcial Intelligence 163 2005 91135 Fig 21 Regions apqr bpqr Fig 22 Including points lines 6 Extensions In Section 3 presented model deﬁning cardinal direction relations disconnected regions REG In section present interesting variation accommodates arbitrary regions R2 1842 In words variation considers points lines regions emanating lines Fig 4 Such regions excluded carefully REG homeomorphic unit disk easily included dividing space reference region b following 25 areas Fig 22 9 twodimensional areas Bb Sb SWb W b NWb Nb NEb Eb SEb These areas formed axis bounding box reference region b grey shaded areas Fig 22 Notice area include parts axis forming contrary model Section 3 The areas correspond bounding box 8 cardinal directions 8 semilines LSWb LWSb LWNb LNWb LNEb LENb LESb LSEb These semilines formed vertical horizontal lines start cor ners bounding box reference region b dotted lines Fig 22 Notice semiline include corner bounding box S Skiadopoulos M Koubarakis Artiﬁcial Intelligence 163 2005 91135 123 Fig 23 Regions R2 relations DR2 4 line segments LSb LWb LNb LEb These lines segments correspond sides bounding box reference region b solid lines Fig 22 Notice line segment include corners bounding box 4 points PSWb PNWb PNEb PSEb These points correspond corners bounding box reference region b Section 3 divides space 9 areas The new set denoted DR2 cid1 The partition reference space contrasted partition contains 33554431 jointly exhaustive pairwise disjoint cardinal direction rela cid2 cid3 25 25 i1 tions The singletile cardinal direction relations DR2 deﬁned analogously Deﬁni tion 2 For instance B b iff PNW b iff infx b infx supxa supx b infy b infy supya supy b infx supxa infxb infya supy supyb Regions involved relations shown Figs 23a 23b respectively The multitile cardinal direction relations DR2 deﬁned analogously Deﬁni tion 3 For instance NELENE b SWPSWLWPNWNW b iff iff exist regions a1 a2 a3 R2 a1 a2 a3 a1 NE b a2 LEN b a3 E b exist regions a1 a5 R2 a1 a2 a3 a4 a5 a1 SW b a2 PSW b a3 PNW b a4 LW b a5 NW b Regions involved relations shown Figs 23c 23d respectively Algorithm CONSISTENCY presented Section 4 modiﬁed order handle consistency checking given set cardinal direction constraints involving relations DR2 Such modiﬁcations place Algorithms TRANSFORM CHECKCON STRAINTNTB More speciﬁcally modiﬁcations Algorithm TRANSFORM Fig 10 follows 124 S Skiadopoulos M Koubarakis Artiﬁcial Intelligence 163 2005 91135 Step T1 takes account deﬁnition relations R2 These deﬁnitions derived similarly case cardinal direction relations regions REG Section 3 The constraint added Step T2 changes O O cid4 infxr cid1 supxr infy r cid1 supy r cid5 This Proposition 1 hold regions R2 For instance point pχ ψ R2 χ infx p supx p ψ infyp supyp Step T4 regions REG considers cardinal direction relation R1 Rm checks set relations R1 Rk subset 8 sets In case cardinal direction relations regions R2 check relation R 39 sets In order present sets ﬁrst need deﬁne following sets Fig 24 A NW LWN W LSW SW B LNW PNW LW PSW LSW C N LN B LS S D LNE PNE LE PSE LSE E NE LEN E LES SE cid11 NE LNE N LNW NW A cid11 LEN PNE LN PNW LWN B cid11 E LE B LW W C cid11 LSE PSE LS PSW LWS D cid11 SE LSE S LSW SW E Using sets express 39 sets looking follows Fig 24 Groups basic relation regions R2 S Skiadopoulos M Koubarakis Artiﬁcial Intelligence 163 2005 91135 125 A A B A B C A B C D B B C B C D C C D cid11 A cid11 cid11 B cid11 C cid11 B cid11 C cid11 B A cid11 B cid11 C B cid11 C B cid11 C cid11 D cid11 D cid11 cid11 A A C cid11 cid11 cid11 D cid11 E E D E D C E D C B D D C D C B C C B cid11 E cid11 D E cid11 D E cid11 D E cid11 D cid11 C cid11 C cid11 cid11 cid11 B cid11 cid11 C cid11 C cid11 cid11 B D C C D cid11 cid11 cid11 cid11 B For brevity constraints added Step T4 ﬁrst 9 cases If k 1 Then R1 Rk A If Else If R1 Rk A B Else If R1 Rk A B C Else If R1 Rk A B C D Else If R1 Rk B Else If R1 Rk B C Else If R1 Rk B C D Else If R1 Rk C Else If R1 Rk C D EndIf Then O O supx ai infxaj Then O O supx ai infxaj Then O O supx ai supx aj Then O O supx ai supx aj Then O O infxai infx aj supx ai infxai Then O O infxai infx aj supx ai supx aj Then O O infxai infx aj supx ai supx aj Then O O infxaj infx ai supx ai supx aj Then O O infxaj infx ai supx ai supx aj 126 S Skiadopoulos M Koubarakis Artiﬁcial Intelligence 163 2005 91135 Finally Algorithm CHECKCONSTRAINTNTB change line If mbbscid11 mbbq nontrivial box Then Qcid11 Qcid11 mbbscid11 mbbq cid4 cid5 If mbbscid11 mbbq nonempty Then Qcid11 Qcid11 cid4 mbbscid11 mbbq cid5 simply contrary REG new domain R2 contains regions points lines trivial boxes The proof correctness case cardinal direction relations DR2 similar proof correctness Algorithm CONSISTENCY Theorem 4 We ﬁrst generalize Theorem 1 Lemmata 1 2 handle case constraints DR2 Then proof analogous proof Theorem 4 Fig 18 7 Conclusions future work In paper presented formal model qualitative spatial reasoning cardinal directions This model handle extended regions disconnected holes Then studied problem checking consistency set cardinal direction constraints expressed model We presented ﬁrst algorithm problem proved correctness analyzed computational com plexity An implementation algorithm available interested researchers ﬁrst author paper Moreover outlined modiﬁcation consistency al gorithm interesting extension model Section 3 With respect cardinal direction constraints following interesting open problems The consistency checking problem connected regions In paper consid ered consistency checking problem given set C cardinal direction constraints expressed region variables a1 ranging possibly disconnected regions class REG We intend study interesting striction consistency checking problem requires region variables a1 range connected regions class REG This problem open For example clear extend proof Theorem 3 solution ρa1 ρa1 constructed formed nected region REG Appendix B p 132 A complete complexity analysis consistency checking problem In Sections 4 5 presented ﬁrst complexity analysis consistency problem Speciﬁcally seen consistency problem set basic cardinal direction constraints solved PTIME consistency problem unrestricted set cardinal direction constraints NPcomplete Following line research 31921253038 plan continue complete analysis To end ﬁrst investigate existence classes di rectional constraints class nondisjunctive constraints S Skiadopoulos M Koubarakis Artiﬁcial Intelligence 163 2005 91135 127 polynomial consistency checking problem Another issue ad dressed classes maximal informally class maximal extension class leads NPcompleteness Answers prob lems help exploit frontier tractable possibly intractable cases Introducing cardinal direction constraints database model We intend study interesting problems cardinal direction relations like variable elimina tion minimal network computation global consistency enforcement entailment The important practical aspect research development required theory allow integrate cardinal direction constraints constraint database model like instance 2224 Uniﬁed model spatial information Finally like combine present model topological constraints framework 1236 direc tion relations 1448 devise uniﬁed spatial reasoning formalism cope simultaneously cardinal directions topology distance Acknowledgements We like thank Timos Sellis comments guidance We grate ful referees paper comments suggestions led substantial improvements Appendix A Proof Lemma 1 We prove v0 solution O By contradiction let assume v0 solution O This happen cases There component variable aim value infxαim v0 falsiﬁes constraints O ii There component variable aim value supxαim v0 falsiﬁes constraints O iii There component variable aim value infy αim v0 falsiﬁes constraints O iv There component variable aim value supyαim v0 falsiﬁes constraints O Let ﬁrst assume case happens consider possible constraint O involve infxαim Such constraint possibly belong following categories 1 The constraint introduced Step T1 Algorithm TRANSFORM This happens TRANSFORM called input ai R1 Rk aj 1 cid1 j cid1 n 128 S Skiadopoulos M Koubarakis Artiﬁcial Intelligence 163 2005 91135 The form constraint O depends singletile cardinal direction constraint aim R aj considered variable aim Algorithm TRANSFORM R R1 Rk 1 cid1 j cid1 n There possible constraints αim NW αj The translation constraint order constraints Section 31 supxαim cid1 infx αj supyαj cid1 infyαim Since order constraints involving infxαim introduced case impos sible b αim W αj This case impossible similar 1a order constraints involving infxαim introduced c αim SW αj This case impossible similar 1a order constraints involving infxαim introduced d αim N αj In case constraint involving infxαim introduced Algorithm TRANS FORM infxαj cid1 infxαim M1 According substitutions Lemma 1 possible values infx αim v0 infx αj infx αi If infxαim infx αj holds v0 obviously M1 falsiﬁed If infxαim infx αi holds v0 prove M1 falsiﬁed Since αim N αj infx αim infx αi hold follows R1 Rk cid4 NE E SE R1 Rk NE E SE N B S Fig A1 There fore Algorithm TRANSFORM processes constraint ai R1 Rk aj introduce order constraint infxαj cid1 infxαi ﬁrst ElseIf state ment Step T4 This order constraint course end O Notice constraint implies M1 Therefore case impossible e αim B αj This case impossible similar 1d constraint involving infx αim M1 falsiﬁed substitutions Lemma 1 Fig A1 Proving Lemma 1 case 1d S Skiadopoulos M Koubarakis Artiﬁcial Intelligence 163 2005 91135 129 Fig A2 Proving Lemma 1 case 1g f αim S αj This case impossible similar 1d constraint involving infx αim M1 falsiﬁed substitutions Lemma 1 g αim NE αj In case constraint involving infxαim introduced Algorithm TRANS FORM supxαj cid1 infxαim M2 According substitutions Lemma 1 possible values infx αim v0 supxαj infxαi If infxαim supx αj holds v0 obviously M2 falsiﬁed If infxαim infx αi holds v0 prove M2 falsiﬁed Since αim NE αj infx αim infx αi hold R1 Rk NE E SE Fig A2 Therefore Algorithm TRANSFORM processes constraint ai R1 Rk aj introduce order constraint supx αj cid1 infx αi ﬁrst If statement Step T4 This order constraint course end O Notice constraint implies M2 Therefore case impossible h αim E αj This case impossible similar 1g constraint involving infx αim M2 falsiﬁed substitutions Lemma 1 αim SE αj This case impossible similar 1g constraint involving infx αim M2 falsiﬁed substitutions Lemma 1 2 The constraint introduced Step T2 Algorithm TRANSFORM In case constraint infxαim supx αim M3 According substitutions Lemma 1 possible values infxαim v0 infx αj infx αi If infxαim infxαj holds v0 αim N αj αim B αj αim S αj For cases Step T1 Algorithm TRANSFORM introduces constraint infx αj cid1 infx αim Fig A3a Therefore substituting value infxαim s0 smaller equal value falsify M3 Let assume infxαim infxαi holds v0 Step T3 Algorithm TRANSFORM introduces constraint infxαi cid1 infxαim Fig A3b Therefore substituting value infxαim s0 smaller equal value falsify M3 130 S Skiadopoulos M Koubarakis Artiﬁcial Intelligence 163 2005 91135 Fig A3 Proving Lemma 1 case 2 3 The constraint introduced Step T3 Algorithm TRANSFORM In case constraint infxai cid1 infxaim falsiﬁed substitutions created v0 Summarizing proved case considered beginning proof impossible Similarly cases ii iii iv impossible cases symmetric case Therefore original assumption v0 hold v0 solution O cid1 Appendix B Proof Theorem 3 Only Let assume set cardinal directions constraints C variable a1 consistent Let O set returned Algorithm TRANSFORM called input C We prove 1 Set O maximal solution u0 2 Solution u0 satisﬁes Constraint NTB We ﬁrst ordinary solution s0 O satisfy Constraint NTB Then construct s0 maximal solution u0 O satisﬁes Constraint NTB If set C consistent exist regions REG satisﬁes constraints C Let R1 Rk b arbitrary constraint C Since constraint satis ﬁed exist regions α β subregions α1 αk α α α1 αk α1 R1 β αk Rk β hold deﬁnitions Section 31 The existence regions subregions implies existence projections x yaxes The endpoints projections satisfy order constraints introduced set O Algorithm TRANSFORM This follows discussion Section 4 Such endpoints form solution s0 O Moreover follows Lemma 2 solution s0 satisﬁes Constraint NTB Now let use substitutions Lemma 1 construct s0 maximal solution u0 O The maximal solution u0 satisﬁes constraints set O Lemma 1 prove u0 satisﬁes Constraint NTB S Skiadopoulos M Koubarakis Artiﬁcial Intelligence 163 2005 91135 131 Constraint NTB contains expressions form mbbs mbbs1 mbbsm nontrivial box Z Let σ σ1 σm regions solution s0 assigns region variables s s1 sm σ cid11 σ cid11 m regions maximal solution u0 assigns region variables 1 σ cid11 Since solution s0 satisﬁes Constraint NTB mbbσ mbbσ1 mbbσm nontrivial box Regions σ cid11 σ cid11 1 σ cid11 m formed extending regions σ σ1 σm respectively substitutions Lemma 1 Thus σ σ cid11 σ1 σ cid11 1 σm σ cid11 m We verify regions σ cid11 σ cid11 1 σ cid11 solution u0 satisﬁes Constraint NTB m satisfy Expression Z maximal If Let C set cardinal direction constraints variables a1 O set returned Algorithm TRANSFORM called input C Let assume v0 maximal solution O v0 satisﬁes Constraint NTB To prove C consistent use v0 form regions ρa1 ρan satisfy constraints C Let α1 αn nontrivial boxes v0 assigns region variables a1 Proposition 2 Let consider arbitrary region variable ai 1 cid1 cid1 n c1 cm contains constraints C region ai Let assume Cai primary region Let aj1 c1 ai R1 1 R1 k1 cm ai Rm Rm ajm 1 Rm Rm 1 R1 k1 cardinal direction relations aj1 ajm 1 cid1 R1 1 j1 jm cid1 n region variables Every time m constraints processed Algorithm TRANSFORM new set component variables corresponding ai sets troduced Step T1 Let S1 a1 component variables Sm i1 ikm i1 a1 ik1 αm Let α1 variables a1 i1 α1 ik1 i1 a1 ik1 Now let consider sets i1 αk ikm i1 ikm nontrivial boxes v0 assigns region respectively Proposition 2 i1 Πx α1 ik1 Θ1 Πy α1 i1 Πy α1 ik1 i1 Πx αm ikm Θm Πyαm i1 Πy αm ikm x yaxis formed considering sets S1 Sm turn Notice v0 maximal solution sets Ξ1 Ξm endpoints set Πx αi sets Θ1 Θm endpoints Πy αi according Lemma 1 Ξ1 Πxα1 Ξm Πx αm 132 S Skiadopoulos M Koubarakis Artiﬁcial Intelligence 163 2005 91135 Let 1 m α1 i1 m regions formed follows m 1 αm i1 α1 ik1 αm ikm welldeﬁned regions REG formed union αjt satisfy Regions 1 nontrivial boxes From coincidence fact regions αi 1 bounding box Moreover t 1 cid1 t cid1 m regions t struction constraint ct ai Rt 1 m ajt Let consider region oai formed follows Rt kt oai 1 m Equivalently cid2 α1 i1 α1 ik1 cid6 oai 1cid1s1cid1k1 1cid1smcid1km αm Each intersection α1 is1 ism trivial box nontrivial box cid3 cid2 α1 is1 cid2 αm i1 αm ikm αm ism cid3 cid3 B1 1 cid1 s1 cid1 k1 1 cid1 sm cid1 We form region ρai deﬁned union intersections α1 is1 Eq B1 nontrivial boxes We prove following αm ism 1 ρai nonempty region REG Let consider Eq B1 Since u0 satisﬁes Constraint NTB intersections forming union nontrivial box ρai nonempty More deﬁnition ρai union nontrivial boxes region REG 2 The assignment ai aj 1 aj m ρai αj1 αjm satisﬁes constraints c1 cm Cai Let consider arbitrary constraint ct ai Rt 1 consider component variable i1 cid4 α1 is1 i1 Since v0 satisﬁes Constraint NTB exist regions αm ism cid4 i1 αm αm ikm nontrivial box subregion v i1 α1 α1 ik1 1 cid1 v cid1 m αv isv αv ikv cid5 cid5 Rt kt St ai box αt ajt 1 cid1 t cid1 m Cai Let i1 v0 assigns αv i1 B αt i1 α1 is1 αm ism nontrivial box Region B subregion oai Eq B1 nontrivial box subregion ρai Since nontrivial box αt i1 lies completely 1 tile αjt deﬁnition constraint ct box B lies completely Rt Rt 1 tile αjt Thus region ρai subregion nontrivial box lies Rt 1 tile αjt Similarly prove region ρai subregion nontrivial box lies Rt s tile αjt s 2 cid1 s cid1 kt S Skiadopoulos M Koubarakis Artiﬁcial Intelligence 163 2005 91135 133 αjt αjt holds t 1 cid1 t cid1 m It follows deﬁnition Finally prove region ρai lies completely Rt In words prove p R2 Rt p ρai holds If p R Rt i1 region oai p oai p ρai holds Rt Therefore ρai Rt kt 1 1αjt Rt kt αjt holds p t αjt holds proves proposition 1αjt Rt kt 1αjt Rt kt ikt 3 Regions ρai αi bounding box mbbρai mbbαi Let ρai γ1 γl l cid1 m region formed ρai constraints γ1 γl c1 cm Notice ρai c1 cm ρai ρai ct t 1 cid1 t cid1 m ρai c1 cl ρai cl1 clcid11 ρai c1 cl cl1 clcid11 hold We prove infxρai γ1 γl infxai l cid2 2 We use induction number constraints l For l 2 let γ1 γ2 arbitrary constraints c1 cm When Algorithm TRANSFORM processes constraints γ1 γ2 introduces sets S1 S2 compo nent variables corresponding ai respectively Let Σ1 Σ2 set boxes v0 assigns component variables S1 S2 respectively Let Φ Ψ sets containing boxes Σ1 Σ2 respectively s Φ Ψ infx s infx ai holds Notice regions ρai γ1 ρai γ2 minimum bounding box Φ cid4 Ψ cid4 Let assume φ Φ ψ Ψ intersection φ ψ triv ial box point line segment This contradicts fact v0 satisﬁes Constraint NTB exist regions u Φ v Ψ u v nontrivial box Moreover u v intersections unioned struct ρai γ1 γ2 Since u Φ v Ψ infx u infx v infx αi Thus infx ρai γ1 γ2 infxαi Fig B1 The inductive step similar In similar way prove supx ρai supxai infy ρai infy ai supyρai supy ai Thus mbbρai mbbαi holds Similarly construction ρai form regions ρa1 ρai1 ρai1 ρan Each region ρai 1 cid1 cid1 n nonempty welldeﬁned region REG Moreover assignment REG a1 α1 αi1 ρai αi1 αn Fig B1 Proving mbbρai mbbαi 134 S Skiadopoulos M Koubarakis Artiﬁcial Intelligence 163 2005 91135 satisﬁes constraints Cai We assignment a1 ρa1 ρan satisﬁes straints C Let c ai R aj constraint C From previous discussion know regions ρai αj satisfy constraint c Since mbbαj mbbρaj follows regions ρai ρaj satisfy constraint c Therefore ntuple ρa1 ρan solution C cid1 References 1 AI Abdelmoty BA ElGeresy An intersectionbased formalism representing orientation relations geographic database Proceedings 2nd ACM Conference Advances GIS Theory 1994 2 JF Allen Maintaining knowledge temporal intervals Comm ACM 26 11 1983 832843 3 P Balbiani JF Condotta LF del Cerro A new tractable subclass rectangle algebra Proceedings IJCAI99 Stockholm Sweden 1999 pp 442447 4 A Berretti A Del Bimbo E Vicario Modeling spatial relationships color sets Proceedings IEEE Workshop Contentbased Access Image Video Libraries CVPR2000 2000 5 B Bennett Logical representations automated reasoning spatial relations PhD Thesis School Computer Studies University Leeds 1997 6 Z Cui AG Cohn DA Randell Qualitative topological relationships spatial databases Proceed ings SSD93 1993 pp 296315 7 E Clementini P Di Fellice G Califano Composite regions topological queries Inform Syst 7 1995 594759 8 E Clementini P Di Fellice D Hernandez Qualitative representation positional information Artiﬁcial Intelligence 95 1997 317356 9 WG Chinn NE Steenrod First Concepts Topology The Mathematical Association America 1966 10 E Davis Representations Commonsense Knowledge Morgan Kaufmann San Mateo CA 1990 11 JP Delgrande A Gupta T Van Allen Point based approaches qualitative temporal reasoning Pro ceedings AAAI99 Orlando FL 1999 pp 739744 12 MJ Egenhofer Reasoning binary topological relationships Proceedings SSD91 1991 pp 143160 13 B Faltings Qualitative spatial reasoning algebraic topology Proceedings COSIT95 Lecture Notes Comput Sci vol 988 Springer Berlin 1995 pp 1730 14 AU Frank Qualitative spatial reasoning distances directions geographic space J Visual Lan guages Comput 3 1992 343371 15 C Freksa Using orientation information qualitative spatial reasoning Proceedings COSIT92 Lecture Notes Comput Sci vol 639 Springer Berlin 1992 pp 162178 16 R Goyal MJ Egenhofer The directionrelation matrix representation directions relations extended spatial objects The Annual Assembly Summer Retreat University Consortium Geographic Information Systems Science 1997 17 R Goyal MJ Egenhofer Cardinal directions extended spatial objects IEEE Trans Data Knowl edge Engrg press Available httpwwwspatialmaineedumaxRJ36html 18 R Goyal MJ Egenhofer Consistent queries cardinal directions different levels Proceedings 11th International Workshop Database Expert Systems Applications 2000 19 M Grigni D Papadias C Papadimitriou Topological inference Proceedings IJCAI95 Montreal Quebec 1995 20 HW Guesgen Spatial reasoning based Allens temporal logic Technical Report TR89049 Interna tional Science Institute National Technical Berkeley 1989 21 P Jonsson T Drakengren A complete classiﬁcation tractability RCC5 J Artiﬁcial Intelligence Res 6 1997 211221 22 PC Kanellakis GM Kuper PZ Revesz Constraint query languages J Comput System Sci 51 1995 2652 S Skiadopoulos M Koubarakis Artiﬁcial Intelligence 163 2005 91135 135 23 M Koubarakis The complexity query evaluation indeﬁnite temporal constraint databases LVS Lakshmanan Ed Theoret Comput Sci 171 1997 2560 Special Issue Uncertainty Databases Deductive Systems 24 M Koubarakis S Skiadopoulos Querying temporal spatial constraint networks PTIME Artiﬁcial Intelligence 123 12 2000 223263 25 G Ligozat Reasoning cardinal directions J Visual Languages Comput 9 1998 2344 26 S Lipschutz General Topology McGraw Hill New York 1965 27 S Lipschutz Set Theory Related Topics McGraw Hill New York 1998 28 DM Mark C Freksa SC Hirtle R Lloyd B Tversky Cognitive models geographic space Internat J Geograph Inform Sci 13 8 1999 747774 29 A Mukerjee G Joe A qualitative model space Proceedings AAAI90 Boston MA 1990 pp 721727 30 B Nebel HJ Bürckert Reasoning temporal relations maximal tractable subclass Allens inter val algebra J ACM 42 1 1995 4366 31 D Papadias N Arkoumanis N Karacapilidis On retrieval similar conﬁgurations Proceedings 8th International Symposium Spatial Data Handling SDH 1998 32 D Papadias Relationbased representation spatial knowledge PhD Thesis Department Electrical Computer Engineering National Technical University Athens 1994 33 CH Papadimitriou Computational Complexity Addison Wesley Reading MA 1994 34 J Portugali I Omer Systematic distortions cognitive maps North American west coast vs west coast Israel Proceedings COSIT03 Lecture Notes Comput Sci vol 2825 Springer Berlin 2003 pp 93100 35 CH Papadimitriou D Suciu V Vianu Topological queries spatial databases J Comput System Sci 58 1 1999 2953 36 DA Randell Z Cui A Cohn A spatial logic based regions connection Principles Knowledge Representation Reasoning Proceedings Third International Conference KR92 Cambridge MA Morgan Kaufmann San Mateo CA 1992 37 J Renz Maximal tractable fragments region connection calculus complete analysis Proceedings IJCAI99 Stockholm Sweden 1999 pp 448455 38 J Renz B Nebel On complexity qualitative spatial reasoning maximal tractable fragment region connection calculus Artiﬁcial Intelligence 12 1999 95149 39 S Skiadopoulos M Koubarakis Qualitative spatial reasoning cardinal directions semantics al gorithms computational complexity Technical Report TR20003 National Technical University Athens 2000 Available httpwwwdblabecentuagrpublications 40 S Skiadopoulos M Koubarakis Composing cardinal directions relations Proceedings 7th In ternational Symposium Spatial Temporal Databases SSTD01 Lecture Notes Comput Sci vol 2121 Springer Berlin 2001 pp 299317 41 S Skiadopoulos M Koubarakis Qualitative spatial reasoning cardinal directions Proceedings 7th International Conference Principles Practice Constraint Programming CP02 Lecture Notes Comput Sci vol 2470 Springer Berlin 2002 pp 341355 42 S Skiadopoulos M Koubarakis Composing cardinal direction relations Artiﬁcial Intelligence 152 2 2004 143171 43 S Skiadopoulos Query evaluation constraint databases PhD Thesis School Electrical Computer Engineering National Technical University Athens 2002 44 AP Sistla C Yu R Haddad Reasoning spatial relationships picture retrieval systems Proceed ings VLDB94 1994 pp 570581 45 B Tversky Distortions memory maps Cognitive Psychology 13 1981 407433 46 P van Beek Reasoning qualitative temporal information Artiﬁcial Intelligence 58 1992 297326 47 M Vilain H Kautz P van Beek Constraint propagation algorithms temporal reasoning revised port DS Weld J Kleer Eds Readings Qualitative Reasoning Physical Systems Morgan Kaufmann San Mateo CA 1989 pp 73381 48 K Zimmermannm Enhancing qualitative spatial reasoningcombining orientation Proceedings COSIT93 Lecture Notes Comput Sci vol 716 Springer Berlin 1993 pp 6976