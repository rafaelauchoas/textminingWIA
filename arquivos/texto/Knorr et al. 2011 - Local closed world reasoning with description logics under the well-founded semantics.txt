Artiﬁcial Intelligence 175 2011 15281554 Contents lists available ScienceDirect Artiﬁcial Intelligence wwwelseviercomlocateartint Local closed world reasoning description logics wellfounded semantics Matthias Knorr José Júlio Alferes Pascal Hitzler b CENTRIA Departamento Informática FCTUNL Quinta da Torre 2829516 Caparica Portugal b Knoesis Center Department Computer Science Engineering Wright State University 3640 Colonel Glenn Hwy Dayton OH 45435 USA r t c l e n f o b s t r c t Article history Received 24 September 2009 Received revised form 21 January 2011 Accepted 23 January 2011 Available online 26 January 2011 Keywords Knowledge representation Description logics ontologies Nonmonotonic reasoning Logic programming Semantic Web An important question upcoming Semantic Web best combine open world ontology languages OWLbased ones closed world rulebased languages One mature proposals combination known hybrid MKNF knowl edge bases Motik Rosati 2010 52 based adaptation Stable Model Semantics knowledge bases consisting ontology axioms rules In paper propose wellfounded semantics nondisjunctive hybrid MKNF knowledge bases promises provide better eﬃciency reasoning compatible OWLbased semantics traditional WellFounded Semantics logic programs Moreover proposal allows detection inconsistencies possibly occurring tightly integrated ontology axioms rules little additional effort We identify tractable fragments resulting language 2011 Elsevier BV All rights reserved 1 Introduction motivation The Semantic Web recently major source inspiration Knowledge Representation Reasoning KRR The underlying idea Semantic Web use KRR techniques enhance data World Wide Web knowledge bases making data available processing intelligent systems Semantic Web mature ﬁeld research industrial applications Semantic Web technologies way Semantic Web topic clearly stay However believe KRR formalisms Semantic Web adequate application areas Semantic Web We motivate section KRR formalisms combining open closed world reasoning preferable fragments classical ﬁrstorder logics present application scenarios illus trating requirement combination Then limitations existing approaches state main contributions proposal 11 Open vs closed world reasoning The prominent expressive KRR approach employed Semantic Web research based Description Logics 327 In particular Web Ontology Language OWL 26 based description logic SROIQD recommended standard World Wide Web Consortium W3C modelling Semantic Web knowledge bases commonly known ontologies Corresponding author Tel 351 21 294 8536 fax 351 21 294 8541 Email addresses mknorrdifctunlpt M Knorr jjadifctunlpt JJ Alferes pascalpascalhitzlerde P Hitzler 00043702 matter 2011 Elsevier BV All rights reserved doi101016jartint201101007 M Knorr et al Artiﬁcial Intelligence 175 2011 15281554 1529 Description Logics DLs turn bear ﬁrstorder predicate logic semantics DLs monotonic adhere Open World Assumption OWA This means negative conclusions drawn knowledge base based information explicitly present knowledge base Being based classical ﬁrstorder logic DLs differ KRR formalisms studied nonmonotonic reasoning ﬁeld usually apply Closed World Assumption CWA Under assumption nonprovable expressions assumed false The decision rely OWA appears natural light envisioned applications related World Wide Web absence piece knowledge generally taken indication piece knowledge false However application scenarios CWA partial closure knowledge base natural choice Such scenarios occur ontologybased reasoning conjunction data stored database Database data usually considered complete statements database taken false As example combination open closed world assumption desired consider large case study described 54 containing millions assertions matching patient records clinical trials criteria In clinical domain open world reasoning needed radiology laboratory data For example lab test asserts negative ﬁnding arbitrary assumptions results test That certain patient speciﬁc kind cancer corresponding test negative result However observed 54 closed world assumption data medical treatment infer patient medication stated The work 54 applies open world reasoning claims usage closed world reasoning data medical treatment highly desirable combination OWA CWA open problem work Similar situations occur matchmaking Semantic Web Services cf 22 scenarios medical domain In fact life sciences including medicine prominently studied application area OWL Several largescale ontologies developed area practice GALEN1 SNOMED2 These ontologies provide uniﬁed medical terminologies management exchange clinical information The knowledge bases typically consist information anatomy diseases procedures drugs applications range medical record management diagnostics support SNOMED example case study described All appli cations use ontology reasoning based OWA But diﬃcult foresee situations domains beneﬁt local closed world reasoning Consider example medical knowledge base decide certain anaesthetic applied surgery depending patient allergic anaes thetic This information available modelled CWA emergency situation know explicitly allergy assume patient allergic apply anaesthetic Other examples model exceptions anatomical terminology existence persons heart actually righthand Exception modelling directly possible classical ﬁrstorder logic problem usually known Artiﬁcial Intelligence speciﬁcation problem possible OWL OWA All examples demonstrate application developers frequently voice favourable local closed world modelling additional feature ontologybased systems More precisely desirable KRR formalism allows interpret parts knowledge base CWA OWA Such capabilities considerably enhance usability OWL 12 Combining rules ontologies Ontologies standard OWA formalism rules usually apply CWA A combination ontologies rules clearly yield combination OWA CWA However combining rules ontologies nontrivial task naive combination ontologies OWAbased rules undecidable 32 In fact formalisms rules formalisms ontologies differ substantially decidability achieved For ontologies decidability achieved speciﬁc syntactic restrictions available ﬁrstorder predicates restricting way predicates related Rules syntactic restrictions usually limited applicability ﬁnitely different objects explicitly appearing knowledge base An immediate effect differences expressive features approaches available approach Namely rules possible express non treeshapelike relationships 623 uncle brother ones father integrity constraints 56 state certain piece information explicitly present database closed world reasoning speciﬁcation exceptions discussed Ontologies contrary possible express open world reasoning reason unbounded inﬁnite domains suited represent types incomplete information schema knowledge For example rulebased formalisms typically person father mother persons listing parents explicitly Our stance combination rules 1 httpwwwopengalenorg 2 httpwwwihtsdoorgsnomedct 3 The DL SROIQ 30 provides role composition axioms address means use cases 1530 M Knorr et al Artiﬁcial Intelligence 175 2011 15281554 ontologies current applications web highly sophisticated means knowledge representation general As argued 52 hybrid formalism combining rules DL ontologies satisfy certain criteria Faithfulness The integration DLs rules preserve semantics formalisms semantics hybrid knowledge base component semantics component In words addition rules DL change semantics DL vice versa Tightness Rules layered DL vice versa integration DL rules tight sense DL rule component able contribute consequences component Flexibility The hybrid formalism ﬂexible allow view predicate open closed world interpretation This allows enrich DL nonmonotonic consequences rules enrich rules capabilities ontology reasoning described DL Decidability To obtain useful formalism applications Semantic Web hybrid formalism decidable preferably low worstcase complexity 13 Hybrid MKNF stable models vs wellfounded semantics As shown 52 proposals combining rules ontologies 8121416253639424552 58 satisfying criteria Hybrid MKNF knowledge bases 52 build logics Minimal Knowledge Negation Failure MKNF 47 A detailed discussion importance Hybrid MKNF knowledge bases modelling knowledge Semantic Web 31 2223 provide arguments usefulness epistemic reasoning way MKNF logics The proposal Motik Rosati 52 seamlessly integrates arbitrary decidable description logics essentially disjunctive logic programming rules making possible reason combination monotonic open world knowledge nonmonotonic closed world knowledge single hybrid framework Several reasoning algorithms presented 52 Hybrid MKNF knowledge bases shown data complexity reasoning framework cases higher reasoning corresponding fragment logic programming Thus adding ontology rules general increase data complexity compared rules But said adding rules ontologies Eg data complexity coNP combination normal logic programming rules ontologies data complexity Description Logics fragment complexity class P Indeed approach Hybrid MKNF knowledge bases powerful add rules arbitrary nonmonotonic negation ontology general loose tractability Only speciﬁc limited use nonmonotonic negation stratiﬁed rules admits maintain tractability 52 However claim robustness wrt updates combination different sources information important property combination rules ontologies Since guaranteed property maintained cases obtain higher computational complexity general The reason increase complexity lies fact shown 47 rules interpreted similar way Stable Model Semantics SMS 19 logic programs reasoning algorithms NPhard So semantics based SMS adopted improvements complexity combination rules ontologies bound NPhardness The major semantics Logic Programming LP WellFounded Semantics WFS 61 offer solution WFS threevalued semantics propositions true false undeﬁned SMS propositions true false WFS assigns single model wellfounded model nondisjunctive logic program The WFS sound respect SMS proposition true resp false WFS true resp false stable models Though WFS semantically weaker SMS terms derivable true false consequences reasoning WFS lower computational complexity SMS normal programs data complexity P WFS instead coNP SMS 7 Our stance lower complexity bound makes WFS promising SMS basis semantics hybrid knowledge bases This case application areas mentioned 54 huge amounts data involved Additionally reasoning SMS requires obtain entire model knowledge base like 52 combina tions rules ontologies WFS amenable topdown querydriven reasoning knowledge base relevant speciﬁc query accessed 6 This makes WFS based approach suitable large scale applications 14 Contribution In paper deﬁne new semantics Hybrid MKNF knowledge bases restricted nondisjunctive rules soundly approximates semantics 52 important cases strictly lower complexity class In partic ular dealing tractable description logic combined approach remains tractable wrt data complexity We achieve extending twovalued MKNF semantics 52 truth values twovalued model M Knorr et al Artiﬁcial Intelligence 175 2011 15281554 1531 52 corresponds total threevalued model approach vice versa wrt derivable knowledge threevalued MKNF model wellfounded MKNF model Our proposal straightforwardly satisﬁes criteria presented combination rules ontologies Moreover proposed semantics guarantees following properties The wellfounded MKNF model faithful wrt twovalued MKNF models 52 query true resp false wellfounded MKNF model true resp false twovalued MKNF model Our proposal coincides original DLsemantics rules present original WFS logic pro grams DL component If knowledge base consistent approach coherent sense 55 formula ϕ ﬁrstorder false ontology nonmonotonic interpretation ϕ rules enforced false If knowledge base inconsistent approach allows detect inconsistencies substantial additional computational effort apart consistency check ontology The computational data complexity approach depends computational complexity applied DL considered DL polynomial data complexity combination rules remains polynomial 15 Outline running example The rest paper structured follows We ﬁrst recall Section 2 preliminaries Description Logics logics Hybrid MKNF Hybrid MKNF knowledge bases Then Section 3 present semantic framework extends MKNF semantics truth values based wellfounded MKNF model deﬁned In Section 4 construct wellfounded MKNF model inconsistency detection works A comparison related work presented Section 5 conclude Section 64 Throughout paper use following toy example Example 1 Consider online store selling audio CDs In order attract clients raise sales store manager decided introduce sophisticated tools recommending searching CDs For purpose ontology structuring maintaining database CDs Each CD associated unique identiﬁer publisher release date pieces music CD contains Each piece music track possible piece tracks common classical music Additionally piece unique identiﬁer associated artist composer genre origin piece Moreover able express guidelines recommendations based general criteria based customer speciﬁcations For example store want automatically recommend customers CDs offer sellers Or customer want recommendations CDs according preference criteria probably likes Whereas ﬁrst guideline represented ontology second requires closed world assumption inferring default absence evidence contrary customer CD represented nonmonotonic rule 2 Preliminaries In section recall preliminary notions needed rest paper In present general notions Description Logics logics minimal knowledge negation failure Hybrid MKNF knowledge bases 21 Description logics We focus presentation subsection description logic ALC foundational description logic research OWL However approach basically independent underlying description logic reader familiar description logics diﬃculty applying approach expressive description logics SHOIN SROIQ underlie OWL resp OWL 25 We recall standard extensions appearing example lightweight description logics EL 2 For background description logics refer 327 The basic elements represent knowledge DLs individuals represent objects domain discourse concepts group individuals common properties roles relate individuals Based sets N I NC N R individual names concept names role names respectively syntactic elements ALC constructed according following grammar A NC denotes atomic concept Ci denote complex concepts r N R denotes role ai N I denote individuals Ci cid6 A C C1 cid7 C2 C1 cid8 C2 rC rC 4 A preliminary shorter version work presented 37 5 See 27 deﬁnitions description logics relationships OWL OWL 2 1532 M Knorr et al Artiﬁcial Intelligence 175 2011 15281554 The semantics syntactic elements ALC deﬁned terms interpretations An interpretation I cid3I I consists nonempty set cid3I domain I interpretation function I maps individual N I distinct element aI cid3I concept A NC set A I cid3I role r N R relation r I cid3I cid3I An interpretation extended complex concepts follows cid6I cid3I I C I 2 C I 2 C1 cid7 C2I C I 1 C1 cid8 C2I C I 1 CI cid3I C I rCI rCI x cid3I x cid3I cid2 cid2 cid3 cid3 yx y r I implies y C I cid3 cid3 yx y r I y C I cid4 cid4 An ALC knowledge base O ﬁnite set axioms formed concepts roles individuals A concept assertion axiom form Ca assigns individual concept C A role assertion axiom form ra1 a2 relates individuals a1 a2 role r Concept role assertions form ABox A concept inclusion axiom form C1 cid15 C2 states subsumption concept C1 concept C2 A concept equivalence axiom C1 C2 shortcut inclusions C1 cid15 C2 C2 cid15 C1 Concept inclusions concept equivalences form TBox TBox ABox form knowledge base O An interpretation I satisﬁes concept assertion Ca aI C I role assertion ra1 a2 aI 2 An interpretation satisﬁes axioms knowledge base O called model O A concept C called satisﬁable respect O O model I C I cid17 ALC decidable logic reasoning ALC ExpTimecomplete 3 2 concept equivalence C1 C2 C I 2 r I concept inclusion C1 cid15 C2 C I 1 aI C I C I ALC extended ways common extension addition role inclusion axioms TBox Since use role inclusions running example recall A role inclusion axiom form r cid15 s states role r subsumed role s A role composition axiom form r s cid15 t states role t subsumes composition roles r s An interpretation I satisﬁes role inclusion r cid15 s r I cid15 sI role composition axiom r s cid15 t a1 a2 a3 cid3I a1 a2 r I a2 a3 sI a1 a3 t I Note role compositions express transitivity roles left rightidentity roles 1 1 Example 2 Consider online store scenario Example 1 The following axioms assertions ontology store uses6 CD cid15 HasPiecePiece Piece cid15 HasArtistArtist HasPiece HasArtist cid15 HasArtist TopSeller cid8 OnOffer cid15 Recommend HasPieceBNAW BlueTrain HasArtistBlueTrain JohnColtrane 1 2 3 4 5 6 Axiom 1 states CD consists piece axiom 2 expresses piece music artist The role composition axiom 3 states x related y HasPiece y related z HasArtist x related z HasArtist HasArtist leftidentity role 13 allow derive artist piece certain CD artist CD Note conclusion drawn present CDs artists pieces music intended reasoning schema knowledge inﬁnite domain Of course speciﬁc information available assertions 5 6 able derive John Coltrane artist album BNAW likewise artists CD explicitly mentioned example Axiom 4 expresses general guideline recommendations CDs offer sellers automatically recommended customers 6 In axioms paper adopt convention names starting capital letter represent concepts roles termed DLatoms deﬁned later paper names starting lower case letter represent variables predicates appearing ontology called nonDLatoms deﬁned later paper In general names individualsobjects start lower case letter We exception names running example usually proper names 22 Logics minimal knowledge negation failure M Knorr et al Artiﬁcial Intelligence 175 2011 15281554 1533 The logic minimal knowledge negation failure MKNF 47 extends ﬁrstorder logic modal operators K inspect knowledge base intuitively given ﬁrstorder formula ϕ K ϕ asks ϕ known ϕ check ϕ known The modal operators permit local closed world reasoning In particular operator allows draw conclusions absence information way similar default negation Logic Programming We present syntax semantics MKNF introduced 5152 Let Σ Σc Σ f Σp ﬁrstorder signature Σc set constants Σ f set function symbols Σp set predicates containing binary equality predicate The syntax MKNF formulas Σ deﬁned follows A ﬁrstorder atom P t1 tn MKNF formula P predicate ti ﬁrstorder terms If ϕ MKNF formula ϕ x ϕ K ϕ ϕ MKNF formulas likewise ϕ1 ϕ2 MKNF formulas ϕ1 ϕ2 Moreover ϕ1 ϕ2 ϕ1 ϕ2 ϕ1 ϕ2 x ϕ t f t1 t2 t1 cid17 t2 abbreviations respectively ϕ1 ϕ2 ϕ1 ϕ2 ϕ1 ϕ2 ϕ2 ϕ1 x ϕ t1 t2 t1 t2 Firstorder atoms form t1 t2 resp t1 cid17 t2 called equalities resp inequalities ϕt1x1 tnxn denotes formula obtained substituting free variables xi ϕ variables scope quantiﬁer terms ti Given ﬁrstorder formula ϕ K ϕ called modal Katom ϕ modal notatom modal Katoms notatoms modal atoms An MKNF formula ϕ called strict modal atom ϕ occurs scope modal operator An MKNF formula ϕ free variables closed MKNF formula ϕ ground ϕ contain variables An MKNF formula ϕ modally closed modal operators K applied ϕ closed subformulas ϕ positive ϕ contain operator An MKNF formula ϕ subjective ﬁrstorder atoms ϕ occur scope modal operator ϕ ﬂat ϕ subjective occurrences modal atoms ϕ strict Let Σ signature cid3 universe A ﬁrstorder interpretation I Σ cid3 assigns object aI cid3 f Σ f relation P I cid3n nary constant Σc function f I cid3n cid3 nary function symbol predicate P Σp Furthermore I interprets predicate equality α β cid3 α β I iff α β Unlike standard ﬁrstorder logic element α Σ signature Σ required contain special constant nα α The interpretation variablefree term t f s1 sn deﬁned recursively called nI α t I f I sI 1 sI n The semantics MKNF formula signature Σ henceforth considered implicit deﬁnitions deﬁned follows An MKNF structure triple I M N I ﬁrstorder interpretation cid3 Σ M N non sets ﬁrstorder interpretations cid3 Σ Given MKNF structure I M N satisﬁability closed MKNF formulas deﬁned follows I M N cid23 P t1 tn I M N cid23 ϕ I M N cid23 ϕ1 ϕ2 I M N cid23 x ϕ I M N cid23 K ϕ I M N cid23 ϕ n cid6 P I cid5 1 t I t I iff iff I M N cid17cid23 ϕ iff I M N cid23 ϕ1 I M N cid23 ϕ2 iff I M N cid23 ϕnαx α cid3 iff J M N cid23 ϕ J M iff J M N cid17cid23 ϕ J N Note evaluation K kept separate deﬁnition satisﬁability The relation operators established notion twovalued MKNF model deﬁned An MKNF interpretation M universe cid3 nonempty set ﬁrstorder interpretations For closed MKNF mula ϕ M satisﬁes ϕ written M cid23 ϕ I M M cid23 ϕ I M The notion twovalued MKNF model closed MKNF formula ϕ based preference relation MKNF interpretations satisfy ϕ More precisely MKNF interpretation M cid3 twovalued MKNF model closed MKNF formula ϕ 1 M satisﬁes ϕ 2 cid24 M An MKNF formula ϕ MKNF sat MKNF interpretation M isﬁable twovalued MKNF model ϕ exists ϕ MKNF unsatisﬁable Furthermore ϕ MKNF entails ψ written ϕ cid23MKNF ψ M cid23 ψ twovalued MKNF model M ϕ cid24 M cid17cid23 ϕ I cid24 M I M cid24 M cid24 cid24 Note deﬁnition model asymmetric treatment modal operators K In fact max imisation M 2 component structure evaluating operator K This results minimisation derivable Katoms twovalued MKNF model given formula ϕ Example 3 Though M p satisﬁes K p p M twovalued MKNF model ﬁrst formula M twovalued MKNF model second I cid24 M cid23 p holds M cid24 M M cid24 M cid24 The MKNF semantics originally deﬁned 47 shows certain undesirable properties counterintuitive seman tics caused usage arbitrary universes differing interpretation constants different interpretations To overcome problems 52 additionally applies standard assumption hybrid MKNF knowledge bases We 1534 M Knorr et al Artiﬁcial Intelligence 175 2011 15281554 brieﬂy recall problems 52 notion standard names assumption introduced overcome refer complete discussion 52 One problem MKNF 47 integration rules ontologies usage arbitrary universes Consider MKNF formula ϕ ϕ1 ϕ2 ϕ1 K P ϕ2 P b f Intuitively expect ϕ satisﬁable indication P b true However universe contains element b interpreted object ϕ satisﬁed In case unintendedly derives ϕ cid23 b holds Another problem caused constants interpreted differently different interpretations Consider ϕ1 K P ϕ2 x K P x In case expect ϕ1 cid23 ϕ2 twovalued MKNF model ϕ1 twovalued MKNF model ϕ2 However let M MKNF interpretation containing elements I1 I2 I1 ﬁrstorder interpretation interpreted α1 I1 cid23 P α1 I2 ﬁrstorder interpretation interpreted α2 I2 cid23 P α2 We M cid23 ϕ1 M cid23 ϕ2 require x domain P x true I M To avoid unintended behaviour standard assumption imposed MKNF Deﬁnition 1 See Standard Name Assumption 52 A ﬁrstorder interpretation I signature Σ employs standard assumption 1 universe cid3 I contains constants Σ countably inﬁnite number additional constants called parame ters 2 t I t ground term t constructed function symbols Σ constants cid3 3 predicate interpreted I congruence relation reﬂexive symmetric transitive allows replacement equals equals 18 Consequences ﬁrstorder formulas standard ﬁrstorder semantics standard assumption distinguished 52 Thus rest paper use standard assumption ﬁrstorder inferences 23 Hybrid MKNF knowledge bases Hybrid MKNF knowledge bases introduced 51527 essentially MKNF formulas restricted certain form They consist components decidable description logic knowledge base translatable ﬁrstorder logic ﬁnite set rules modal atoms More precisely approach hybrid MKNF knowledge bases applicable ﬁrstorder fragment DL satisfying following conditions knowledge base O DL translated8 formula π O functionfree ﬁrstorder logic equality ii DL supports ABoxassertions form P a1 P predicate ai stant DL iii satisﬁability checking instance checking checking entailments form O cid23 P a1 decidable In particular description logics OWL satisfy conditions Note limit function free ﬁrstorder logic decidability possible Thus rest paper allow function symbols hybrid MKNF knowledge bases We recall MKNF rules hybrid MKNF knowledge bases 51 Deﬁnition 2 Let O DL knowledge base A functionfree ﬁrstorder atom P t1 tn Σ P occurs O called DLatom atoms called nonDLatoms An MKNF rule r following form H Ai B functionfree ﬁrstorder atoms K H1 K Hl K A1 K An B1 Bm 7 The sets K H K Ai B called rule head positive body negative body respectively A rule r nondisjunctive l 1 r positive m 0 r fact n m 0 A program P ﬁnite set MKNF rules A hybrid MKNF knowledge base K pair O P K nondisjunctive rules P nondisjunctive Hybrid MKNF knowledge bases rules9 deﬁned coincide syntactically MKNF formula For interpreting hybrid MKNF knowledge bases terms MKNF logic transformation π transforms DL ontology ﬁrstorder formulas extended knowledge bases follows Deﬁnition 3 Let K O P hybrid MKNF knowledge base We extend π rules r form 7 P K follows cid26x vector free variables r 7 We focus presentation 51 omit classical negation arbitrary ﬁrstorder formulas rules presented 52 8 See 3 standard translations Description Logic axioms 9 As mentioned main results apply nondisjunctive rules l 1 rule form 7 However original deﬁnition 52 present deﬁnition general form MKNF rules M Knorr et al Artiﬁcial Intelligence 175 2011 15281554 1535 π r cid26x K H1 K Hl K A1 K An B1 Bm π P π K K π O π P π r cid7 rP To simplify presentation abuse notation rest paper identify K π K It obvious context K represents ﬁrstorder transformation π K Hybrid MKNF knowledge bases function symbols general undecidable restricted way The reason rules applied objects inﬁnite domain The basic idea reasoning hybrid MKNF knowledge bases decidable apply rules individuals appear knowledge base This restriction achieved DLsafety Deﬁnition 4 An MKNF rule r DLsafe variable r occurs nonDLatom K B occurring body r A hybrid MKNF knowledge base K DLsafe rules K DLsafe In rest paper stated consider DLsafe knowledge bases Grounding knowledge base deﬁned ensures rules apply individuals appearing knowl edge base DLsafety guarantees individual Deﬁnition 5 Given hybrid MKNF knowledge base K O P ground instantiation K KB KG O PG PG obtained P replacing rule r P set rules substituting variable r constants K possible ways It shown 52 DLsafe hybrid knowledge base K twovalued MKNF models K KG coincide Example 4 Consider scenario Example 1 axioms assertions Example 2 These axioms ontology O hybrid MKNF knowledge base K O P In P encode recommendation guidelines particular require closed world reasoning For example imagine want customers recommendations interesting CDs low evaluation This encoded rules shown below10 K Recommendx K CDx ownsx LowEvalx K interestingx K interestingx K CDx K CD y K owns y ownsx K similarx y K similarx y K CDx K CD y K Artistz K HasArtistx z K HasArtist y z K ownsEnConcert K HasArtistEnConcert JackJohnson K HasArtistToTheSea JackJohnson K OnOfferBNAW 8 9 10 11 12 13 14 Note closed world reasoning owns lowEval In case predicate owns reasonable assume knowledge owned CDs fully available So fact stating given CD owned assume CD owned In case predicate lowEval happen evaluation available want recommendation CD considered recommendation actually known low evaluation CD Such evaluation taken customers store web page professional reviews Here simplicity reasoning process implicit Moreover rules CD interesting customer owns CD similar 9 CDs similar common artist 10 Note predicate CD ensure DLsafety assume instances predicate relevant drawn conclusion appropriately deﬁned If add facts 1114 derive RecommendToTheSea low evaluation known ToTheSea RecommendBNAW BNAW offer This example illustrates hybrid MKNF knowledge bases allow obtain consequences predicates deﬁned ontology rules The result applied derive subsequent consequences rules ontology Note facts 12 13 explicitly added representing implicit consequences derivable appropriate ontology similar HasArtistBNAW JohnColtrane Example 2 10 In encoding simplicity consider program knowledge base speciﬁc customer This avoids explicit represen tation customers relation stating CDs owned customer 1536 M Knorr et al Artiﬁcial Intelligence 175 2011 15281554 Table 1 Data complexity instance checking MKNF Rules Deﬁnite Stratiﬁed Normal DL P P coNP DL P P P coNP DL coNP coNP cid3p 2 Π p 2 In 52 reasoning algorithms provided combinations arbitrary description logic fragments rules differing expressivity Table 1 presents data complexity instance checking combinations nondisjunctive rules arbitrary stratiﬁed11 negation rules description logics fragments differing computa tional complexity We point allowing arbitrary nonmonotonic negation increases data complexity drastically particular tractability This case rules Example 4 stratiﬁed However initial set rules running example elaborated nonstratiﬁed addition rule 17 Example 8 renders set rules nonstratiﬁed With proposal present following sections sets nonstratiﬁed rules constitute problem complexity 3 Threevalued MKNF semantics In section introduce threevalued semantics hybrid MKNF knowledge bases The rationale main goal threevalued semantics deﬁne semantics closely related wellfounded semantics logic programs This order advantage data complexity WFS lower data complexity corresponding twovalued semantics Nevertheless DLpart hybrid MKNF knowledge base interpreted twovalued semantics Thus achieve faithful integration sense rules meaning knowledge base exactly coincides usual semantics DLs The deﬁnition threevalued semantics presented section applies equally standard assumption However want achieve semantics faithful wrt twovalued MKNF semantics presented Section 2 assume standard assumption 31 Evaluation MKNF structures The twovalued hybrid MKNF semantics 52 closely related cf 47 stable models semantics 19 In meaning knowledge base determined set models In fact MKNF formula ϕ p K q q K p corresponding set rules models model p true q false p false q true Moreover twovalued models general obtained guess check process having high computational complexity The wellfounded semantics logic programs 61 generalises twovalued models stable model semantics threevalued setting In way possible determine meaning knowledge base solely basis single minimal model obtained lower computational complexity Intuitively truth value u denoting undeﬁned introduced alternative values t f enabling delay evaluation values information available We want follow idea deﬁning threevalued MKNF semantics There problem taken account interested applying semantics hybrid MKNF knowledge bases containing twovalued ontologies want integrate faithfully going deﬁne semantics way MKNF formula corresponding DL fragment ensured twovalued We deﬁne threevalued MKNF semantics extends twovalued semantics 52 remains valued case MKNF formulas modal operators We start deﬁning MKNF structures threevalued setting Deﬁnition 6 A threevalued partial MKNF structure I M N consists ﬁrstorder interpretation I pairs M cid28M M1cid29 N cid28N N1cid29 sets ﬁrstorder interpretations M1 M N1 N An MKNF structure called total M cid28M Mcid29 N cid28N Ncid29 In twovalued semantics MKNF structure I M N contains sets interpretations M N evaluating modal atom K ϕ respectively ϕ t f depending ϕ contained elements M respectively N This clearly leaves space extension truth value u So turn sets interpretations pairs sets interpretations Then modal atom K ϕ true wrt cid28M M1cid29 ϕ true elements M modal atom K ϕ false ϕ true elements M1 modal atom K ϕ undeﬁned ϕ true elements M1 The additional restrictions saying M1 M N1 N needed ensure modal atom true false time easily shown induction holds MKNF 11 Essentially rules separated strata evaluated separately Section 44 52 M Knorr et al Artiﬁcial Intelligence 175 2011 15281554 1537 formula ϕ In way guarantee fourth truth value needed Nevertheless given MKNF formula ϕ threevalued MKNF structures evaluate K ϕ ϕ true time like twovalued case prevent happening deﬁning MKNF interpretation pairs We deﬁne evaluation closed MKNF formulas threevalued MKNF structures Deﬁnition 7 Let I M N threevalued MKNF structure t u f set truth values order f u t operator max resp min chooses greatest resp element respect ordering We deﬁne I M N P t1 tn I M N ϕ n P I n P I cid8 f t iff t I iff t I 1 t I 1 t I iff I M N ϕ f t u iff I M N ϕ u iff I M N ϕ t f I M N ϕ1 ϕ2 minI M N ϕ1 I M N ϕ2 I M N ϕ1 ϕ2 t iff I M N ϕ2 cid2 I M N ϕ1 f I M N x ϕ maxI M N ϕαx α cid3 I M N K ϕ t iff J cid28M M1cid29 N ϕ t iff J cid28M M1cid29 N ϕ f J M1 J M I M N ϕ iff J M cid28N N1cid29ϕ f J N1 iff J M cid28N N1cid29ϕ t J N f u t f u As intended evaluation purely threevalued ﬁrstorder atoms evaluated twovalued case In fact MKNF formula ϕ modal operators pure description logic knowledge base twovalued It easily seen ϕ evaluated exactly way scheme presented Section 2 This desired particular knowledge base consists DL So truth value affects MKNF formulas containing modal atoms case hybrid MKNF knowledge bases occur rules These rules corresponding implications longer interpreted way expect boolean perspective u u true evaluation deﬁned u u actually undeﬁned The reason change way rules true false similarly happens logic programming contain undeﬁned modal atoms Intuitively advantage hybrid MKNF knowledge bases leave single modal atoms undeﬁned necessarily having create models entire knowledge base true false We point evaluation wrt cid28N N1cid29 symmetrical evaluation K wrt cid28M M1cid29 conditions switched Eg condition true modal Katoms wrt M yields false modal notatoms wrt N In case M N M1 N1 corresponds twovalued monotonic evaluation Section 2 32 Threevalued MKNF models Given deﬁnition evaluation MKNF formulas ready extend twovalued MKNF interpreta tions MKNF models truth values For purpose generalise twovalued MKNF interpretations M pairs MKNF interpretations M N formula undeﬁned Deﬁnition 8 An MKNF interpretation pair M N consists MKNF interpretations M N N M An MKNF interpretation pair satisﬁes closed MKNF formula ϕ written M N cid23 ϕ cid5 cid6 I cid28M Ncid29 cid28M Ncid29 ϕ t I M If M N MKNF interpretation pair M N called total If exists MKNF interpretation pair satisfying ϕ ϕ consistent The set M contains interpretations model truth N models true undeﬁned Evidently twovalued case modelled N false The subset relation M N ensures MKNF interpretation pairs deﬁned accordance threevalued MKNF structures formula evaluated exactly truth value Note striking similarity compared MKNF interpretations valued case MKNF interpretation pair M N evaluate K simultaneously 1538 M Knorr et al Artiﬁcial Intelligence 175 2011 15281554 We deﬁne preference relation MKNF interpretation pairs required notion nonmonotonic threevalued MKNF models following approach similar twovalued case minimising nonfalsity truth undeﬁnedness case formulas wrt K Deﬁnition 9 Any MKNF interpretation pair M N threevalued MKNF model given closed MKNF formula ϕ 1 M N satisﬁes ϕ 2 MKNF interpretation pair M cid24 N cid24 M M N I cid24 M cid24 cid24 N I cid24 M M cid24 N cid24 cid28M cid24 N N cid24cid29 cid28M Ncid29ϕ cid17 t cid24 inclusions proper Condition 1 checks M N evaluates ϕ t second condition veriﬁes M N contains knowledge necessary obtain evaluation t This achieved generalising corresponding notion cid24 properly subsumes M N valued MKNF semantics threevalued case MKNF interpretation pair M cid24 evaluate K M N evaluates checked ϕ evaluate t I M Intuitively consider MKNF interpretation pair guess true evaluation considered formula condition 2 checks having ﬁxed evaluation modal notatoms evaluation modal Katoms actually minimal wrt order f u t truth values We illustrate example minimisation achieved cid24 M cid24 N cid24 N cid24 Example 5 Consider MKNF formula ϕ corresponding rules p K q q K p cid24 N An MKNF interpretation pair M N satisﬁes condition 1 Deﬁnition 9 evaluate conjuncts true The MKNF interpretation pair p p q p q evaluates K p t K q u satisﬁes ﬁrst condition cid24 p q p q p q violates condition 2 In fact threevalued MKNF model ϕ M cid24 threevalued MKNF model The operator evaluated wrt MKNF MKNF interpretation pair M interpretation pair M N considering condition 2 Deﬁnition 9 N p q implications true M set possible interpretations p q p q satisfy condition 2 Thus obtain MKNF interpretation pair evaluates K p K q u In words initial MKNF interpretation pair minimal wrt evaluation modal Katoms Similar minimisation evaluation K p t u changes u f possible maintain original M p p q set N M Now evaluation K q minimised u f easy verify resulting MKNF interpretation pair fact threevalued MKNF model ϕ cid24 N It pointed larger set M N true undeﬁned knowledge inferred So minimi cid24 ensures MKNF interpretation pairs M cid24 M cid24 N cid24 sation achieved increasing sets consideration Note N check reasonable candidates augmenting M N12 We adapt notions needed rest paper twovalued MKNF semantics threevalued setting Deﬁnition 10 If threevalued MKNF model given closed MKNF formula ϕ ϕ called MKNFconsistent ϕ called MKNFinconsistent If I cid28M Ncid29 cid28M Ncid29ψ t threevalued MKNF models M N ϕ ϕ entails ψ written ϕ cid233 MKNF ψ Note MKNFinconsistent MKNF formulas necessarily evaluate f For example ϕ K u u evaluates u MKNF interpretation pair u u In fact MKNFinconsistent formula evaluate t case twovalued MKNF semantics 52 Eg ϕ p MKNFinconsistent evaluates t MKNF interpretation pairs MKNF interpretations 52 This constitute problem affect deﬁnitions MKNF models MKNFconsistency Though notions inconsistency unsatisﬁability usually applied technical sense want distinguish MKNFsatisﬁability twovalued case MKNFconsistency threevalued MKNF models Like wise distinguish twovalued notion MKNF entails threevalued entails In spite keeping notions separate threevalued MKNF models closely related twovalued MKNF model M corresponds exactly total threevalued vice versa For purpose ﬁrst prove evaluation MKNF structure I M N evaluation total threevalued structure I cid28M Mcid29 cid28N Ncid29 identical Intuitively holds undeﬁned total threevalued structure 12 In comparison 37 deﬁnition slightly altered simplify proofs computation case total MKNF interpretation pair M M cid24 actually yields true evaluation I suﬃcient check total MKNF interpretation pair M This simpliﬁcation separately undeﬁnedness total MKNF interpretation pair minimisation undeﬁnedness justiﬁed intuition enlarging N necessary cid24 M cid24 M cid24 cid24 Lemma 1 Given closed MKNF formula ϕ I M N cid23 ϕ I cid28M Mcid29 cid28N Ncid29ϕ t M Knorr et al Artiﬁcial Intelligence 175 2011 15281554 1539 Proof The proof induction formula ϕ Let ϕ P t1 tn We I M N cid23 P t1 tn iff t I Assume lemma holds ϕ1 We induction steps K cases follow analogously Let ϕ ϕ1 We I M N cid23 ϕ1 iff I M N cid17cid23 ϕ1 iff induction hypothesis I cid28M Mcid29 cid28N Ncid29ϕ1 n P I iff I cid28M Mcid29 cid28N Ncid29P t1 tn t 1 t I f iff deﬁnition evaluation partial structures I cid28M Mcid29 cid28N Ncid29ϕ1 t Let ϕ K ϕ1 We I M N cid23 K ϕ1 iff I M N cid23 ϕ1 holds I M iff I cid28M Mcid29 cid28N Ncid29ϕ1 t I M induction hypothesis iff I cid28M Mcid29 cid28N Ncid29K ϕ1 t cid2 This lemma twovalued MKNF model M corresponds threevalued MKNF model M M like 36 converse threevalued MKNF model M M corresponds twovalued MKNF model sense 52 Proposition 1 Given closed MKNF formula ϕ M twovalued MKNF model ϕ M M threevalued MKNF model ϕ Proof Let M M threevalued MKNF model ϕ M M satisﬁes conditions Deﬁnition 9 We M twovalued MKNF model ϕ It follows ﬁrst conditions Deﬁnition 9 I cid28M Mcid29 cid28M Mcid29ϕ t I M Lemma 1 I M M cid23 ϕ I M The second cid24cid29 cid28M Mcid29ϕ cid17 t cid24 M M dition states MKNF interpretation pair M cid24 M I We conclude Lemma 1 M cid24 cid24 M I I I cid24 M cid17cid23 ϕ cid24 M cid24 cid24 M M cid24 cid28M cid24 M cid24 M cid24 cid24 Now let M twovalued MKNF model ϕ We M M threevalued MKNF model ϕ We know I M M cid23 ϕ I M M twovalued MKNF model ϕ As I cid28M Mcid29 cid28M Mcid29ϕ t holds I M Lemma 1 ﬁrst conditions Deﬁnition 9 satisﬁed Furthermore M twovalued cid24 M cid24 M I MKNF model ϕ know M Again Lemma 1 cid24cid29 cid28M Mcid29ϕ cid17 t cid24 M know MKNF interpretation pair M cid24 M This suﬃcient according Deﬁnition 9 M M need consider total MKNF interpretation I pairs M cid24 M cid17cid23 ϕ I cid24 M cid24 M cid24 M I cid24 cid2 M cid24 cid28M cid24 M cid24 M cid24 cid24 cid24 MKNF interpretation pairs compared order resembles knowledge order logic programming Intuitively given order MKNF interpretation pairs M1 N1 M2 N2 M1 N1 greater M2 N2 wrt order M1 N1 allows derive true false knowledge M2 N2 Taking account larger set interpretations derives true false knowledge deﬁne following order MKNF interpretation pairs Deﬁnition 11 Let M1 N1 M2 N2 MKNF interpretation pairs We M1 N1 cid3k M2 N2 iff M1 M2 N1 N2 Such order particular comparing models In logic programming model wrt derivable knowledge threevalued models given program wellfounded model Here want introduce similar notion referring minimal threevalued MKNF models ones threevalued MKNF models leave possible undeﬁned Deﬁnition 12 Let ϕ closed MKNF formula M N partial MKNF model ϕ M1 N1 cid3k M N threevalued MKNF models M1 N1 ϕ Then M N wellfounded MKNF model ϕ Of course ϕ inconsistent threevalued MKNF models wellfounded MKNF models ϕ However ϕ consistent hybrid MKNF knowledge base guaranteed wellfounded MKNF model ϕ exists Moreover wellfounded model unique As shall model especially important modal atom K H true wellfounded MKNF model iff K H true threevalued MKNF models This way performing sceptical reasoning threevalued MKNF models amounts determining wellfounded MKNF model Theorem 1 If K MKNFconsistent nondisjunctive DLsafe hybrid MKNF KB wellfounded MKNF model exists unique The respective proofs uniquenessexistence wellfounded MKNF model calculate unique model presented Section 4 direct consequence Theorem 5 The following example gives intuitive insight correspondence twovalued threevalued MKNF models wellfounded MKNF model 1540 M Knorr et al Artiﬁcial Intelligence 175 2011 15281554 Example 6 Consider knowledge base K corresponding MKNF formula ϕ Example 5 K q p K p q The twovalued MKNF models K p p q q p q K p q true ﬁrst model K q p true second We obtain total threevalued MKNF models p p q p p q q p q q p q As seen Example 5 threevalued MKNF model K M p q p q p q This MKNF model satisﬁes condition given Deﬁnition 12 M wellfounded MKNF model K In fact M wellfounded MKNF model In rest section lift important properties proven 50 twovalued MKNF semantics new threevalued MKNF semantics The ﬁrst property states K introduced arbitrary closed MKNF formula ϕ changing threevalued MKNF models ϕ Proposition 2 Let σ closed MKNF formula M N MKNF interpretation pair Then M N threevalued MKNF model σ M N threevalued MKNF model K σ Proof Suppose M N threevalued MKNF model σ We know I M I cid28M Ncid29 cid28M Ncid29σ t I M Since M So I cid28M Ncid29 cid28M Ncid29K σ t holds cid24cid29 cid28M Ncid29σ cid17 t obtain K σ M N threevalued MKNF model K σ The I verse direction follows analogous fashion cid2 cid24 I cid24 M cid24 cid28M cid24 N cid24 N cid24 The second property adapt twovalued threevalued MKNF semantics says grounding hybrid MKNF knowledge base K affect threevalued MKNF models K This shows K KG derive exactly consequences Lemma 2 Let K DLsafe hybrid MKNF knowledge base ψ ground MKNF formula Then K cid233 KG cid233 MKNF ψ MKNF ψ Proof The argument showing contrapositive statement K cid17cid233 50 So simply refer proof given cid2 MKNF ψ KG cid17cid233 MKNF ψ absolutely identical 4 The wellfounded MKNF model In section prove wellfounded MKNF model unique deﬁne procedure computing unique model For purpose alternating ﬁxpoint construction 2960 wellfounded semantics logic programs adapted hybrid MKNF knowledge bases taking account possible conﬂicts resulting combination classical negation ontologies nonmonotonic negation rules The wellfounded semantics logic programs originally deﬁned 61 applies nondisjunctive logic programs established wellfounded semantics allows disjunction rule heads 38 To avoid problems encountered extending wellfounded semantics disjunctive logic programs compatible wellfounded semantics normal programs restrict rules nondisjunctive Thus approach restrictive form rules approach 52 Note partially compensate restriction ﬁrstorder disjunction available considered DL Therefore rest paper assume hybrid MKNF knowledge bases contain nondisjunctive rules disjunction occurs head rule We start adapting partitions 52 means representing MKNF interpretation pairs Then based representation deﬁne operators allow compute unique model hybrid MKNF knowledge bases We model unique wellfounded MKNF model present important properties including computational complexity faithfulness wrt wellfounded semantics logic programs discovery inconsistencies 41 Partitions modal atoms As argued 52 inﬁnitely twovalued MKNF models arbitrary hybrid MKNF knowledge base countably inﬁnite domain working directly twovalued MKNF models cumbersome The holds MKNF interpretation pairs threevalued semantics presented Section 3 So ﬁnite representation required The solution applied 52 originally 11 represent twovalued MKNF model ﬁnite ﬁrstorder formula set ﬁrstorder models corresponds twovalued MKNF model Intuitively ﬁrstorder formula obtained 52 ﬁrst dividing modal atoms occurring ground hybrid MKNF knowledge base true false modal atoms constructing ﬁrstorder formula true modal atoms ontology We extend construction related notions 52 truth values partitioning atoms sets M Knorr et al Artiﬁcial Intelligence 175 2011 15281554 1541 Deﬁnition 13 Let KG O PG ground nondisjunctive hybrid MKNF knowledge base The set Katoms KG written KAKG smallest set contains ground Katoms occurring PG ii modal atom K ξ ground modal atom ξ occurring PG A partial partition T F KAKG consists sets T F KAKG T F A set U implicitly deﬁned KAKG T F The set KAKG contains modal atoms occurring KG notatoms substituted corresponding modal Katoms This set partitioned sets T F U intuitively T contains true modal atoms F contains false modal atoms U contains remaining considered undeﬁned In 52 given knowledge base KG set ﬁrstorder formulas deﬁned aim models set formulas represent models ontology set true modal atoms If set true modal atoms properly chosen set ﬁrstorder interpretations satisfying set formulas corresponds twovalued MKNF model KG Here construction suﬃce adapt idea threevalued setting The deﬁni tion set ﬁrstorder formulas recalled 52 Deﬁnition 14 Let KG O PG ground hybrid MKNF knowledge base For subset S KAKG objective knowl edge S wrt KG set ﬁrstorder formulas OBOS π O ξ K ξ S This notion establish link threevalued MKNF models partial partitions But purpose need adapt notion 52 Deﬁnition 15 Let S set ground modal Katoms The partial partition T F S induced MKNF interpretation pair M N follows 1 K ξ T implies I M I cid28M Ncid29 cid28M Ncid29K ξ t 2 K ξ F implies I M I cid28M Ncid29 cid28M Ncid29K ξ f 3 K ξ T K ξ F implies I M I cid28M Ncid29 cid28M Ncid29K ξ u Based relation objective knowledge derived partial partition induced valued MKNF model identical model This result speciﬁc partition compute produces threevalued MKNF model Theorem 4 Proposition 3 Let M N threevalued MKNF model ground hybrid MKNF knowledge base KG O PG T F partition KAKG induced M N Then M N I I cid23 OBOT I I cid23 OBOKAKG F cid24 cid24 cid24 cid24 cid24 cid24 N cid24 N First M M Proof For KG O PG ground hybrid MKNF knowledge base let M N threevalued MKNF model KG T F cid24 I I cid23 OBOT I I cid23 OBOKAKG F We M N partition KAKG induced M N M M Next N N cid24 I I cid23 OBOT I cid23 Let I interpretation M We I M π O ξ K ξ T Since M N threevalued MKNF model KG know M N cid23 K π O Thus I cid23 π O Consider K ξ T Since M N induces partition T F I cid28M Ncid29 cid28M Ncid29K ξ t holds M M I cid23 ξ Hence I cid23 OBOT Consequently I M Let I interpretation N We I N cid24 I I cid23 OBOKAKG F I cid23 π O ξ K ξ KAKG F We know I M I cid23 π O Since N M I cid23 π O I N Consider K ξ F The premise condition 2 Deﬁnition 15 false premises cid24 conditions 1 3 deﬁnition true We cases I cid23 ξ This suﬃces I N I cid23 OBOKAKG F shows N N In case 1 know I cid23 ξ I M N M holds I cid23 ξ I N In case 3 know I cid28M Ncid29 cid28M Ncid29K ξ u I M Thus I cid23 ξ holds I N cid24 cid28M We sets fact identical M M cid24 I I I cid23 OBOT N cid24 MKNF interpretation pair M M cid24 Note ﬁrst T KAKG F N N cid24 N cid24 MKNF interpretation pair So Thus I N cid24 N assume M inclusions derive contradiction M N proper We I cid24cid29 cid28M Ncid29K π O π PG t threevalued MKNF model KG For suﬃces prove I know I I We π PG We achieve showing case Deﬁnition 15 modal atoms appearing π PG cid24cid29 cid28M Ncid29π PG t evaluated identical truth values M N M cid24 cid28M Ncid29 cid28M Ncid29π PG t We obtain cid24 M I contradiction M N threevalued MKNF model M N threevalued MKNF model KG ensures I cid24cid29 cid28M Ncid29K π O t I cid24 This suﬃces I cid24cid29 cid28M Ncid29KG t I M cid24 N N By deﬁnition M cid24 M cid24 cid24 M cid24 M cid24 M cid24 cid28M cid24 cid28M cid24 cid28M cid24 N cid24 N cid24 N cid24 N cid24 N cid24 cid24 cid24 cid24 cid24 cid24 cid24 cid24 1542 M Knorr et al Artiﬁcial Intelligence 175 2011 15281554 Consider K ξ T We obtain I cid24 cid28M cid24 N cid24cid29 cid28M Ncid29K ξ t cid24 M cid24 I deﬁnition M cid24 I cid28M Ncid29 cid28M Ncid29K ξ t I M Deﬁnition 15 Consider K ξ F We obtain I cid28M Ncid29 cid28M Ncid29K ξ f Deﬁnition 15 We derive Deﬁnition 7 cid24cid29 cid28M Ncid29K ξ f I cid28M Ncid29 cid28M Ncid29K ξ f I N Because N N I cid24cid29 cid28M Ncid29K ξ f Consider K ξ K ξ F K ξ T By Deﬁnition 15 obtain I cid28M Ncid29 cid28M Ncid29K ξ u By deﬁnition conclude cid24cid29 cid28M Ncid29K ξ cid17 f From I cid28M Ncid29 cid28M Ncid29K ξ u M M Thus Deﬁnition 7 I cid28M I cid24 N cid24 cid28M cid24 cid28M cid24 N cid24 N cid24 cid24 cid24 cid24 cid24 cid28M N I I cid24 N cid24 N cid24cid29 cid28M Ncid29K ξ u possible Consider modal notatom appearing π PG Since evaluation cases wrt M N straightforwardly obtain identical evaluation cid2 The following example illustrates previously introduced notions Example 7 Consider K consisting rule 8 Example 4 ontology containing assertion CDBNAW 15 The ground KB KG contains rule results 8 substituting x BNAW We obtain KAKG cid2 K RecommendBNAW K CDBNAW K ownsBNAW K lowEvalBNAW K interestingBNAW cid4 One easily check threevalued MKNF model M N KG I M N satisﬁes I cid23 CDBNAW This threevalued MKNF model induces partition CDBNAW appears T modal Katoms F The related set ﬁrstorder formulas contains CDBNAW This reasonable ground version 8 allow derive ignore 8 considering threevalued MKNF models KG 42 Computation alternating ﬁxpoint As seen Section 3 knowledge base general threevalued MKNF models But special wrt derivable knowledge wellfounded MKNF model computation model In order obtain wellfounded MKNF model corresponding partial partition resort existing relations correspondences semantics Logic Programming The stable models normal logic program Π ﬁxpoints GelfondLifschitz operator ΓΠ 19 The operator compute threevalued wellfounded model Π socalled alternating ﬁxpoint compu tation cf 60 Intuitively operator results applying ΓΠ twice compute greatest ﬁxpoint correspond respectively true nonfalse knowledge The term alternating stems fact ΓΠ antitonic successive applications turn overestimate underestimate derivable knowledge wellfounded model ultimately alternating ﬁxpoints More precisely iteratively applying ΓΠ start ing set atoms ﬁrst obtain set atoms includes true atoms wellfounded model Π overestimate true atoms wellfounded model words set complement underestimate set false atoms If apply ΓΠ result obtain set atoms true sure underestimate set true atoms If continue iteration obtain alternating smaller overestimates larger underestimates eventually iteration alternates ﬁxpoints true atoms atoms true undeﬁned wellfounded model Π Since stable models logic programs twovalued MKNF models closely related adapt scheme hybrid MKNF knowledge bases We deﬁne operators provide stable condition nondisjunctive hybrid MKNF knowledge bases use operators obtain alternating ﬁxpoint corresponds wellfounded MKNF model We start deﬁning operator T KG given set Katoms draws conclusions positive ground hybrid MKNF knowledge base KG ground hybrid MKNF knowledge base rules form K H K A1 K An 16 Deﬁnition 16 Let KG O PG positive ground hybrid MKNF knowledge base The operators RKG DKG T KG deﬁned subsets KAKG follows cid2 cid3 cid3 PG contains rule form 16 1 cid4 cid4 n K Ai S cid3 cid3 K ξ KAKG OBOS cid23 ξ cid4 cid4 K H cid2 RKG S DKG S K ξ T KG S RKG S DKG S M Knorr et al Artiﬁcial Intelligence 175 2011 15281554 1543 The operator RKG derives immediate consequences rules KG DKG yields consequences tology combined known information S The operator T KG combines monotonic Proposition 4 Let KG O PG positive ground hybrid MKNF knowledge base S S T KG S cid24 cid24 KAKG Then T KG S Proof Suppose K H T KG S By Deﬁnition 16 K H RKG S DKG S holds If K H RKG S PG contains 1 cid4 cid4 n rule form 16 K Ai S 1 cid4 cid4 n Since S S K H T KG S OBOScid24 cid23 H We conclude K H T KG S cid24 If K H DKG S K H M OBOS cid23 H By monotonicity ﬁrstorder logic S S K Ai S cid24 cid2 cid24 cid24 cid24 Since T KG monotonic unique ﬁxpoint KnasterTarski Theorem 59 denote ω reference limit ordinal natural numbers ω It important note KnasterTarski Theorem T KG general says ﬁxpoint reached ordinal easily greater ω However MKNF knowledge bases allow function symbols inﬁnite sets rules iteration performed ﬁnite knowledge base ﬁnitely ground rules As iteration T KG terminates ﬁnite ordinal ω The ﬁxpoint obtained follows T KG T KG T KG 0 n 1 T KG T KG ω T KG cid12 n icid20 Similarly stable models normal logic programs ﬁxpoint operator deﬁned performs GelfondLifschitz like transformation 19 turns hybrid MKNF knowledge bases positive ones applies operator T KG resulting knowledge base Deﬁnition 17 Let KG O PG ground hybrid MKNF knowledge base S KAKG The MKNF transform KG S deﬁned KG S O PG S PG S contains rules K H K A1 K An exists rule K H K A1 K An B1 Bm PG K B j S 1 cid4 j cid4 m This deﬁnition resembles transformation compute stable models 19 logic programs Ie remove rules contain negated atoms contradicting given set S remove remaining negated atoms rules Following 19 deﬁne operator computes ﬁxpoint resulting knowledge base Deﬁnition 18 Let KG O PG ground hybrid MKNF knowledge base S KAKG We deﬁne ΓKG S T KG S ω Inspired similarities deﬁnition ΓKG Γ 19 correspondence stable models logic programs twovalued MKNF models knowledge bases ontology axioms results alternating ﬁxpoints normal logic programs 60 wonder iteratively applying operator ΓKG yield threevalued MKNF model In fact shown Lemma 3 operator ΓKG antitonic Thus Γ 2 monotonic KG guaranteed ﬁxpoint obtained iteratively applying Γ 2 starting set One KG ask ﬁxpoint corresponds wellfounded MKNF model However shown following example case adaptation alternating ﬁxpoints hybrid MKNF knowledge bases straightforward Example 8 Consider hybrid MKNF knowledge base presented Examples 2 4 recommending CDs suppose user wants stall recommendations evaluation available This achieved adding rule 17 K LowEvalx Recommendx 17 1544 M Knorr et al Artiﬁcial Intelligence 175 2011 15281554 With rule 8 CD recommended adds explicit information CD low evaluation To ease reading recall rule 8 K Recommendx K CDx ownsx LowEvalx K interestingx In fact adds LowEvalToTheSea 8 18 threevalued MKNF models contain K RecommendToTheSea However shown K RecommendToTheSea contained ﬁxpoint Γ 2 KG To simplify computation presentation ﬁxpoint ground rules ToTheSea ignoring CDs add explicitly ToTheSea CD 19 CDToTheSea 19 We limit following set modal atoms appropriate abbreviations KAKG cid4 cid2 K RecTts K LowEvTts K CDTts K ownsTts K intTts We start S0 compute ΓKG S0 S1 ΓKG ΓKG S0 ΓKG S0 KAKG S1 cid4 K CDTts K intTts cid2 Note K LowEvTts T KG S0 18 OBOT K DKG allows derive ΓKG S0 KAKG We continue ΓKG S1 S2 ΓKG ΓKG S1 obtain G S0 inconsistent So subsequent application ΓKG S1 KAKG S2 cid4 K CDTts K intTts cid2 Now S1 S2 ﬁxpoint reached contain K RecTts This K LowEvTts ΓKG S1 rule 8 grounded Tts removed PG ΓKG S1 Note K LowEvTts ΓKG S1 rule 17 removed PG S1 given K RecTts S1 In analogy 60 K LowEvTts true undeﬁned belongs overestimate alternating ﬁxpoint This shows opposite threevalued MKNF semantics LowEvTts imply LowEvTts13 In fact threevalued MKNF model M N restricted knowledge base LowEvTts holds I M LowEvTts I Thus N M I N LowEvTts I LowEvTts true threevalued MKNF model knowledge base One way guaranteeing classical negation DLatom H ontology imposes truth H despite existence rules head K H change MKNF transform deﬁned rules head K H removed H holds Deﬁnition 19 Let KG O PG ground hybrid MKNF knowledge base S KAKG The MKNFcoherent transform KG S deﬁned KG S O PG S PG S contains rules K H K A1 K An exists rule K H K A1 K An B1 Bm PG K B j S 1 cid4 j cid4 m OBOS cid17cid23 H Note difference deﬁnition Deﬁnition 17 remove rule MKNFcoherent transform case classical negation head derivable ontology augmented S Deﬁnition 20 Let KG O PG ground hybrid MKNF knowledge base S KAKG We deﬁne Γ cid24 KG T KG S ω S 13 This problem akin coherence problem 55 extended logic programs classical false formula ϕ impose ϕ explicitly M Knorr et al Artiﬁcial Intelligence 175 2011 15281554 1545 The operator Γ cid24 KG antitonic cf Lemma 3 applying Γ cid24 KG twice guaranteed ﬁxpoint Clearly case knowledge base Example 8 ﬁxpoint includes K RecTts The reason new MKNFcoherent transform contain rule head K LowEvalTts LowEvalTts derived rule 8 instantiated Tts removed step iteration However example shows operator Γ cid24 literally hides inconsistencies iteration A modal atom K H simply considered false KG rule head K H body true threevalued MKNF models respective knowledge base Example 9 Consider hybrid MKNF knowledge base presented Examples 2 4 recommending CDs Now suppose user wants ensure inexpensive CDs recommended Note different recommending CDs discount The ontology axiom 20 states expensive CD recom mended In general comparing prices requires predicates numerical domain concrete domains DL EL 2 For simplicity assume handled internally simply add fact 21 saying ToTheSea expensive Expensive cid15 Recommend K ExpensiveToTheSea 20 21 This knowledge base clearly MKNFinconsistent simply note conclude ToTheSea recommended 8 instantiated ToTheSea recommended time 2021 However easy check ﬁxpoint applying Γ cid24 twice include K RecTts simply MKNFcoherent transform removes KG rule 8 instantiated Tts RecommendTts true rule body true This example shows Γ cid24 KG applied alternating ﬁxpoint Examining computation Example 8 application Γ cid24 required compute overestimates KG true knowledge In case suﬃce apply Γ cid24 S1 Then S2 obtained simply KG applying ΓKG previous result computing S2 ΓKG Γ cid24 S1 At time case Example 9 KG partial usage ΓKG ensure RecommendTts kept iteration inconsistencies detectable computing Γ cid24 KG This suggests computation wellfounded MKNF model obtained alternating application operators Γ cid24 ΓKG In fact interaction operators yields wellfounded MKNF KG model But formally deﬁne interaction prove correspondence wellfounded MKNF model operators antitonic Lemma 3 If KG ground hybrid MKNF knowledge base S S cid24 KAKG ΓKG S cid24 ΓKG S Γ cid24 KG S cid24 Γ cid24 KG S Proof We argument ΓKG The proof Γ cid24 KG identical By Deﬁnition 18 T KG Scid24 ω T KG S ω We prove induction n T KG Scid24 n T KG S n holds The base case n 0 trivial Assume T KG Scid24 n T KG S n holds consider K H T KG Scid24 n 1 Then K H T KG Scid24 T KG Scid24 n cases consider First KG S contains rule form K H K H K A1 K An KG S K A1 K An K Ai T KG Scid24 n 1 cid4 cid4 n Since S S induction hypothesis K Ai T KG S n 1 cid4 cid4 n Hence K H T KG S n 1 Alternatively K H consequence obtained DKG Scid24 T KG Scid24 n By induction hypothesis T KG Scid24 n T KG S n holds conclude monotonicity ﬁrstorder logic K H DKG S T KG S n cid2 cid24 cid24 Since operators antitonic deﬁne alternating iteration operators motivated Deﬁnition 21 Let KG ground hybrid MKNF knowledge base We deﬁne sequences Pi Ni follows P0 Pn1 ΓKG Nn cid12 Pω Pi N0 KAKG Nn1 Γ cid13 Nω cid24 KG Ni Pn The sequence Pi intended compute modal atoms true sequence Ni computes modal atoms false The increasing sequence decreasing Lemma 4 Let KG ground hybrid MKNF knowledge base Then Pα Pβ Nβ Nα ordinals α β α cid4 β cid4 ω 1546 M Knorr et al Artiﬁcial Intelligence 175 2011 15281554 Proof Whenever α β statement holds automatically It suﬃces consider α ω induction α statement holds If β successor ordinal suﬃcient property β α 1 successor cases follow transitivity If α 0 P0 P0 Pβ holds β Equivalently N0 KAKG Nβ N0 holds β Suppose property holds α cid4 n We Pn1 Pn2 Nn2 Nn1 We Pn1 Γ Nn Pn2 Γ Nn1 Since Nn1 Nn induction hypothesis Pn1 Pn2 holds virtue antimonotonicity Γ cid24 Likewise know Nn1 Γ cid24Pn Nn2 Γ cid24Pn1 Since Pn Pn1 induction hypothesis obtain antitonicity Γ cid24 Nn2 Nn1 The case left β ω But case holds deﬁnition cid2 Like iteration T K reasons iterations ﬁnite reach ﬁxpoint ω case Pi ﬁxpoint case Ni greatest ﬁxpoint Proposition 5 Let KG ground hybrid MKNF knowledge base Then Pω ﬁxpoint sequence Pi Nω greatest ﬁxpoint sequence Pi Proof We argument Pω The argument Nω analogous We deﬁne operator ΦS ΓKG Γ cid24 KG S subsets S KAKG iterated usual It easy Φ P2i Φ monotonic By KnasterTarski Theorem conclude Pω equal ﬁxpoint sequence Pi cid2 This proposition allows ﬁxpoint directly computed greatest vice versa Proposition 6 Let KG ground hybrid MKNF knowledge base Then Pω ΓKG Nω Nω Γ cid24 KG Pω Proof We case Nω Γ cid24Pω case proceeds identically By Proposition 5 know Pω ﬁxpoint sequence Pi Since ground knowledge base ﬁnite n Pn Pω Pn Pm m cid2 n Subsequently Nn1 Nm m m cid2 n 1 Nn1 Γ cid24 Pω ﬁxpoint KG sequence Ni Assume Nn1 greatest ﬁxpoint Then Nl l n 1 Nl Nl2 Nl Nn1 Then Pl1 equals ﬁxpoint sequence Pi Pl1 necessarily smaller Pn This contradicts initial assumption Pn ﬁxpoint ﬁnishes proof cid2 Thus compute sequences Pi Ni parallel reach n Pn Pn1 Nn Nn1 compute ﬁxpoints manner sketched proof Proposition 5 alternating ΓKG Γ cid24 KG let follow application ΓKG Γ cid24 KG The ﬁxpoints deﬁne wellfounded partition Section 43 partition inducing wellfounded MKNF model Deﬁnition 22 The wellfounded partition MKNFconsistent ground hybrid MKNF knowledge base KG O PG deﬁned cid5 T W F W Pω KAKG Nω cid6 Note restrict deﬁnition MKNFconsistent hybrid MKNF knowledge bases This reasonable cases pair T W F W obtained MKNFinconsistent knowledge base satisfy conditions imposed deﬁnition partition cf Deﬁnition 13 Therefore Section 43 modal Katoms derived Pω KAKG Nω respectively true false respectively threevalued MKNF models KG Proposition 7 including special case KG MKNFinconsistent This present necessary suﬃcient conditions check MKNFconsistency Theorem 2 based comparisons compares iteration operators ΓKG Γ cid24 wrt ﬁxpoints Given established check MKNFconsistency KG wellfounded partition fact partial partition Proposition 8 considered knowledge base KG consistent In case corresponding MKNF interpretation pair exists satisﬁes KG Theorem 3 interpretation pair threevalued MKNF model KG Theorem 4 This allows conclude speciﬁc MKNF interpretation pair corresponding wellfounded partition wellfounded MKNF model Theorem 5 We given KG O wellfounded partition wellfounded model logic programs coincide Theorem 6 ﬁnish results data complexity Theorem 7 But come Section 43 illustrate alternating ﬁxpoint construction motivating examples Examples 8 9 presented M Knorr et al Artiﬁcial Intelligence 175 2011 15281554 1547 Example 10 Consider hybrid MKNF knowledge base presented Example 8 limitation set modal atoms For similarity computation presented Example 8 compute ﬁxpoints sketched proof Proposition 5 We start P0 compute N1 Γ cid24 KG P0 P2 ΓKG N1 cid2 cid2 cid4 K CDTts K intTts K RecTts cid4 K CDTts K intTts K RecTts N1 P2 It easy check P2 ﬁxpoint Note difference iteration Example 8 Now K LowEvTts cid23 LowEvTts So rule 17 instantiated Tts removed MKNF coherent occur N1 OBOP 0 transform K LowEvTts Γ cid24 P0 As consequence obtain K RecTts P2 We compute greatest KG ﬁxpoint Nω Γ cid24 Pω obtain Nω equals N1 Note axiom 18 omitted K LowEvTts KG K RecTts remain undeﬁned Thus operator Γ cid24 combination 18 shows formula LowEvTts imposes KG LowEvTts holds ensuring example derivability K RecTts The knowledge base Example 9 MKNFinconsistent Thus wellfounded partition Deﬁ nition 22 Nevertheless present computation alternating ﬁxpoint order difference computation Example 9 hint detect inconsistencies topic detailed section Example 11 Consider ground hybrid MKNF knowledge base KG presented Example 9 rules grounded Tts following restricted set modal atoms KAKG cid2 cid4 K RecTts K CDTts K LowEvTts K ownsTts K intTts K ExpTts To simplify presentation consider rule 8 axioms 1921 simplify 9 fact 26 To ease reading repeat complete knowledge base obtained simpliﬁcations Exp cid15 Rec CDTts K ExpTts K RecTts K CDTts ownsTts LowEvalTts K intTts K intTts 22 23 24 25 26 For computing ﬁxpoints start P0 N0 KAKG We continue P1 ΓKG N0 N1 P0 Γ cid24 KG cid2 cid4 K CDTts K intTts K ExpTts P1 N1 KAKG Note K RecTts derived computation N1 added set S derived knowledge T KG DKG allows derive simply OBOS K ExpTts K RecTts S inconsistent We continue P2 ΓKG N1 N2 Γ cid24 KG P1 obtain cid2 cid4 K CDTts K intTts K ExpTts cid2 cid4 K CDTts K intTts K ExpTts P2 N2 cid23 RecTts rule 25 longer appears transform computing N2 explosive Since OBOP 1 behaviour DKG disappears As consequence iteration obtain K RecTts P3 yields explosive inconsistency derivation KAKG P3 KAKG cid2 N3 cid4 K CDTts K intTts K ExpTts It easy check ﬁxpoints We K RecTts P3 K RecTts N3 Intuitively means K RecTts true false time clear indication inconsistency considered knowledge base 1548 M Knorr et al Artiﬁcial Intelligence 175 2011 15281554 43 The wellfounded MKNF model related properties The wellfounded partition T W F W consists modal atoms intended true T W false F W undeﬁned modal atoms occurring T W F W But merely intention The sequences Pi Ni allow modal atom added element sequence Pi resp removed element sequence Ni true threevalued MKNF models KG resp false For purpose need deﬁne notion dependency captures precisely derivations OBOS S operator DKG Deﬁnition 23 Let KG ground hybrid MKNF knowledge base K H modal Katom K H KAKG S possibly set modal Katoms S KAKG We K H depends S OBOS cid23 H ii S cid24 S cid24 S OBOScid24 cid23 H Intuitively S minimal set combination O allows derive K H Note exist minimal sets Furthermore S minimal OBOS inconsistent An appropriate restriction proof following proposition ensures notion properly Proposition 7 Let KG ground hybrid MKNF knowledge base T F pair Pω KAKG Nω Then K H T implies K H true H false threevalued MKNF models M N KG K H F implies K H false H true threevalued MKNF models M N KG Proof According Proposition 5 K H Pi implies K H true H false threevalued MKNF models M N KG K H Ni implies K H false H true threevalued MKNF models M N KG We argument K H induction This shows argument H partial MKNF models M N given K I cid28M Ncid29 cid28M Ncid29K H I cid28M Ncid29 cid28M Ncid29not H The base case 0 trivially holds P0 N0 equal KAKG Suppose property holds cid4 n We consider n 1 cases K H Pn1 K H Nn1 Let K H Pn1 If K H occurs Pn K H true threevalued MKNF models M N KG induc ω j j induction j K H true threevalued MKNF ω K H Pn Since K H introduced T KG Nn tion hypothesis Otherwise K H ΓKG Nn K H T KG Nn know K H T KG Nn models M N KG 0 The base case holds trivially T KG Nn ii Suppose claim holds j cid4 m consider K H T KG Nn If K H occurs T KG Nn m claim holds automatically induction hypothesis ii Otherwise cases consider Either positive rule K H K A1 K An KG Nn K Ai T KG Nn m m In ﬁrst case induction hypothesis ii K Ai true K H consequence DKG Nn T KG Nn threevalued MKNF models M N KG Additionally rule K H K A1 K An B1 Bm KG positive version rule occurs KG Nn K B j occurs Nn induction hypothesis K B j false threevalued MKNF models M N KG Consequently K H true threevalued MKNF m holds Since O modal atoms occurring models M N KG In second case OBOS cid23 H S T KG Nn m true threevalued MKNF models KG induction hypothesis ii immediately T KG Nn conclude K H true threevalued MKNF models M N KG m 1 Alternatively consider K H Nn1 K H Γ cid24 KG Pn Let U set K H Γ cid24 KG OBOPn consistent U Now deﬁnition Γ cid24 KG modal Katom K H U following conditions satisﬁed14 Pn Note Pn conclude Ui rule K H body PG following holds Uia Some modal Katom K A appears body U KAKG Nn Uib Some modal notatom B appears body Pn Uic OBOPn cid23 H Uii possibly S S Pn K H depends modal Katom K A OBOSK A cid17cid23 H K A U KAKG Nn The cases Uib Uic correspond removal rules performed MKNFcoherent transform cf Deﬁni tion 19 By induction hypothesis know K B Pn K B true threevalued MKNF models KG Thus case Uib body false threevalued MKNF models KG case Uic H true 14 These conditions resemble notion unfounded sets 61 M Knorr et al Artiﬁcial Intelligence 175 2011 15281554 1549 threevalued MKNF models KG In case Uia corresponding rule head K H appears MKNF coherent transform modal Katom K A derivable K H derivable Likewise case Uii modal Katom K A longer derivable K H derived ontology If K A appears KAKG Nn induction hypothesis know K A false threevalued MKNF models KG The remaining case K A U Assume ﬁrst conditions satisﬁed reference U Then clearly modal Katoms false threevalued MKNF models KG Now consider complete conditions Uia Uii K H satisfy conditions UiaUii threevalued MKNF models minimise derivable knowledge order t u f derive K H false threevalued MKNF models KG cid2 For MKNFconsistent knowledge base KG pair T F Proposition 7 deﬁned exactly way wellfounded partition correspondence holds Of course issue determining based iterations consistency O knowledge base MKNFconsistent The theorem presents necessary suﬃcient conditions MKNFinconsistency Theorem 2 Let KG O PG ground hybrid MKNF knowledge base Pω ﬁxpoint sequence Pi Nω ﬁxpoint sequence Ni KG MKNFinconsistent iff Γ cid24 KG Nω ΓKG Nω O inconsistent Pω ΓKG Pω Γ cid24 KG Proof First conditions holds KG MKNFinconsistent For cases wrt Nω Pω present proof Nω The case proven analogously From Proposition 6 know ΓKG Nω Pω Furthermore Proposition 7 modal atoms K H Pω true threevalued MKNF models M N KG If Γ cid24 Nω ΓKG Nω K H KG K H ΓKG Nω Γ cid24 Nω modal Katom K A KG K A ΓKG Nω Γ cid24 cid23 A Either K H K A K H K A appear set U constructed KG proof Proposition 7 rule K H body KG Nω K A body In cases K A true threevalued MKNF models KG addition modal Katoms false threevalued MKNF models KG including K A O derives A We conclude KG MKNFinconsistent Nω The reason K H occur Γ cid24 KG Nω OBONω The case direct consequence way evaluation MKNF formulas deﬁned O inconsistent ﬁrstorder model O Assume M N threevalued MKNF model KG Then M N satisﬁes KG O I M I cid28M Ncid29 cid28M Ncid29π O t Since M derive contradiction For direction possibly occurring MKNFinconsistency detected So suppose KG MKNFinconsistent If O inconsistent immediately Otherwise rules PG MKNFinconsistent consist modal atoms appearance classical negation Likewise rules DLatoms rules DLatoms head inconsistent derivation ontology O conﬂicts rule Consider arbitrary DLatom K H rule K H K A1 K An B1 Bm PG If H true consequence O operator DKG ensures K H true inconsistency occurs So let H ﬁrstorder false K H Pω K H true threevalued MKNF models KG But Γ cid24 KG Nω ΓKG Nω inconsistency detected Alternatively K H undeﬁned K H Nω possible H ﬁrstorder false Γ cid24 suppresses K H So case missing K H false KG valued MKNF models enforced operator Γ cid24 KG Γ cid24 KG body rule head K H undeﬁned Thus Pω ΓKG Pω cid2 We apply check consistency previous examples Example 12 Consider KG Example 11 We Pω P3 Nω N3 We check inconsistency assuming O consistent obtain Γ cid24 Nω ΓKG Nω So rightly conclude KG inconsistent KG Pω Now reconsider KG Example 10 We Pω P2 Nω N1 We check consistency obtain Γ cid24 KG Pω ΓKG Pω Γ cid24 KG Nω ΓKG Nω Hence knowledge base consistent obtain wellfounded partition cid5cid2 cid4cid6 cid2 cid4 K CDTts K intTts K RecTts K ownsTts K LowEvTts ΓKG Pω Γ cid24 KG T W F W The following example shows fact need calculations wrt ﬁxpoints Example 13 Consider following MKNFinconsistent knowledge base R cid15 P Ra K P P P false ontology P hold immediately causes inconsistency 1550 M Knorr et al Artiﬁcial Intelligence 175 2011 15281554 Only test Nω able detect inconsistency For KAKG K P obtain Pω K P Nω Γ cid24 KG Pω ΓKG Pω Γ cid24 KG Nω ΓKG Nω K P On hand following knowledge base MKNFinconsistent test Pω allows discover R cid15 P Ra K P u K u u For KAKG K P K u obtain Pω Nω K u Γ cid24 KG Γ cid24 KG Nω ΓKG Nω Pω The difference examples ﬁrst example rule true body false head second example rule undeﬁned body false head Each conditions captures cases explains conditions need checked Pω Nω ΓKG Pω KAKG As said normal rules inconsistent integrity constraints rules head K f cf 52 allowed In simpler case inconsistencies easily detected K f occur KAKG Nω If KG MKNFconsistent wellfounded partition fact partial partition Proposition 8 Let KG MKNFconsistent ground hybrid MKNF knowledge base T W F W PKG KAKG NKG wellfounded partition Then T W F W partial partition Proof From Theorem 2 KG MKNFconsistent obtain Γ cid24 Nω ΓKG Nω KG Those equalities yield T W F W shows T W F W partition T W F W subsets KAKG cid2 Pω ΓKG Pω Γ cid24 KG It shown wellfounded partition yields MKNF interpretation pair satisﬁes KG Theorem 3 Let KG MKNFconsistent ground hybrid MKNF KB T W F W PKG KAKG NKG wellfounded parti tion KG Then I P I N cid23 KG I P I I cid23 OBOPK I N I I cid23 OBONK G G G Proof First I P I N proper MKNF interpretation pair I I N satisﬁes OBOPK G I N I P By Deﬁnition 3 know KG K π O π PG Since π O occurs OBOPK isfy OBOPK I cid28I P I N cid29 cid28I P I N cid29π PG obtain I I P sat I cid28I P I N cid29 cid28I P I N cid29K π O t I I P Thus consider evaluation We start evaluating modal atoms occurring π PG Let K H π PG Suppose ﬁrst K H T W As cid23 H In case K H NKG cid17cid23 H Therefore I cid28I P I N cid29 cid28I P I N cid29K H f Finally let K H occur cid23 H In case K H PKG means I cid28I P I N cid29 cid28I P I N cid29K H t Alternatively suppose K H F W assume OBONK means DKG conclude OBONK NKG T W F W We know OBONK DKG conclude OBOPK cid17cid23 H Therefore I cid28I P I N cid29 cid28I P I N cid29K H u cid23 H Assume OBOPK The cases H π P proceed analogously Indeed K H T W I cid28I P I N cid29 cid28I P I N cid29not H f G G G G G G K H T W I cid28I P I N cid29 cid28I P I N cid29not H t I cid28I P I N cid29 cid28I P I N cid29not H u Now consider π PG consists set implications corresponding rule PG To I cid28I P I N cid29 cid28I P I N cid29π PG t guarantee cases map implication false occur cases body original rule true head respectively body undeﬁned head false Assume cases holds If body rule true alternating ﬁxpoint construction head true contradicting cases If rule body undeﬁned NKG alternating ﬁxpoint obtain head undeﬁned true contradicting assumption Thus I cid28I P I N cid29 cid28I P I N cid29π PG t holds cid2 This result combined Proposition 3 wellfounded partition results threevalued MKNF model Theorem 4 Let KG MKNFconsistent ground hybrid MKNF KB T W F W PKG KAKG NKG wellfounded parti tion KG Then I P I N threevalued MKNF model KG I P I I cid23 OBOPK I N I I cid23 OBONK G G M Knorr et al Artiﬁcial Intelligence 175 2011 15281554 1551 Proof We know Theorem 3 I P I N satisﬁes KG By Proposition 3 MKNF interpretation pair exactly corre sponds equals threevalued MKNF model inducing partition Thus I P I N threevalued MKNF model KG cid2 In fact I P I N unique wellfounded MKNF model partial MKNF model wrt derivable knowledge Theorem 5 Let KG MKNFconsistent ground hybrid MKNF KB I P I N threevalued MKNF model KG induced wellfounded partition T W F W For threevalued MKNF model M N KG M N cid3k I P I N Indeed I P I N wellfounded MKNF model KG Proof We shown Proposition 3 threevalued MKNF model M N KG induces partition T F turn gives rise threevalued MKNF model objective knowledge By Proposition 7 K H T W implies K H true H false threevalued MKNF models M N KG K H F W implies K H false H true threevalued MKNF models M N KG We conclude T W T F W F Furthermore know I P I I cid23 OBOT W M I I cid23 OBOT N I I cid23 OBOKAKG F It straightforward M I P I N N Deﬁnition 11 ﬁnishes proof cid2 I N I I cid23 OBOKAKG F W This central theorem shows wellfounded MKNF model unique deﬁned founded MKNF model exactly threevalued MKNF model wrt cid3k wellfounded MKNF model sound approximation total threevalued MKNF model twovalued MKNF model Thus wellfounded partition algorithms presented 52 computing subset knowledge holds partitions corresponding twovalued MKNF model The wellfounded partition knowledge bases consisting rules coincides wellfounded model corresponding normal logic program Theorem 6 Let KG ground program MKNF rules Π normal logic program obtained PG transforming MKNF rule K H K A1 K An B1 Bm rule H A1 An B1 Bm Π T W F W wellfounded partition KG W Π wellfounded model Π Then K H T W H W Π K H F W H W Π Finally following theorem obtained data complexity results positive nondisjunctive MKNF knowledge bases 52 data complexity measured terms ABox assertions rule facts Theorem 7 Let K hybrid MKNF KB Assuming entailment ground DLatoms DL decidable data complexity C C data complexity computing wellfounded partition P C For comparison data complexity reasoning twovalued MKNF models nondisjunctive programs shown E P E NP C NP E C Thus computing wellfounded partition ends strictly smaller complexity class deriving twovalued MKNF models In fact description logic fragment tractable15 obtain formalism model computed data complexity P This remarkable best knowledge ﬁrst time general tractable local closed world extension DLs identiﬁed 5 Related work Several proposals exist combining rules ontologies 1328 brief survey They split groups semantically based ﬁrstorder logics solely description logics hybrid approaches hybrid MKNF providing semantics combining elements ﬁrstorder logics nonmonotonicity The general approach ﬁrst group SWRL 32 unrestricted combination OWLDL functionfree Horn rules rules negation The approach expressive undecidable generalises approaches group Applying DLsafety SWRL rules yields DLsafe rules 53 decidable subset SWRL ALlog 10 combination DLsafe positive rules ALC CARIN 46 notable formalisms generalised 15 See OWL 2 proﬁles httpwwww3orgTRowl2proﬁles 1552 M Knorr et al Artiﬁcial Intelligence 175 2011 15281554 SWRL In cases ontology serves input rules vice versa information ﬂow way Description Logic Programs DLP 2444 fragment OWL transformed logic programs positive rules In spirit HornSHIQ 33 fragment OWL translated Datalog like DLP tractable data complexity16 Recently DLP generalised Description Logic Rules 3941 rules contain description logic expressions This enriches DL description logic rules based sophisticated constructs normally available expressive description logics increasing complexity Similarly ELP 394245 polynomial language covering important parts OWL 2 ELP allows axioms expressed OWL 2 All approaches advantage ﬁtting semantically original ﬁrst order OWL semantics means existing reasoners ontologies reasoning combined knowledge bases On hand approaches express nonmonotonic negation cover motivating cases discussed introduction In second group includes hybrid MKNF approach 14 combines ontologies rules modular way parts semantics kept separate The reasoning engines interact bidirectionally limitations direction ontology rules interfaces dlvhex 15 provides implemen tation generalises approach allowing multiple sources external knowledge differing semantics This work extended ways probabilities uncertainty priorities references related work section 14 A related wellfounded semantics 16 proposed computational complexity similar wellfounded MKNF semantics However integration tight formalism restricts transfer information ontologies rules The wellfounded semantics approach called hybrid programs 12 approach allows transfer information ontology rules Thus 12 strictly expressive wellfounded MKNF semantics The advantage restriction contrary 16 wellfounded MKNF semantics semantics remains compatible standard semantics consider DLatoms B 1 B2 ontology expresses true logical consequence ontology Then given rules p B1 p B2 p obtained 12 work formalism described Eiter et al 14 There approaches related stable models logic programs 8 uses embedding autoepis temic logic tightly combine ontologies rules The approach similar spirit hybrid MKNF 52 In fact embedding epistemic rule bodies epistemic rule heads closely related syntactically respect semantic consequences However precise relation hybrid MKNF far obvious autoepistemic interpretation 8 pair ﬁrstorder interpretations set beliefs necessarily related DLlog 58 provides combination rules ontologies separates predicates rule ontology predicates evaluates wrt answer set semantics wrt ﬁrstorder semantics weak DLsafety variable head rule appears arbitrary positive atom body rule Like 952 generalises 58 earlier related works 57 framework equilibrium logics Quite similar 58 48 approach distinguish ontology rules predicates In fact work originates 14 perspective rules permits tighter integration Open answer set programming 25 extends rules open domains adds syntactic limitations ensuring decidability Based algorithm provided fhybrid knowledge bases 17 combination ontologies rules DLsafety limits predicates treeshapedness A loose layering Prolog DLs employing fourvalued logic presented 49 An alternative way introducing nonmonotonicity ontologies enrich DLs syntactic constructs representing nonmonotonic features Among approaches closely related work Description Logics MKNF 11 allows modal operators ontology axioms An algorithm provided 11 ALC MKNF improved 34 In 521 circumscription adding nonmonotonic reasoning DLs formalisms introducing defaults ontologies exist 4 6 Conclusions future work Summarising deﬁned wellfounded semantics tightly integrated hybrid KBs sound wrt se mantics deﬁned 52 MKNF KBs strictly lower complexity In particular obtain tractability underlying description logic tractable To best knowledge wellfounded MKNF semantics ﬁrst approach combination arbitrary nonmonotonic rules ontologies limitations transfer formation Our approach coincides ﬁrstorder semantics DL fragment rules wellfounded semantics normal programs DLpart Moreover deﬁned construction computing wellfounded MKNF model capable detecting inconsistencies straightforward way Several lines future research considered First working general querydriven proce dure capable answering conjunctive queries wellfounded semantics hybrid MKNF knowledge bases In fact results issue 1 procedure deﬁned tabled resolution sound com plete wrt wellfounded semantics deﬁned terminating classes knowledge bases This 16 Further analyses Horn description logics provided 43 M Knorr et al Artiﬁcial Intelligence 175 2011 15281554 1553 procedure takes oracle capable answering queries underlying description logic parameter able answer DLsafe conjunctive queries conjunctive predicates variables queries ground processed ontology returning correct answer substitutions variables query An implementation procedure based XSB Prolog17 tabling resolution CVS version XSB Prolog description implementation 20 Another line current research specialisation semantics deﬁned corresponding procedures implementations particular tractable description logics opposed considering DLs general This speciﬁc study aims EL We intend provide transformation hybrid knowledge bases rules input logic programming capable computing wellfounded MKNF model set rules We advanced work providing EL 2 ELP 394245 extension EL 35 Another topic pursuing deﬁnition paraconsistent version semantics deﬁned It worth noting inconsistencies come combination rules DLpart inconsistent KBs consistent DLpart construction yields results Example 11 derive Bts interesting This suggests method exploited direction deﬁning paraconsistent semantics hybrid KBs Acknowledgements We thank reviewers previously submitted version paper helpful comments suggestions improvement We thank Frederick Maier thorough proofreading Matthias Knorr acknowledges support Fundação para Ciência e Tecnologia grant SFRHBD287452006 Pascal Hitzler acknowledges support National Science Foundation award 1017225 III Small TROn Tractable Reasoning Ontologies References 1 JJ Alferes M Knorr T Swift Queries hybrid MKNF knowledge bases oracular tabling Abraham Bernstein David R Karger Tom Heath Lee Feigenbaum Diana Maynard Enrico Motta Krishnaprasad Thirunarayan Eds International Semantic Web Conference Springer 2009 pp 116 2 F Baader S Brandt C Lutz Pushing EL envelope K Clark PF PatelSchneider Eds Proceedings OWLED 2008 DC Workshop OWL Experiences Directions 2008 3 F Baader D Calvanese DL McGuinness D Nardi PF PatelSchneider Eds The Description Logic Handbook Theory Implementation Applica tions 2nd edition Cambridge University Press 2007 4 F Baader B Hollunder Embedding defaults terminological representation systems J Automat Reason 14 1995 149180 5 P Bonatti C Lutz F Wolter Expressive nonmonotonic description logics based circumscription P Doherty J Mylopoulos C Welty Eds Proceedings Tenth International Conference Principles Knowledge Representation Reasoning KR06 AAAI Press 2006 pp 400410 6 W Chen DS Warren Tabled evaluation delaying general logic programs J ACM 43 1 1996 2074 7 E Dantsin T Eiter G Gottlob A Voronkov Complexity expressive power logic programming ACM Comput Surv 33 3 2001 374425 8 J Bruijn T Eiter A Polleres H Tompits Embedding nonground logic programs autoepistemic logic knowledgebase combination Proceedings Twentieth International Joint Conference Artiﬁcial Intelligence IJCAI07 Hyderabad India January 612 2007 AAAI Press 2007 pp 304309 9 J Bruijn D Pearce A Polleres A Valverde Quantiﬁed equilibrium logic hybrid rules Proceedings First International Conference Web Reasoning Rule Systems Springer 2007 10 FM Donini M Lenzerini D Nardi A Schaerf ALlog Integrating datalog description logics J Intelligent Inform Syst 10 3 1998 227252 11 FM Donini D Nardi R Rosati Description logics minimal knowledge negation failure ACM Trans Comput Log 3 2 2002 177225 12 W Drabent J Małuszynski Wellfounded semantics hybrid rules Proceedings First International Conference Web Reasoning Rule Systems RR 2007 Springer 2007 pp 115 13 T Eiter G Ianni T Krennwallner A Polleres Rules ontologies semantic web C Baroglio PA Bonatti J Maluszynski M Marchiori A Polleres S Schaffert Eds Reasoning Web 4th International Summer School 2008 Tutorial Lectures Venice Italy September 711 2008 Lecture Notes Comput Sci vol 5224 Springer Berlin 2008 pp 153 14 T Eiter G Ianni T Lukasiewicz R Schindlauer H Tompits Combining answer set programming description logics semantic web Artiﬁcial Intelligence 172 1213 August 2008 14951539 15 T Eiter G Ianni R Schindlauer H Tompits Effective integration declarative rules external evaluations semantic web reasoning Y Sure J Domingue Eds Proceedings 3rd European Conference Semantic Web ESWC 2006 Springer 2006 pp 273287 16 T Eiter T Lukasiewicz R Schindlauer H Tompits Wellfounded semantics description logic programs semantic web G Antoniou H Boley Eds Rules Rule Markup Languages Semantic Web RuleML04 LNCS Springer 2004 pp 8197 17 C Feier S Heymans Hybrid reasoning forest logic programs 6th Annual European Semantic Web Conference ESWC 2009 June 2009 pp 338352 18 M Fitting FirstOrder Logic Automated Theorem Proving 2nd ed Springer 1996 19 M Gelfond V Lifschitz The stable model semantics logic programming RA Kowalski KA Bowen Eds Int Conference Logic Programming ICLP MIT Press 1988 pp 10701080 20 AS Gomes JJ Alferes T Swift Implementing query answering hybrid mknf knowledge bases Practical Aspects Declarative Languages 12th International Symposium PADL 2010 Madrid Spain January 1819 2010 Springer 2010 pp 2539 21 S Grimm P Hitzler A preferential tableaux calculus circumscriptive ALCO A Polleres T Swift Eds Web Reasoning Rule Systems Third International Conference RR 2009 Chantilly VA USA October 2009 Springer 2009 pp 197211 22 S Grimm P Hitzler Semantic matchmaking web resources local closedworld reasoning Internat J eCommerce 12 2 20072008 89126 17 httpxsbsourceforgenet 1554 M Knorr et al Artiﬁcial Intelligence 175 2011 15281554 23 S Grimm B Motik C Preist Matching semantic service descriptions local closedworld reasoning Y Sure J Domingue Eds The Semantic Web Research Applications 3rd European Semantic Web Conference ESWC 2006 Budva Montenegro June 1114 2006 Springer 2006 pp 575 589 24 B Grosof I Horrocks R Volz S Decker Description logic programs Combining logic programs description logics Proceedings World Wide Web Conference WWW 2003 Budapest Hungary ACM 2003 pp 4857 25 S Heymans D Van Nieuwenborgh D Vermeir Open answer set programming semantic web J Appl Log 5 1 2007 144169 26 P Hitzler M Krötzsch B Parsia PF PatelSchneider S Rudolph Eds OWL 2 Web Ontology Language Primer W3C Recommendation 27 October 2009 available httpwwww3orgTRowl2primer 2009 27 P Hitzler M Krötzsch S Rudolph Foundations Semantic Web Technologies Chapman HallCRC 2009 28 P Hitzler B Parsia Ontologies rules S Staab R Studer Eds Handbook Ontologies 2nd edition Springer 2009 pp 111132 29 P Hitzler M Wendt A uniform approach logic programming semantics Theory Pract Log Program 5 12 2005 123159 30 I Horrocks O Kutz U Sattler The irresistible SROIQ P Doherty J Mylopoulos CA Welty Eds Proc 10th Int Conf Principles Knowledge Representation Reasoning KR 2006 AAAI Press 2006 pp 5767 31 I Horrocks B Motik R Rosati U Sattler Can OWL logic programming live happily IF Cruz S Decker D Allemang C Preist D Schwabe P Mika Michael Uschold Lora Aroyo Eds Proc 5th Int Semantic Web Conference ISWC 2006 LNCS vol 4273 Springer 2006 pp 501514 32 I Horrocks PF PatelSchneider A proposal OWL rules language Proc 13th Int World Wide Web Conference WWW 2004 ACM 2004 pp 723731 33 U Hustadt B Motik U Sattler Data complexity reasoning expressive description logics Proc 19th Int Joint Conference Artiﬁcal Intelligence IJCAI ACM 2005 pp 466471 34 P Ke U Sattler Next steps description logics minimal knowledge negation failure F Baader C Lutz B Motik Eds Proc 2008 Description Logic Workshop DL 2008 2008 35 M Knorr JJ Alferes Querying EL IOS Press 2010 pp 10791080 nonmonotonic rules Proceedings 19th European Conference Artiﬁcial Intelligence ECAI 2010 36 M Knorr JJ Alferes P Hitzler Towards tractable local closed world reasoning semantic web J Neves MF Santos J Machado Eds Progress Artiﬁcial Intelligence Springer 2007 pp 314 37 M Knorr JJ Alferes P Hitzler A coherent wellfounded model hybrid MKNF knowledge bases M Ghallab CD Spyropoulos N Fakotakis N Avouris Eds Proceedings 18th European Conference Artiﬁcial Intelligence ECAI 2008 IOS Press 2008 pp 99103 38 M Knorr P Hitzler A comparison disjunctive wellfounded semantics FAInt07 Foundations Artiﬁcial Intelligence Workshop KI 2007 CEUR Workshop Proceedings vol 277 2007 39 M Krötzsch Description Logic Rules Stud Semantic Web vol 008 IOS PressAKA 2010 40 M Krötzsch Eﬃcient inferencing OWL EL T Janhunen I Niemelä Eds Proc 12th European Conf Logics Artiﬁcial Intelligence JELIA10 Springer 2010 pp 234246 41 M Krötzsch S Rudolph P Hitzler Description logic rules Malik Ghallab Constantine D Spyropoulos Nikos Fakotakis Nikos Avouris Eds Pro ceedings 18th European Conference Artiﬁcial Intelligence ECAI 2008 IOS Press 2008 pp 8084 42 M Krötzsch S Rudolph P Hitzler ELP Tractable rules OWL 2 A Sheth S Staab M Dean M Paolucci D Maynard T Finin K Thirunarayan Eds Proceedings 7th International Semantic Web Conference ISWC08 Springer 2008 pp 649664 43 M Krötzsch S Rudolph Pascal Hitzler Complexity boundaries Horn description logics Proceedings 22nd AAAI Conference Artiﬁcial Intelligence AAAI07 AAAI Press 2007 pp 452457 44 M Krötzsch S Rudolph Peter H Schmitt On semantic relationship datalog description logics Proceedings 4th Interational Conference Web Reasoning Rule Systems RR10 LNCS Springer 2010 pp 88102 45 M Krötzsch F Maier AA Krisnadhi P Hitzler A better uncle OWL Nominal schemas integrating rules ontologies Proceedings 20th International World Wide Web Conference WWW 2011 MarchApril 2011 press available httpknoesisorglibrary 46 AY Levy M Rousset Combining Horn rules description logics CARIN Artiﬁcial Intelligence 104 12 1998 165209 47 V Lifschitz Nonmonotonic databases epistemic queries International Joint Conference Artiﬁcal Intelligence IJCAI91 1991 pp 381386 48 T Lukasiewicz A novel combination answer set programming description logics semantic web E Franconi M Kifer W May Eds Proceedings 4th European Semantic Web Conference ESWC 2007 Springer 2007 pp 384398 49 T Matzner P Hitzler Anyworld access OWL Prolog J Hertzberg M Beetz R Englert Eds KI 2007 Advances Artiﬁcial Intelligence 30th Annual German Conference AI Osnabrück Germany September 2007 Springer 2007 pp 8498 50 B Motik R Rosati Closing semantic web ontologies Technical report University Manchester UK 2006 51 B Motik R Rosati A faithful integration description logics logic programming Proceedings Twentieth International Joint Conference Artiﬁcial Intelligence IJCAI07 Hyderabad India January 612 2007 AAAI Press 2007 pp 477482 52 B Motik R Rosati Reconciling description logics rules J ACM 57 5 2010 93154 53 B Motik U Sattler R Studer Queryanswering OWLDL rules J Web Semantics 3 1 2005 4160 54 C Patel JJ Cimino J Dolby A Fokoue A Kalyanpur A Kershenbaum L Ma E Schonberg K Srinivas Matching patient records clinical trials ontologies ISWCASWC Springer 2007 pp 816829 55 LM Pereira JJ Alferes Well founded semantics logic programs explicit negation European Conference Artiﬁcal Intelligence ECAI 1992 pp 102106 56 R Reiter What database know J Log Program 14 12 1992 127153 57 R Rosati On decidability complexity integrating ontologies rules J Web Semantics 3 1 2005 4160 58 R Rosati DLLog A tight integration description logics disjunctive datalog P Doherty J Mylopoulos C Welty Eds Tenth International Conference Principles Knowledge Representation Reasoning KR06 AAAI Press 2006 pp 6878 59 A Tarski Latticetheoretic ﬁxpoint theorem applications Paciﬁc J Math 5 2 1955 285309 60 A van Gelder The alternating ﬁxpoint logic programs negation Principles Database Systems ACM Press 1989 pp 110 61 A van Gelder KA Ross JS Schlipf The wellfounded semantics general logic programs J ACM 38 3 1991 620650 62 MY Vardi Why modal logic robustly decidable Neil Immerman Phokion G Kolaitis Eds Descriptive Complexity Finite Models Proceedings DIMACS Workshop January 1417 1996 Princeton University American Mathematical Society 1996 pp 149184